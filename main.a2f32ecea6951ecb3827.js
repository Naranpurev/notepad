(self.webpackChunknotepad=self.webpackChunknotepad||[]).push([[179],{8255:je=>{function ge(F){return Promise.resolve().then(()=>{var v=new Error("Cannot find module '"+F+"'");throw v.code="MODULE_NOT_FOUND",v})}ge.keys=()=>[],ge.resolve=ge,ge.id=8255,je.exports=ge},3018:(je,ge,F)=>{"use strict";F.d(ge,{deG:()=>Xl,tb:()=>Xr,AFp:()=>Dr,ip1:()=>A0,CZH:()=>vd,hGG:()=>JS,z2F:()=>op,sBO:()=>OE,Sil:()=>wd,_Vd:()=>us,EJc:()=>kb,SBq:()=>xi,qLn:()=>j,vpe:()=>Pi,gxx:()=>Oc,tBr:()=>Ki,XFs:()=>ve,OlP:()=>cn,zs3:()=>hn,ZZ4:()=>Nm,aQg:()=>cd,soG:()=>ny,YKP:()=>BE,v3s:()=>tD,h0i:()=>Uo,PXZ:()=>FS,R0b:()=>ei,FiY:()=>Er,Lbi:()=>Ob,g9A:()=>Mb,Qsj:()=>rA,FYo:()=>Pf,JOm:()=>Xi,Tiy:()=>DE,q3G:()=>It,tp0:()=>ks,EAV:()=>sD,Rgc:()=>Ff,dDg:()=>O0,DyG:()=>ci,q4F:()=>TE,GfV:()=>SI,s_b:()=>Om,ifc:()=>un,eFA:()=>sp,G48:()=>vt,Gpc:()=>Q,X6Q:()=>Ho,_c5:()=>ZS,VLi:()=>MS,c2e:()=>Pb,zSh:()=>lf,wAp:()=>qe,vHH:()=>we,EiD:()=>a_,mCW:()=>Co,qzn:()=>wo,JVY:()=>Wp,pB0:()=>e_,eBb:()=>xu,L6k:()=>Jy,LAX:()=>Xy,cg1:()=>fm,Tjo:()=>$0,kL8:()=>wf,yhl:()=>dc,dqk:()=>V,sIi:()=>gf,CqO:()=>Qu,QGY:()=>vf,F4k:()=>Iv,RDi:()=>ys,AaK:()=>G,z3N:()=>hi,qOj:()=>Xn,TTD:()=>jd,_Bn:()=>Im,xp6:()=>ga,uIk:()=>Gg,ekj:()=>$n,Suo:()=>br,Xpm:()=>Nl,lG2:()=>gp,Yz7:()=>Yt,cJS:()=>si,oAB:()=>qa,Yjl:()=>mp,Y36:()=>ba,_UZ:()=>VC,qZA:()=>nm,TgZ:()=>tm,EpF:()=>Bn,n5z:()=>Vy,Ikx:()=>Zv,LFG:()=>kt,$8M:()=>Yl,NdJ:()=>Si,CRH:()=>db,oxw:()=>Dv,Q6J:()=>Xg,iGM:()=>yd,MAs:()=>yf,CHM:()=>Gd,LSH:()=>fn,kYT:()=>Zo,YNc:()=>pv,_uU:()=>ko,Oqu:()=>lm});var v=F(9765),Y=F(5319),L=F(7574),de=F(6682),ce=F(2441);var ae=F(1307);function H(){return new v.xQ}function k(s){for(let o in s)if(s[o]===k)return o;throw Error("Could not find renamed property on target object.")}function W(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function G(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(G).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function z(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const oe=k({__forward_ref__:k});function Q(s){return s.__forward_ref__=Q,s.toString=function(){return G(this())},s}function K(s){return Te(s)?s():s}function Te(s){return"function"==typeof s&&s.hasOwnProperty(oe)&&s.__forward_ref__===Q}class we extends Error{constructor(o,u){super(function(s,o){return`${s?`NG0${s}: `:""}${o}`}(o,u)),this.code=o}}function xe(s){return"string"==typeof s?s:null==s?"":String(s)}function it(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():xe(s)}function te(s,o){const u=o?` in ${o}`:"";throw new we("201",`No provider for ${it(s)} found${u}`)}function Kt(s,o){null==s&&function(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function si(s){return{providers:s.providers||[],imports:s.imports||[]}}function fr(s){return Wo(s,In)||Wo(s,Ga)}function Wo(s,o){return s.hasOwnProperty(o)?s[o]:null}function fs(s){return s&&(s.hasOwnProperty(Tr)||s.hasOwnProperty(Je))?s[Tr]:null}const In=k({\u0275prov:k}),Tr=k({\u0275inj:k}),Ga=k({ngInjectableDef:k}),Je=k({ngInjectorDef:k});var ve=(()=>((ve=ve||{})[ve.Default=0]="Default",ve[ve.Host=1]="Host",ve[ve.Self=2]="Self",ve[ve.SkipSelf=4]="SkipSelf",ve[ve.Optional=8]="Optional",ve))();let Ot;function Jt(s){const o=Ot;return Ot=s,o}function Dt(s,o,u){const c=fr(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ve.Optional?null:void 0!==o?o:void te(G(s),"Injector")}function He(s){return{toString:s}.toString()}var an=(()=>((an=an||{})[an.OnPush=0]="OnPush",an[an.Default=1]="Default",an))(),un=(()=>((un=un||{})[un.Emulated=0]="Emulated",un[un.None=2]="None",un[un.ShadowDom=3]="ShadowDom",un))();const pr="undefined"!=typeof globalThis&&globalThis,Js="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,B="undefined"!=typeof global&&global,V=pr||B||Js||U,Ve={},Pe=[],Tt=k({\u0275cmp:k}),Xt=k({\u0275dir:k}),Lt=k({\u0275pipe:k}),Ar=k({\u0275mod:k}),dt=k({\u0275loc:k}),Vt=k({\u0275fac:k}),Wn=k({__NG_ELEMENT_ID__:k});let xl=0;function Nl(s){return He(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===an.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||Pe,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||un.Emulated,id:"c",styles:s.styles||Pe,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,_=s.pipes;return c.id+=xl++,c.inputs=oi(s.inputs,u),c.outputs=oi(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(Nd):null,c.pipeDefs=_?()=>("function"==typeof _?_():_).map(Rl):null,c})}function Nd(s){return Mn(s)||function(s){return s[Xt]||null}(s)}function Rl(s){return function(s){return s[Lt]||null}(s)}const zo={};function qa(s){return He(()=>{const o={type:s.type,bootstrap:s.bootstrap||Pe,declarations:s.declarations||Pe,imports:s.imports||Pe,exports:s.exports||Pe,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(zo[s.id]=s.type),o})}function Zo(s,o){return He(()=>{const u=ir(s,!0);u.declarations=o.declarations||Pe,u.imports=o.imports||Pe,u.exports=o.exports||Pe})}function oi(s,o){if(null==s)return Ve;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const gp=Nl;function mp(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Mn(s){return s[Tt]||null}function ir(s,o){const u=s[Ar]||null;if(!u&&!0===o)throw new Error(`Type ${G(s)} does not have '\u0275mod' property.`);return u}function Nr(s){return Array.isArray(s)&&"object"==typeof s[1]}function St(s){return Array.isArray(s)&&!0===s[1]}function Za(s){return 0!=(8&s.flags)}function Ol(s){return 2==(2&s.flags)}function Rr(s){return 1==(1&s.flags)}function ai(s){return null!==s.template}function kd(s){return 0!=(512&s[2])}function ji(s,o){return s.hasOwnProperty(Vt)?s[Vt]:null}class Bd{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function jd(){return Ya}function Ya(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ay),ui}function ui(){const s=Qa(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Ve)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ay(s,o,u,c){const d=Qa(s)||function(s,o){return s[Sy]=o}(s,{previous:Ve,current:null}),f=d.current||(d.current={}),_=d.previous,E=this.declaredInputs[u],b=_[E];f[E]=new Bd(b&&b.currentValue,o,_===Ve),s[c]=o}jd.ngInherit=!0;const Sy="__ngSimpleChanges__";function Qa(s){return s[Sy]||null}let io;function ys(s){io=s}function jt(s){return!!s.listen}const Ul={createRenderer:(s,o)=>void 0!==io?io:"undefined"!=typeof document?document:void 0};function $t(s){for(;Array.isArray(s);)s=s[0];return s}function eu(s,o){return $t(o[s])}function Mr(s,o){return $t(o[s.index])}function _s(s,o){return s.data[o]}function or(s,o){const u=o[s];return Nr(u)?u:u[0]}function nu(s){return 4==(4&s[2])}function ru(s){return 128==(128&s[2])}function vs(s,o){return null==o?null:s[o]}function jl(s){s[18]=0}function $d(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Qe={lFrame:xp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Hd(){return Qe.bindingsEnabled}function ye(){return Qe.lFrame.lView}function ht(){return Qe.lFrame.tView}function Gd(s){return Qe.lFrame.contextLView=s,s[8]}function ln(){let s=Dp();for(;null!==s&&64===s.type;)s=s.parent;return s}function Dp(){return Qe.lFrame.currentTNode}function Wr(s,o){const u=Qe.lFrame;u.currentTNode=s,u.isParent=o}function qd(){return Qe.lFrame.isParent}function ea(){return Qe.isInCheckNoChangesMode}function ws(s){Qe.isInCheckNoChangesMode=s}function Cs(){return Qe.lFrame.bindingIndex++}function Zd(s,o){const u=Qe.lFrame;u.bindingIndex=u.bindingRootIndex=s,uu(o)}function uu(s){Qe.lFrame.currentDirectiveIndex=s}function ao(){return Qe.lFrame.currentQueryIndex}function Qd(s){Qe.lFrame.currentQueryIndex=s}function Ny(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ry(s,o,u){if(u&ve.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&ve.Host||(d=Ny(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=Qe.lFrame=Sp();return c.currentTNode=o,c.lView=s,!0}function lu(s){const o=Sp(),u=s[1];Qe.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Sp(){const s=Qe.lFrame,o=null===s?null:s.child;return null===o?xp(s):o}function xp(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Np(){const s=Qe.lFrame;return Qe.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const yw=Np;function Rp(){const s=Np();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function mr(){return Qe.lFrame.selectedIndex}function uo(s){Qe.lFrame.selectedIndex=s}function Ht(){const s=Qe.lFrame;return _s(s.tView,s.selectedIndex)}function ta(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:T,ngOnDestroy:A}=f;_&&(s.contentHooks||(s.contentHooks=[])).push(-u,_),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),T&&((s.viewHooks||(s.viewHooks=[])).push(u,T),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,T)),null!=A&&(s.destroyHooks||(s.destroyHooks=[])).push(u,A)}}function na(s,o,u){th(s,o,3,u)}function eh(s,o,u,c){(3&s[2])===u&&th(s,o,u,c)}function cu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function th(s,o,u,c){const f=null!=c?c:-1,_=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<_;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(ky(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function ky(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class du{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function Gt(s,o,u){const c=jt(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const _=u[d++],E=u[d++],b=u[d++];c?s.setAttribute(o,E,b,_):o.setAttributeNS(_,E,b)}else{const _=f,E=u[++d];Gl(_)?c&&s.setProperty(o,_,E):c?s.setAttribute(o,_,E):o.setAttribute(_,E),d++}}return d}function rh(s){return 3===s||4===s||6===s}function Gl(s){return 64===s.charCodeAt(0)}function ih(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||sh(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function sh(s,o,u,c,d){let f=0,_=s.length;if(-1===o)_=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){_=-1;break}if(E>o){_=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==_&&(s.splice(_,0,o),f=_+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function Mp(s){return-1!==s}function hu(s){return 32767&s}function fu(s,o){let u=function(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let pu=!0;function ql(s){const o=pu;return pu=s,o}let Or=0;function Xe(s,o){const u=gu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,oh(c.data,s),oh(o,null),oh(c.blueprint,null));const d=Ds(s,o),f=s.injectorIndex;if(Mp(d)){const _=hu(d),E=fu(d,o),b=E[1].data;for(let T=0;T<8;T++)o[f+T]=E[_+T]|b[_+T]}return o[f+8]=d,f}function oh(s,o){s.push(0,0,0,0,0,0,0,0,o)}function gu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ds(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],_=f.type;if(c=2===_?f.declTNode:1===_?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function mu(s,o,u){!function(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Wn)&&(c=u[Wn]),null==c&&(c=u[Wn]=Or++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Ei(s,o,u){if(u&ve.Optional)return s;te(o,"NodeInjector")}function ra(s,o,u,c){if(u&ve.Optional&&void 0===c&&(c=null),0==(u&(ve.Self|ve.Host))){const d=s[9],f=Jt(void 0);try{return d?d.get(o,c,u&ve.Optional):Dt(o,c,u&ve.Optional)}finally{Jt(f)}}return Ei(c,o,u)}function ah(s,o,u,c=ve.Default,d){if(null!==s){const f=function(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Wn)?s[Wn]:void 0;return"number"==typeof o?o>=0?255&o:Ly:o}(u);if("function"==typeof f){if(!Ry(o,s,c))return c&ve.Host?Ei(d,u,c):ra(o,u,c,d);try{const _=f(c);if(null!=_||c&ve.Optional)return _;te(u)}finally{yw()}}else if("number"==typeof f){let _=null,E=gu(s,o),b=-1,T=c&ve.Host?o[16][6]:null;for((-1===E||c&ve.SkipSelf)&&(b=-1===E?Ds(s,o):o[E+8],-1!==b&&qi(c,!1)?(_=o[1],E=hu(b),o=fu(b,o)):E=-1);-1!==E;){const A=o[1];if(On(f,E,A.data)){const N=uh(E,o,u,_,c,T);if(N!==Pp)return N}b=o[E+8],-1!==b&&qi(c,o[1].data[E+8]===T)&&On(f,E,o)?(_=A,E=hu(b),o=fu(b,o)):E=-1}}}return ra(o,u,c,d)}const Pp={};function Ly(){return new Wi(ln(),ye())}function uh(s,o,u,c,d,f){const _=o[1],E=_.data[s+8],A=Ts(E,_,u,null==c?Ol(E)&&pu:c!=_&&0!=(3&E.type),d&ve.Host&&f===E);return null!==A?Pr(o,_,A,E):Pp}function Ts(s,o,u,c,d){const f=s.providerIndexes,_=o.data,E=1048575&f,b=s.directiveStart,A=f>>20,i=d?E+A:s.directiveEnd;for(let n=c?E:E+A;n<i;n++){const r=_[n];if(n<b&&u===r||n>=b&&r.type===u)return n}if(d){const n=_[b];if(n&&ai(n)&&n.type===u)return b}return null}function Pr(s,o,u,c){let d=s[u];const f=o.data;if(function(s){return s instanceof du}(d)){const _=d;_.resolving&&function(s,o){throw new we("200",`Circular dependency in DI detected for ${s}`)}(it(f[u]));const E=ql(_.canSeeViewProviders);_.resolving=!0;const b=_.injectImpl?Jt(_.injectImpl):null;Ry(s,c,ve.Default);try{d=s[u]=_.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const _=Ya(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,_)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==b&&Jt(b),ql(E),_.resolving=!1,yw()}}return d}function On(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function qi(s,o){return!(s&ve.Self||s&ve.Host&&o)}class Wi{constructor(o,u){this._tNode=o,this._lView=u}get(o,u){return ah(this._tNode,this._lView,o,void 0,u)}}function Vy(s){return He(()=>{const o=s.prototype.constructor,u=o[Vt]||Kl(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const f=d[Vt]||Kl(d);if(f&&f!==u)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Kl(s){return Te(s)?()=>{const o=Kl(K(s));return o&&o()}:ji(s)}function Yl(s){return function(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(rh(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(ln(),s)}const co="__parameters__";function As(s,o,u){return He(()=>{const c=function(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const _=new d(...f);return E.annotation=_,E;function E(b,T,A){const N=b.hasOwnProperty(co)?b[co]:Object.defineProperty(b,co,{value:[]})[co];for(;N.length<=A;)N.push(null);return(N[A]=N[A]||[]).push(_),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class cn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Yt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xl=new cn("AnalyzeForEntryComponents"),ci=Function;function yr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),yr(c,o)):o!==s&&o.push(c)}return o}function _r(s,o){s.forEach(u=>Array.isArray(u)?_r(u,o):o(u))}function sa(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Zr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function vr(s,o,u){let c=Rs(s,o);return c>=0?s[1|c]=u:(c=~c,function(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ic(s,o){const u=Rs(s,o);if(u>=0)return s[1|u]}function Rs(s,o){return function(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const f=c+(d-c>>1),_=s[f<<u];if(o===_)return f<<u;_>o?d=f:c=f+1}return~(d<<u)}(s,o,1)}const Os={},ph="__NG_DI_FLAG__",mo="ngTempTokenPath",Cu=/\n/gm,aa="__source",yo=k({provide:String,useValue:k});let Iu;function di(s){const o=Iu;return Iu=s,o}function uc(s,o=ve.Default){if(void 0===Iu)throw new Error("inject() must be called from an injection context");return null===Iu?Dt(s,void 0,o):Iu.get(s,o&ve.Optional?null:void 0,o)}function kt(s,o=ve.Default){return(Ot||uc)(K(s),o)}function Zi(s){const o=[];for(let u=0;u<s.length;u++){const c=K(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let d,f=ve.Default;for(let _=0;_<c.length;_++){const E=c[_],b=bu(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}o.push(kt(d,f))}else o.push(kt(c))}return o}function ua(s,o){return s[ph]=o,s.prototype[ph]=o,s}function bu(s){return s[ph]}function gh(s,o,u,c){const d=s[mo];throw o[aa]&&d.unshift(o[aa]),s.message=function(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=G(o);if(Array.isArray(o))d=o.map(G).join(" -> ");else if("object"==typeof o){let f=[];for(let _ in o)if(o.hasOwnProperty(_)){let E=o[_];f.push(_+":"+("string"==typeof E?JSON.stringify(E):G(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(Cu,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[mo]=null,s}const Ki=ua(As("Inject",s=>({token:s})),-1),Er=ua(As("Optional"),8),ks=ua(As("SkipSelf"),4);let ca;function Yi(s){var o;return(null===(o=function(){if(void 0===ca&&(ca=null,V.trustedTypes))try{ca=V.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return ca}())||void 0===o?void 0:o.createHTML(s))||s}class Qi{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Qy extends Qi{getTypeName(){return"HTML"}}class Gp extends Qi{getTypeName(){return"Style"}}class Eo extends Qi{getTypeName(){return"Script"}}class Ch extends Qi{getTypeName(){return"URL"}}class qp extends Qi{getTypeName(){return"ResourceURL"}}function hi(s){return s instanceof Qi?s.changingThisBreaksApplicationSecurity:s}function wo(s,o){const u=dc(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}function dc(s){return s instanceof Qi&&s.getTypeName()||null}function Wp(s){return new Qy(s)}function Jy(s){return new Gp(s)}function xu(s){return new Eo(s)}function Xy(s){return new Ch(s)}function e_(s){return new qp(s)}class t_{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const u=(new window.DOMParser).parseFromString(Yi(o),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(o):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Sw{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const c=this.inertDocument.createElement("body");u.appendChild(c)}}getInertBodyElement(o){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Yi(o),u;const c=this.inertDocument.createElement("body");return c.innerHTML=Yi(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const u=o.attributes;for(let d=u.length-1;0<d;d--){const _=u.item(d).name;("xmlns:ns1"===_||0===_.indexOf("ns1:"))&&o.removeAttribute(_)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const n_=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bh=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Co(s){return(s=String(s)).match(n_)||s.match(bh)?s:"unsafe:"+s}function wi(s){const o={};for(const u of s.split(","))o[u]=!0;return o}function Fs(...s){const o={};for(const u of s)for(const c in u)u.hasOwnProperty(c)&&(o[c]=!0);return o}const hc=wi("area,br,col,hr,img,wbr"),zp=wi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),fc=wi("rp,rt"),Th=Fs(hc,Fs(zp,wi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Fs(fc,wi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fs(fc,zp)),Ru=wi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ah=wi("srcset"),Sh=Fs(Ru,Ah,wi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),wi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),xh=wi("script,style,template");class Rw{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let u=o.firstChild,c=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?c=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,c&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let d=this.checkClobberedElement(u,u.nextSibling);if(d){u=d;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(o){const u=o.nodeName.toLowerCase();if(!Th.hasOwnProperty(u))return this.sanitizedSomething=!0,!xh.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const c=o.attributes;for(let d=0;d<c.length;d++){const f=c.item(d),_=f.name,E=_.toLowerCase();if(!Sh.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let b=f.value;Ru[E]&&(b=Co(b)),Ah[E]&&(s=b,b=(s=String(s)).split(",").map(o=>Co(o.trim())).join(", ")),this.buf.push(" ",_,'="',Kp(b),'"')}var s;return this.buf.push(">"),!0}endElement(o){const u=o.nodeName.toLowerCase();Th.hasOwnProperty(u)&&!hc.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(o){this.buf.push(Kp(o))}checkClobberedElement(o,u){if(u&&(o.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return u}}const o_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zp=/([^\#-~ |!])/g;function Kp(s){return s.replace(/&/g,"&amp;").replace(o_,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Zp,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Nh;function a_(s,o){let u=null;try{Nh=Nh||function(s){const o=new Sw(s);return function(){try{return!!(new window.DOMParser).parseFromString(Yi(""),"text/html")}catch(s){return!1}}()?new t_(o):o}(s);let c=o?String(o):"";u=Nh.getInertBodyElement(c);let d=5,f=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=f,f=u.innerHTML,u=Nh.getInertBodyElement(c)}while(c!==f);return Yi((new Rw).sanitizeChildren(Rh(u)||u))}finally{if(u){const c=Rh(u)||u;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function Rh(s){return"content"in s&&function(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var It=(()=>((It=It||{})[It.NONE=0]="NONE",It[It.HTML=1]="HTML",It[It.STYLE=2]="STYLE",It[It.SCRIPT=3]="SCRIPT",It[It.URL=4]="URL",It[It.RESOURCE_URL=5]="RESOURCE_URL",It))();function fn(s){const o=function(){const s=ye();return s&&s[12]}();return o?o.sanitize(It.URL,s)||"":wo(s,"URL")?hi(s):Co(xe(s))}const tg="__ngContext__";function Zn(s,o){s[tg]=o}function qt(s){const o=function(s){return s[tg]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function I(s){return s.ngOriginalError}function M(s,...o){s.error(...o)}class j{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=this._findContext(o),d=(s=o)&&s.ngErrorLogger||M;var s;d(this._console,"ERROR",o),u&&d(this._console,"ORIGINAL ERROR",u),c&&d(this._console,"ERROR CONTEXT",c)}_findContext(o){return o?o.ngDebugContext||this._findContext(I(o)):null}_findOriginalError(o){let u=o&&I(o);for(;u&&I(u);)u=I(u);return u||null}}const fa=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Wt(s){return s instanceof Function?s():s}var Xi=(()=>((Xi=Xi||{})[Xi.Important=1]="Important",Xi[Xi.DashCase=2]="DashCase",Xi))();function Uh(s,o){return undefined(s,o)}function Vs(s){const o=s[3];return St(o)?o[3]:o}function og(s){return p_(s[13])}function f_(s){return p_(s[4])}function p_(s){for(;null!==s&&!St(s);)s=s[4];return s}function pa(s,o,u,c,d){if(null!=c){let f,_=!1;St(c)?f=c:Nr(c)&&(_=!0,c=c[0]);const E=$t(c);0===s&&null!==u?null==d?hg(o,u,E):bo(o,u,E,d||null,!0):1===s&&null!==u?bo(o,u,E,d||null,!0):2===s?function(s,o,u){const c=fg(s,o);c&&function(s,o,u,c){jt(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,_):3===s&&o.destroyNode(E),null!=f&&function(s,o,u,c,d){const f=u[7];f!==$t(u)&&pa(o,s,c,f,d);for(let E=10;E<u.length;E++){const b=u[E];Gh(b[1],b,s,o,c,f)}}(o,s,f,u,d)}}function m_(s,o,u){return jt(s)?s.createElement(o,u):null===u?s.createElement(o):s.createElementNS(u,o)}function Pw(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,$d(d,-1)),u.splice(c,1)}function Fu(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Pw(d,c),o>0&&(s[u-1][4]=c[4]);const f=Zr(s,10+o);!function(s,o){Gh(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const _=f[19];null!==_&&_.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function kw(s,o){if(!(256&o[2])){const u=o[11];jt(u)&&u.destroyNode&&Gh(s,o,u,3,null,null),function(s){let o=s[13];if(!o)return __(s[1],s);for(;o;){let u=null;if(Nr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Nr(o)&&__(o[1],o),o=o[3];null===o&&(o=s),Nr(o)&&__(o[1],o),u=o&&o[4]}o=u}}(o)}}function __(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof du)){const f=u[c+1];if(Array.isArray(f))for(let _=0;_<f.length;_+=2){const E=d[f[_]],b=f[_+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const _=u[f+1],E="function"==typeof _?_(o):$t(o[_]),b=c[d=u[f+2]],T=u[f+3];"boolean"==typeof T?E.removeEventListener(u[f],b,T):T>=0?c[d=T]():c[d=-T].unsubscribe(),f+=2}else{const _=c[d=u[f+1]];u[f].call(_)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&jt(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&St(o[3])){u!==o[3]&&Pw(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function cg(s,o,u){return function(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===un.None||d===un.Emulated)return null}return Mr(c,u)}(s,o.parent,u)}function bo(s,o,u,c,d){jt(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function hg(s,o,u){jt(s)?s.appendChild(o,u):o.appendChild(u)}function v_(s,o,u,c,d){null!==c?bo(s,o,u,c,d):hg(s,o,u)}function fg(s,o){return jt(s)?s.parentNode(o):o.parentNode}let w_=function(s,o,u){return 40&s.type?Mr(s,u):null};function Ec(s,o,u,c){const d=cg(s,c,o),f=o[11],E=function(s,o,u){return w_(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)v_(f,d,u[b],E,!1);else v_(f,d,u,E,!1)}function wc(s,o){if(null!==o){const u=o.type;if(3&u)return Mr(o,s);if(4&u)return Ln(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return wc(s,c);{const d=s[o.index];return St(d)?Ln(-1,d):$t(d)}}if(32&u)return Uh(o,s)()||$t(s[o.index]);{const c=Fn(s,o);return null!==c?Array.isArray(c)?c[0]:wc(Vs(s[16]),c):wc(s,o.next)}}return null}function Fn(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Ln(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return wc(c,d)}return o[7]}function Hh(s,o,u,c,d,f,_){for(;null!=u;){const E=c[u.index],b=u.type;if(_&&0===o&&(E&&Zn($t(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)Hh(s,o,u.child,c,d,f,!1),pa(o,s,d,E,f);else if(32&b){const T=Uh(u,c);let A;for(;A=T();)pa(o,s,d,A,f);pa(o,s,d,E,f)}else 16&b?I_(s,o,c,u,d,f):pa(o,s,d,E,f);u=_?u.projectionNext:u.next}}function Gh(s,o,u,c,d,f){Hh(u,c,s.firstChild,o,d,f,!1)}function I_(s,o,u,c,d,f){const _=u[16],b=_[6].projection[c.projection];if(Array.isArray(b))for(let T=0;T<b.length;T++)pa(o,s,d,b[T],f);else Hh(s,o,b,_[3],d,f,!0)}function mg(s,o,u){jt(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function qh(s,o,u){jt(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Vw(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const b_="ng-template";function HD(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Vw(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Wh(s){return 4===s.type&&s.value!==b_}function D_(s,o,u){return o===(4!==s.type||u?s.value:b_)}function T_(s,o,u){let c=4;const d=s.attrs||[],f=function(s){for(let o=0;o<s.length;o++)if(rh(s[o]))return o;return s.length}(d);let _=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!_)if(4&c){if(c=2|1&c,""!==b&&!D_(s,b,u)||""===b&&1===o.length){if(Ii(c))return!1;_=!0}}else{const T=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!HD(s.attrs,T,u)){if(Ii(c))return!1;_=!0}continue}const N=GD(8&c?"class":b,d,Wh(s),u);if(-1===N){if(Ii(c))return!1;_=!0;continue}if(""!==T){let i;i=N>f?"":d[N+1].toLowerCase();const n=8&c?i:null;if(n&&-1!==Vw(n,T,0)||2&c&&T!==i){if(Ii(c))return!1;_=!0}}}}else{if(!_&&!Ii(c)&&!Ii(b))return!1;if(_&&Ii(b))continue;_=!1,c=b|1&c}}return Ii(c)||_}function Ii(s){return 0==(1&s)}function GD(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const _=o[d];if(_===s)return d;if(3===_||6===_)f=!0;else{if(1===_||2===_){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===_)break;if(0===_){d+=4;continue}}d+=f?1:2}return-1}return function(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Cc(s,o,u=!1){for(let c=0;c<o.length;c++)if(T_(s,o[c],u))return!0;return!1}function Hw(s,o){return s?":not("+o.trim()+")":o}function qD(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let _=s[u];if("string"==typeof _)if(2&c){const E=s[++u];d+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+_:4&c&&(d+=" "+_);else""!==d&&!Ii(_)&&(o+=Hw(f,d),d=""),c=_,f=f||!Ii(c);u++}return""!==d&&(o+=Hw(f,d)),o}const rt={};function ga(s){A_(ht(),ye(),mr()+s,ea())}function A_(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&na(o,f,u)}else{const f=s.preOrderHooks;null!==f&&eh(o,f,0,u)}uo(u)}function Lu(s,o){return s<<17|o<<2}function bi(s){return s>>17&32767}function ar(s){return 2|s}function Us(s){return(131068&s)>>2}function Vu(s,o){return-131069&s|o<<2}function _g(s){return 1|s}function xc(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const _=s.data[f];Qd(d),_.contentQueries(2,o[f],f)}}}function Xh(s,o,u,c,d,f,_,E,b,T){const A=o.blueprint.slice();return A[0]=d,A[2]=140|c,jl(A),A[3]=A[15]=s,A[8]=u,A[10]=_||s&&s[10],A[11]=E||s&&s[11],A[12]=b||s&&s[12]||null,A[9]=T||s&&s[9]||null,A[6]=f,A[16]=2==o.type?s[16]:A,A}function Nc(s,o,u,c,d){let f=s.data[o];if(null===f)f=function(s,o,u,c,d){const f=Dp(),_=qd(),b=s.data[o]=function(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(_?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,u,c,d),Qe.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const _=function(){const s=Qe.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===_?-1:_.injectorIndex}return Wr(f,!0),f}function Rc(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function To(s,o,u){lu(o);try{const c=s.viewQuery;null!==c&&Vg(1,c,u);const d=s.template;null!==d&&L_(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&xc(s,o),s.staticViewQueries&&Vg(2,s.viewQuery,u);const f=s.components;null!==f&&function(s,o){for(let u=0;u<o.length;u++)Pg(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Rp()}}function pi(s,o,u,c){const d=o[2];if(256==(256&d))return;lu(o);const f=ea();try{jl(o),function(s){Qe.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&L_(s,o,u,2,c);const _=3==(3&d);if(!f)if(_){const T=s.preOrderCheckHooks;null!==T&&na(o,T,null)}else{const T=s.preOrderHooks;null!==T&&eh(o,T,0,null),cu(o,0)}if(function(s){for(let o=og(s);null!==o;o=f_(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&$d(f,1),d[2]|=1024}}}(o),function(s){for(let o=og(s);null!==o;o=f_(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ru(c)&&pi(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&xc(s,o),!f)if(_){const T=s.contentCheckHooks;null!==T&&na(o,T)}else{const T=s.contentHooks;null!==T&&eh(o,T,1),cu(o,1)}!function(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)uo(~d);else{const f=d,_=u[++c],E=u[++c];Zd(_,f),E(2,o[f])}}}finally{uo(-1)}}(s,o);const E=s.components;null!==E&&function(s,o){for(let u=0;u<o.length;u++)aC(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&Vg(2,b,c),!f)if(_){const T=s.viewCheckHooks;null!==T&&na(o,T)}else{const T=s.viewHooks;null!==T&&eh(o,T,2),cu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,$d(o[3],-1))}finally{Rp()}}function Qw(s,o,u,c){const d=o[10],f=!ea(),_=nu(o);try{f&&!_&&d.begin&&d.begin(),_&&To(s,o,c),pi(s,o,u,c)}finally{f&&!_&&d.end&&d.end()}}function L_(s,o,u,c,d){const f=mr(),_=2&c;try{uo(-1),_&&o.length>20&&A_(s,o,20,ea()),u(c,d)}finally{uo(f)}}function ya(s,o,u){!Hd()||(function(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||Xe(u,o),Zn(c,o);const _=u.initialInputs;for(let E=d;E<f;E++){const b=s.data[E],T=ai(b);T&&oC(o,u,b);const A=Pr(o,s,E,u);Zn(A,o),null!==_&&iT(0,E-d,A,b,0,_),T&&(or(u.index,o)[8]=A)}}(s,o,u,Mr(u,o)),128==(128&u.flags)&&function(s,o,u){const c=u.directiveStart,d=u.directiveEnd,_=u.index,E=Qe.lFrame.currentDirectiveIndex;try{uo(_);for(let b=c;b<d;b++){const T=s.data[b],A=o[b];uu(b),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&nC(T,A)}}finally{uo(-1),uu(E)}}(s,o,u))}function U_(s,o,u=Mr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const _=c[f+1],E=-1===_?u(o,s):s[_];s[d++]=E}}}function Jw(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=ef(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function ef(s,o,u,c,d,f,_,E,b,T){const A=20+c,N=A+d,i=function(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:rt);return u}(A,N),n="function"==typeof T?T():T;return i[1]={type:s,blueprint:i,template:u,queries:null,viewQuery:E,declTNode:o,data:i.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:b,consts:n,incompleteFirstPass:!1}}function Ag(s,o,u,c){const d=Z_(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&K_(s).push(c,d.length-1))}function j_(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function gi(s,o,u,c,d,f,_,E){const b=Mr(o,u);let A,T=o.inputs;!E&&null!=T&&(A=T[c])?(af(s,u,A,c,d),Ol(o)&&function(s,o){const u=or(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=_?_(d,o.value||"",c):d,jt(f)?f.setProperty(b,c,d):Gl(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function Uu(s,o,u,c){let d=!1;if(Hd()){const f=function(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const _=c[f];Cc(u,_.selectors,!1)&&(d||(d=[]),mu(Xe(u,o),s,_.type),ai(_)?(rC(s,u),d.unshift(_)):d.push(_))}return d}(s,o,u),_=null===c?null:{"":-1};if(null!==f){d=!0,G_(u,s.data.length,f.length);for(let A=0;A<f.length;A++){const N=f[A];N.providersResolver&&N.providersResolver(N)}let E=!1,b=!1,T=Rc(s,o,f.length,null);for(let A=0;A<f.length;A++){const N=f[A];u.mergedAttrs=ih(u.mergedAttrs,N.hostAttrs),nf(s,u,o,T,N),sC(T,N,_),null!==N.contentQueries&&(u.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(u.flags|=128);const i=N.type.prototype;!E&&(i.ngOnChanges||i.ngOnInit||i.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&(i.ngOnChanges||i.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),T++}!function(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,_=[];let E=null,b=null;for(let T=o.directiveStart;T<c;T++){const A=d[T],N=A.inputs,i=null===f||Wh(o)?null:q_(N,f);_.push(i),E=j_(N,T,E),b=j_(A.outputs,T,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=_,o.inputs=E,o.outputs=b}(s,u)}_&&function(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new we("301",`Export of name '${o[d+1]}' not found!`);c.push(o[d],f)}}}(u,c,_)}return u.mergedAttrs=ih(u.mergedAttrs,u.attrs),d}function eC(s,o,u,c,d,f){const _=f.hostBindings;if(_){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,d,_)}}function nC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function rC(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function sC(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ai(o)&&(u[""]=s)}}function G_(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function nf(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=ji(d.type)),_=new du(f,ai(d),null);s.blueprint[c]=_,u[c]=_,eC(s,o,0,c,Rc(s,u,d.hostVars,rt),d)}function oC(s,o,u){const c=Mr(o,s),d=Jw(u),f=s[10],_=sf(s,Xh(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=_}function Kn(s,o,u,c,d,f){const _=Mr(s,o);!function(s,o,u,c,d,f,_){if(null==f)jt(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==_?xe(f):_(f,c||"",d);jt(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],_,f,s.value,u,c,d)}function iT(s,o,u,c,d,f){const _=f[o];if(null!==_){const E=c.setInput;for(let b=0;b<_.length;){const T=_[b++],A=_[b++],N=_[b++];null!==E?c.setInput(u,N,T,A):u[A]=N}}}function q_(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function W_(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function aC(s,o){const u=or(o,s);if(ru(u)){const c=u[1];80&u[2]?pi(c,u,c.template,u[8]):u[5]>0&&rf(u)}}function rf(s){for(let c=og(s);null!==c;c=f_(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const _=f[1];pi(_,f,_.template,f[8])}else f[5]>0&&rf(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=or(u[c],s);ru(d)&&d[5]>0&&rf(d)}}function Pg(s,o){const u=or(o,s),c=u[1];(function(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),To(c,u,u[8])}function sf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Bu(s){for(;s;){s[2]|=64;const o=Vs(s);if(kd(s)&&!o)return s;s=o}return null}function of(s,o,u){const c=o[10];c.begin&&c.begin();try{pi(s,o,s.template,u)}catch(d){throw Q_(o,d),d}finally{c.end&&c.end()}}function Fg(s){!function(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=qt(u),d=c[1];Qw(d,c,d.template,u)}}(s[8])}function Vg(s,o,u){Qd(0),o(s,u)}const ju=(()=>Promise.resolve(null))();function Z_(s){return s[7]||(s[7]=[])}function K_(s){return s.cleanup||(s.cleanup=[])}function Q_(s,o){const u=s[9],c=u?u.get(j,null):null;c&&c.handleError(o)}function af(s,o,u,c,d){for(let f=0;f<u.length;){const _=u[f++],E=u[f++],b=o[_],T=s.data[_];null!==T.setInput?T.setInput(b,d,c,E):b[E]=d}}function bn(s,o,u){const c=eu(o,s);!function(s,o,u){jt(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function uf(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let _=0;_<o.length;_++){const E=o[_];"number"==typeof E?f=E:1==f?d=z(d,E):2==f&&(c=z(c,E+": "+o[++_]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Oc=new cn("INJECTOR",-1);class Ug{get(o,u=Os){if(u===Os){const c=new Error(`NullInjectorError: No provider for ${G(o)}!`);throw c.name="NullInjectorError",c}return u}}const lf=new cn("Set Injector scope."),cf={},dC={};let J_;function df(){return void 0===J_&&(J_=new Ug),J_}function Yn(s,o=null,u=null,c){return new Pc(s,u,o||df(),c)}class Pc{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&_r(u,E=>this.processProvider(E,o,u)),_r([o],E=>this.processInjectorType(E,[],f)),this.records.set(Oc,rn(void 0,this));const _=this.records.get(lf);this.scope=null!=_?_.value:null,this.source=d||("object"==typeof o?null:G(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=Os,c=ve.Default){this.assertNotDestroyed();const d=di(this),f=Jt(void 0);try{if(!(c&ve.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=("function"==typeof(s=o)||"object"==typeof s&&s instanceof cn)&&fr(o);E=b&&this.injectableDefInScope(b)?rn(Bs(o),cf):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&ve.Self?df():this.parent).get(o,u=c&ve.Optional&&u===Os?null:u)}catch(_){if("NullInjectorError"===_.name){if((_[mo]=_[mo]||[]).unshift(G(o)),d)throw _;return gh(_,o,"R3InjectorError",this.source)}throw _}finally{Jt(f),di(d)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(G(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(o,u,c){if(!(o=K(o)))return!1;let d=fs(o);const f=null==d&&o.ngModule||void 0,_=void 0===f?o:f,E=-1!==c.indexOf(_);if(void 0!==f&&(d=fs(f)),null==d)return!1;if(null!=d.imports&&!E){let A;c.push(_);try{_r(d.imports,N=>{this.processInjectorType(N,u,c)&&(void 0===A&&(A=[]),A.push(N))})}finally{}if(void 0!==A)for(let N=0;N<A.length;N++){const{ngModule:i,providers:n}=A[N];_r(n,r=>this.processProvider(r,i,n||Pe))}}this.injectorDefTypes.add(_);const b=ji(_)||(()=>new _);this.records.set(_,rn(b,cf));const T=d.providers;if(null!=T&&!E){const A=o;_r(T,N=>this.processProvider(N,A,T))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=Ze(o=K(o))?o:K(o&&o.provide);const f=kc(s=o)?rn(void 0,s.useValue):rn(be(s),cf);var s;if(Ze(o)||!0!==o.multi)this.records.get(d);else{let _=this.records.get(d);_||(_=rn(void 0,cf,!0),_.factory=()=>Zi(_.multi),this.records.set(d,_)),d=o,_.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===cf&&(u.value=dC,u.value=u.factory()),"object"==typeof u.value&&u.value&&null!==(s=u.value)&&"object"==typeof s&&"function"==typeof s.ngOnDestroy&&this.onDestroy.add(u.value),u.value;var s}injectableDefInScope(o){if(!o.providedIn)return!1;const u=K(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Bs(s){const o=fr(s),u=null!==o?o.factory:ji(s);if(null!==u)return u;if(s instanceof cn)throw new Error(`Token ${G(s)} is missing a \u0275prov definition.`);if(s instanceof Function)return function(s){const o=s.length;if(o>0){const c=function(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?");throw new Error(`Can't resolve all parameters for ${G(s)}: (${c.join(", ")}).`)}const u=function(s){const o=s&&(s[In]||s[Ga]);if(o){const u=function(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Error("unreachable")}function be(s,o,u){let c;if(Ze(s)){const d=K(s);return ji(d)||Bs(d)}if(kc(s))c=()=>K(s.useValue);else if(function(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Zi(s.deps||[]));else if(function(s){return!(!s||!s.useExisting)}(s))c=()=>kt(K(s.useExisting));else{const d=K(s&&(s.useClass||s.provide));if(!function(s){return!!s.deps}(s))return ji(d)||Bs(d);c=()=>new d(...Zi(s.deps))}return c}function rn(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function kc(s){return null!==s&&"object"==typeof s&&yo in s}function Ze(s){return"function"==typeof s}const fC=function(s,o,u){return function(s,o=null,u=null,c){const d=Yn(s,o,u,c);return d._resolveInjectorDefTypes(),d}({name:u},o,s,u)};let hn=(()=>{class s{static create(u,c){return Array.isArray(u)?fC(u,c,""):fC(u.providers,u.parent,u.name||"")}}return s.THROW_IF_NOT_FOUND=Os,s.NULL=new Ug,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>kt(Oc)}),s.__NG_ELEMENT_ID__=-1,s})();function EC(s,o){ta(qt(s)[1],ln())}function Xn(s){let o=function(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(ai(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Error("Directives cannot inherit Components");d=o.\u0275dir}if(d){if(u){c.push(d);const _=s;_.inputs=zt(s.inputs),_.declaredInputs=zt(s.declaredInputs),_.outputs=zt(s.outputs);const E=d.hostBindings;E&&pf(s,E);const b=d.viewQuery,T=d.contentQueries;if(b&&fT(s,b),T&&CC(s,T),W(s.inputs,d.inputs),W(s.declaredInputs,d.declaredInputs),W(s.outputs,d.outputs),ai(d)&&d.data.animation){const A=s.data;A.animation=(A.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let _=0;_<f.length;_++){const E=f[_];E&&E.ngInherit&&E(s),E===Xn&&(u=!1)}}o=Object.getPrototypeOf(o)}!function(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=ih(d.hostAttrs,u=ih(u,d.hostAttrs))}}(c)}function zt(s){return s===Ve?{}:s===Pe?[]:s}function fT(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function CC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,f)=>{o(c,d,f),u(c,d,f)}:o}function pf(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let er=null;function Uc(){if(!er){const s=V.Symbol;if(s&&s.iterator)er=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(er=c)}}}return er}function gf(s){return!!cv(s)&&(Array.isArray(s)||!(s instanceof Map)&&Uc()in s)}function cv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Sn(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Gg(s,o,u,c){const d=ye();return Sn(d,Cs(),o)&&(ht(),Kn(Ht(),d,s,o,u,c)),Gg}function pv(s,o,u,c,d,f,_,E){const b=ye(),T=ht(),A=s+20,N=T.firstCreatePass?function(s,o,u,c,d,f,_,E,b){const T=o.consts,A=Nc(o,s,4,_||null,vs(T,E));Uu(o,u,A,vs(T,b)),ta(o,A);const N=A.tViews=ef(2,A,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,T);return null!==o.queries&&(o.queries.template(o,A),N.queries=o.queries.embeddedTView(A)),A}(A,T,b,o,u,c,d,f,_):T.data[A];Wr(N,!1);const i=b[11].createComment("");Ec(T,b,i,N),Zn(i,b),sf(b,b[A]=W_(i,b,i,N)),Rr(N)&&ya(T,b,N),null!=_&&U_(b,N,E)}function yf(s){return function(s,o){return s[o]}(Qe.lFrame.contextLView,20+s)}function ba(s,o=ve.Default){const u=ye();return null===u?kt(s,o):ah(ln(),u,K(s),o)}function Xg(s,o,u){const c=ye();return Sn(c,Cs(),o)&&gi(ht(),Ht(),c,s,o,c[11],u,!1),Xg}function em(s,o,u,c,d){const _=d?"class":"style";af(s,u,o.inputs[_],_,c)}function tm(s,o,u,c){const d=ye(),f=ht(),_=20+s,E=d[11],b=d[_]=m_(E,o,Qe.lFrame.currentNamespace),T=f.firstCreatePass?function(s,o,u,c,d,f,_){const E=o.consts,T=Nc(o,s,2,d,vs(E,f));return Uu(o,u,T,vs(E,_)),null!==T.attrs&&uf(T,T.attrs,!1),null!==T.mergedAttrs&&uf(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(_,f,d,0,o,u,c):f.data[_];Wr(T,!0);const A=T.mergedAttrs;null!==A&&Gt(E,b,A);const N=T.classes;null!==N&&qh(E,b,N);const i=T.styles;null!==i&&mg(E,b,i),64!=(64&T.flags)&&Ec(f,d,b,T),0===Qe.lFrame.elementDepthCount&&Zn(b,d),Qe.lFrame.elementDepthCount++,Rr(T)&&(ya(f,d,T),function(s,o,u){if(Za(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const _=s.data[f];_.contentQueries&&_.contentQueries(1,u[f],f)}}}(f,T,d)),null!==c&&U_(d,T)}function nm(){let s=ln();qd()?Qe.lFrame.isParent=!1:(s=s.parent,Wr(s,!1));const o=s;Qe.lFrame.elementDepthCount--;const u=ht();u.firstCreatePass&&(ta(u,s),Za(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function(s){return 0!=(16&s.flags)}(o)&&em(u,o,ye(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function(s){return 0!=(32&s.flags)}(o)&&em(u,o,ye(),o.stylesWithoutHost,!1)}function VC(s,o,u,c){tm(s,o,u,c),nm()}function Bn(){return ye()}function vf(s){return!!s&&"function"==typeof s.then}function Iv(s){return!!s&&"function"==typeof s.subscribe}const Qu=Iv;function Si(s,o,u,c){const d=ye(),f=ht(),_=ln();return function(s,o,u,c,d,f,_,E){const b=Rr(c),A=s.firstCreatePass&&K_(s),N=o[8],i=Z_(o);let n=!0;if(3&c.type||E){const l=Mr(c,o),h=E?E(l):l,m=i.length,C=E?D=>E($t(D[c.index])):c.index;if(jt(u)){let D=null;if(!E&&b&&(D=function(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const _=d[f];if(_===u&&d[f+1]===c){const E=o[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof _&&(f+=2)}return null}(s,o,d,c.index)),null!==D)(D.__ngLastListenerFn__||D).__ngNextListenerFn__=f,D.__ngLastListenerFn__=f,n=!1;else{f=im(c,o,N,f,!1);const x=u.listen(h,d,f);i.push(f,x),A&&A.push(d,C,m,m+1)}}else f=im(c,o,N,f,!0),h.addEventListener(d,f,_),i.push(f),A&&A.push(d,C,m,_)}else f=im(c,o,N,f,!1);const r=c.outputs;let a;if(n&&null!==r&&(a=r[d])){const l=a.length;if(l)for(let h=0;h<l;h+=2){const R=o[a[h]][a[h+1]].subscribe(f),O=i.length;i.push(f,R),A&&A.push(d,c.index,O,-(O+1))}}}(f,d,d[11],_,s,o,!!u,c),Si}function bv(s,o,u,c){try{return!1!==u(c)}catch(d){return Q_(s,d),!1}}function im(s,o,u,c,d){return function f(_){if(_===Function)return c;const E=2&s.flags?or(s.index,o):o;0==(32&o[2])&&Bu(E);let b=bv(o,0,c,_),T=f.__ngNextListenerFn__;for(;T;)b=bv(o,0,T,_)&&b,T=T.__ngNextListenerFn__;return d&&!1===b&&(_.preventDefault(),_.returnValue=!1),b}}function Dv(s=1){return function(s){return(Qe.lFrame.contextLView=function(s,o){for(;s>0;)o=o[15],s--;return o}(s,Qe.lFrame.contextLView))[8]}(s)}function $C(s,o,u,c,d){const f=s[u+1],_=null===o;let E=c?bi(f):Us(f),b=!1;for(;0!==E&&(!1===b||_);){const A=s[E+1];xT(s[E],o)&&(b=!0,s[E+1]=c?_g(A):ar(A)),E=c?bi(A):Us(A)}b&&(s[u+1]=c?ar(f):_g(f))}function xT(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Rs(s,o)>=0}function $n(s,o){return function(s,o,u,c){const d=ye(),f=ht(),_=function(s){const o=Qe.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);f.firstUpdatePass&&function(s,o,u,c){const d=s.data;if(null===d[u+1]){const f=d[mr()],_=function(s,o){return o>=s.expandoStartIndex}(s,u);(function(s,o){return 0!=(s.flags&(o?16:32))})(f,c)&&null===o&&!_&&(o=!1),o=function(s,o,u,c){const d=function(s){const o=Qe.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=as(u=Xu(null,s,o,u,c),o.attrs,c),f=null);else{const _=o.directiveStylingLast;if(-1===_||s[_]!==d)if(u=Xu(d,s,o,u,c),null===f){let b=function(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Us(c))return s[bi(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Xu(null,s,o,b[1],c),b=as(b,o.attrs,c),function(s,o,u,c){s[bi(u?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else f=function(s,o,u){let c;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)c=as(c,s[f].hostAttrs,u);return as(c,o.attrs,u)}(s,o,c)}return void 0!==f&&(c?o.residualClasses=f:o.residualStyles=f),u}(d,f,o,c),function(s,o,u,c,d,f){let _=f?o.classBindings:o.styleBindings,E=bi(_),b=Us(_);s[c]=u;let A,T=!1;if(Array.isArray(u)){const N=u;A=N[1],(null===A||Rs(N,A)>0)&&(T=!0)}else A=u;if(d)if(0!==b){const i=bi(s[E+1]);s[c+1]=Lu(i,E),0!==i&&(s[i+1]=Vu(s[i+1],c)),s[E+1]=function(s,o){return 131071&s|o<<17}(s[E+1],c)}else s[c+1]=Lu(E,0),0!==E&&(s[E+1]=Vu(s[E+1],c)),E=c;else s[c+1]=Lu(b,0),0===E?E=c:s[b+1]=Vu(s[b+1],c),b=c;T&&(s[c+1]=ar(s[c+1])),$C(s,A,c,!0),$C(s,A,c,!1),function(s,o,u,c,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&Rs(f,o)>=0&&(u[c+1]=_g(u[c+1]))}(o,A,s,c,f),_=Lu(E,b),f?o.classBindings=_:o.styleBindings=_}(d,f,o,u,_,c)}}(f,s,_,c),o!==rt&&Sn(d,_,o)&&function(s,o,u,c,d,f,_,E){if(!(3&o.type))return;const b=s.data,T=b[E+1];lr(function(s){return 1==(1&s)}(T)?Vv(b,o,u,d,Us(T),_):void 0)||(lr(f)||function(s){return 2==(2&s)}(T)&&(f=Vv(b,null,u,d,E,_)),function(s,o,u,c,d){const f=jt(s);if(o)d?f?s.addClass(u,c):u.classList.add(c):f?s.removeClass(u,c):u.classList.remove(c);else{let _=-1===c.indexOf("-")?void 0:Xi.DashCase;if(null==d)f?s.removeStyle(u,c,_):u.style.removeProperty(c);else{const E="string"==typeof d&&d.endsWith("!important");E&&(d=d.slice(0,-10),_|=Xi.Important),f?s.setStyle(u,c,d,_):u.style.setProperty(c,d,E?"important":"")}}}(c,_,eu(mr(),u),d,f))}(f,f.data[mr()],d,d[11],s,d[_+1]=function(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=G(hi(s)))),s}(o,u),c,_)}(s,o,null,!0),$n}function Xu(s,o,u,c,d){let f=null;const _=u.directiveEnd;let E=u.directiveStylingLast;for(-1===E?E=u.directiveStart:E++;E<_&&(f=o[E],c=as(c,f.hostAttrs,d),f!==s);)E++;return null!==s&&(u.directiveStylingLast=E),c}function as(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const _=o[f];"number"==typeof _?d=_:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),vr(s,_,!!u||o[++f]))}return void 0===s?null:s}function Vv(s,o,u,c,d,f){const _=null===o;let E;for(;d>0;){const b=s[d],T=Array.isArray(b),A=T?b[1]:b,N=null===A;let i=u[d+1];i===rt&&(i=N?Pe:void 0);let n=N?ic(i,c):A===c?i:void 0;if(T&&!lr(n)&&(n=ic(b,c)),lr(n)&&(E=n,_))return E;const r=s[d+1];d=_?bi(r):Us(r)}if(null!==o){let b=f?o.residualClasses:o.residualStyles;null!=b&&(E=ic(b,c))}return E}function lr(s){return void 0!==s}function ko(s,o=""){const u=ye(),c=ht(),d=s+20,f=c.firstCreatePass?Nc(c,d,1,o,null):c.data[d],_=u[d]=function(s,o){return jt(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Ec(c,u,_,f),Wr(f,!1)}function lm(s){return Ef("",s,""),lm}function Ef(s,o,u){const c=ye(),d=function(s,o,u,c){return Sn(s,Cs(),u)?o+xe(u)+c:rt}(c,s,o,u);return d!==rt&&bn(c,mr(),d),Ef}function Zv(s,o,u){const c=ye();return Sn(c,Cs(),o)&&gi(ht(),Ht(),c,s,o,c[11],u,!0),Zv}const Hs=void 0;var rI=["en",[["a","p"],["AM","PM"],Hs],[["AM","PM"],Hs,Hs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hs,"{1} 'at' {0}",Hs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(s){const o=Math.floor(Math.abs(s)),u=s.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let ed={};function fm(s){const o=function(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=iI(o);if(u)return u;const c=o.split("-")[0];if(u=iI(c),u)return u;if("en"===c)return rI;throw new Error(`Missing locale data for the locale "${s}".`)}function wf(s){return fm(s)[qe.PluralCase]}function iI(s){return s in ed||(ed[s]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[s]),ed[s]}var qe=(()=>((qe=qe||{})[qe.LocaleId=0]="LocaleId",qe[qe.DayPeriodsFormat=1]="DayPeriodsFormat",qe[qe.DayPeriodsStandalone=2]="DayPeriodsStandalone",qe[qe.DaysFormat=3]="DaysFormat",qe[qe.DaysStandalone=4]="DaysStandalone",qe[qe.MonthsFormat=5]="MonthsFormat",qe[qe.MonthsStandalone=6]="MonthsStandalone",qe[qe.Eras=7]="Eras",qe[qe.FirstDayOfWeek=8]="FirstDayOfWeek",qe[qe.WeekendRange=9]="WeekendRange",qe[qe.DateFormat=10]="DateFormat",qe[qe.TimeFormat=11]="TimeFormat",qe[qe.DateTimeFormat=12]="DateTimeFormat",qe[qe.NumberSymbols=13]="NumberSymbols",qe[qe.NumberFormats=14]="NumberFormats",qe[qe.CurrencyCode=15]="CurrencyCode",qe[qe.CurrencySymbol=16]="CurrencySymbol",qe[qe.CurrencyName=17]="CurrencyName",qe[qe.Currencies=18]="Currencies",qe[qe.Directionality=19]="Directionality",qe[qe.PluralCase=20]="PluralCase",qe[qe.ExtraData=21]="ExtraData",qe))();const td="en-US";let Yv=td;function gm(s){Kt(s,"Expected localeId to be defined"),"string"==typeof s&&(Yv=s.toLowerCase().replace(/_/g,"-"))}function Rf(s,o,u,c,d){if(s=K(s),Array.isArray(s))for(let f=0;f<s.length;f++)Rf(s[f],o,u,c,d);else{const f=ht(),_=ye();let E=Ze(s)?s:K(s.provide),b=be(s);const T=ln(),A=1048575&T.providerIndexes,N=T.directiveStart,i=T.providerIndexes>>20;if(Ze(s)||!s.multi){const n=new du(b,d,ba),r=vE(E,o,d?A:A+i,N);-1===r?(mu(Xe(T,_),f,E),_E(f,s,o.length),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(n),_.push(n)):(u[r]=n,_[r]=n)}else{const n=vE(E,o,A+i,N),r=vE(E,o,A,A+i),a=n>=0&&u[n],l=r>=0&&u[r];if(d&&!l||!d&&!a){mu(Xe(T,_),f,E);const h=function(s,o,u,c,d){const f=new du(s,u,ba);return f.multi=[],f.index=o,f.componentProviders=0,Cm(f,d,c&&!u),f}(d?tA:EE,u.length,d,c,b);!d&&l&&(u[r].providerFactory=h),_E(f,s,o.length,0),o.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),u.push(h),_.push(h)}else _E(f,s,n>-1?n:r,Cm(u[d?r:n],b,!d&&c));!d&&c&&l&&u[r].componentProviders++}}}function _E(s,o,u,c){const d=Ze(o);if(d||function(s){return!!s.useClass}(o)){const _=(o.useClass||o).prototype.ngOnDestroy;if(_){const E=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const b=E.indexOf(u);-1===b?E.push(u,[c,_]):E[b+1].push(c,_)}else E.push(u,_)}}}function Cm(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function vE(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function EE(s,o,u,c){return Mf(this.multi,[])}function tA(s,o,u,c){const d=this.multi;let f;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Pr(u,u[1],this.providerFactory.index,c);f=E.slice(0,_),Mf(d,f);for(let b=_;b<E.length;b++)f.push(E[b])}else f=[],Mf(d,f);return f}function Mf(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function Im(s,o=[]){return u=>{u.providersResolver=(c,d)=>function(s,o,u){const c=ht();if(c.firstCreatePass){const d=ai(s);Rf(u,c.data,c.blueprint,d,!0),Rf(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Lo{}const cl="ngComponent";class bI{resolveComponentFactory(o){throw function(s){const o=Error(`No component factory found for ${G(s)}. Did you add it to @NgModule.entryComponents?`);return o[cl]=s,o}(o)}}let us=(()=>{class s{}return s.NULL=new bI,s})();function ld(...s){}function Na(s,o){return new xi(Mr(s,o))}const nA=function(){return Na(ln(),ye())};let xi=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=nA,s})();function Dm(s){return s instanceof xi?s.nativeElement:s}class Pf{}let rA=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>TI(),s})();const TI=function(){const s=ye(),u=or(ln().index,s);return function(s){return s[11]}(Nr(u)?u:s)};let DE=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class SI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const TE=new SI("12.2.7");class Tm{constructor(){}supports(o){return gf(o)}create(o){return new oA(o)}}const AE=(s,o)=>o;class oA{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||AE}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const _=!c||u&&u.currentIndex<xE(c,d,f)?u:c,E=xE(_,d,f),b=_.currentIndex;if(_===c)d--,c=c._nextRemoved;else if(u=u._next,null==_.previousIndex)d++;else{f||(f=[]);const T=E-d,A=b-d;if(T!=A){for(let i=0;i<T;i++){const n=i<f.length?f[i]:f[i]=0,r=n+i;A<=r&&r<T&&(f[i]=n+1)}f[_.previousIndex]=A-T}}E!==b&&o(_,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!gf(o))throw new Error(`Error trying to diff '${G(o)}'. Only arrays and iterables are allowed`);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,_,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],_=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,f,_,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,_,E),c=!0),u=u._next}else d=0,function(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Uc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{_=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,_)?(c&&(u=this._verifyReinsertion(u,E,_,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,_,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new SE(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Am),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Am),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class SE{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class aA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Am{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new aA,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xE(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Sm{constructor(){}supports(o){return o instanceof Map||cv(o)}create(){return new NI}}class NI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||cv(o)))throw new Error(`Error trying to diff '${G(o)}'. Only maps and objects are allowed`)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,_=d._next;return f&&(f._next=_),_&&(_._prev=f),d._next=null,d._prev=null,d}const c=new uA(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class uA{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xm(){return new Nm([new Tm])}let Nm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||xm()),deps:[[s,new ks,new Er]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${u}' of type '${function(s){return s.name||typeof s}(u)}'`)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:xm}),s})();function RI(){return new cd([new Sm])}let cd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||RI()),deps:[[s,new ks,new Er]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(c)return c;throw new Error(`Cannot find a differ supporting object '${u}'`)}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:RI}),s})();function Rm(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push($t(f)),St(f))for(let E=10;E<f.length;E++){const b=f[E],T=b[1].firstChild;null!==T&&Rm(b[1],b,T,c)}const _=u.type;if(8&_)Rm(s,o,u.child,c);else if(32&_){const E=Uh(u,o);let b;for(;b=E();)c.push(b)}else if(16&_){const E=Fn(o,u);if(Array.isArray(E))c.push(...E);else{const b=Vs(o[16]);Rm(b[1],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class dl{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Rm(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(St(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Fu(o,c),Zr(u,c))}this._attachedToViewContainer=!1}kw(this._lView[1],this._lView)}onDestroy(o){Ag(this._lView[1],this._lView,null,o)}markForCheck(){Bu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){of(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(s,o,u){ws(!0);try{of(s,o,u)}finally{ws(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var o;this._appRef=null,Gh(this._lView[1],o=this._lView,o[11],2,null,null)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=o}}class RE extends dl{constructor(o){super(o),this._view=o}detectChanges(){Fg(this._view)}checkNoChanges(){!function(s){ws(!0);try{Fg(s)}finally{ws(!1)}}(this._view)}get context(){return null}}const MI=function(s){return function(s,o,u){if(Ol(s)&&!u){const c=or(s.index,o);return new dl(c,c)}return 47&s.type?new dl(o[16],o):null}(ln(),ye(),16==(16&s))};let OE=(()=>{class s{}return s.__NG_ELEMENT_ID__=MI,s})();const Vo=[new Sm],cA=new Nm([new Tm]),FE=new cd(Vo),LE=function(){return Mm(ln(),ye())};let Ff=(()=>{class s{}return s.__NG_ELEMENT_ID__=LE,s})();const VE=Ff,hA=class extends VE{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Xh(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),To(u,c,o),new dl(c)}};function Mm(s,o){return 4&s.type?new hA(o,s,Na(s,o)):null}class Uo{}class BE{}const pA=function(){return OI(ln(),ye())};let Om=(()=>{class s{}return s.__NG_ELEMENT_ID__=pA,s})();const gA=Om,Pm=class extends gA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Na(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ds(this._hostTNode,this._hostLView);if(Mp(o)){const u=fu(o,this._hostLView),c=hu(o);return new Wi(u[1].data[c+8],u)}return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=km(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const _=c||this.parentInjector;if(!f&&null==o.ngModule&&_){const b=_.get(Uo,null);b&&(f=b)}const E=o.create(_,d,void 0,f);return this.insert(E.hostView,u),E}insert(o,u){const c=o._lView,d=c[1];if(St(c[3])){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const N=c[3],i=new Pm(N,N[6],N[3]);i.detach(i.indexOf(o))}}const f=this._adjustIndex(u),_=this._lContainer;!function(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],sa(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const _=o[17];null!==_&&u!==_&&function(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(_,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,_,f);const E=Ln(f,_),b=c[11],T=fg(b,_[7]);return null!==T&&function(s,o,u,c,d,f){c[0]=d,c[6]=o,Gh(s,c,u,1,d,f)}(d,_[6],b,c,T,E),o.attachToViewContainerRef(),sa(Lf(_),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=km(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Fu(this._lContainer,u);c&&(Zr(Lf(this._lContainer),u),kw(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Fu(this._lContainer,u);return c&&null!=Zr(Lf(this._lContainer),u)?new dl(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function km(s){return s[8]}function Lf(s){return s[8]||(s[8]=[])}function OI(s,o){let u;const c=o[s.index];if(St(c))u=c;else{let d;if(8&s.type)d=$t(c);else{const f=o[11];d=f.createComment("");const _=Mr(s,o);bo(f,fg(f,_),d,function(s,o){return jt(s)?s.nextSibling(o):o.nextSibling}(f,_),!1)}o[s.index]=u=W_(c,o,d,s),sf(o,u)}return new Pm(u,s,o)}const vl={};class eb extends us{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Mn(o);return new nb(u,this.ngModule)}}function r0(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const VA=new cn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>fa});class nb extends Lo{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=o.selectors.map(qD).join(","),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return r0(this.componentDef.inputs)}get outputs(){return r0(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function(s,o){return{get:(u,c,d)=>{const f=s.get(u,vl,d);return f!==vl||c===vl?f:o.get(u,c,d)}}}(o,d.injector):o,_=f.get(Pf,Ul),E=f.get(DE,null),b=_.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",A=c?function(s,o,u){if(jt(s))return s.selectRootElement(o,u===un.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):m_(_.createRenderer(null,this.componentDef),T,function(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(T)),N=this.componentDef.onPush?576:528,i=function(s,o){return{components:[],scheduler:s||fa,clean:ju,playerHandler:o||null,flags:0}}(),n=ef(0,null,null,1,0,null,null,null,null,null),r=Xh(null,n,i,N,null,null,_,b,E,f);let a,l;lu(r);try{const h=function(s,o,u,c,d,f){const _=u[1];u[20]=s;const b=Nc(_,20,2,"#host",null),T=b.mergedAttrs=o.hostAttrs;null!==T&&(uf(b,T,!0),null!==s&&(Gt(d,s,T),null!==b.classes&&qh(d,s,b.classes),null!==b.styles&&mg(d,s,b.styles)));const A=c.createRenderer(s,o),N=Xh(u,Jw(o),null,o.onPush?64:16,u[20],b,c,A,f||null,null);return _.firstCreatePass&&(mu(Xe(b,u),_,o.type),rC(_,b),G_(b,u.length,1)),sf(u,N),u[20]=N}(A,this.componentDef,r,_,b);if(A)if(c)Gt(b,A,["ng-version",TE.full]);else{const{attrs:m,classes:C}=function(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!Ii(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);m&&Gt(b,A,m),C&&C.length>0&&qh(b,A,C.join(" "))}if(l=_s(n,20),void 0!==u){const m=l.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const D=u[C];m.push(null!=D?Array.from(D):null)}}a=function(s,o,u,c,d){const f=u[1],_=function(s,o,u){const c=ln();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),nf(s,c,o,Rc(s,o,1,null),u));const d=Pr(o,s,c.directiveStart,c);Zn(d,o);const f=Mr(c,o);return f&&Zn(f,o),d}(f,u,o);if(c.components.push(_),s[8]=_,d&&d.forEach(b=>b(_,o)),o.contentQueries){const b=ln();o.contentQueries(1,_,b.directiveStart)}const E=ln();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(uo(E.index),eC(u[1],E,0,E.directiveStart,E.directiveEnd,o),nC(o,_)),_}(h,this.componentDef,r,i,[EC]),To(n,r,null)}finally{Rp()}return new jA(this.componentType,a,Na(l,r),r,l)}}class jA extends class{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new RE(d),this.componentType=o}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}const El=new Map;class GA extends Uo{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new eb(this);const c=ir(o),d=o[dt]||null;d&&gm(d),this._bootstrapComponents=Wt(c.bootstrap),this._r3Injector=Yn(o,u,[{provide:Uo,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],G(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=hn.THROW_IF_NOT_FOUND,c=ve.Default){return o===hn||o===Uo||o===Oc?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Zm extends BE{constructor(o){super(),this.moduleType=o,null!==ir(o)&&function(s){const o=new Set;!function u(c){const d=ir(c,!0),f=d.id;null!==f&&(function(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${G(o)} vs ${G(o.name)}`)}(f,El.get(f),c),El.set(f,c));const _=Wt(d.imports);for(const E of _)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new GA(this.moduleType,o)}}function a0(s){return o=>{setTimeout(s,void 0,o)}}const Pi=class extends v.xQ{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,_;let E=o,b=u||(()=>null),T=c;if(o&&"object"==typeof o){const N=o;E=null===(d=N.next)||void 0===d?void 0:d.bind(N),b=null===(f=N.error)||void 0===f?void 0:f.bind(N),T=null===(_=N.complete)||void 0===_?void 0:_.bind(N)}this.__isAsync&&(b=a0(b),E&&(E=a0(E)),T&&(T=a0(T)));const A=super.subscribe({next:E,error:b,complete:T});return o instanceof Y.w&&o.add(A),A}};function lb(){return this._results[Uc()]()}class Yf{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Uc(),c=Yf.prototype;c[u]||(c[u]=lb)}get changes(){return this._changes||(this._changes=new Pi)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=yr(o);(this._changesDetected=!function(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class l0{constructor(o){this.queryList=o,this.matches=null}clone(){return new l0(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qm{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const _=u.getByIndex(f);d.push(this.queries[_.indexInDeclarationView].clone())}return new Qm(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Pa(o,u).matches&&this.queries[u].setDirty()}}class Jf{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class c0{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new c0(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Jm{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Jm(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,cb(u,f)),this.matchTNodeWithReadOption(o,u,Ts(u,o,f,!1,!1))}else c===Ff?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Ts(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===xi||d===Om||d===Ff&&4&u.type)this.addMatch(u.index,-2);else{const f=Ts(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function cb(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function ki(s,o,u,c){return-1===u?function(s,o){return 11&s.type?Na(s,o):4&s.type?Mm(s,o):null}(o,s):-2===u?function(s,o,u){return u===xi?Na(o,s):u===Ff?Mm(o,s):u===Om?OI(o,s):void 0}(s,o,c):Pr(s,s[1],u,o)}function d0(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,_=u.matches,E=[];for(let b=0;b<_.length;b+=2){const T=_[b];E.push(T<0?null:ki(o,f[T],_[b+1],u.metadata.read))}d.matches=E}return d.matches}function Xm(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const _=d0(s,o,d,u);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)c.push(_[E/2]);else{const T=f[E+1],A=o[-b];for(let N=10;N<A.length;N++){const i=A[N];i[17]===i[3]&&Xm(i[1],i,T,c)}if(null!==A[9]){const N=A[9];for(let i=0;i<N.length;i++){const n=N[i];Xm(n[1],n,T,c)}}}}}return c}function yd(s){const o=ye(),u=ht(),c=ao();Qd(c+1);const d=Pa(u,c);if(s.dirty&&nu(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?Xm(u,o,c,[]):d0(u,o,d,c);s.reset(f,Dm),s.notifyOnChanges()}return!0}return!1}function br(s,o,u,c){const d=ht();if(d.firstCreatePass){const f=ln();(function(s,o,u){null===s.queries&&(s.queries=new c0),s.queries.track(new Jm(o,u))})(d,new Jf(o,u,c),f.index),function(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function(s,o,u){const c=new Yf(4==(4&u));Ag(s,o,c,c.destroy),null===o[19]&&(o[19]=new Qm),o[19].queries.push(new l0(c))}(d,ye(),u)}function db(){return s=ye(),o=ao(),s[19].queries[o].queryList;var s,o}function Pa(s,o){return s.queries.getByIndex(o)}const A0=new cn("Application Initializer");let vd=(()=>{class s{constructor(u){this.appInits=u,this.resolve=ld,this.reject=ld,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(vf(f))u.push(f);else if(Qu(f)){const _=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});u.push(_)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(kt(A0,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const Dr=new cn("AppId"),S0={provide:Dr,useFactory:function(){return`${x0()}${x0()}${x0()}`},deps:[]};function x0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Mb=new cn("Platform Initializer"),Ob=new cn("Platform ID"),Xr=new cn("appBootstrapListener");let Pb=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const ny=new cn("LocaleId"),kb=new cn("DefaultCurrencyCode");class AS{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}const N0=function(s){return new Zm(s)},Vb=N0,xS=function(s){return Promise.resolve(N0(s))},Ub=function(s){const o=N0(s),c=Wt(ir(s).declarations).reduce((d,f)=>{const _=Mn(f);return _&&d.push(new nb(_)),d},[]);return new AS(o,c)},Bb=Ub,Ed=function(s){return Promise.resolve(Ub(s))};let wd=(()=>{class s{constructor(){this.compileModuleSync=Vb,this.compileModuleAsync=xS,this.compileModuleAndAllComponentsSync=Bb,this.compileModuleAndAllComponentsAsync=Ed}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const RS=(()=>Promise.resolve(0))();function M0(s){"undefined"==typeof Zone?RS.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ei{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pi(!1),this.onMicrotaskEmpty=new Pi(!1),this.onStable=new Pi(!1),this.onError=new Pi(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function(){let s=V.requestAnimationFrame,o=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function(s){const o=()=>{!function(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(V,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Fi(s),s.isCheckStableRunning=!0,sy(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Fi(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,_,E)=>{try{return $b(s),u.invokeTask(d,f,_,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),Hb(s)}},onInvoke:(u,c,d,f,_,E,b)=>{try{return $b(s),u.invoke(d,f,_,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),Hb(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,Fi(s),sy(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ei.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ei.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,_=f.scheduleEventTask("NgZoneEvent: "+d,o,jb,ld,ld);try{return f.runTask(_,u,c)}finally{f.cancelTask(_)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const jb={};function sy(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Fi(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function $b(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Hb(s){s._nesting--,sy(s)}class Gb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pi,this.onMicrotaskEmpty=new Pi,this.onStable=new Pi,this.onError=new Pi}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let O0=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ei.assertNotInAngularZone(),M0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())M0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(kt(ei))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),qb=(()=>{class s{constructor(){this._applications=new Map,oy.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return oy.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class Wb{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function MS(s){oy=s}let oy=new Wb,P0=!0,rp=!1;function Ho(){return rp=!0,P0}function vt(){if(rp)throw new Error("Cannot enable prod mode after platform setup.");P0=!1}let $r;const ip=new cn("AllowMultipleToken");class FS{constructor(o,u){this.name=o,this.token=u}}function sp(s,o,u=[]){const c=`Platform: ${o}`,d=new cn(c);return(f=[])=>{let _=Qb();if(!_||_.injector.get(ip,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:lf,useValue:"platform"});!function(s){if($r&&!$r.destroyed&&!$r.injector.get(ip,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");$r=s.get(Jb);const o=s.get(Mb,null);o&&o.forEach(u=>u())}(hn.create({providers:E,name:c}))}return function(s){const o=Qb();if(!o)throw new Error("No platform exists!");if(!o.injector.get(s,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return o}(d)}}function Qb(){return $r&&!$r.destroyed?$r:null}let Jb=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function(s,o){let u;return u="noop"===s?new Gb:("zone.js"===s?void 0:s)||new ei({enableLongStackTrace:Ho(),shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:ei,useValue:E}];return E.run(()=>{const T=hn.create({providers:b,parent:this.injector,name:u.moduleType.name}),A=u.create(T),N=A.injector.get(j,null);if(!N)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return E.runOutsideAngular(()=>{const i=E.onError.subscribe({next:n=>{N.handleError(n)}});A.onDestroy(()=>{F0(this._modules,A),i.unsubscribe()})}),function(s,o,u){try{const c=u();return vf(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(N,E,()=>{const i=A.injector.get(vd);return i.runInitializers(),i.donePromise.then(()=>(gm(A.injector.get(ny,td)||td),this._moduleDoBootstrap(A),A))})})}bootstrapModule(u,c=[]){const d=Xb({},c);return function(s,o,u){const c=new Zm(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(op);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Error(`The module ${G(u.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(kt(hn))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function Xb(s,o){return Array.isArray(o)?o.reduce(Xb,s):Object.assign(Object.assign({},s),o)}let op=(()=>{class s{constructor(u,c,d,f,_){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new L.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),b=new L.y(T=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{ei.assertNotInAngularZone(),M0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{ei.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{A.unsubscribe(),N.unsubscribe()}});this.isStable=(0,de.T)(E,b.pipe(s=>(0,ae.x)()(function(s,o){return function(c){let d;d="function"==typeof s?s:function(){return s};const f=Object.create(c,ce.N);return f.source=c,f.subjectFactory=d,f}}(H)(s))))}bootstrap(u,c){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let d;d=u instanceof Lo?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Uo),E=d.create(hn.NULL,[],c||d.selector,f),b=E.location.nativeElement,T=E.injector.get(O0,null),A=T&&E.injector.get(qb);return T&&A&&A.registerApplication(b,T),E.onDestroy(()=>{this.detachView(E.hostView),F0(this.components,E),A&&A.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;F0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Xr,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(kt(ei),kt(hn),kt(j),kt(us),kt(vd))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function F0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}class tD{}class BS{}const bd={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let sD=(()=>{class s{constructor(u,c){this._compiler=u,this._config=c||bd}load(u){return this.loadAndCompile(u)}loadAndCompile(u){let[c,d]=u.split("#");return void 0===d&&(d="default"),F(8255)(c).then(f=>f[d]).then(f=>oD(f,c,d)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(u){let[c,d]=u.split("#"),f="NgFactory";return void 0===d&&(d="default",f=""),F(8255)(this._config.factoryPathPrefix+c+this._config.factoryPathSuffix).then(_=>_[d+f]).then(_=>oD(_,c,d))}}return s.\u0275fac=function(u){return new(u||s)(kt(wd),kt(BS,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function oD(s,o,u){if(!s)throw new Error(`Cannot find '${u}' in '${o}'`);return s}const $0=function(s){return null},ZS=sp(null,"core",[{provide:Ob,useValue:"unknown"},{provide:Jb,deps:[hn]},{provide:qb,deps:[]},{provide:Pb,deps:[]}]),YS=[{provide:op,useClass:op,deps:[ei,hn,j,us,vd]},{provide:VA,deps:[ei],useFactory:function(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:vd,useClass:vd,deps:[[new Er,A0]]},{provide:wd,useClass:wd,deps:[]},S0,{provide:Nm,useFactory:function(){return cA},deps:[]},{provide:cd,useFactory:function(){return FE},deps:[]},{provide:ny,useFactory:function(s){return gm(s=s||"undefined"!=typeof $localize&&$localize.locale||td),s},deps:[[new Ki(ny),new Er,new ks]]},{provide:kb,useValue:"USD"}];let JS=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(kt(op))},s.\u0275mod=qa({type:s}),s.\u0275inj=si({providers:YS}),s})()},8939:(je,ge,F)=>{"use strict";F.d(ge,{hO:()=>G,xv:()=>H,Dh:()=>ae,GT:()=>ee,on:()=>P,pX:()=>ce});var v=F(3018),Y=F(7841),L=F(9126);je=F.hmd(je);const de=["ngOnDestroy"],ce=(z,oe,Q,K={})=>new Proxy(z,{get:(Te,Ie)=>Q.runOutsideAngular(()=>{var we;if(z[Ie])return(null===(we=null==K?void 0:K.spy)||void 0===we?void 0:we.get)&&K.spy.get(Ie,z[Ie]),z[Ie];if(de.indexOf(Ie)>-1)return()=>{};const Re=oe.toPromise().then(Me=>{const xe=Me&&Me[Ie];return"function"==typeof xe?xe.bind(Me):xe&&xe.then?xe.then(it=>Q.run(()=>it)):Q.run(()=>xe)});return new Proxy(()=>{},{get:(Me,xe)=>Re[xe],apply:(Me,xe,it)=>Re.then(mt=>{var pe;const X=mt&&mt(...it);return(null===(pe=null==K?void 0:K.spy)||void 0===pe?void 0:pe.apply)&&K.spy.apply(Ie,it,X),X})})})}),ee=(z,oe)=>{oe.forEach(Q=>{Object.getOwnPropertyNames(Q.prototype||Q).forEach(K=>{Object.defineProperty(z.prototype,K,Object.getOwnPropertyDescriptor(Q.prototype||Q,K))})})};class fe{constructor(oe){return oe}}const ae=new v.OlP("angularfire2.app.options"),H=new v.OlP("angularfire2.app.name");function P(z,oe,Q){const Te="object"==typeof Q&&Q||{};Te.name=Te.name||"string"==typeof Q&&Q||"[DEFAULT]";const we=Y.Z.apps.filter(Re=>Re&&Re.name===Te.name)[0]||oe.runOutsideAngular(()=>Y.Z.initializeApp(z,Te));try{JSON.stringify(z)!==JSON.stringify(we.options)&&k("error",`${we.name} Firebase App already initialized with different options${je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Re){}return new fe(we)}const k=(z,...oe)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[z](...oe)},W={provide:fe,useFactory:P,deps:[ae,v.R0b,[new v.FiY,H]]};let G=(()=>{class z{constructor(Q){Y.Z.registerVersion("angularfire",L.q4.full,"core"),Y.Z.registerVersion("angularfire",L.q4.full,"app-compat"),Y.Z.registerVersion("angular",v.q4F.full,Q.toString())}static initializeApp(Q,K){return{ngModule:z,providers:[{provide:ae,useValue:Q},{provide:H,useValue:K}]}}}return z.\u0275fac=function(Q){return new(Q||z)(v.LFG(v.Lbi))},z.\u0275mod=v.oAB({type:z}),z.\u0275inj=v.cJS({providers:[W]}),z})()},9126:(je,ge,F)=>{"use strict";F.d(ge,{q4:()=>P,iC:()=>X,HU:()=>Re,cc:()=>G});var v=F(3018);(0,F(5452).registerVersion)("firebase","9.1.0","app");var ce=F(7771),ee=F(3637),fe=F(3342),ae=F(3101),H=F(309);je=F.hmd(je);const P=new v.GfV("7.0.4"),k=!!je.hot,W=(re,...Z)=>{(0,v.X6Q)()&&"undefined"!=typeof console&&console[re](...Z)};function G(re,Z,Ce,$e,lt){const[,We,st]=globalThis.\u0275AngularfireInstanceCache.find(Bt=>Bt[0]===re)||[];if(We)return function(re,Z){try{return re.toString()===Z.toString()}catch(Ce){return re===Z}}(lt,st)||(W("error",`${Z} was already initialized on the ${Ce} Firebase App with different settings.${k?" You may need to reload as Firebase is not HMR aware.":""}`),W("warn",{is:lt,was:st})),We;{const Bt=$e();return globalThis.\u0275AngularfireInstanceCache.push([re,Bt,lt]),Bt}}function Te(){}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[]);class Ie{constructor(Z,Ce=ce.N){this.zone=Z,this.delegate=Ce}now(){return this.delegate.now()}schedule(Z,Ce,$e){const lt=this.zone;return this.delegate.schedule(function(st){lt.runGuarded(()=>{Z.apply(this,[st])})},Ce,$e)}}class we{constructor(Z){this.zone=Z,this.task=null}call(Z,Ce){const $e=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Te,{},Te,Te)),Ce.pipe((0,fe.b)({next:$e,complete:$e,error:$e})).subscribe(Z).add($e)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Re=(()=>{class re{constructor(Ce){this.ngZone=Ce,this.outsideAngular=Ce.runOutsideAngular(()=>new Ie(Zone.current)),this.insideAngular=Ce.run(()=>new Ie(Zone.current,ee.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return re.\u0275fac=function(Ce){return new(Ce||re)(v.LFG(v.R0b))},re.\u0275prov=v.Yz7({token:re,factory:re.\u0275fac,providedIn:"root"}),re})();function Me(){const re=globalThis.\u0275AngularFireScheduler;if(!re)throw new Error("AngularFireModule has not been provided");return re}function X(re){return Me(),function(re){return function(Ce){return(Ce=Ce.lift(new we(re.ngZone))).pipe((0,ae.R)(re.outsideAngular),(0,H.QV)(re.insideAngular))}}(Me())(re)}},4486:(je,ge,F)=>{"use strict";F.d(ge,{Z:()=>oe});var v=F(3854),Y=F(6034),L=F(5452),de=F(5601);class ce{constructor(K,Te){this._delegate=K,this.firebase=Te,(0,L._addComponent)(K,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=K.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(K){this._delegate.automaticDataCollectionEnabled=K}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(K=>{this._delegate.checkDestroyed(),K()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(K,Te=L._DEFAULT_ENTRY_NAME){var Ie;this._delegate.checkDestroyed();const we=this._delegate.container.getProvider(K);return!we.isInitialized()&&"EXPLICIT"===(null===(Ie=we.getComponent())||void 0===Ie?void 0:Ie.instantiationMode)&&we.initialize(),we.getImmediate({identifier:Te})}_removeServiceInstance(K,Te=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(K).clearInstance(Te)}_addComponent(K){(0,L._addComponent)(this._delegate,K)}_addOrOverwriteComponent(K){(0,L._addOrOverwriteComponent)(this._delegate,K)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const fe=new v.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),P=function H(){const Q=function(Q){const K={},Te={__esModule:!0,initializeApp:function(mt,pe={}){const X=L.initializeApp(mt,pe);if((0,v.r3)(K,X.name))return K[X.name];const te=new Q(X,Te);return K[X.name]=te,te},app:we,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function(mt){const pe=mt.name,X=pe.replace("-compat","");if(L._registerComponent(mt)&&"PUBLIC"===mt.type){const te=(ie=we())=>{if("function"!=typeof ie[X])throw fe.create("invalid-app-argument",{appName:pe});return ie[X]()};void 0!==mt.serviceProps&&(0,v.ZB)(te,mt.serviceProps),Te[X]=te,Q.prototype[X]=function(...ie){return this._getService.bind(this,pe).apply(this,mt.multipleInstances?ie:[])}}return"PUBLIC"===mt.type?Te[X]:null},removeApp:function(mt){delete K[mt]},useAsService:function(mt,pe){return"serverAuth"===pe?null:pe},modularAPIs:L}};function we(mt){if(!(0,v.r3)(K,mt=mt||L._DEFAULT_ENTRY_NAME))throw fe.create("no-app",{appName:mt});return K[mt]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function(){return Object.keys(K).map(mt=>K[mt])}}),we.App=Q,Te}(ce);return Q.INTERNAL=Object.assign(Object.assign({},Q.INTERNAL),{createFirebaseNamespace:H,extendNamespace:function(Te){(0,v.ZB)(Q,Te)},createSubscribe:v.ne,ErrorFactory:v.LL,deepExtend:v.ZB}),Q}(),k=new de.Yd("@firebase/app-compat");if((0,v.jU)()&&void 0!==self.firebase){k.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Q=self.firebase.SDK_VERSION;Q&&Q.indexOf("LITE")>=0&&k.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const oe=P;(0,L.registerVersion)("@firebase/app-compat","0.1.2",undefined)},5452:(je,ge,F)=>{"use strict";F.r(ge),F.d(ge,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>ii,_DEFAULT_ENTRY_NAME:()=>lt,_addComponent:()=>on,_addOrOverwriteComponent:()=>Gr,_apps:()=>st,_clearComponents:()=>Ct,_components:()=>Bt,_getProvider:()=>Kt,_registerComponent:()=>qr,_removeServiceInstance:()=>Ke,deleteApp:()=>hs,getApp:()=>fr,getApps:()=>Wo,initializeApp:()=>si,onLog:()=>In,registerVersion:()=>fs,setLogLevel:()=>Tr});var v=F(8239),Y=F(6034),L=F(5601),de=F(3854);class ce{constructor(ve){this.container=ve}getPlatformInfoString(){return this.container.getProviders().map(Ot=>{if(function(Je){const ve=Je.getComponent();return"VERSION"===(null==ve?void 0:ve.type)}(Ot)){const Qt=Ot.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(Ot=>Ot).join(" ")}}const fe="@firebase/app",H=new L.Yd("@firebase/app"),lt="[DEFAULT]",We={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},st=new Map,Bt=new Map;function on(Je,ve){try{Je.container.addComponent(ve)}catch(Ot){H.debug(`Component ${ve.name} failed to register with FirebaseApp ${Je.name}`,Ot)}}function Gr(Je,ve){Je.container.addOrOverwriteComponent(ve)}function qr(Je){const ve=Je.name;if(Bt.has(ve))return H.debug(`There were multiple attempts to register component ${ve}.`),!1;Bt.set(ve,Je);for(const Ot of st.values())on(Ot,Je);return!0}function Kt(Je,ve){return Je.container.getProvider(ve)}function Ke(Je,ve,Ot=lt){Kt(Je,ve).clearInstance(Ot)}function Ct(){Bt.clear()}const Li=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Yt{constructor(ve,Ot,Qt){this._isDeleted=!1,this._options=Object.assign({},ve),this._config=Object.assign({},Ot),this._name=Ot.name,this._automaticDataCollectionEnabled=Ot.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ve){this.checkDestroyed(),this._automaticDataCollectionEnabled=ve}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ve){this._isDeleted=ve}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}const ii="9.1.0";function si(Je,ve={}){"object"!=typeof ve&&(ve={name:ve});const Ot=Object.assign({name:lt,automaticDataCollectionEnabled:!1},ve),Qt=Ot.name;if("string"!=typeof Qt||!Qt)throw Li.create("bad-app-name",{appName:String(Qt)});const Jt=st.get(Qt);if(Jt){if((0,de.vZ)(Je,Jt.options)&&(0,de.vZ)(Ot,Jt.config))return Jt;throw Li.create("duplicate-app",{appName:Qt})}const Dt=new Y.H0(Qt);for(const He of Bt.values())Dt.addComponent(He);const Ue=new Yt(Je,Ot,Dt);return st.set(Qt,Ue),Ue}function fr(Je=lt){const ve=st.get(Je);if(!ve)throw Li.create("no-app",{appName:Je});return ve}function Wo(){return Array.from(st.values())}function hs(Je){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,v.Z)(function*(Je){const ve=Je.name;st.has(ve)&&(st.delete(ve),yield Promise.all(Je.container.getProviders().map(Ot=>Ot.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function fs(Je,ve,Ot){var Qt;let Jt=null!==(Qt=We[Je])&&void 0!==Qt?Qt:Je;Ot&&(Jt+=`-${Ot}`);const Dt=Jt.match(/\s|\//),Ue=ve.match(/\s|\//);if(Dt||Ue){const He=[`Unable to register library "${Jt}" with version "${ve}":`];return Dt&&He.push(`library name "${Jt}" contains illegal characters (whitespace or "/")`),Dt&&Ue&&He.push("and"),Ue&&He.push(`version name "${ve}" contains illegal characters (whitespace or "/")`),void H.warn(He.join(" "))}qr(new Y.wA(`${Jt}-version`,()=>({library:Jt,version:ve}),"VERSION"))}function In(Je,ve){if(null!==Je&&"function"!=typeof Je)throw Li.create("invalid-log-argument");(0,L.Am)(Je,ve)}function Tr(Je){(0,L.Ub)(Je)}qr(new Y.wA("platform-logger",ve=>new ce(ve),"PRIVATE")),fs(fe,"0.7.1",undefined),fs("fire-js","")},6034:(je,ge,F)=>{"use strict";F.d(ge,{wA:()=>L,H0:()=>ae});var v=F(4762),Y=F(3854),L=function(){function H(P,k,W){this.name=P,this.instanceFactory=k,this.type=W,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return H.prototype.setInstantiationMode=function(P){return this.instantiationMode=P,this},H.prototype.setMultipleInstances=function(P){return this.multipleInstances=P,this},H.prototype.setServiceProps=function(P){return this.serviceProps=P,this},H.prototype.setInstanceCreatedCallback=function(P){return this.onInstanceCreated=P,this},H}(),de="[DEFAULT]",ce=function(){function H(P,k){this.name=P,this.container=k,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return H.prototype.get=function(P){var k=this.normalizeInstanceIdentifier(P);if(!this.instancesDeferred.has(k)){var W=new Y.BH;if(this.instancesDeferred.set(k,W),this.isInitialized(k)||this.shouldAutoInitialize())try{var G=this.getOrInitializeService({instanceIdentifier:k});G&&W.resolve(G)}catch(z){}}return this.instancesDeferred.get(k).promise},H.prototype.getImmediate=function(P){var k,W=this.normalizeInstanceIdentifier(null==P?void 0:P.identifier),G=null!==(k=null==P?void 0:P.optional)&&void 0!==k&&k;if(!this.isInitialized(W)&&!this.shouldAutoInitialize()){if(G)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:W})}catch(z){if(G)return null;throw z}},H.prototype.getComponent=function(){return this.component},H.prototype.setComponent=function(P){var k,W;if(P.name!==this.name)throw Error("Mismatching Component "+P.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=P,this.shouldAutoInitialize()){if(function(H){return"EAGER"===H.instantiationMode}(P))try{this.getOrInitializeService({instanceIdentifier:de})}catch(we){}try{for(var G=(0,v.XA)(this.instancesDeferred.entries()),z=G.next();!z.done;z=G.next()){var oe=(0,v.CR)(z.value,2),K=oe[1],Te=this.normalizeInstanceIdentifier(oe[0]);try{var Ie=this.getOrInitializeService({instanceIdentifier:Te});K.resolve(Ie)}catch(we){}}}catch(we){k={error:we}}finally{try{z&&!z.done&&(W=G.return)&&W.call(G)}finally{if(k)throw k.error}}}},H.prototype.clearInstance=function(P){void 0===P&&(P=de),this.instancesDeferred.delete(P),this.instancesOptions.delete(P),this.instances.delete(P)},H.prototype.delete=function(){return(0,v.mG)(this,void 0,void 0,function(){var P;return(0,v.Jh)(this,function(k){switch(k.label){case 0:return P=Array.from(this.instances.values()),[4,Promise.all((0,v.ev)((0,v.ev)([],(0,v.CR)(P.filter(function(W){return"INTERNAL"in W}).map(function(W){return W.INTERNAL.delete()}))),(0,v.CR)(P.filter(function(W){return"_delete"in W}).map(function(W){return W._delete()}))))];case 1:return k.sent(),[2]}})})},H.prototype.isComponentSet=function(){return null!=this.component},H.prototype.isInitialized=function(P){return void 0===P&&(P=de),this.instances.has(P)},H.prototype.getOptions=function(P){return void 0===P&&(P=de),this.instancesOptions.get(P)||{}},H.prototype.initialize=function(P){var k,W;void 0===P&&(P={});var G=P.options,z=void 0===G?{}:G,oe=this.normalizeInstanceIdentifier(P.instanceIdentifier);if(this.isInitialized(oe))throw Error(this.name+"("+oe+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var Q=this.getOrInitializeService({instanceIdentifier:oe,options:z});try{for(var K=(0,v.XA)(this.instancesDeferred.entries()),Te=K.next();!Te.done;Te=K.next()){var Ie=(0,v.CR)(Te.value,2),Re=Ie[1];oe===this.normalizeInstanceIdentifier(Ie[0])&&Re.resolve(Q)}}catch(xe){k={error:xe}}finally{try{Te&&!Te.done&&(W=K.return)&&W.call(K)}finally{if(k)throw k.error}}return Q},H.prototype.onInit=function(P,k){var W,G=this.normalizeInstanceIdentifier(k),z=null!==(W=this.onInitCallbacks.get(G))&&void 0!==W?W:new Set;z.add(P),this.onInitCallbacks.set(G,z);var oe=this.instances.get(G);return oe&&P(oe,G),function(){z.delete(P)}},H.prototype.invokeOnInitCallbacks=function(P,k){var W,G,z=this.onInitCallbacks.get(k);if(z)try{for(var oe=(0,v.XA)(z),Q=oe.next();!Q.done;Q=oe.next()){var K=Q.value;try{K(P,k)}catch(Te){}}}catch(Te){W={error:Te}}finally{try{Q&&!Q.done&&(G=oe.return)&&G.call(oe)}finally{if(W)throw W.error}}},H.prototype.getOrInitializeService=function(P){var k=P.instanceIdentifier,W=P.options,G=void 0===W?{}:W,z=this.instances.get(k);if(!z&&this.component&&(z=this.component.instanceFactory(this.container,{instanceIdentifier:ee(k),options:G}),this.instances.set(k,z),this.instancesOptions.set(k,G),this.invokeOnInitCallbacks(z,k),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,k,z)}catch(oe){}return z||null},H.prototype.normalizeInstanceIdentifier=function(P){return void 0===P&&(P=de),this.component?this.component.multipleInstances?P:de:P},H.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},H}();function ee(H){return H===de?void 0:H}var ae=function(){function H(P){this.name=P,this.providers=new Map}return H.prototype.addComponent=function(P){var k=this.getProvider(P.name);if(k.isComponentSet())throw new Error("Component "+P.name+" has already been registered with "+this.name);k.setComponent(P)},H.prototype.addOrOverwriteComponent=function(P){this.getProvider(P.name).isComponentSet()&&this.providers.delete(P.name),this.addComponent(P)},H.prototype.getProvider=function(P){if(this.providers.has(P))return this.providers.get(P);var k=new ce(P,this);return this.providers.set(P,k),k},H.prototype.getProviders=function(){return Array.from(this.providers.values())},H}()},5601:(je,ge,F)=>{"use strict";F.d(ge,{in:()=>Y,Yd:()=>fe,Ub:()=>ae,Am:()=>H});const v=[];var Y=(()=>{return(P=Y||(Y={}))[P.DEBUG=0]="DEBUG",P[P.VERBOSE=1]="VERBOSE",P[P.INFO=2]="INFO",P[P.WARN=3]="WARN",P[P.ERROR=4]="ERROR",P[P.SILENT=5]="SILENT",Y;var P})();const L={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},de=Y.INFO,ce={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},ee=(P,k,...W)=>{if(k<P.logLevel)return;const G=(new Date).toISOString(),z=ce[k];if(!z)throw new Error(`Attempted to log a message with an invalid logType (value: ${k})`);console[z](`[${G}]  ${P.name}:`,...W)};class fe{constructor(k){this.name=k,this._logLevel=de,this._logHandler=ee,this._userLogHandler=null,v.push(this)}get logLevel(){return this._logLevel}set logLevel(k){if(!(k in Y))throw new TypeError(`Invalid value "${k}" assigned to \`logLevel\``);this._logLevel=k}setLogLevel(k){this._logLevel="string"==typeof k?L[k]:k}get logHandler(){return this._logHandler}set logHandler(k){if("function"!=typeof k)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=k}get userLogHandler(){return this._userLogHandler}set userLogHandler(k){this._userLogHandler=k}debug(...k){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...k),this._logHandler(this,Y.DEBUG,...k)}log(...k){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...k),this._logHandler(this,Y.VERBOSE,...k)}info(...k){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...k),this._logHandler(this,Y.INFO,...k)}warn(...k){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...k),this._logHandler(this,Y.WARN,...k)}error(...k){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...k),this._logHandler(this,Y.ERROR,...k)}}function ae(P){v.forEach(k=>{k.setLogLevel(P)})}function H(P,k){for(const W of v){let G=null;k&&k.level&&(G=L[k.level]),W.userLogHandler=null===P?null:(z,oe,...Q)=>{const K=Q.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(Ie){return null}}).filter(Te=>Te).join(" ");oe>=(null!=G?G:z.logLevel)&&P({level:Y[oe].toLowerCase(),message:K,args:Q,type:z.name})}}}},3854:(je,ge,F)=>{"use strict";F.d(ge,{BH:()=>G,LL:()=>Z,ZR:()=>re,tV:()=>H,r3:()=>Kt,Sg:()=>z,ne:()=>hs,vZ:()=>Li,ZB:()=>k,pd:()=>fr,m9:()=>Js,z$:()=>oe,jU:()=>Te,ru:()=>Ie,d:()=>Re,xb:()=>Ct,w1:()=>Me,hl:()=>pe,uI:()=>Q,UG:()=>K,b$:()=>we,G6:()=>mt,Mn:()=>xe,xO:()=>ii,zd:()=>si});const de=function(U){const B=[];let V=0;for(let me=0;me<U.length;me++){let J=U.charCodeAt(me);J<128?B[V++]=J:J<2048?(B[V++]=J>>6|192,B[V++]=63&J|128):55296==(64512&J)&&me+1<U.length&&56320==(64512&U.charCodeAt(me+1))?(J=65536+((1023&J)<<10)+(1023&U.charCodeAt(++me)),B[V++]=J>>18|240,B[V++]=J>>12&63|128,B[V++]=J>>6&63|128,B[V++]=63&J|128):(B[V++]=J>>12|224,B[V++]=J>>6&63|128,B[V++]=63&J|128)}return B},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,B){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,me=[];for(let J=0;J<U.length;J+=3){const Ve=U[J],Pe=J+1<U.length,Tt=Pe?U[J+1]:0,Xt=J+2<U.length,Lt=Xt?U[J+2]:0;let Vt=(15&Tt)<<2|Lt>>6,Wn=63&Lt;Xt||(Wn=64,Pe||(Vt=64)),me.push(V[Ve>>2],V[(3&Ve)<<4|Tt>>4],V[Vt],V[Wn])}return me.join("")},encodeString(U,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(U):this.encodeByteArray(de(U),B)},decodeString(U,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(U):function(U){const B=[];let V=0,me=0;for(;V<U.length;){const J=U[V++];if(J<128)B[me++]=String.fromCharCode(J);else if(J>191&&J<224){const Ve=U[V++];B[me++]=String.fromCharCode((31&J)<<6|63&Ve)}else if(J>239&&J<365){const Xt=((7&J)<<18|(63&U[V++])<<12|(63&U[V++])<<6|63&U[V++])-65536;B[me++]=String.fromCharCode(55296+(Xt>>10)),B[me++]=String.fromCharCode(56320+(1023&Xt))}else{const Ve=U[V++],Pe=U[V++];B[me++]=String.fromCharCode((15&J)<<12|(63&Ve)<<6|63&Pe)}}return B.join("")}(this.decodeStringToByteArray(U,B))},decodeStringToByteArray(U,B){this.init_();const V=B?this.charToByteMapWebSafe_:this.charToByteMap_,me=[];for(let J=0;J<U.length;){const Ve=V[U.charAt(J++)],Tt=J<U.length?V[U.charAt(J)]:0;++J;const Lt=J<U.length?V[U.charAt(J)]:64;++J;const dt=J<U.length?V[U.charAt(J)]:64;if(++J,null==Ve||null==Tt||null==Lt||null==dt)throw Error();me.push(Ve<<2|Tt>>4),64!==Lt&&(me.push(Tt<<4&240|Lt>>2),64!==dt&&me.push(Lt<<6&192|dt))}return me},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ae=function(U){return function(U){const B=de(U);return ee.encodeByteArray(B,!0)}(U).replace(/\./g,"")},H=function(U){try{return ee.decodeString(U,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function k(U,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return B}for(const V in B)!B.hasOwnProperty(V)||!W(V)||(U[V]=k(U[V],B[V]));return U}function W(U){return"__proto__"!==U}class G{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,V)=>{this.resolve=B,this.reject=V})}wrapCallback(B){return(V,me)=>{V?this.reject(V):this.resolve(me),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(V):B(V,me))}}}function z(U,B){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const me=B||"demo-project",J=U.iat||0,Ve=U.sub||U.user_id;if(!Ve)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Pe=Object.assign({iss:`https://securetoken.google.com/${me}`,aud:me,iat:J,exp:J+3600,auth_time:J,sub:Ve,user_id:Ve,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Pe)),""].join(".")}function oe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Q(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(oe())}function K(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Te(){return"object"==typeof self&&self.self===self}function Ie(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function we(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return oe().indexOf("Electron/")>=0}function Me(){const U=oe();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function xe(){return oe().indexOf("MSAppHost/")>=0}function mt(){return!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pe(){return"object"==typeof indexedDB}class re extends Error{constructor(B,V,me){super(V),this.code=B,this.customData=me,this.name="FirebaseError",Object.setPrototypeOf(this,re.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Z.prototype.create)}}class Z{constructor(B,V,me){this.service=B,this.serviceName=V,this.errors=me}create(B,...V){const me=V[0]||{},J=`${this.service}/${B}`,Ve=this.errors[B],Pe=Ve?function(U,B){return U.replace($e,(V,me)=>{const J=B[me];return null!=J?String(J):`<${me}?>`})}(Ve,me):"Error";return new re(J,`${this.serviceName}: ${Pe} (${J}).`,me)}}const $e=/\{\$([^}]+)}/g;function Kt(U,B){return Object.prototype.hasOwnProperty.call(U,B)}function Ct(U){for(const B in U)if(Object.prototype.hasOwnProperty.call(U,B))return!1;return!0}function Li(U,B){if(U===B)return!0;const V=Object.keys(U),me=Object.keys(B);for(const J of V){if(!me.includes(J))return!1;const Ve=U[J],Pe=B[J];if(Yt(Ve)&&Yt(Pe)){if(!Li(Ve,Pe))return!1}else if(Ve!==Pe)return!1}for(const J of me)if(!V.includes(J))return!1;return!0}function Yt(U){return null!==U&&"object"==typeof U}function ii(U){const B=[];for(const[V,me]of Object.entries(U))Array.isArray(me)?me.forEach(J=>{B.push(encodeURIComponent(V)+"="+encodeURIComponent(J))}):B.push(encodeURIComponent(V)+"="+encodeURIComponent(me));return B.length?"&"+B.join("&"):""}function si(U){const B={};return U.replace(/^\?/,"").split("&").forEach(me=>{if(me){const[J,Ve]=me.split("=");B[decodeURIComponent(J)]=decodeURIComponent(Ve)}}),B}function fr(U){const B=U.indexOf("?");if(!B)return"";const V=U.indexOf("#",B);return U.substring(B,V>0?V:void 0)}function hs(U,B){const V=new Ys(U,B);return V.subscribe.bind(V)}class Ys{constructor(B,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{B(this)}).catch(me=>{this.error(me)})}next(B){this.forEachObserver(V=>{V.next(B)})}error(B){this.forEachObserver(V=>{V.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,V,me){let J;if(void 0===B&&void 0===V&&void 0===me)throw new Error("Missing Observer.");J=function(U,B){if("object"!=typeof U||null===U)return!1;for(const V of["next","error","complete"])if(V in U&&"function"==typeof U[V])return!0;return!1}(B)?B:{next:B,error:V,complete:me},void 0===J.next&&(J.next=Tr),void 0===J.error&&(J.error=Tr),void 0===J.complete&&(J.complete=Tr);const Ve=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?J.error(this.finalError):J.complete()}catch(Pe){}}),this.observers.push(J),Ve}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,B)}sendOne(B,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{V(this.observers[B])}catch(me){"undefined"!=typeof console&&console.error&&console.error(me)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Tr(){}function Js(U){return U&&U._delegate?U._delegate:U}},7841:(je,ge,F)=>{"use strict";F.d(ge,{Z:()=>v.Z});var v=F(4486);v.Z.registerVersion("firebase","9.1.0","app-compat")},670:(je,ge,F)=>{"use strict";F.r(ge);var v=F(8239),Y=F(4486),L=F(3854),de=F(5452),ce=F(4762),ee=F(5601),fe=F(6034);const oe=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Q=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},K=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ie=new ee.Yd("@firebase/auth");function we(w,...g){Ie.logLevel<=ee.in.ERROR&&Ie.error(`Auth (${de.SDK_VERSION}): ${w}`,...g)}function Re(w,...g){throw mt(w,...g)}function Me(w,...g){return mt(w,...g)}function xe(w,g,y){const I=Object.assign(Object.assign({},Q()),{[g]:y});return new L.LL("auth","Firebase",I).create(g,{appName:w.name})}function it(w,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Re(w,"argument-error"),xe(w,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mt(w,...g){if("string"!=typeof w){const y=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=w.name),w._errorFactory.create(y,...I)}return K.create(w,...g)}function pe(w,g,...y){if(!w)throw mt(g,...y)}function X(w){const g="INTERNAL ASSERTION FAILED: "+w;throw we(g),new Error(g)}function te(w,g){w||X(g)}const ie=new Map;function ne(w){te(w instanceof Function,"Expected a class definition");let g=ie.get(w);return g?(te(g instanceof w,"Instance stored in cache mismatched with class"),g):(g=new w,ie.set(w,g),g)}function Ce(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function $e(){return"http:"===lt()||"https:"===lt()}function lt(){var w;return"undefined"!=typeof self&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class Bt{constructor(g,y){this.shortDelay=g,this.longDelay=y,te(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||(0,L.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function on(w,g){te(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class Gr{static initialize(g,y,I){this.fetchImpl=g,y&&(this.headersImpl=y),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void X("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void X("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void X("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const qr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new Bt(3e4,6e4);function Ke(w,g){return w.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:w.tenantId}):g}function Ct(w,g,y,I){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,v.Z)(function*(w,g,y,I,S={}){return Li(w,S,()=>{let M={},j={};I&&("GET"===g?j=I:M={body:JSON.stringify(I)});const ue=(0,L.xO)(Object.assign({key:w.config.apiKey},j)).slice(1),Ae=new(Gr.headers());return Ae.set("Content-Type","application/json"),Ae.set("X-Client-Version",w._getSdkClientVersion()),w.languageCode&&Ae.set("X-Firebase-Locale",w.languageCode),Gr.fetch()(fr(w,w.config.apiHost,y,ue),Object.assign({method:g,headers:Ae,referrerPolicy:"no-referrer"},M))})})).apply(this,arguments)}function Li(w,g,y){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,v.Z)(function*(w,g,y){w._canInitEmulator=!1;const I=Object.assign(Object.assign({},qr),g);try{const S=new Wo(w),M=yield Promise.race([y(),S.promise]);S.clearNetworkTimeout();const j=yield M.json();if("needConfirmation"in j)throw hs(w,"account-exists-with-different-credential",j);if(M.ok&&!("errorMessage"in j))return j;{const ue=M.ok?j.errorMessage:j.error.message,[Ae,Se]=ue.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ae)throw hs(w,"credential-already-in-use",j);if("EMAIL_EXISTS"===Ae)throw hs(w,"email-already-in-use",j);const ze=I[Ae]||Ae.toLowerCase().replace(/[_\s]+/g,"-");if(Se)throw xe(w,ze,Se);Re(w,ze)}}catch(S){if(S instanceof L.ZR)throw S;Re(w,"network-request-failed")}})).apply(this,arguments)}function ii(w,g,y,I){return si.apply(this,arguments)}function si(){return(si=(0,v.Z)(function*(w,g,y,I,S={}){const M=yield Ct(w,g,y,I,S);return"mfaPendingCredential"in M&&Re(w,"multi-factor-auth-required",{serverResponse:M}),M})).apply(this,arguments)}function fr(w,g,y,I){const S=`${g}${y}?${I}`;return w.config.emulator?on(w.config,S):`${w.config.apiScheme}://${S}`}class Wo{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,I)=>{this.timer=setTimeout(()=>I(Me(this.auth,"timeout")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function hs(w,g,y){const I={appName:w.name};y.email&&(I.email=y.email),y.phoneNumber&&(I.phoneNumber=y.phoneNumber);const S=Me(w,g,I);return S.customData._tokenResponse=y,S}function fs(){return(fs=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function In(w,g){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ga(w,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ve(w){if(w)try{const g=new Date(Number(w));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Jt(){return(Jt=(0,v.Z)(function*(w,g=!1){const y=(0,L.m9)(w),I=yield y.getIdToken(g),S=Ue(I);pe(S&&S.exp&&S.auth_time&&S.iat,y.auth,"internal-error");const M="object"==typeof S.firebase?S.firebase:void 0,j=null==M?void 0:M.sign_in_provider;return{claims:S,token:I,authTime:ve(Dt(S.auth_time)),issuedAtTime:ve(Dt(S.iat)),expirationTime:ve(Dt(S.exp)),signInProvider:j||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function Dt(w){return 1e3*Number(w)}function Ue(w){const[g,y,I]=w.split(".");if(void 0===g||void 0===y||void 0===I)return we("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,L.tV)(y);return S?JSON.parse(S):(we("Failed to decode base64 JWT payload"),null)}catch(S){return we("Caught error parsing JWT payload as JSON",S),null}}function an(w,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,v.Z)(function*(w,g,y=!1){if(y)return g;try{return yield g}catch(I){throw I instanceof L.ZR&&Vi(I)&&w.auth.currentUser===w&&(yield w.auth.signOut()),I}})).apply(this,arguments)}function Vi({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class un{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const S=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,v.Z)(function*(){yield y.iteration()}),I)}iteration(){var g=this;return(0,v.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class pr{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ve(this.lastLoginAt),this.creationTime=ve(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Js(w){return U.apply(this,arguments)}function U(){return(U=(0,v.Z)(function*(w){var g;const y=w.auth,I=yield w.getIdToken(),S=yield an(w,Ga(y,{idToken:I}));pe(null==S?void 0:S.users.length,y,"internal-error");const M=S.users[0];w._notifyReloadListener(M);const j=(null===(g=M.providerUserInfo)||void 0===g?void 0:g.length)?J(M.providerUserInfo):[],ue=me(w.providerData,j),ze=!!w.isAnonymous&&!(w.email&&M.passwordHash||(null==ue?void 0:ue.length)),Fe={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:ue,metadata:new pr(M.createdAt,M.lastLoginAt),isAnonymous:ze};Object.assign(w,Fe)})).apply(this,arguments)}function V(){return(V=(0,v.Z)(function*(w){const g=(0,L.m9)(w);yield Js(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function me(w,g){return[...w.filter(I=>!g.some(S=>S.providerId===I.providerId)),...g]}function J(w){return w.map(g=>{var{providerId:y}=g,I=(0,ce._T)(g,["providerId"]);return{providerId:y,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Pe(){return(Pe=(0,v.Z)(function*(w,g){const y=yield Li(w,{},()=>{const I=(0,L.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:S,apiKey:M}=w.config,j=fr(w,S,"/v1/token",`key=${M}`);return Gr.fetch()(j,{method:"POST",headers:{"X-Client-Version":w._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:I})});return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Tt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){pe(g.idToken,"internal-error"),pe(void 0!==g.idToken,"internal-error"),pe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(w){const g=Ue(w);return pe(g,"internal-error"),pe(void 0!==g.exp,"internal-error"),pe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var I=this;return(0,v.Z)(function*(){return pe(!I.accessToken||I.refreshToken,g,"user-token-expired"),y||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var I=this;return(0,v.Z)(function*(){const{accessToken:S,refreshToken:M,expiresIn:j}=yield function(w,g){return Pe.apply(this,arguments)}(g,y);I.updateTokensAndExpiration(S,M,Number(j))})()}updateTokensAndExpiration(g,y,I){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,y){const{refreshToken:I,accessToken:S,expirationTime:M}=y,j=new Tt;return I&&(pe("string"==typeof I,"internal-error",{appName:g}),j.refreshToken=I),S&&(pe("string"==typeof S,"internal-error",{appName:g}),j.accessToken=S),M&&(pe("number"==typeof M,"internal-error",{appName:g}),j.expirationTime=M),j}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Tt,this.toJSON())}_performRefresh(){return X("not implemented")}}function Xt(w,g){pe("string"==typeof w||void 0===w,"internal-error",{appName:g})}class Lt{constructor(g){var{uid:y,auth:I,stsTokenManager:S}=g,M=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=I,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.metadata=new pr(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,v.Z)(function*(){const I=yield an(y,y.stsTokenManager.getToken(y.auth,g));return pe(I,y.auth,"internal-error"),y.accessToken!==I&&(y.accessToken=I,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),I})()}getIdTokenResult(g){return function(w){return Jt.apply(this,arguments)}(this,g)}reload(){return function(w){return V.apply(this,arguments)}(this)}_assign(g){this!==g&&(pe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Lt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var I=this;return(0,v.Z)(function*(){let S=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),S=!0),y&&(yield Js(I)),yield I.auth._persistUserIfCurrent(I),S&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,v.Z)(function*(){const y=yield g.getIdToken();return yield an(g,function(w,g){return fs.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var I,S,M,j,ue,Ae,Se,ze;const Fe=null!==(I=y.displayName)&&void 0!==I?I:void 0,xt=null!==(S=y.email)&&void 0!==S?S:void 0,dn=null!==(M=y.phoneNumber)&&void 0!==M?M:void 0,Pu=null!==(j=y.photoURL)&&void 0!==j?j:void 0,kh=null!==(ue=y.tenantId)&&void 0!==ue?ue:void 0,vc=null!==(Ae=y._redirectEventId)&&void 0!==Ae?Ae:void 0,Fh=null!==(Se=y.createdAt)&&void 0!==Se?Se:void 0,ng=null!==(ze=y.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:fa,emailVerified:ku,isAnonymous:Lh,providerData:kn,stsTokenManager:Ji}=y;pe(fa&&Ji,g,"internal-error");const Wt=Tt.fromJSON(this.name,Ji);pe("string"==typeof fa,g,"internal-error"),Xt(Fe,g.name),Xt(xt,g.name),pe("boolean"==typeof ku,g,"internal-error"),pe("boolean"==typeof Lh,g,"internal-error"),Xt(dn,g.name),Xt(Pu,g.name),Xt(kh,g.name),Xt(vc,g.name),Xt(Fh,g.name),Xt(ng,g.name);const Vh=new Lt({uid:fa,auth:g,email:xt,emailVerified:ku,displayName:Fe,isAnonymous:Lh,photoURL:Pu,phoneNumber:dn,tenantId:kh,stsTokenManager:Wt,createdAt:Fh,lastLoginAt:ng});return kn&&Array.isArray(kn)&&(Vh.providerData=kn.map(d_=>Object.assign({},d_))),vc&&(Vh._redirectEventId=vc),Vh}static _fromIdTokenResponse(g,y,I=!1){return(0,v.Z)(function*(){const S=new Tt;S.updateFromServerResponse(y);const M=new Lt({uid:y.localId,auth:g,stsTokenManager:S,isAnonymous:I});return yield Js(M),M})()}}const dt=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,v.Z)(function*(){return!0})()}_set(y,I){var S=this;return(0,v.Z)(function*(){S.storage[y]=I})()}_get(y){var I=this;return(0,v.Z)(function*(){const S=I.storage[y];return void 0===S?null:S})()}_remove(y){var I=this;return(0,v.Z)(function*(){delete I.storage[y]})()}_addListener(y,I){}_removeListener(y,I){}}return w.type="NONE",w})();function Vt(w,g,y){return`firebase:${w}:${g}:${y}`}class Wn{constructor(g,y,I){this.persistence=g,this.auth=y,this.userKey=I;const{config:S,name:M}=this.auth;this.fullUserKey=Vt(this.userKey,S.apiKey,M),this.fullPersistenceKey=Vt("persistence",S.apiKey,M),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,v.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Lt._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,v.Z)(function*(){if(y.persistence===g)return;const I=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,I?y.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,I="authUser"){return(0,v.Z)(function*(){if(!y.length)return new Wn(ne(dt),g,I);const S=(yield Promise.all(y.map(function(){var Se=(0,v.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return Se.apply(this,arguments)}}()))).filter(Se=>Se);let M=S[0]||ne(dt);const j=Vt(I,g.config.apiKey,g.name);let ue=null;for(const Se of y)try{const ze=yield Se._get(j);if(ze){const Fe=Lt._fromJSON(g,ze);Se!==M&&(ue=Fe),M=Se;break}}catch(ze){}const Ae=S.filter(Se=>Se._shouldAllowMigration);return M._shouldAllowMigration&&Ae.length?(M=Ae[0],ue&&(yield M._set(j,ue.toJSON())),yield Promise.all(y.map(function(){var Se=(0,v.Z)(function*(ze){if(ze!==M)try{yield ze._remove(j)}catch(Fe){}});return function(ze){return Se.apply(this,arguments)}}())),new Wn(M,g,I)):new Wn(M,g,I)})()}}function xl(w){const g=w.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(Rl(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Nl(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(qa(g))return"Blackberry";if(Zo(g))return"Webos";if(xd(g))return"Safari";if((g.includes("chrome/")||Nd(g))&&!g.includes("edge/"))return"Chrome";if(zo(g))return"Android";{const I=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Nl(w=(0,L.z$)()){return/firefox\//i.test(w)}function xd(w=(0,L.z$)()){const g=w.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Nd(w=(0,L.z$)()){return/crios\//i.test(w)}function Rl(w=(0,L.z$)()){return/iemobile/i.test(w)}function zo(w=(0,L.z$)()){return/android/i.test(w)}function qa(w=(0,L.z$)()){return/blackberry/i.test(w)}function Zo(w=(0,L.z$)()){return/webos/i.test(w)}function oi(w=(0,L.z$)()){return/iphone|ipad|ipod/i.test(w)}function vi(w=(0,L.z$)()){return oi(w)||zo(w)||Zo(w)||qa(w)||/windows phone/i.test(w)||Rl(w)}function ir(w,g=[]){let y;switch(w){case"Browser":y=xl((0,L.z$)());break;case"Worker":y=`${xl((0,L.z$)())}-${w}`;break;default:y=w}const I=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${de.SDK_VERSION}/${I}`}class Dy{constructor(g,y){this.app=g,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Oe(this),this.idTokenSubscription=new Oe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=K,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(g,y){var I=this;return y&&(this._popupRedirectResolver=ne(y)),this._initializationPromise=this.queue((0,v.Z)(function*(){var S;I._deleted||(I.persistenceManager=yield Wn.create(I,g),!I._deleted&&((null===(S=I._popupRedirectResolver)||void 0===S?void 0:S._shouldInitProactively)&&(yield I._popupRedirectResolver._initialize(I)),yield I.initializeCurrentUser(y),!I._deleted&&(I._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,v.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,v.Z)(function*(){var I;let S=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const M=null===(I=y.redirectUser)||void 0===I?void 0:I._redirectEventId,j=null==S?void 0:S._redirectEventId,ue=yield y.tryRedirectSignIn(g);(!M||M===j)&&(null==ue?void 0:ue.user)&&(S=ue.user)}return S?S._redirectEventId?(pe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===S._redirectEventId?y.directlySetCurrentUser(S):y.reloadAndSetCurrentUserOrClear(S)):y.reloadAndSetCurrentUserOrClear(S):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,v.Z)(function*(){let I=null;try{I=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(S){yield y._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,v.Z)(function*(){try{yield Js(g)}catch(I){if("auth/network-request-failed"!==I.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var g=this;return(0,v.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,v.Z)(function*(){const I=g?(0,L.m9)(g):null;return I&&pe(I.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(I&&I._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,v.Z)(function*(){if(!y._deleted)return g&&pe(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,v.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,v.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,v.Z)(function*(){yield y.assertedPersistence.setPersistence(ne(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new L.LL("auth","Firebase",g())}onAuthStateChanged(g,y,I){return this.registerStateListener(this.authStateSubscription,g,y,I)}onIdTokenChanged(g,y,I){return this.registerStateListener(this.idTokenSubscription,g,y,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var I=this;return(0,v.Z)(function*(){const S=yield I.getOrInitRedirectPersistenceManager(y);return null===g?S.removeCurrentUser():S.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,v.Z)(function*(){if(!y.redirectPersistenceManager){const I=g&&ne(g)||y._popupRedirectResolver;pe(I,y,"argument-error"),y.redirectPersistenceManager=yield Wn.create(y,[ne(I._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,v.Z)(function*(){var I,S;return y._isInitialized&&(yield y.queue((0,v.Z)(function*(){}))),(null===(I=y._currentUser)||void 0===I?void 0:I._redirectEventId)===g?y._currentUser:(null===(S=y.redirectUser)||void 0===S?void 0:S._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,v.Z)(function*(){if(g===y.currentUser)return y.queue((0,v.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,I,S){if(this._deleted)return()=>{};const M="function"==typeof y?y:y.next.bind(y),j=this._isInitialized?Promise.resolve():this._initializationPromise;return pe(j,this,"internal-error"),j.then(()=>M(this.currentUser)),"function"==typeof y?g.addObserver(y,I,S):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,v.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=ir(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function At(w){return(0,L.m9)(w)}class Oe{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,L.ne)(y=>this.observer=y)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ut(w){const g=w.indexOf(":");return g<0?"":w.substr(0,g+1)}function ps(w){if(!w)return null;const g=Number(w);return isNaN(g)?null:g}class sr{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return X("not implemented")}_getIdTokenResponse(g){return X("not implemented")}_linkToIdToken(g,y){return X("not implemented")}_getReauthenticationResolver(g){return X("not implemented")}}function en(w,g){return eo.apply(this,arguments)}function eo(){return(eo=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:resetPassword",Ke(w,g))})).apply(this,arguments)}function Ko(w,g){return nt.apply(this,arguments)}function nt(){return(nt=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Ml(w,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:update",Ke(w,g))})).apply(this,arguments)}function Ui(){return(Ui=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithPassword",Ke(w,g))})).apply(this,arguments)}function Dn(w,g){return to.apply(this,arguments)}function to(){return(to=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:sendOobCode",Ke(w,g))})).apply(this,arguments)}function ms(w,g){return xr.apply(this,arguments)}function xr(){return(xr=(0,v.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function Pt(w,g){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,v.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function Md(w,g){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,v.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function Od(w,g){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,v.Z)(function*(w,g){return Dn(w,g)})).apply(this,arguments)}function Bi(){return(Bi=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithEmailLink",Ke(w,g))})).apply(this,arguments)}function Pd(){return(Pd=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithEmailLink",Ke(w,g))})).apply(this,arguments)}class Nr extends sr{constructor(g,y,I,S=null){super("password",I),this._email=g,this._password=y,this._tenantId=S}static _fromEmailAndPassword(g,y){return new Nr(g,y,"password")}static _fromEmailAndCode(g,y,I=null){return new Nr(g,y,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,v.Z)(function*(){switch(y.signInMethod){case"password":return function(w,g){return Ui.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function(w,g){return Bi.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Re(g,"internal-error")}})()}_linkToIdToken(g,y){var I=this;return(0,v.Z)(function*(){switch(I.signInMethod){case"password":return Ko(g,{idToken:y,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function(w,g){return Pd.apply(this,arguments)}(g,{idToken:y,email:I._email,oobCode:I._password});default:Re(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function St(w,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithIdp",Ke(w,g))})).apply(this,arguments)}class Rr extends sr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new Rr(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Re("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:S}=y,M=(0,ce._T)(y,["providerId","signInMethod"]);if(!I||!S)return null;const j=new Rr(I,S);return Object.assign(j,M),j}_getIdTokenResponse(g){return St(g,this.buildRequest())}_linkToIdToken(g,y){const I=this.buildRequest();return I.idToken=y,St(g,I)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,St(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,L.xO)(y)}return g}}function ai(w,g){return kd.apply(this,arguments)}function kd(){return(kd=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:sendVerificationCode",Ke(w,g))})).apply(this,arguments)}function Fd(){return(Fd=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithPhoneNumber",Ke(w,g))})).apply(this,arguments)}function yp(){return(yp=(0,v.Z)(function*(w,g){const y=yield ii(w,"POST","/v1/accounts:signInWithPhoneNumber",Ke(w,g));if(y.temporaryProof)throw hs(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const uw={USER_NOT_FOUND:"user-not-found"};function _p(){return(_p=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithPhoneNumber",Ke(w,Object.assign(Object.assign({},g),{operation:"REAUTH"})),uw)})).apply(this,arguments)}class Jo extends sr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new Jo({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new Jo({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function(w,g){return Fd.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function(w,g){return yp.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(w,g){return _p.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:I,verificationCode:S}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:I,code:S}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:I,phoneNumber:S,temporaryProof:M}=g;return I||y||S||M?new Jo({verificationId:y,verificationCode:I,phoneNumber:S,temporaryProof:M}):null}}class Pl{constructor(g){var y,I,S,M,j,ue;const Ae=(0,L.zd)((0,L.pd)(g)),Se=null!==(y=Ae.apiKey)&&void 0!==y?y:null,ze=null!==(I=Ae.oobCode)&&void 0!==I?I:null,Fe=function(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Ae.mode)&&void 0!==S?S:null);pe(Se&&ze&&Fe,"argument-error"),this.apiKey=Se,this.operation=Fe,this.code=ze,this.continueUrl=null!==(M=Ae.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(j=Ae.languageCode)&&void 0!==j?j:null,this.tenantId=null!==(ue=Ae.tenantId)&&void 0!==ue?ue:null}static parseLink(g){const y=function(w){const g=(0,L.zd)((0,L.pd)(w)).link,y=g?(0,L.zd)((0,L.pd)(g)).deep_link_id:null,I=(0,L.zd)((0,L.pd)(w)).deep_link_id;return(I?(0,L.zd)((0,L.pd)(I)).link:null)||I||y||g||w}(g);try{return new Pl(y)}catch(I){return null}}}let vp=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,I){return Nr._fromEmailAndPassword(y,I)}static credentialWithLink(y,I){const S=Pl.parseLink(I);return pe(S,"argument-error"),Nr._fromEmailAndCode(y,S.code,S.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class no{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Ka extends no{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ro extends Ka{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return pe("providerId"in y&&"signInMethod"in y,"argument-error"),Rr._fromParams(y)}credential(g){return this._credential(g)}_credential(g){return pe(g.idToken||g.accessToken,"argument-error"),Rr._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ro.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ro.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:I,oauthTokenSecret:S,pendingToken:M,nonce:j,providerId:ue}=g;if(!I&&!S&&!y&&!M||!ue)return null;try{return new ro(ue)._credential({idToken:y,accessToken:I,rawNonce:j,pendingToken:M})}catch(Ae){return null}}}let Ld=(()=>{class w extends Ka{constructor(){super("facebook.com")}static credential(y){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(I){return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),Vd=(()=>{class w extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(y,I){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:I})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:I,oauthAccessToken:S}=y;if(!I&&!S)return null;try{return w.credential(I,S)}catch(M){return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),Ud=(()=>{class w extends Ka{constructor(){super("github.com")}static credential(y){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch(I){return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class Xo extends sr{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return St(g,this.buildRequest())}_linkToIdToken(g,y){const I=this.buildRequest();return I.idToken=y,St(g,I)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,St(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:S,pendingToken:M}=y;return I&&S&&M&&I===S?new Xo(I,M):null}static _create(g,y){return new Xo(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let Bd=(()=>{class w extends Ka{constructor(){super("twitter.com")}static credential(y,I){return Rr._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:I})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:I,oauthTokenSecret:S}=y;if(!I||!S)return null;try{return w.credential(I,S)}catch(M){return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function jd(w,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signUp",Ke(w,g))})).apply(this,arguments)}class ui{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,I,S=!1){return(0,v.Z)(function*(){const M=yield Lt._fromIdTokenResponse(g,I,S),j=Ay(I);return new ui({user:M,providerId:j,_tokenResponse:I,operationType:y})})()}static _forOperation(g,y,I){return(0,v.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const S=Ay(I);return new ui({user:g,providerId:S,_tokenResponse:I,operationType:y})})()}}function Ay(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function Qa(){return(Qa=(0,v.Z)(function*(w){var g;const y=At(w);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new ui({user:y.currentUser,providerId:null,operationType:"signIn"});const I=yield jd(y,{returnSecureToken:!0}),S=yield ui._fromIdTokenResponse(y,"signIn",I,!0);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class kl extends L.ZR{constructor(g,y,I,S){var M;super(y.code,y.message),this.operationType=I,this.user=S,this.name="FirebaseError",Object.setPrototypeOf(this,kl.prototype),this.appName=g.name,this.code=y.code,this.tenantId=null!==(M=g.tenantId)&&void 0!==M?M:void 0,this.serverResponse=y.customData.serverResponse}static _fromErrorAndOperation(g,y,I,S){return new kl(g,y,I,S)}}function Ja(w,g,y,I){return("reauthenticate"===g?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?kl._fromErrorAndOperation(w,M,g,I):M})}function Ep(w){return new Set(w.map(({providerId:g})=>g).filter(g=>!!g))}function Fl(){return(Fl=(0,v.Z)(function*(w,g){const y=(0,L.m9)(w);yield ys(!0,y,g);const{providerUserInfo:I}=yield In(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),S=Ep(I||[]);return y.providerData=y.providerData.filter(M=>S.has(M.providerId)),S.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Ll(w,g){return io.apply(this,arguments)}function io(){return(io=(0,v.Z)(function*(w,g,y=!1){const I=yield an(w,g._linkToIdToken(w.auth,yield w.getIdToken()),y);return ui._forOperation(w,"link",I)})).apply(this,arguments)}function ys(w,g,y){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,v.Z)(function*(w,g,y){yield Js(g);const S=!1===w?"provider-already-linked":"no-such-provider";pe(Ep(g.providerData).has(y)===w,g.auth,S)})).apply(this,arguments)}function Vl(w,g){return jt.apply(this,arguments)}function jt(){return(jt=(0,v.Z)(function*(w,g,y=!1){const{auth:I}=w,S="reauthenticate";try{const M=yield an(w,Ja(I,S,g,w),y);pe(M.idToken,I,"internal-error");const j=Ue(M.idToken);pe(j,I,"internal-error");const{sub:ue}=j;return pe(w.uid===ue,I,"user-mismatch"),ui._forOperation(w,S,M)}catch(M){throw"auth/user-not-found"===(null==M?void 0:M.code)&&Re(I,"user-mismatch"),M}})).apply(this,arguments)}function wp(w,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,v.Z)(function*(w,g,y=!1){const I="signIn",S=yield Ja(w,I,g),M=yield ui._fromIdTokenResponse(w,I,S);return y||(yield w._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Bl(w,g){return $t.apply(this,arguments)}function $t(){return($t=(0,v.Z)(function*(w,g){return wp(At(w),g)})).apply(this,arguments)}function Cp(w,g){return Ip.apply(this,arguments)}function Ip(){return(Ip=(0,v.Z)(function*(w,g){const y=(0,L.m9)(w);return yield ys(!1,y,g.providerId),Ll(y,g)})).apply(this,arguments)}function eu(w,g){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,v.Z)(function*(w,g){return Vl((0,L.m9)(w),g)})).apply(this,arguments)}function gw(w,g){return _s.apply(this,arguments)}function _s(){return(_s=(0,v.Z)(function*(w,g){return ii(w,"POST","/v1/accounts:signInWithCustomToken",Ke(w,g))})).apply(this,arguments)}function or(){return(or=(0,v.Z)(function*(w,g){const y=At(w),I=yield gw(y,{token:g,returnSecureToken:!0}),S=yield ui._fromIdTokenResponse(y,"signIn",I);return yield y._updateCurrentUser(S.user),S})).apply(this,arguments)}class nu{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?ru._fromServerResponse(g,y):Re(g,"internal-error")}}class ru extends nu{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new ru(y)}}function iu(w,g,y){var I;pe((null===(I=y.url)||void 0===I?void 0:I.length)>0,w,"invalid-continue-uri"),pe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(pe(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),g.iosBundleId=y.iOS.bundleId),y.android&&(pe(y.android.packageName.length>0,w,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function jl(){return(jl=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w),S={requestType:"PASSWORD_RESET",email:g};y&&iu(I,S,y),yield Pt(I,S)})).apply(this,arguments)}function Qe(){return(Qe=(0,v.Z)(function*(w,g,y){yield en((0,L.m9)(w),{oobCode:g,newPassword:y})})).apply(this,arguments)}function so(){return(so=(0,v.Z)(function*(w,g){yield Ml((0,L.m9)(w),{oobCode:g})})).apply(this,arguments)}function su(w,g){return ou.apply(this,arguments)}function ou(){return(ou=(0,v.Z)(function*(w,g){const y=(0,L.m9)(w),I=yield en(y,{oobCode:g}),S=I.requestType;switch(pe(S,y,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":pe(I.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":pe(I.mfaInfo,y,"internal-error");default:pe(I.email,y,"internal-error")}let M=null;return I.mfaInfo&&(M=nu._fromServerResponse(At(y),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:S}})).apply(this,arguments)}function oo(){return(oo=(0,v.Z)(function*(w,g){const{data:y}=yield su((0,L.m9)(w),g);return y.email})).apply(this,arguments)}function ye(){return(ye=(0,v.Z)(function*(w,g,y){const I=At(w),S=yield jd(I,{returnSecureToken:!0,email:g,password:y}),M=yield ui._fromIdTokenResponse(I,"signIn",S);return yield I._updateCurrentUser(M.user),M})).apply(this,arguments)}function ln(){return(ln=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w),S={requestType:"EMAIL_SIGNIN",email:g};pe(y.handleCodeInApp,I,"argument-error"),y&&iu(I,S,y),yield Md(I,S)})).apply(this,arguments)}function Wr(){return(Wr=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w),S=vp.credentialWithLink(g,y||Ce());return pe(S._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Bl(I,S)})).apply(this,arguments)}function qd(w,g){return Es.apply(this,arguments)}function Es(){return(Es=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:createAuthUri",Ke(w,g))})).apply(this,arguments)}function Tp(){return(Tp=(0,v.Z)(function*(w,g){const I={identifier:g,continueUri:$e()?Ce():"http://localhost"},{signinMethods:S}=yield qd((0,L.m9)(w),I);return S||[]})).apply(this,arguments)}function ws(){return(ws=(0,v.Z)(function*(w,g){const y=(0,L.m9)(w),S={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};g&&iu(y.auth,S,g);const{email:M}=yield ms(y.auth,S);M!==w.email&&(yield w.reload())})).apply(this,arguments)}function zr(){return(zr=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:g};y&&iu(I.auth,M,y);const{email:j}=yield Od(I.auth,M);j!==w.email&&(yield w.reload())})).apply(this,arguments)}function Wd(w,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,v.Z)(function*(w,g){return Ct(w,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function zd(){return(zd=(0,v.Z)(function*(w,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const I=(0,L.m9)(w),M={idToken:yield I.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},j=yield an(I,Wd(I.auth,M));I.displayName=j.displayName||null,I.photoURL=j.photoUrl||null;const ue=I.providerData.find(({providerId:Ae})=>"password"===Ae);ue&&(ue.displayName=I.displayName,ue.photoURL=I.photoURL),yield I._updateTokensIfNecessary(j)})).apply(this,arguments)}function Kd(w,g,y){return uu.apply(this,arguments)}function uu(){return(uu=(0,v.Z)(function*(w,g,y){const{auth:I}=w,M={idToken:yield w.getIdToken(),returnSecureToken:!0};g&&(M.email=g),y&&(M.password=y);const j=yield an(w,Ko(I,M));yield w._updateTokensIfNecessary(j,!0)})).apply(this,arguments)}class ao{constructor(g,y,I={}){this.isNewUser=g,this.providerId=y,this.profile=I}}class Qd extends ao{constructor(g,y,I,S){super(g,y,I),this.username=S}}class Ny extends ao{constructor(g,y){super(g,"facebook.com",y)}}class Ry extends Qd{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class lu extends ao{constructor(g,y){super(g,"google.com",y)}}class Sp extends Qd{constructor(g,y,I){super(g,"twitter.com",y,I)}}function xp(w){const{user:g,_tokenResponse:y}=w;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function(w){var g,y;if(!w)return null;const{providerId:I}=w,S=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},M=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!I&&(null==w?void 0:w.idToken)){const j=null===(y=null===(g=Ue(w.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(j)return new ao(M,"anonymous"!==j&&"custom"!==j?j:null)}if(!I)return null;switch(I){case"facebook.com":return new Ny(M,S);case"github.com":return new Ry(M,S);case"google.com":return new lu(M,S);case"twitter.com":return new Sp(M,S,w.screenName||null);case"custom":case"anonymous":return new ao(M,null);default:return new ao(M,I,S)}}(y)}class Hi{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new Hi("enroll",g)}static _fromMfaPendingCredential(g){return new Hi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,I;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Hi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(I=g.multiFactorSession)||void 0===I?void 0:I.idToken)return Hi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Jd{constructor(g,y,I){this.session=g,this.hints=y,this.signInResolver=I}static _fromError(g,y){const I=At(g),S=(y.serverResponse.mfaInfo||[]).map(j=>nu._fromServerResponse(I,j));pe(y.serverResponse.mfaPendingCredential,I,"internal-error");const M=Hi._fromMfaPendingCredential(y.serverResponse.mfaPendingCredential);return new Jd(M,S,function(){var j=(0,v.Z)(function*(ue){const Ae=yield ue._process(I,M);delete y.serverResponse.mfaInfo,delete y.serverResponse.mfaPendingCredential;const Se=Object.assign(Object.assign({},y.serverResponse),{idToken:Ae.idToken,refreshToken:Ae.refreshToken});switch(y.operationType){case"signIn":const ze=yield ui._fromIdTokenResponse(I,y.operationType,Se);return yield I._updateCurrentUser(ze.user),ze;case"reauthenticate":return pe(y.user,I,"internal-error"),ui._forOperation(y.user,y.operationType,Se);default:Re(I,"internal-error")}});return function(ue){return j.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,v.Z)(function*(){return y.signInResolver(g)})()}}function My(w,g){return Ct(w,"POST","/v2/accounts/mfaEnrollment:start",Ke(w,g))}class ta{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(I=>nu._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new ta(g)}getSession(){var g=this;return(0,v.Z)(function*(){return Hi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var I=this;return(0,v.Z)(function*(){const S=g,M=yield I.getSession(),j=yield an(I.user,S._process(I.user.auth,M,y));return yield I.user._updateTokensIfNecessary(j),I.user.reload()})()}unenroll(g){var y=this;return(0,v.Z)(function*(){const I="string"==typeof g?g:g.uid,S=yield y.user.getIdToken(),M=yield an(y.user,function(w,g){return Ct(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Ke(w,g))}(y.user.auth,{idToken:S,mfaEnrollmentId:I}));y.enrolledFactors=y.enrolledFactors.filter(({uid:j})=>j!==I),yield y.user._updateTokensIfNecessary(M);try{yield y.user.reload()}catch(j){if("auth/user-token-expired"!==j.code)throw j}})()}}const na=new WeakMap,cu="__sak";class th{constructor(g,y){this.storage=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(cu,"1"),this.storage.removeItem(cu),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}}const $l=(()=>{class w extends th{constructor(){super(window.localStorage,"LOCAL"),this.boundEventHandler=(y,I)=>this.onStorageEvent(y,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const w=(0,L.z$)();return xd(w)||oi(w)}()&&function(){try{return!(!window||window===window.top)}catch(w){return!1}}(),this.fallbackToPolling=vi(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const I of Object.keys(this.listeners)){const S=this.storage.getItem(I),M=this.localCache[I];S!==M&&y(I,M,S)}}onStorageEvent(y,I=!1){if(!y.key)return void this.forAllChangedKeys((ue,Ae,Se)=>{this.notifyListeners(ue,Se)});const S=y.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ue=this.storage.getItem(S);if(y.newValue!==ue)null!==y.newValue?this.storage.setItem(S,y.newValue):this.storage.removeItem(S);else if(this.localCache[S]===y.newValue&&!I)return}const M=()=>{const ue=this.storage.getItem(S);!I&&this.localCache[S]===ue||this.notifyListeners(S,ue)},j=this.storage.getItem(S);(0,L.w1)()&&10===document.documentMode&&j!==y.newValue&&y.newValue!==y.oldValue?setTimeout(M,10):M()}notifyListeners(y,I){this.localCache[y]=I;const S=this.listeners[y];if(S)for(const M of Array.from(S))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,I,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:I,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(I)}_removeListener(y,I){this.listeners[y]&&(this.listeners[y].delete(I),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,I){var S=()=>super._set,M=this;return(0,v.Z)(function*(){yield S().call(M,y,I),M.localCache[y]=JSON.stringify(I)})()}_get(y){var I=()=>super._get,S=this;return(0,v.Z)(function*(){const M=yield I().call(S,y);return S.localCache[y]=JSON.stringify(M),M})()}_remove(y){var I=()=>super._remove,S=this;return(0,v.Z)(function*(){yield I().call(S,y),delete S.localCache[y]})()}}return w.type="LOCAL",w})(),Gi=(()=>{class w extends th{constructor(){super(window.sessionStorage,"SESSION")}_addListener(y,I){}_removeListener(y,I){}}return w.type="SESSION",w})();let bs=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const I=this.receivers.find(M=>M.isListeningto(y));if(I)return I;const S=new w(y);return this.receivers.push(S),S}isListeningto(y){return this.eventTarget===y}handleEvent(y){var I=this;return(0,v.Z)(function*(){const S=y,{eventId:M,eventType:j,data:ue}=S.data,Ae=I.handlersMap[j];if(!(null==Ae?void 0:Ae.size))return;S.ports[0].postMessage({status:"ack",eventId:M,eventType:j});const Se=Array.from(Ae).map(function(){var Fe=(0,v.Z)(function*(xt){return xt(S.origin,ue)});return function(xt){return Fe.apply(this,arguments)}}()),ze=yield function(w){return Promise.all(w.map(function(){var g=(0,v.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(I){return{fulfilled:!1,reason:I}}});return function(y){return g.apply(this,arguments)}}()))}(Se);S.ports[0].postMessage({status:"done",eventId:M,eventType:j,response:ze})})()}_subscribe(y,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(I)}_unsubscribe(y,I){this.handlersMap[y]&&I&&this.handlersMap[y].delete(I),(!I||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function Hl(w="",g=10){let y="";for(let I=0;I<g;I++)y+=Math.floor(10*Math.random());return w+y}class _w{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,I=50){var S=this;return(0,v.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let j,ue;return new Promise((Ae,Se)=>{const ze=Hl("",20);M.port1.start();const Fe=setTimeout(()=>{Se(new Error("unsupported_event"))},I);ue={messageChannel:M,onMessage(xt){const dn=xt;if(dn.data.eventId===ze)switch(dn.data.status){case"ack":clearTimeout(Fe),j=setTimeout(()=>{Se(new Error("timeout"))},3e3);break;case"done":clearTimeout(j),Ae(dn.data.response);break;default:clearTimeout(Fe),clearTimeout(j),Se(new Error("invalid_response"))}}},S.handlers.add(ue),M.port1.addEventListener("message",ue.onMessage),S.target.postMessage({eventType:g,eventId:ze,data:y},[M.port2])}).finally(()=>{ue&&S.removeMessageHandler(ue)})})()}}function Gt(){return window}function Gl(){return void 0!==Gt().WorkerGlobalScope&&"function"==typeof Gt().importScripts}function sh(){return(sh=(0,v.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(w){return null}})).apply(this,arguments)}const Op="firebaseLocalStorageDb",pu="firebaseLocalStorage",ql="fbase_key";class Wl{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function zl(w,g){return w.transaction([pu],g?"readwrite":"readonly").objectStore(pu)}function Or(){const w=indexedDB.open(Op,1);return new Promise((g,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const I=w.result;try{I.createObjectStore(pu,{keyPath:ql})}catch(S){y(S)}}),w.addEventListener("success",(0,v.Z)(function*(){const I=w.result;I.objectStoreNames.contains(pu)?g(I):(I.close(),yield function(){const w=indexedDB.deleteDatabase(Op);return new Wl(w).toPromise()}(),g(yield Or()))}))})}function Zl(w,g,y){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,v.Z)(function*(w,g,y){const I=zl(w,!0).put({[ql]:g,value:y});return new Wl(I).toPromise()})).apply(this,arguments)}function gu(){return(gu=(0,v.Z)(function*(w,g){const y=zl(w,!1).get(g),I=yield new Wl(y).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Ds(w,g){const y=zl(w,!0).delete(g);return new Wl(y).toPromise()}const ra=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,v.Z)(function*(){return y.db||(y.db=yield Or()),y.db})()}_withRetries(y){var I=this;return(0,v.Z)(function*(){let S=0;for(;;)try{const M=yield I._openDb();return yield y(M)}catch(M){if(S++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,v.Z)(function*(){return Gl()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,v.Z)(function*(){y.receiver=bs._getInstance(Gl()?self:null),y.receiver._subscribe("keyChanged",function(){var I=(0,v.Z)(function*(S,M){return{keyProcessed:(yield y._poll()).includes(M.key)}});return function(S,M){return I.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var I=(0,v.Z)(function*(S,M){return["keyChanged"]});return function(S,M){return I.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,v.Z)(function*(){var I,S;if(y.activeServiceWorker=yield function(){return sh.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new _w(y.activeServiceWorker);const M=yield y.sender._send("ping",{},800);!M||(null===(I=M[0])||void 0===I?void 0:I.fulfilled)&&(null===(S=M[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var I=this;return(0,v.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function(){var w;return(null===(w=null==navigator?void 0:navigator.serviceWorker)||void 0===w?void 0:w.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:y},I.serviceWorkerReceiverAvailable?800:50)}catch(S){}})()}_isAvailable(){return(0,v.Z)(function*(){try{if(!indexedDB)return!1;const y=yield Or();return yield Zl(y,cu,"1"),yield Ds(y,cu),!0}catch(y){}return!1})()}_withPendingWrite(y){var I=this;return(0,v.Z)(function*(){I.pendingWrites++;try{yield y()}finally{I.pendingWrites--}})()}_set(y,I){var S=this;return(0,v.Z)(function*(){return S._withPendingWrite((0,v.Z)(function*(){return yield S._withRetries(M=>Zl(M,y,I)),S.localCache[y]=I,S.notifyServiceWorker(y)}))})()}_get(y){var I=this;return(0,v.Z)(function*(){const S=yield I._withRetries(M=>function(w,g){return gu.apply(this,arguments)}(M,y));return I.localCache[y]=S,S})()}_remove(y){var I=this;return(0,v.Z)(function*(){return I._withPendingWrite((0,v.Z)(function*(){return yield I._withRetries(S=>Ds(S,y)),delete I.localCache[y],I.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,v.Z)(function*(){const I=yield y._withRetries(j=>{const ue=zl(j,!1).getAll();return new Wl(ue).toPromise()});if(!I)return[];if(0!==y.pendingWrites)return[];const S=[],M=new Set;for(const{fbase_key:j,value:ue}of I)M.add(j),JSON.stringify(y.localCache[j])!==JSON.stringify(ue)&&(y.notifyListeners(j,ue),S.push(j));for(const j of Object.keys(y.localCache))y.localCache[j]&&!M.has(j)&&(y.notifyListeners(j,null),S.push(j));return S})()}notifyListeners(y,I){this.localCache[y]=I;const S=this.listeners[y];if(S)for(const M of Array.from(S))M(I)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,v.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(I)}_removeListener(y,I){this.listeners[y]&&(this.listeners[y].delete(I),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function ah(w,g){return Ct(w,"POST","/v2/accounts/mfaSignIn:start",Ke(w,g))}function uh(){return(uh=(0,v.Z)(function*(w){return(yield Ct(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pr(w){return new Promise((g,y)=>{const I=document.createElement("script");I.setAttribute("src",w),I.onload=g,I.onerror=S=>{const M=Me("internal-error");M.customData=S,y(M)},I.type="text/javascript",I.charset="UTF-8",function(){var w,g;return null!==(g=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==g?g:document}().appendChild(I)})}function lh(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Wi=1e12;class Vy{constructor(g){this.auth=g,this.counter=Wi,this._widgets=new Map}render(g,y){const I=this.counter;return this._widgets.set(I,new Kl(g,this.auth.name,y||{})),this.counter++,I}reset(g){var y;const I=g||Wi;null===(y=this._widgets.get(I))||void 0===y||y.delete(),this._widgets.delete(I)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Wi))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,v.Z)(function*(){var I;return null===(I=y._widgets.get(g||Wi))||void 0===I||I.execute(),""})()}}class Kl{constructor(g,y,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof g?document.getElementById(g):g;pe(S,"argument-error",{appName:y}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(w){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<50;I++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}();const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const zi=lh("rcb"),co=new Bt(3e4,6e4);class ia{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gt().grecaptcha}load(g,y=""){return pe((w=y).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Gt().grecaptcha):new Promise((I,S)=>{const M=Gt().setTimeout(()=>{S(Me(g,"network-request-failed"))},co.get());Gt()[zi]=()=>{Gt().clearTimeout(M),delete Gt()[zi];const ue=Gt().grecaptcha;if(!ue)return void S(Me(g,"internal-error"));const Ae=ue.render;ue.render=(Se,ze)=>{const Fe=Ae(Se,ze);return this.counter++,Fe},this.hostLanguage=y,I(ue)},Pr(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:zi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(M),S(Me(g,"internal-error"))})});var w}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Gt().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class As{load(g){return(0,v.Z)(function*(){return new Vy(g)})()}clearedOneInstance(){}}const Ss="recaptcha",Uy={theme:"light",type:"image"};class kp{constructor(g,y=Object.assign({},Uy),I){this.parameters=y,this.type=Ss,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=At(I),this.isInvisible="invisible"===this.parameters.size,pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof g?document.getElementById(g):g;pe(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new As:new ia,this.validateStartingState()}verify(){var g=this;return(0,v.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(y)||new Promise(M=>{const j=ue=>{!ue||(g.tokenChangeListeners.delete(j),M(ue))};g.tokenChangeListeners.add(j),g.isInvisible&&I.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){pe(!this.parameters.sitekey,this.auth,"argument-error"),pe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),pe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(I=>I(y)),"function"==typeof g)g(y);else if("string"==typeof g){const I=Gt()[g];"function"==typeof I&&I(y)}}}assertNotDestroyed(){pe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,v.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const I=document.createElement("div");y.appendChild(I),y=I}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,v.Z)(function*(){pe($e()&&!Gl(),g.auth,"internal-error"),yield function(){let w=null;return new Promise(g=>{"complete"!==document.readyState?(w=()=>g(),window.addEventListener("load",w)):g()}).catch(g=>{throw w&&window.removeEventListener("load",w),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function(w){return uh.apply(this,arguments)}(g.auth);pe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return pe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jl{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=Jo._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Xl(){return(Xl=(0,v.Z)(function*(w,g,y){const I=At(w),S=yield nc(I,g,(0,L.m9)(y));return new Jl(S,M=>Bl(I,M))})).apply(this,arguments)}function ec(){return(ec=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w);yield ys(!1,I,"phone");const S=yield nc(I.auth,g,(0,L.m9)(y));return new Jl(S,M=>Cp(I,M))})).apply(this,arguments)}function tc(){return(tc=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w),S=yield nc(I.auth,g,(0,L.m9)(y));return new Jl(S,M=>eu(I,M))})).apply(this,arguments)}function nc(w,g,y){return dh.apply(this,arguments)}function dh(){return(dh=(0,v.Z)(function*(w,g,y){var I;const S=yield y.verify();try{let M;if(pe("string"==typeof S,w,"argument-error"),pe(y.type===Ss,w,"argument-error"),M="string"==typeof g?{phoneNumber:g}:g,"session"in M){const j=M.session;if("phoneNumber"in M)return pe("enroll"===j.type,w,"internal-error"),(yield My(w,{idToken:j.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{pe("signin"===j.type,w,"internal-error");const ue=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return pe(ue,w,"missing-multi-factor-info"),(yield ah(w,{mfaPendingCredential:j.credential,mfaEnrollmentId:ue,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:j}=yield ai(w,{phoneNumber:M.phoneNumber,recaptchaToken:S});return j}}finally{y._reset()}})).apply(this,arguments)}function rc(){return(rc=(0,v.Z)(function*(w,g){yield Ll((0,L.m9)(w),g)})).apply(this,arguments)}let fo=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=At(y)}verifyPhoneNumber(y,I){return nc(this.auth,y,(0,L.m9)(I))}static credential(y,I){return Jo._fromVerification(y,I)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:I,temporaryProof:S}=y;return I&&S?Jo._fromTokenResponse(I,S):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function po(w,g){return g?ne(g):(pe(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class xs extends sr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return St(g,this._buildIdpRequest())}_linkToIdToken(g,y){return St(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return St(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Hy(w){return wp(w.auth,new xs(w),w.bypassAuthState)}function Et(w){const{auth:g,user:y}=w;return pe(y,g,"internal-error"),Vl(y,new xs(w),w.bypassAuthState)}function ci(w){return go.apply(this,arguments)}function go(){return(go=(0,v.Z)(function*(w){const{auth:g,user:y}=w;return pe(y,g,"internal-error"),Ll(y,new xs(w),w.bypassAuthState)})).apply(this,arguments)}class vw{constructor(g,y,I,S,M=!1){this.auth=g,this.resolver=I,this.user=S,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,v.Z)(function*(I,S){g.pendingPromise={resolve:I,reject:S};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(M){g.reject(M)}});return function(I,S){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,v.Z)(function*(){const{urlResponse:I,sessionId:S,postBody:M,tenantId:j,error:ue,type:Ae}=g;if(ue)return void y.reject(ue);const Se={auth:y.auth,requestUri:I,sessionId:S,tenantId:j||void 0,postBody:M||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Ae)(Se))}catch(ze){y.reject(ze)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Hy;case"linkViaPopup":case"linkViaRedirect":return ci;case"reauthViaPopup":case"reauthViaRedirect":return Et;default:Re(this.auth,"internal-error")}}resolve(g){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ew=new Bt(2e3,1e4);function _r(){return(_r=(0,v.Z)(function*(w,g,y){const I=At(w);it(w,g,no);const S=po(I,y);return new hh(I,"signInViaPopup",g,S).executeNotNull()})).apply(this,arguments)}function Zr(){return(Zr=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w);it(I.auth,g,no);const S=po(I.auth,y);return new hh(I.auth,"reauthViaPopup",g,S,I).executeNotNull()})).apply(this,arguments)}function oa(){return(oa=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w);it(I.auth,g,no);const S=po(I.auth,y);return new hh(I.auth,"linkViaPopup",g,S,I).executeNotNull()})).apply(this,arguments)}let hh=(()=>{class w extends vw{constructor(y,I,S,M,j){super(y,I,M,j),this.provider=S,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,v.Z)(function*(){const I=yield y.execute();return pe(I,y.auth,"internal-error"),I})()}onExecution(){var y=this;return(0,v.Z)(function*(){te(1===y.filter.length,"Popup operations only handle one event");const I=Hl();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],I),y.authWindow.associatedEvent=I,y.resolver._originValidation(y.auth).catch(S=>{y.reject(S)}),y.resolver._isIframeWebStorageSupported(y.auth,S=>{S||y.reject(Me(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var I,S;this.pollId=(null===(S=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===S?void 0:S.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Ew.get())};y()}}return w.currentPopupAction=null,w})();const Gy=new Map;class PD extends vw{constructor(g,y,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,v.Z)(function*(){let I=Gy.get(y.auth._key());if(!I){try{const M=(yield function(w,g){return vr.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;I=()=>Promise.resolve(M)}catch(S){I=()=>Promise.reject(S)}Gy.set(y.auth._key(),I)}return I()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,I=this;return(0,v.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(I,g);if("unknown"!==g.type){if(g.eventId){const S=yield I.auth._redirectUserForId(g.eventId);if(S)return I.user=S,y().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,v.Z)(function*(){})()}cleanUp(){}}function vr(){return(vr=(0,v.Z)(function*(w,g){const y=yu(g),I="true"===(yield Ms(w)._get(y));return yield Ms(w)._remove(y),I})).apply(this,arguments)}function ic(w,g){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,v.Z)(function*(w,g){return Ms(w)._set(yu(g),"true")})).apply(this,arguments)}function Ms(w){return ne(w._redirectPersistence)}function yu(w){return Vt("pendingRedirect",w.config.apiKey,w.name)}function _u(){return(_u=(0,v.Z)(function*(w,g,y){const I=At(w);it(w,g,no);const S=po(I,y);return yield ic(S,I),S._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function Eu(){return(Eu=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w);it(I.auth,g,no);const S=po(I.auth,y);yield ic(S,I.auth);const M=yield Fp(I);return S._openRedirect(I.auth,g,"reauthViaRedirect",M)})).apply(this,arguments)}function Os(){return(Os=(0,v.Z)(function*(w,g,y){const I=(0,L.m9)(w);it(I.auth,g,no);const S=po(I.auth,y);yield ys(!1,I,g.providerId),yield ic(S,I.auth);const M=yield Fp(I);return S._openRedirect(I.auth,g,"linkViaRedirect",M)})).apply(this,arguments)}function mo(){return(mo=(0,v.Z)(function*(w,g){return yield At(w)._initializationPromise,ac(w,g,!1)})).apply(this,arguments)}function ac(w,g){return Cu.apply(this,arguments)}function Cu(){return(Cu=(0,v.Z)(function*(w,g,y=!1){const I=At(w),S=po(I,g),j=yield new PD(I,S,y).execute();return j&&!y&&(delete j.user._redirectEventId,yield I._persistUserIfCurrent(j.user),yield I._setRedirectUser(null,g)),j})).apply(this,arguments)}function Fp(w){return aa.apply(this,arguments)}function aa(){return(aa=(0,v.Z)(function*(w){const g=Hl(`${w.uid}:::`);return w._redirectEventId=g,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),g})).apply(this,arguments)}class yo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(y=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return di(w);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var I;if(g.error&&!di(g)){const S=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";y.onError(Me(this.auth,S))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const I=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Iu(g))}saveEventToCache(g){this.cachedEventUids.add(Iu(g)),this.lastProcessedEventTime=Date.now()}}function Iu(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(g=>g).join("-")}function di({type:w,error:g}){return"unknown"===w&&"auth/no-auth-event"===(null==g?void 0:g.code)}function kt(w){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,v.Z)(function*(w,g={}){return Ct(w,"GET","/v1/projects",g)})).apply(this,arguments)}const Iw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Zi=/^https?/;function bu(){return(bu=(0,v.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:g}=yield kt(w);for(const y of g)try{if(gh(y))return}catch(I){}Re(w,"unauthorized-domain")})).apply(this,arguments)}function gh(w){const g=Ce(),{protocol:y,hostname:I}=new URL(g);if(w.startsWith("chrome-extension://")){const j=new URL(w);return""===j.hostname&&""===I?"chrome-extension:"===y&&w.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&j.hostname===I}if(!Zi.test(y))return!1;if(Iw.test(w))return I===w;const S=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(I)}const lc=new Bt(3e4,6e4);function mh(){const w=Gt().___jsl;if(null==w?void 0:w.H)for(const g of Object.keys(w.H))if(w.H[g].r=w.H[g].r||[],w.H[g].L=w.H[g].L||[],w.H[g].r=[...w.H[g].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Er=null;function cc(w){return Er=Er||function(w){return new Promise((g,y)=>{var I,S,M;function j(){mh(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{mh(),y(Me(w,"network-request-failed"))},timeout:lc.get()})}if(null===(S=null===(I=Gt().gapi)||void 0===I?void 0:I.iframes)||void 0===S?void 0:S.Iframe)g(gapi.iframes.getContext());else{if(!(null===(M=Gt().gapi)||void 0===M?void 0:M.load)){const ue=lh("iframefcb");return Gt()[ue]=()=>{gapi.load?j():y(Me(w,"network-request-failed"))},Pr(`https://apis.google.com/js/api.js?onload=${ue}`)}j()}}).catch(g=>{throw Er=null,g})}(w),Er}const ks=new Bt(5e3,15e3),_o={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},Du=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zy(w){const g=w.config;pe(g.authDomain,w,"auth-domain-config-required");const y=g.emulator?on(g,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:w.name,v:de.SDK_VERSION},S=Du.get(w.config.apiHost);S&&(I.eid=S);const M=w._getFrameworks();return M.length&&(I.fw=M.join(",")),`${y}?${(0,L.xO)(I).slice(1)}`}function Vp(){return(Vp=(0,v.Z)(function*(w){const g=yield cc(w),y=Gt().gapi;return pe(y,w,"internal-error"),g.open({where:document.body,url:zy(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_o,dontclear:!0},I=>new Promise(function(){var S=(0,v.Z)(function*(M,j){yield I.restyle({setHideOnLeave:!1});const ue=Me(w,"network-request-failed"),Ae=Gt().setTimeout(()=>{j(ue)},ks.get());function Se(){Gt().clearTimeout(Ae),M(I)}I.ping(Se).then(Se,()=>{j(ue)})});return function(M,j){return S.apply(this,arguments)}}()))})).apply(this,arguments)}const Tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class yh{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function ca(w,g,y,I,S,M){pe(w.config.authDomain,w,"auth-domain-config-required"),pe(w.config.apiKey,w,"invalid-api-key");const j={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:I,v:de.SDK_VERSION,eventId:S};if(g instanceof no){g.setDefaultLanguage(w.languageCode),j.providerId=g.providerId||"",(0,L.xb)(g.getCustomParameters())||(j.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ae,Se]of Object.entries(M||{}))j[Ae]=Se}if(g instanceof Ka){const Ae=g.getScopes().filter(Se=>""!==Se);Ae.length>0&&(j.scopes=Ae.join(","))}w.tenantId&&(j.tid=w.tenantId);const ue=j;for(const Ae of Object.keys(ue))void 0===ue[Ae]&&delete ue[Ae];return`${function({config:w}){return w.emulator?on(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,L.xO)(ue).slice(1)}`}const Yi="webStorageSupport";class vo extends class{constructor(g){this.factorId=g}_process(g,y,I){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,I);case"signin":return this._finalizeSignIn(g,y.credential);default:return X("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new vo(g)}_finalizeEnroll(g,y,I){return function(w,g){return Ct(w,"POST","/v2/accounts/mfaEnrollment:finalize",Ke(w,g))}(g,{idToken:y,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function(w,g){return Ct(w,"POST","/v2/accounts/mfaSignIn:finalize",Ke(w,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Su=(()=>{class w{constructor(){}static assertion(y){return vo._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var w;class Hp{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,v.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(I=>{var S;g((null===(S=I)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Eo(){return window}function hi(){return(hi=(0,v.Z)(function*(w,g,y){var I;const{BuildInfo:S}=Eo();te(g.sessionId,"AuthEvent did not contain a session ID");const M=yield e_(g.sessionId),j={};return oi()?j.ibi=S.packageName:zo()?j.apn=S.packageName:Re(w,"operation-not-supported-in-this-environment"),S.displayName&&(j.appDisplayName=S.displayName),j.sessionId=M,ca(w,y,g.type,void 0,null!==(I=g.eventId)&&void 0!==I?I:void 0,j)})).apply(this,arguments)}function dc(){return(dc=(0,v.Z)(function*(w){const{BuildInfo:g}=Eo(),y={};oi()?y.iosBundleId=g.packageName:zo()?y.androidPackageName=g.packageName:Re(w,"operation-not-supported-in-this-environment"),yield kt(w,y)})).apply(this,arguments)}function xu(){return(xu=(0,v.Z)(function*(w,g,y){const{cordova:I}=Eo();let S=()=>{};try{yield new Promise((M,j)=>{let ue=null;function Ae(){var Fe;M();const xt=null===(Fe=I.plugins.browsertab)||void 0===Fe?void 0:Fe.close;"function"==typeof xt&&xt(),"function"==typeof(null==y?void 0:y.close)&&y.close()}function Se(){ue||(ue=window.setTimeout(()=>{j(Me(w,"redirect-cancelled-by-user"))},2e3))}function ze(){"visible"===(null==document?void 0:document.visibilityState)&&Se()}g.addPassiveListener(Ae),document.addEventListener("resume",Se,!1),zo()&&document.addEventListener("visibilitychange",ze,!1),S=()=>{g.removePassiveListener(Ae),document.removeEventListener("resume",Se,!1),document.removeEventListener("visibilitychange",ze,!1),ue&&window.clearTimeout(ue)}})}finally{S()}})).apply(this,arguments)}function e_(w){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,v.Z)(function*(w){const g=t_(w),y=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(y)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function t_(w){if(te(/[0-9a-zA-Z]+/.test(w),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(w);const g=new ArrayBuffer(w.length),y=new Uint8Array(g);for(let I=0;I<w.length;I++)y[I]=w.charCodeAt(I);return y}w="Browser",(0,de._registerComponent)(new fe.wA("auth",(g,{options:y})=>{const I=g.getProvider("app").getImmediate(),{apiKey:S,authDomain:M}=I.options;return(j=>{pe(S&&!S.includes(":"),"invalid-api-key",{appName:j.name}),pe(!(null==M?void 0:M.includes(":")),"argument-error",{appName:j.name});const ue={apiKey:S,authDomain:M,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ir(w)},Ae=new Dy(j,ue);return function(w,g){const y=(null==g?void 0:g.persistence)||[],I=(Array.isArray(y)?y:[y]).map(ne);(null==g?void 0:g.errorMap)&&w._updateErrorMap(g.errorMap),w._initializeWithPersistence(I,null==g?void 0:g.popupRedirectResolver)}(Ae,y),Ae})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,I)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new fe.wA("auth-internal",g=>{const y=At(g.getProvider("auth").getImmediate());return new Hp(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)("@firebase/auth","0.18.0",void 0);class Ih extends yo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(g)),super.onEvent(g)}initialized(){var g=this;return(0,v.Z)(function*(){yield g.initPromise})()}}function bh(w){return Co.apply(this,arguments)}function Co(){return(Co=(0,v.Z)(function*(w){const g=yield Fs()._get(hc(w));return g&&(yield Fs()._remove(hc(w))),g})).apply(this,arguments)}function wi(){const w=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const I=Math.floor(Math.random()*g.length);w.push(g.charAt(I))}return w.join("")}function Fs(){return ne($l)}function hc(w){return Vt("authEvent",w.config.apiKey,w.name)}function pc(w){if(!(null==w?void 0:w.includes("?")))return{};const[g,...y]=w.split("?");return(0,L.zd)(y.join("?"))}function Ru(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Me("no-auth-event")}}function xh(){var w;return(null===(w=null==self?void 0:self.location)||void 0===w?void 0:w.protocol)||null}function o_(w=(0,L.z$)()){return!("file:"!==xh()&&"ionic:"!==xh()||!w.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rh(){try{const w=self.localStorage,g=Hl();if(w)return w.setItem(g,"1"),w.removeItem(g),!function(w=(0,L.z$)()){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)||function(w=(0,L.z$)()){return/Edge\/\d+/.test(w)}(w)}()||(0,L.hl)()}catch(w){return Yp()&&(0,L.hl)()}return!1}function Yp(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function It(){return("http:"===xh()||"https:"===xh()||(0,L.ru)()||o_())&&!((0,L.b$)()||(0,L.UG)())&&Rh()&&!Yp()}function Qp(){return o_()&&"undefined"!=typeof document}function fn(){return(fn=(0,v.Z)(function*(){return!!Qp()&&new Promise(w=>{const g=setTimeout(()=>{w(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),w(!0)})})})).apply(this,arguments)}const Pn={LOCAL:"local",NONE:"none",SESSION:"session"},Mu=pe,gc="persistence";function da(w){return kr.apply(this,arguments)}function kr(){return(kr=(0,v.Z)(function*(w){yield w._initializationPromise;const g=u_(),y=Vt(gc,w.config.apiKey,w.name);(null==g?void 0:g.sessionStorage)&&g.sessionStorage.setItem(y,w._getPersistence())})).apply(this,arguments)}function u_(){return"undefined"!=typeof window?window:null}const Ou=pe;class Ft{constructor(){this.browserResolver=ne(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gi,this._completeRedirectFn=ac}_openPopup(g,y,I,S){var M=this;return(0,v.Z)(function*(){var j;te(null===(j=M.eventManagers[g._key()])||void 0===j?void 0:j.manager,"_initialize() not called before _openPopup()");const ue=ca(g,y,I,Ce(),S);return function(w,g,y,I=500,S=600){const M=Math.max((window.screen.availHeight-S)/2,0).toString(),j=Math.max((window.screen.availWidth-I)/2,0).toString();let ue="";const Ae=Object.assign(Object.assign({},Tu),{width:I.toString(),height:S.toString(),top:M,left:j}),Se=(0,L.z$)().toLowerCase();y&&(ue=Nd(Se)?"_blank":y),Nl(Se)&&(g=g||"http://localhost",Ae.scrollbars="yes");const ze=Object.entries(Ae).reduce((xt,[dn,Pu])=>`${xt}${dn}=${Pu},`,"");if(function(w=(0,L.z$)()){var g;return oi(w)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Se)&&"_self"!==ue)return function(w,g){const y=document.createElement("a");y.href=w,y.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(I)}(g||"",ue),new yh(null);const Fe=window.open(g||"",ue,ze);pe(Fe,w,"popup-blocked");try{Fe.focus()}catch(xt){}return new yh(Fe)}(g,ue,Hl())})()}_openRedirect(g,y,I,S){var M=this;return(0,v.Z)(function*(){return yield M._originValidation(g),w=ca(g,y,I,Ce(),S),Gt().location.href=w,new Promise(()=>{});var w})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:S,promise:M}=this.eventManagers[y];return S?Promise.resolve(S):(te(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(g);return this.eventManagers[y]={promise:I},I}initAndGetManager(g){var y=this;return(0,v.Z)(function*(){const I=yield function(w){return Vp.apply(this,arguments)}(g),S=new yo(g);return I.register("authEvent",M=>(pe(null==M?void 0:M.authEvent,g,"invalid-auth-event"),{status:S.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:S},y.iframes[g._key()]=I,S})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(Yi,{type:Yi},S=>{var M;const j=null===(M=null==S?void 0:S[0])||void 0===M?void 0:M[Yi];void 0!==j&&y(!!j),Re(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return bu.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return vi()||xd()||oi()}}),this.cordovaResolver=ne(class{constructor(){this._redirectPersistence=Gi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ac}_initialize(g){var y=this;return(0,v.Z)(function*(){const I=g._key();let S=y.eventManagers.get(I);return S||(S=new Ih(g),y.eventManagers.set(I,S),y.attachCallbackListeners(g,S)),S})()}_openPopup(g){Re(g,"operation-not-supported-in-this-environment")}_openRedirect(g,y,I,S){var M=this;return(0,v.Z)(function*(){!function(w){var g,y,I,S,M,j,ue,Ae,Se,ze;const Fe=Eo();pe("function"==typeof(null===(g=null==Fe?void 0:Fe.universalLinks)||void 0===g?void 0:g.subscribe),w,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),pe(void 0!==(null===(y=null==Fe?void 0:Fe.BuildInfo)||void 0===y?void 0:y.packageName),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),pe("function"==typeof(null===(M=null===(S=null===(I=null==Fe?void 0:Fe.cordova)||void 0===I?void 0:I.plugins)||void 0===S?void 0:S.browsertab)||void 0===M?void 0:M.openUrl),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(Ae=null===(ue=null===(j=null==Fe?void 0:Fe.cordova)||void 0===j?void 0:j.plugins)||void 0===ue?void 0:ue.browsertab)||void 0===Ae?void 0:Ae.isAvailable),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),pe("function"==typeof(null===(ze=null===(Se=null==Fe?void 0:Fe.cordova)||void 0===Se?void 0:Se.InAppBrowser)||void 0===ze?void 0:ze.open),w,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const j=yield M._initialize(g);yield j.initialized(),j.resetRedirect(),Gy.clear(),yield M._originValidation(g);const ue=function(w,g,y=null){return{type:g,eventId:y,urlResponse:null,sessionId:wi(),postBody:null,tenantId:w.tenantId,error:Me(w,"no-auth-event")}}(g,I,S);yield function(w,g){return Fs()._set(hc(w),g)}(g,ue);const Ae=yield function(w,g,y){return hi.apply(this,arguments)}(g,ue,y),Se=yield function(w){const{cordova:g}=Eo();return new Promise(y=>{g.plugins.browsertab.isAvailable(I=>{let S=null;I?g.plugins.browsertab.openUrl(w):S=g.InAppBrowser.open(w,function(w=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}()?"_blank":"_system","location=yes"),y(S)})})}(Ae);return function(w,g,y){return xu.apply(this,arguments)}(g,j,Se)})()}_isIframeWebStorageSupported(g,y){throw new Error("Method not implemented.")}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function(w){return dc.apply(this,arguments)}(g)),this.originValidationPromises[y]}attachCallbackListeners(g,y){const{universalLinks:I,handleOpenURL:S,BuildInfo:M}=Eo(),j=setTimeout((0,v.Z)(function*(){yield bh(g),y.onEvent(Ru())}),500),ue=function(){var ze=(0,v.Z)(function*(Fe){clearTimeout(j);const xt=yield bh(g);let dn=null;xt&&(null==Fe?void 0:Fe.url)&&(dn=function(w,g){var y,I;const S=function(w){const g=pc(w),y=g.link?decodeURIComponent(g.link):void 0,I=pc(y).link,S=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return pc(S).link||S||I||y||w}(g);if(S.includes("/__/auth/callback")){const M=pc(S),j=M.firebaseError?function(w){try{return JSON.parse(w)}catch(g){return null}}(decodeURIComponent(M.firebaseError)):null,ue=null===(I=null===(y=null==j?void 0:j.code)||void 0===y?void 0:y.split("auth/"))||void 0===I?void 0:I[1],Ae=ue?Me(ue):null;return Ae?{type:w.type,eventId:w.eventId,tenantId:w.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:w.type,eventId:w.eventId,tenantId:w.tenantId,sessionId:w.sessionId,urlResponse:S,postBody:null}}return null}(xt,Fe.url)),y.onEvent(dn||Ru())});return function(xt){return ze.apply(this,arguments)}}();void 0!==I&&"function"==typeof I.subscribe&&I.subscribe(null,ue);const Ae=S,Se=`${M.packageName.toLowerCase()}://`;Eo().handleOpenURL=function(){var ze=(0,v.Z)(function*(Fe){if(Fe.toLowerCase().startsWith(Se)&&ue({url:Fe}),"function"==typeof Ae)try{Ae(Fe)}catch(xt){console.error(xt)}});return function(Fe){return ze.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Gi,this._completeRedirectFn=ac}_initialize(g){var y=this;return(0,v.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,y,I,S){var M=this;return(0,v.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(g,y,I,S)})()}_openRedirect(g,y,I,S){var M=this;return(0,v.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(g,y,I,S)})()}_isIframeWebStorageSupported(g,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,y)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return Qp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ou(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,v.Z)(function*(){if(g.underlyingResolver)return;const y=yield function(){return fn.apply(this,arguments)}();g.underlyingResolver=y?g.cordovaResolver:g.browserResolver})()}}function mc(w){return w.unwrap()}function tg(w){return ha(w)}function Zn(w,g){var y;const I=null===(y=g.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===g.code)g.resolver=new l_(w,function(w,g){var y;const I=(0,L.m9)(w),S=g;return pe(g.operationType,I,"argument-error"),pe(null===(y=S.serverResponse)||void 0===y?void 0:y.mfaPendingCredential,I,"argument-error"),Jd._fromError(I,S)}(w,g));else if(I){const S=ha(g),M=g;S&&(M.credential=S,M.tenantId=I.tenantId||void 0,M.email=I.email||void 0,M.phoneNumber=I.phoneNumber||void 0)}}function ha(w){const{_tokenResponse:g}=w instanceof L.ZR?w.customData:w;if(!g)return null;if(!(w instanceof L.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return fo.credentialFromResult(w);const y=g.providerId;if(!y||"password"===y)return null;let I;switch(y){case"google.com":I=Vd;break;case"facebook.com":I=Ld;break;case"github.com":I=Ud;break;case"twitter.com":I=Bd;break;default:const{oauthIdToken:S,oauthAccessToken:M,oauthTokenSecret:j,pendingToken:ue,nonce:Ae}=g;return M||j||S||ue?ue?y.startsWith("saml.")?Xo._create(y,ue):Rr._fromParams({providerId:y,signInMethod:y,pendingToken:ue,idToken:S,accessToken:M}):new ro(y).credential({idToken:S,accessToken:M,rawNonce:Ae}):null}return w instanceof L.ZR?I.credentialFromError(w):I.credentialFromResult(w)}function qt(w,g){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,v.Z)(function*(w,g){let y;try{y=yield g}catch(M){throw M instanceof L.ZR&&Zn(w,M),M}const{operationType:I,user:S}=y;return{operationType:I,credential:tg(y),additionalUserInfo:xp(y),user:le.getOrCreate(S)}})).apply(this,arguments)}function Oh(w,g){return Ph.apply(this,arguments)}function Ph(){return(Ph=(0,v.Z)(function*(w,g){const y=yield g;return{verificationId:y.verificationId,confirm:I=>qt(w,y.confirm(I))}})).apply(this,arguments)}class l_{constructor(g,y){this.resolver=y,this.auth=function(w){return w.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return qt(mc(this.auth),this.resolver.resolveSignIn(g))}}class le{constructor(g){this._delegate=g,this.multiFactor=function(w){const g=(0,L.m9)(w);return na.has(g)||na.set(g,ta._fromUser(g)),na.get(g)}(g)}static getOrCreate(g){return le.USER_MAP.has(g)||le.USER_MAP.set(g,new le(g)),le.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var y=this;return(0,v.Z)(function*(){return qt(y.auth,Cp(y._delegate,g))})()}linkWithPhoneNumber(g,y){var I=this;return(0,v.Z)(function*(){return Oh(I.auth,function(w,g,y){return ec.apply(this,arguments)}(I._delegate,g,y))})()}linkWithPopup(g){var y=this;return(0,v.Z)(function*(){return qt(y.auth,function(w,g,y){return oa.apply(this,arguments)}(y._delegate,g,Ft))})()}linkWithRedirect(g){var y=this;return(0,v.Z)(function*(){return yield da(At(y.auth)),function(w,g,y){return function(w,g,y){return Os.apply(this,arguments)}(w,g,y)}(y._delegate,g,Ft)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var y=this;return(0,v.Z)(function*(){return qt(y.auth,eu(y._delegate,g))})()}reauthenticateWithPhoneNumber(g,y){return Oh(this.auth,function(w,g,y){return tc.apply(this,arguments)}(this._delegate,g,y))}reauthenticateWithPopup(g){return qt(this.auth,function(w,g,y){return Zr.apply(this,arguments)}(this._delegate,g,Ft))}reauthenticateWithRedirect(g){var y=this;return(0,v.Z)(function*(){return yield da(At(y.auth)),function(w,g,y){return function(w,g,y){return Eu.apply(this,arguments)}(w,g,y)}(y._delegate,g,Ft)})()}sendEmailVerification(g){return function(w,g){return ws.apply(this,arguments)}(this._delegate,g)}unlink(g){var y=this;return(0,v.Z)(function*(){return yield function(w,g){return Fl.apply(this,arguments)}(y._delegate,g),y})()}updateEmail(g){return function(w,g){return Kd((0,L.m9)(w),g,null)}(this._delegate,g)}updatePassword(g){return function(w,g){return Kd((0,L.m9)(w),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function(w,g){return rc.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function(w,g){return zd.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,y){return function(w,g,y){return zr.apply(this,arguments)}(this._delegate,g,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}le.USER_MAP=new WeakMap;const Io=pe;let yc=(()=>{class w{constructor(y,I){if(this.app=y,I.isInitialized())return this._delegate=I.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=y.options;Io(S,"invalid-api-key",{appName:y.name});let M=[dt];if("undefined"!=typeof window){M=function(w,g){const y=u_();if(!(null==y?void 0:y.sessionStorage))return[];const I=Vt(gc,w,g);switch(y.sessionStorage.getItem(I)){case Pn.NONE:return[dt];case Pn.LOCAL:return[ra,Gi];case Pn.SESSION:return[Gi];default:return[]}}(S,y.name);for(const ue of[ra,$l,Gi])M.includes(ue)||M.push(ue)}Io(S,"invalid-api-key",{appName:y.name});const j="undefined"!=typeof window?Ft:void 0;this._delegate=I.initialize({options:{persistence:M,popupRedirectResolver:j}}),this._delegate._updateErrorMap(oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?le.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,I){!function(w,g,y){const I=At(w);pe(I._canInitEmulator,I,"emulator-config-failed"),pe(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const S=!!(null==y?void 0:y.disableWarnings),M=Ut(g),{host:j,port:ue}=function(w){const g=Ut(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(g.length));if(!y)return{host:"",port:null};const I=y[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(I);if(S){const M=S[1];return{host:M,port:ps(I.substr(M.length+1))}}{const[M,j]=I.split(":");return{host:M,port:ps(j)}}}(g);I.config.emulator={url:`${M}//${j}${null===ue?"":`:${ue}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:j,port:ue,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:S})}),function(w){function g(){const y=document.createElement("p"),I=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",I.position="fixed",I.width="100%",I.backgroundColor="#ffffff",I.border=".1em solid #000000",I.color="#b50000",I.bottom="0px",I.left="0px",I.margin="0px",I.zIndex="10000",I.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&!w&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}(S)}(this._delegate,y,I)}applyActionCode(y){return function(w,g){return so.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return su(this._delegate,y)}confirmPasswordReset(y,I){return function(w,g,y){return Qe.apply(this,arguments)}(this._delegate,y,I)}createUserWithEmailAndPassword(y,I){var S=this;return(0,v.Z)(function*(){return qt(S._delegate,function(w,g,y){return ye.apply(this,arguments)}(S._delegate,y,I))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function(w,g){return Tp.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function(w,g){const y=Pl.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}(0,y)}getRedirectResult(){var y=this;return(0,v.Z)(function*(){Io(It(),y._delegate,"operation-not-supported-in-this-environment");const I=yield function(w,g){return mo.apply(this,arguments)}(y._delegate,Ft);return I?qt(y._delegate,Promise.resolve(I)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function(w,g){At(w)._logFramework(g)}(this._delegate,y)}onAuthStateChanged(y,I,S){const{next:M,error:j,complete:ue}=Ls(y,I,S);return this._delegate.onAuthStateChanged(M,j,ue)}onIdTokenChanged(y,I,S){const{next:M,error:j,complete:ue}=Ls(y,I,S);return this._delegate.onIdTokenChanged(M,j,ue)}sendSignInLinkToEmail(y,I){return function(w,g,y){return ln.apply(this,arguments)}(this._delegate,y,I)}sendPasswordResetEmail(y,I){return function(w,g,y){return jl.apply(this,arguments)}(this._delegate,y,I||void 0)}setPersistence(y){var I=this;return(0,v.Z)(function*(){let S;switch(function(w,g){Mu(Object.values(Pn).includes(g),w,"invalid-persistence-type"),(0,L.b$)()?Mu(g!==Pn.SESSION,w,"unsupported-persistence-type"):(0,L.UG)()?Mu(g===Pn.NONE,w,"unsupported-persistence-type"):Yp()?Mu(g===Pn.NONE||g===Pn.LOCAL&&(0,L.hl)(),w,"unsupported-persistence-type"):Mu(g===Pn.NONE||Rh(),w,"unsupported-persistence-type")}(I._delegate,y),y){case Pn.SESSION:S=Gi;break;case Pn.LOCAL:S=(yield ne(ra)._isAvailable())?ra:$l;break;case Pn.NONE:S=dt;break;default:return Re("argument-error",{appName:I._delegate.name})}return I._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return qt(this._delegate,function(w){return Qa.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return qt(this._delegate,Bl(this._delegate,y))}signInWithCustomToken(y){return qt(this._delegate,function(w,g){return or.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,I){return qt(this._delegate,function(w,g,y){return Bl((0,L.m9)(w),vp.credential(g,y))}(this._delegate,y,I))}signInWithEmailLink(y,I){return qt(this._delegate,function(w,g,y){return Wr.apply(this,arguments)}(this._delegate,y,I))}signInWithPhoneNumber(y,I){return Oh(this._delegate,function(w,g,y){return Xl.apply(this,arguments)}(this._delegate,y,I))}signInWithPopup(y){var I=this;return(0,v.Z)(function*(){return Io(It(),I._delegate,"operation-not-supported-in-this-environment"),qt(I._delegate,function(w,g,y){return _r.apply(this,arguments)}(I._delegate,y,Ft))})()}signInWithRedirect(y){var I=this;return(0,v.Z)(function*(){return Io(It(),I._delegate,"operation-not-supported-in-this-environment"),yield da(I._delegate),function(w,g,y){return function(w,g,y){return _u.apply(this,arguments)}(w,g,y)}(I._delegate,y,Ft)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function(w,g){return oo.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return w.Persistence=Pn,w})();function Ls(w,g,y){let I=w;"function"!=typeof w&&({next:I,error:g,complete:y}=w);const S=I;return{next:j=>S(j&&le.getOrCreate(j)),error:g,complete:y}}class yt{constructor(){this.providerId="phone",this._delegate=new fo(mc(Y.Z.auth()))}static credential(g,y){return fo.credential(g,y)}verifyPhoneNumber(g,y){return this._delegate.verifyPhoneNumber(g,y)}unwrap(){return this._delegate}}yt.PHONE_SIGN_IN_METHOD=fo.PHONE_SIGN_IN_METHOD,yt.PROVIDER_ID=fo.PROVIDER_ID;const c_=pe;class Ci{constructor(g,y,I=Y.Z.app()){var S;c_(null===(S=I.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:I.name}),this._delegate=new kp(g,y,I.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(w){w.INTERNAL.registerComponent(new fe.wA("auth-compat",g=>{const y=g.getProvider("app-compat").getImmediate(),I=g.getProvider("auth");return new yc(y,I)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:vp,FacebookAuthProvider:Ld,GithubAuthProvider:Ud,GoogleAuthProvider:Vd,OAuthProvider:ro,PhoneAuthProvider:yt,PhoneMultiFactorGenerator:Su,RecaptchaVerifier:Ci,TwitterAuthProvider:Bd,Auth:yc,AuthCredential:sr,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),w.registerVersion("@firebase/auth-compat","0.1.3")}(Y.Z)},7574:(je,ge,F)=>{"use strict";F.d(ge,{y:()=>k});var v=F(7393),L=F(9181),de=F(6490),ee=F(6554),fe=F(4487);var P=F(2494);let k=(()=>{class G{constructor(oe){this._isScalar=!1,oe&&(this._subscribe=oe)}lift(oe){const Q=new G;return Q.source=this,Q.operator=oe,Q}subscribe(oe,Q,K){const{operator:Te}=this,Ie=function(G,z,oe){if(G){if(G instanceof v.L)return G;if(G[L.b])return G[L.b]()}return G||z||oe?new v.L(G,z,oe):new v.L(de.c)}(oe,Q,K);if(Ie.add(Te?Te.call(Ie,this.source):this.source||P.v.useDeprecatedSynchronousErrorHandling&&!Ie.syncErrorThrowable?this._subscribe(Ie):this._trySubscribe(Ie)),P.v.useDeprecatedSynchronousErrorHandling&&Ie.syncErrorThrowable&&(Ie.syncErrorThrowable=!1,Ie.syncErrorThrown))throw Ie.syncErrorValue;return Ie}_trySubscribe(oe){try{return this._subscribe(oe)}catch(Q){P.v.useDeprecatedSynchronousErrorHandling&&(oe.syncErrorThrown=!0,oe.syncErrorValue=Q),function(G){for(;G;){const{closed:z,destination:oe,isStopped:Q}=G;if(z||Q)return!1;G=oe&&oe instanceof v.L?oe:null}return!0}(oe)?oe.error(Q):console.warn(Q)}}forEach(oe,Q){return new(Q=W(Q))((K,Te)=>{let Ie;Ie=this.subscribe(we=>{try{oe(we)}catch(Re){Te(Re),Ie&&Ie.unsubscribe()}},Te,K)})}_subscribe(oe){const{source:Q}=this;return Q&&Q.subscribe(oe)}[ee.L](){return this}pipe(...oe){return 0===oe.length?this:function(G){return 0===G.length?fe.y:1===G.length?G[0]:function(oe){return G.reduce((Q,K)=>K(Q),oe)}}(oe)(this)}toPromise(oe){return new(oe=W(oe))((Q,K)=>{let Te;this.subscribe(Ie=>Te=Ie,Ie=>K(Ie),()=>Q(Te))})}}return G.create=z=>new G(z),G})();function W(G){if(G||(G=P.v.Promise||Promise),!G)throw new Error("no Promise impl found");return G}},6490:(je,ge,F)=>{"use strict";F.d(ge,{c:()=>L});var v=F(2494),Y=F(4449);const L={closed:!0,next(de){},error(de){if(v.v.useDeprecatedSynchronousErrorHandling)throw de;(0,Y.z)(de)},complete(){}}},9765:(je,ge,F)=>{"use strict";F.d(ge,{Yc:()=>fe,xQ:()=>ae});var v=F(7574),Y=F(7393),L=F(5319),de=F(7971),ce=F(8858),ee=F(9181);class fe extends Y.L{constructor(k){super(k),this.destination=k}}let ae=(()=>{class P extends v.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ee.b](){return new fe(this)}lift(W){const G=new H(this,this);return G.operator=W,G}next(W){if(this.closed)throw new de.N;if(!this.isStopped){const{observers:G}=this,z=G.length,oe=G.slice();for(let Q=0;Q<z;Q++)oe[Q].next(W)}}error(W){if(this.closed)throw new de.N;this.hasError=!0,this.thrownError=W,this.isStopped=!0;const{observers:G}=this,z=G.length,oe=G.slice();for(let Q=0;Q<z;Q++)oe[Q].error(W);this.observers.length=0}complete(){if(this.closed)throw new de.N;this.isStopped=!0;const{observers:W}=this,G=W.length,z=W.slice();for(let oe=0;oe<G;oe++)z[oe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(W){if(this.closed)throw new de.N;return super._trySubscribe(W)}_subscribe(W){if(this.closed)throw new de.N;return this.hasError?(W.error(this.thrownError),L.w.EMPTY):this.isStopped?(W.complete(),L.w.EMPTY):(this.observers.push(W),new ce.W(this,W))}asObservable(){const W=new v.y;return W.source=this,W}}return P.create=(k,W)=>new H(k,W),P})();class H extends ae{constructor(k,W){super(),this.destination=k,this.source=W}next(k){const{destination:W}=this;W&&W.next&&W.next(k)}error(k){const{destination:W}=this;W&&W.error&&this.destination.error(k)}complete(){const{destination:k}=this;k&&k.complete&&this.destination.complete()}_subscribe(k){const{source:W}=this;return W?this.source.subscribe(k):L.w.EMPTY}}},8858:(je,ge,F)=>{"use strict";F.d(ge,{W:()=>Y});var v=F(5319);class Y extends v.w{constructor(de,ce){super(),this.subject=de,this.subscriber=ce,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const de=this.subject,ce=de.observers;if(this.subject=null,!ce||0===ce.length||de.isStopped||de.closed)return;const ee=ce.indexOf(this.subscriber);-1!==ee&&ce.splice(ee,1)}}},7393:(je,ge,F)=>{"use strict";F.d(ge,{L:()=>fe});var v=F(9105),Y=F(6490),L=F(5319),de=F(9181),ce=F(2494),ee=F(4449);class fe extends L.w{constructor(P,k,W){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=Y.c;break;case 1:if(!P){this.destination=Y.c;break}if("object"==typeof P){P instanceof fe?(this.syncErrorThrowable=P.syncErrorThrowable,this.destination=P,P.add(this)):(this.syncErrorThrowable=!0,this.destination=new ae(this,P));break}default:this.syncErrorThrowable=!0,this.destination=new ae(this,P,k,W)}}[de.b](){return this}static create(P,k,W){const G=new fe(P,k,W);return G.syncErrorThrowable=!1,G}next(P){this.isStopped||this._next(P)}error(P){this.isStopped||(this.isStopped=!0,this._error(P))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(P){this.destination.next(P)}_error(P){this.destination.error(P),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:P}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=P,this}}class ae extends fe{constructor(P,k,W,G){super(),this._parentSubscriber=P;let z,oe=this;(0,v.m)(k)?z=k:k&&(z=k.next,W=k.error,G=k.complete,k!==Y.c&&(oe=Object.create(k),(0,v.m)(oe.unsubscribe)&&this.add(oe.unsubscribe.bind(oe)),oe.unsubscribe=this.unsubscribe.bind(this))),this._context=oe,this._next=z,this._error=W,this._complete=G}next(P){if(!this.isStopped&&this._next){const{_parentSubscriber:k}=this;ce.v.useDeprecatedSynchronousErrorHandling&&k.syncErrorThrowable?this.__tryOrSetError(k,this._next,P)&&this.unsubscribe():this.__tryOrUnsub(this._next,P)}}error(P){if(!this.isStopped){const{_parentSubscriber:k}=this,{useDeprecatedSynchronousErrorHandling:W}=ce.v;if(this._error)W&&k.syncErrorThrowable?(this.__tryOrSetError(k,this._error,P),this.unsubscribe()):(this.__tryOrUnsub(this._error,P),this.unsubscribe());else if(k.syncErrorThrowable)W?(k.syncErrorValue=P,k.syncErrorThrown=!0):(0,ee.z)(P),this.unsubscribe();else{if(this.unsubscribe(),W)throw P;(0,ee.z)(P)}}}complete(){if(!this.isStopped){const{_parentSubscriber:P}=this;if(this._complete){const k=()=>this._complete.call(this._context);ce.v.useDeprecatedSynchronousErrorHandling&&P.syncErrorThrowable?(this.__tryOrSetError(P,k),this.unsubscribe()):(this.__tryOrUnsub(k),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(P,k){try{P.call(this._context,k)}catch(W){if(this.unsubscribe(),ce.v.useDeprecatedSynchronousErrorHandling)throw W;(0,ee.z)(W)}}__tryOrSetError(P,k,W){if(!ce.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{k.call(this._context,W)}catch(G){return ce.v.useDeprecatedSynchronousErrorHandling?(P.syncErrorValue=G,P.syncErrorThrown=!0,!0):((0,ee.z)(G),!0)}return!1}_unsubscribe(){const{_parentSubscriber:P}=this;this._context=null,this._parentSubscriber=null,P.unsubscribe()}}},5319:(je,ge,F)=>{"use strict";F.d(ge,{w:()=>ee});var v=F(9796),Y=F(1555),L=F(9105);const ce=(()=>{function ae(H){return Error.call(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((P,k)=>`${k+1}) ${P.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H,this}return ae.prototype=Object.create(Error.prototype),ae})();class ee{constructor(H){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,H&&(this._ctorUnsubscribe=!0,this._unsubscribe=H)}unsubscribe(){let H;if(this.closed)return;let{_parentOrParents:P,_ctorUnsubscribe:k,_unsubscribe:W,_subscriptions:G}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,P instanceof ee)P.remove(this);else if(null!==P)for(let z=0;z<P.length;++z)P[z].remove(this);if((0,L.m)(W)){k&&(this._unsubscribe=void 0);try{W.call(this)}catch(z){H=z instanceof ce?fe(z.errors):[z]}}if((0,v.k)(G)){let z=-1,oe=G.length;for(;++z<oe;){const Q=G[z];if((0,Y.K)(Q))try{Q.unsubscribe()}catch(K){H=H||[],K instanceof ce?H=H.concat(fe(K.errors)):H.push(K)}}}if(H)throw new ce(H)}add(H){let P=H;if(!H)return ee.EMPTY;switch(typeof H){case"function":P=new ee(H);case"object":if(P===this||P.closed||"function"!=typeof P.unsubscribe)return P;if(this.closed)return P.unsubscribe(),P;if(!(P instanceof ee)){const G=P;P=new ee,P._subscriptions=[G]}break;default:throw new Error("unrecognized teardown "+H+" added to Subscription.")}let{_parentOrParents:k}=P;if(null===k)P._parentOrParents=this;else if(k instanceof ee){if(k===this)return P;P._parentOrParents=[k,this]}else{if(-1!==k.indexOf(this))return P;k.push(this)}const W=this._subscriptions;return null===W?this._subscriptions=[P]:W.push(P),P}remove(H){const P=this._subscriptions;if(P){const k=P.indexOf(H);-1!==k&&P.splice(k,1)}}}var ae;function fe(ae){return ae.reduce((H,P)=>H.concat(P instanceof ce?P.errors:P),[])}ee.EMPTY=((ae=new ee).closed=!0,ae)},2494:(je,ge,F)=>{"use strict";F.d(ge,{v:()=>Y});let v=!1;const Y={Promise:void 0,set useDeprecatedSynchronousErrorHandling(L){if(L){const de=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+de.stack)}else v&&console.log("RxJS: Back to a better error behavior. Thank you. <3");v=L},get useDeprecatedSynchronousErrorHandling(){return v}}},5345:(je,ge,F)=>{"use strict";F.d(ge,{IY:()=>de,Ds:()=>ee,ft:()=>ae});var v=F(7393),Y=F(7574),L=F(7444);class de extends v.L{constructor(P){super(),this.parent=P}_next(P){this.parent.notifyNext(P)}_error(P){this.parent.notifyError(P),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ee extends v.L{notifyNext(P){this.destination.next(P)}notifyError(P){this.destination.error(P)}notifyComplete(){this.destination.complete()}}function ae(H,P){if(P.closed)return;if(H instanceof Y.y)return H.subscribe(P);let k;try{k=(0,L.s)(H)(P)}catch(W){P.error(W)}return k}},2441:(je,ge,F)=>{"use strict";F.d(ge,{c:()=>ce,N:()=>ee});var v=F(9765),Y=F(7574),L=F(5319),de=F(1307);class ce extends Y.y{constructor(k,W){super(),this.source=k,this.subjectFactory=W,this._refCount=0,this._isComplete=!1}_subscribe(k){return this.getSubject().subscribe(k)}getSubject(){const k=this._subject;return(!k||k.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let k=this._connection;return k||(this._isComplete=!1,k=this._connection=new L.w,k.add(this.source.subscribe(new fe(this.getSubject(),this))),k.closed&&(this._connection=null,k=L.w.EMPTY)),k}refCount(){return(0,de.x)()(this)}}const ee=(()=>{const P=ce.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:P._subscribe},_isComplete:{value:P._isComplete,writable:!0},getSubject:{value:P.getSubject},connect:{value:P.connect},refCount:{value:P.refCount}}})();class fe extends v.Yc{constructor(k,W){super(k),this.connectable=W}_error(k){this._unsubscribe(),super._error(k)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const k=this.connectable;if(k){this.connectable=null;const W=k._connection;k._refCount=0,k._subject=null,k._connection=null,W&&W.unsubscribe()}}}},9193:(je,ge,F)=>{"use strict";F.d(ge,{E:()=>Y,c:()=>L});var v=F(7574);const Y=new v.y(ce=>ce.complete());function L(ce){return ce?function(ce){return new v.y(ee=>ce.schedule(()=>ee.complete()))}(ce):Y}},4402:(je,ge,F)=>{"use strict";F.d(ge,{D:()=>oe});var v=F(7574),Y=F(7444),L=F(5319),de=F(6554),fe=F(4087),ae=F(377),k=F(4072),W=F(9489);function oe(Q,K){return K?function(Q,K){if(null!=Q){if(function(Q){return Q&&"function"==typeof Q[de.L]}(Q))return function(Q,K){return new v.y(Te=>{const Ie=new L.w;return Ie.add(K.schedule(()=>{const we=Q[de.L]();Ie.add(we.subscribe({next(Re){Ie.add(K.schedule(()=>Te.next(Re)))},error(Re){Ie.add(K.schedule(()=>Te.error(Re)))},complete(){Ie.add(K.schedule(()=>Te.complete()))}}))})),Ie})}(Q,K);if((0,k.t)(Q))return function(Q,K){return new v.y(Te=>{const Ie=new L.w;return Ie.add(K.schedule(()=>Q.then(we=>{Ie.add(K.schedule(()=>{Te.next(we),Ie.add(K.schedule(()=>Te.complete()))}))},we=>{Ie.add(K.schedule(()=>Te.error(we)))}))),Ie})}(Q,K);if((0,W.z)(Q))return(0,fe.r)(Q,K);if(function(Q){return Q&&"function"==typeof Q[ae.hZ]}(Q)||"string"==typeof Q)return function(Q,K){if(!Q)throw new Error("Iterable cannot be null");return new v.y(Te=>{const Ie=new L.w;let we;return Ie.add(()=>{we&&"function"==typeof we.return&&we.return()}),Ie.add(K.schedule(()=>{we=Q[ae.hZ](),Ie.add(K.schedule(function(){if(Te.closed)return;let Re,Me;try{const xe=we.next();Re=xe.value,Me=xe.done}catch(xe){return void Te.error(xe)}Me?Te.complete():(Te.next(Re),this.schedule())}))})),Ie})}(Q,K)}throw new TypeError((null!==Q&&typeof Q||Q)+" is not observable")}(Q,K):Q instanceof v.y?Q:new v.y((0,Y.s)(Q))}},6693:(je,ge,F)=>{"use strict";F.d(ge,{n:()=>de});var v=F(7574),Y=F(5015),L=F(4087);function de(ce,ee){return ee?(0,L.r)(ce,ee):new v.y((0,Y.V)(ce))}},6682:(je,ge,F)=>{"use strict";F.d(ge,{T:()=>ce});var v=F(7574),Y=F(4869),L=F(3282),de=F(6693);function ce(...ee){let fe=Number.POSITIVE_INFINITY,ae=null,H=ee[ee.length-1];return(0,Y.K)(H)?(ae=ee.pop(),ee.length>1&&"number"==typeof ee[ee.length-1]&&(fe=ee.pop())):"number"==typeof H&&(fe=ee.pop()),null===ae&&1===ee.length&&ee[0]instanceof v.y?ee[0]:(0,L.J)(fe)((0,de.n)(ee,ae))}},5917:(je,ge,F)=>{"use strict";F.d(ge,{of:()=>de});var v=F(4869),Y=F(6693),L=F(4087);function de(...ce){let ee=ce[ce.length-1];return(0,v.K)(ee)?(ce.pop(),(0,L.r)(ce,ee)):(0,Y.n)(ce)}},8002:(je,ge,F)=>{"use strict";F.d(ge,{U:()=>Y});var v=F(7393);function Y(ce,ee){return function(ae){if("function"!=typeof ce)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return ae.lift(new L(ce,ee))}}class L{constructor(ee,fe){this.project=ee,this.thisArg=fe}call(ee,fe){return fe.subscribe(new de(ee,this.project,this.thisArg))}}class de extends v.L{constructor(ee,fe,ae){super(ee),this.project=fe,this.count=0,this.thisArg=ae||this}_next(ee){let fe;try{fe=this.project.call(this.thisArg,ee,this.count++)}catch(ae){return void this.destination.error(ae)}this.destination.next(fe)}}},3282:(je,ge,F)=>{"use strict";F.d(ge,{J:()=>L});var v=F(9773),Y=F(4487);function L(de=Number.POSITIVE_INFINITY){return(0,v.zg)(Y.y,de)}},9773:(je,ge,F)=>{"use strict";F.d(ge,{zg:()=>de});var v=F(8002),Y=F(4402),L=F(5345);function de(ae,H,P=Number.POSITIVE_INFINITY){return"function"==typeof H?k=>k.pipe(de((W,G)=>(0,Y.D)(ae(W,G)).pipe((0,v.U)((z,oe)=>H(W,z,G,oe))),P)):("number"==typeof H&&(P=H),k=>k.lift(new ce(ae,P)))}class ce{constructor(H,P=Number.POSITIVE_INFINITY){this.project=H,this.concurrent=P}call(H,P){return P.subscribe(new ee(H,this.project,this.concurrent))}}class ee extends L.Ds{constructor(H,P,k=Number.POSITIVE_INFINITY){super(H),this.project=P,this.concurrent=k,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(H){this.active<this.concurrent?this._tryNext(H):this.buffer.push(H)}_tryNext(H){let P;const k=this.index++;try{P=this.project(H,k)}catch(W){return void this.destination.error(W)}this.active++,this._innerSub(P)}_innerSub(H){const P=new L.IY(this),k=this.destination;k.add(P);const W=(0,L.ft)(H,P);W!==P&&k.add(W)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(H){this.destination.next(H)}notifyComplete(){const H=this.buffer;this.active--,H.length>0?this._next(H.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},309:(je,ge,F)=>{"use strict";F.d(ge,{ht:()=>k,QV:()=>H});var v=F(7393),Y=F(9193),L=F(5917),de=F(7574);class ae{constructor(z,oe,Q){this.kind=z,this.value=oe,this.error=Q,this.hasValue="N"===z}observe(z){switch(this.kind){case"N":return z.next&&z.next(this.value);case"E":return z.error&&z.error(this.error);case"C":return z.complete&&z.complete()}}do(z,oe,Q){switch(this.kind){case"N":return z&&z(this.value);case"E":return oe&&oe(this.error);case"C":return Q&&Q()}}accept(z,oe,Q){return z&&"function"==typeof z.next?this.observe(z):this.do(z,oe,Q)}toObservable(){switch(this.kind){case"N":return(0,L.of)(this.value);case"E":return G=this.error,new de.y(oe=>oe.error(G));case"C":return(0,Y.c)()}var G;throw new Error("unexpected notification kind value")}static createNext(z){return void 0!==z?new ae("N",z):ae.undefinedValueNotification}static createError(z){return new ae("E",void 0,z)}static createComplete(){return ae.completeNotification}}function H(G,z=0){return function(Q){return Q.lift(new P(G,z))}}ae.completeNotification=new ae("C"),ae.undefinedValueNotification=new ae("N",void 0);class P{constructor(z,oe=0){this.scheduler=z,this.delay=oe}call(z,oe){return oe.subscribe(new k(z,this.scheduler,this.delay))}}class k extends v.L{constructor(z,oe,Q=0){super(z),this.scheduler=oe,this.delay=Q}static dispatch(z){const{notification:oe,destination:Q}=z;oe.observe(Q),this.unsubscribe()}scheduleMessage(z){this.destination.add(this.scheduler.schedule(k.dispatch,this.delay,new W(z,this.destination)))}_next(z){this.scheduleMessage(ae.createNext(z))}_error(z){this.scheduleMessage(ae.createError(z)),this.unsubscribe()}_complete(){this.scheduleMessage(ae.createComplete()),this.unsubscribe()}}class W{constructor(z,oe){this.notification=z,this.destination=oe}}},1307:(je,ge,F)=>{"use strict";F.d(ge,{x:()=>Y});var v=F(7393);function Y(){return function(ee){return ee.lift(new L(ee))}}class L{constructor(ee){this.connectable=ee}call(ee,fe){const{connectable:ae}=this;ae._refCount++;const H=new de(ee,ae),P=fe.subscribe(H);return H.closed||(H.connection=ae.connect()),P}}class de extends v.L{constructor(ee,fe){super(ee),this.connectable=fe}_unsubscribe(){const{connectable:ee}=this;if(!ee)return void(this.connection=null);this.connectable=null;const fe=ee._refCount;if(fe<=0)return void(this.connection=null);if(ee._refCount=fe-1,fe>1)return void(this.connection=null);const{connection:ae}=this,H=ee._connection;this.connection=null,H&&(!ae||H===ae)&&H.unsubscribe()}}},3101:(je,ge,F)=>{"use strict";F.d(ge,{R:()=>K});var v=F(7574);let Y=1;const L=Promise.resolve(),de={};function ce(Ie){return Ie in de&&(delete de[Ie],!0)}const ee={setImmediate(Ie){const we=Y++;return de[we]=!0,L.then(()=>ce(we)&&Ie()),we},clearImmediate(Ie){ce(Ie)}};var ae=F(6465),P=F(6102);const G=new class extends P.v{flush(we){this.active=!0,this.scheduled=void 0;const{actions:Re}=this;let Me,xe=-1,it=Re.length;we=we||Re.shift();do{if(Me=we.execute(we.state,we.delay))break}while(++xe<it&&(we=Re.shift()));if(this.active=!1,Me){for(;++xe<it&&(we=Re.shift());)we.unsubscribe();throw Me}}}(class extends ae.o{constructor(we,Re){super(we,Re),this.scheduler=we,this.work=Re}requestAsyncId(we,Re,Me=0){return null!==Me&&Me>0?super.requestAsyncId(we,Re,Me):(we.actions.push(this),we.scheduled||(we.scheduled=ee.setImmediate(we.flush.bind(we,null))))}recycleAsyncId(we,Re,Me=0){if(null!==Me&&Me>0||null===Me&&this.delay>0)return super.recycleAsyncId(we,Re,Me);0===we.actions.length&&(ee.clearImmediate(Re),we.scheduled=void 0)}});var z=F(9796);class Q extends v.y{constructor(we,Re=0,Me=G){var Ie;super(),this.source=we,this.delayTime=Re,this.scheduler=Me,(!(!(0,z.k)(Ie=Re)&&Ie-parseFloat(Ie)+1>=0)||Re<0)&&(this.delayTime=0),(!Me||"function"!=typeof Me.schedule)&&(this.scheduler=G)}static create(we,Re=0,Me=G){return new Q(we,Re,Me)}static dispatch(we){const{source:Re,subscriber:Me}=we;return this.add(Re.subscribe(Me))}_subscribe(we){return this.scheduler.schedule(Q.dispatch,this.delayTime,{source:this.source,subscriber:we})}}function K(Ie,we=0){return function(Me){return Me.lift(new Te(Ie,we))}}class Te{constructor(we,Re){this.scheduler=we,this.delay=Re}call(we,Re){return new Q(Re,this.delay,this.scheduler).subscribe(we)}}},3342:(je,ge,F)=>{"use strict";F.d(ge,{b:()=>de});var v=F(7393);function Y(){}var L=F(9105);function de(fe,ae,H){return function(k){return k.lift(new ce(fe,ae,H))}}class ce{constructor(ae,H,P){this.nextOrObserver=ae,this.error=H,this.complete=P}call(ae,H){return H.subscribe(new ee(ae,this.nextOrObserver,this.error,this.complete))}}class ee extends v.L{constructor(ae,H,P,k){super(ae),this._tapNext=Y,this._tapError=Y,this._tapComplete=Y,this._tapError=P||Y,this._tapComplete=k||Y,(0,L.m)(H)?(this._context=this,this._tapNext=H):H&&(this._context=H,this._tapNext=H.next||Y,this._tapError=H.error||Y,this._tapComplete=H.complete||Y)}_next(ae){try{this._tapNext.call(this._context,ae)}catch(H){return void this.destination.error(H)}this.destination.next(ae)}_error(ae){try{this._tapError.call(this._context,ae)}catch(H){return void this.destination.error(H)}this.destination.error(ae)}_complete(){try{this._tapComplete.call(this._context)}catch(ae){return void this.destination.error(ae)}return this.destination.complete()}}},4087:(je,ge,F)=>{"use strict";F.d(ge,{r:()=>L});var v=F(7574),Y=F(5319);function L(de,ce){return new v.y(ee=>{const fe=new Y.w;let ae=0;return fe.add(ce.schedule(function(){ae!==de.length?(ee.next(de[ae++]),ee.closed||fe.add(this.schedule())):ee.complete()})),fe})}},6465:(je,ge,F)=>{"use strict";F.d(ge,{o:()=>L});var v=F(5319);class Y extends v.w{constructor(ce,ee){super()}schedule(ce,ee=0){return this}}class L extends Y{constructor(ce,ee){super(ce,ee),this.scheduler=ce,this.work=ee,this.pending=!1}schedule(ce,ee=0){if(this.closed)return this;this.state=ce;const fe=this.id,ae=this.scheduler;return null!=fe&&(this.id=this.recycleAsyncId(ae,fe,ee)),this.pending=!0,this.delay=ee,this.id=this.id||this.requestAsyncId(ae,this.id,ee),this}requestAsyncId(ce,ee,fe=0){return setInterval(ce.flush.bind(ce,this),fe)}recycleAsyncId(ce,ee,fe=0){if(null!==fe&&this.delay===fe&&!1===this.pending)return ee;clearInterval(ee)}execute(ce,ee){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(ce,ee);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ee){let ae,fe=!1;try{this.work(ce)}catch(H){fe=!0,ae=!!H&&H||new Error(H)}if(fe)return this.unsubscribe(),ae}_unsubscribe(){const ce=this.id,ee=this.scheduler,fe=ee.actions,ae=fe.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ae&&fe.splice(ae,1),null!=ce&&(this.id=this.recycleAsyncId(ee,ce,null)),this.delay=null}}},6102:(je,ge,F)=>{"use strict";F.d(ge,{v:()=>Y});let v=(()=>{class L{constructor(ce,ee=L.now){this.SchedulerAction=ce,this.now=ee}schedule(ce,ee=0,fe){return new this.SchedulerAction(this,ce).schedule(fe,ee)}}return L.now=()=>Date.now(),L})();class Y extends v{constructor(de,ce=v.now){super(de,()=>Y.delegate&&Y.delegate!==this?Y.delegate.now():ce()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(de,ce=0,ee){return Y.delegate&&Y.delegate!==this?Y.delegate.schedule(de,ce,ee):super.schedule(de,ce,ee)}flush(de){const{actions:ce}=this;if(this.active)return void ce.push(de);let ee;this.active=!0;do{if(ee=de.execute(de.state,de.delay))break}while(de=ce.shift());if(this.active=!1,ee){for(;de=ce.shift();)de.unsubscribe();throw ee}}}},3637:(je,ge,F)=>{"use strict";F.d(ge,{z:()=>L});var v=F(6465);const L=new(F(6102).v)(v.o)},7771:(je,ge,F)=>{"use strict";F.d(ge,{c:()=>ee,N:()=>ce});var v=F(6465),L=F(6102);const ce=new class extends L.v{}(class extends v.o{constructor(ae,H){super(ae,H),this.scheduler=ae,this.work=H}schedule(ae,H=0){return H>0?super.schedule(ae,H):(this.delay=H,this.state=ae,this.scheduler.flush(this),this)}execute(ae,H){return H>0||this.closed?super.execute(ae,H):this._execute(ae,H)}requestAsyncId(ae,H,P=0){return null!==P&&P>0||null===P&&this.delay>0?super.requestAsyncId(ae,H,P):ae.flush(this)}}),ee=ce},377:(je,ge,F)=>{"use strict";F.d(ge,{hZ:()=>Y});const Y="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(je,ge,F)=>{"use strict";F.d(ge,{L:()=>v});const v="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(je,ge,F)=>{"use strict";F.d(ge,{b:()=>v});const v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(je,ge,F)=>{"use strict";F.d(ge,{N:()=>Y});const Y=(()=>{function L(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return L.prototype=Object.create(Error.prototype),L})()},4449:(je,ge,F)=>{"use strict";function v(Y){setTimeout(()=>{throw Y},0)}F.d(ge,{z:()=>v})},4487:(je,ge,F)=>{"use strict";function v(Y){return Y}F.d(ge,{y:()=>v})},9796:(je,ge,F)=>{"use strict";F.d(ge,{k:()=>v});const v=Array.isArray||(Y=>Y&&"number"==typeof Y.length)},9489:(je,ge,F)=>{"use strict";F.d(ge,{z:()=>v});const v=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},9105:(je,ge,F)=>{"use strict";function v(Y){return"function"==typeof Y}F.d(ge,{m:()=>v})},1555:(je,ge,F)=>{"use strict";function v(Y){return null!==Y&&"object"==typeof Y}F.d(ge,{K:()=>v})},4072:(je,ge,F)=>{"use strict";function v(Y){return!!Y&&"function"!=typeof Y.subscribe&&"function"==typeof Y.then}F.d(ge,{t:()=>v})},4869:(je,ge,F)=>{"use strict";function v(Y){return Y&&"function"==typeof Y.schedule}F.d(ge,{K:()=>v})},7444:(je,ge,F)=>{"use strict";F.d(ge,{s:()=>k});var v=F(5015),Y=F(4449),de=F(377),ee=F(6554),ae=F(9489),H=F(4072),P=F(1555);const k=W=>{if(W&&"function"==typeof W[ee.L])return(W=>G=>{const z=W[ee.L]();if("function"!=typeof z.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return z.subscribe(G)})(W);if((0,ae.z)(W))return(0,v.V)(W);if((0,H.t)(W))return(W=>G=>(W.then(z=>{G.closed||(G.next(z),G.complete())},z=>G.error(z)).then(null,Y.z),G))(W);if(W&&"function"==typeof W[de.hZ])return(W=>G=>{const z=W[de.hZ]();for(;;){let oe;try{oe=z.next()}catch(Q){return G.error(Q),G}if(oe.done){G.complete();break}if(G.next(oe.value),G.closed)break}return"function"==typeof z.return&&G.add(()=>{z.return&&z.return()}),G})(W);{const z=`You provided ${(0,P.K)(W)?"an invalid object":`'${W}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(z)}}},5015:(je,ge,F)=>{"use strict";F.d(ge,{V:()=>v});const v=Y=>L=>{for(let de=0,ce=Y.length;de<ce&&!L.closed;de++)L.next(Y[de]);L.complete()}},1557:(je,ge,F)=>{"use strict";var v=F(3018);let Y=null;function L(){return Y}const fe=new v.OlP("DocumentToken");let ae=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,v.Yz7)({factory:H,token:i,providedIn:"platform"}),i})();function H(){return(0,v.LFG)(k)}const P=new v.OlP("Location Initialized");let k=(()=>{class i extends ae{constructor(r){super(),this._doc=r,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(r){const a=L().getGlobalEventTarget(this._doc,"window");return a.addEventListener("popstate",r,!1),()=>a.removeEventListener("popstate",r)}onHashChange(r){const a=L().getGlobalEventTarget(this._doc,"window");return a.addEventListener("hashchange",r,!1),()=>a.removeEventListener("hashchange",r)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(r){this.location.pathname=r}pushState(r,a,l){W()?this._history.pushState(r,a,l):this.location.hash=l}replaceState(r,a,l){W()?this._history.replaceState(r,a,l):this.location.hash=l}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(fe))},i.\u0275prov=(0,v.Yz7)({factory:G,token:i,providedIn:"platform"}),i})();function W(){return!!window.history.pushState}function G(){return new k((0,v.LFG)(fe))}function z(i,n){if(0==i.length)return n;if(0==n.length)return i;let r=0;return i.endsWith("/")&&r++,n.startsWith("/")&&r++,2==r?i+n.substring(1):1==r?i+n:i+"/"+n}function oe(i){const n=i.match(/#|\?|$/),r=n&&n.index||i.length;return i.slice(0,r-("/"===i[r-1]?1:0))+i.slice(r)}function Q(i){return i&&"?"!==i[0]?"?"+i:i}let K=(()=>{class i{historyGo(r){throw new Error("Not implemented")}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=(0,v.Yz7)({factory:Te,token:i,providedIn:"root"}),i})();function Te(i){const n=(0,v.LFG)(fe).location;return new we((0,v.LFG)(ae),n&&n.origin||"")}const Ie=new v.OlP("appBaseHref");let we=(()=>{class i extends K{constructor(r,a){if(super(),this._platformLocation=r,this._removeListenerFns=[],null==a&&(a=this._platformLocation.getBaseHrefFromDOM()),null==a)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=a}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return z(this._baseHref,r)}path(r=!1){const a=this._platformLocation.pathname+Q(this._platformLocation.search),l=this._platformLocation.hash;return l&&r?`${a}${l}`:a}pushState(r,a,l,h){const m=this.prepareExternalUrl(l+Q(h));this._platformLocation.pushState(r,a,m)}replaceState(r,a,l,h){const m=this.prepareExternalUrl(l+Q(h));this._platformLocation.replaceState(r,a,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformLocation).historyGo)||void 0===l||l.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(ae),v.LFG(Ie,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),Re=(()=>{class i extends K{constructor(r,a){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],null!=a&&(this._baseHref=a)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let a=this._platformLocation.hash;return null==a&&(a="#"),a.length>0?a.substring(1):a}prepareExternalUrl(r){const a=z(this._baseHref,r);return a.length>0?"#"+a:a}pushState(r,a,l,h){let m=this.prepareExternalUrl(l+Q(h));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.pushState(r,a,m)}replaceState(r,a,l,h){let m=this.prepareExternalUrl(l+Q(h));0==m.length&&(m=this._platformLocation.pathname),this._platformLocation.replaceState(r,a,m)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformLocation).historyGo)||void 0===l||l.call(a,r)}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(ae),v.LFG(Ie,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),Me=(()=>{class i{constructor(r,a){this._subject=new v.vpe,this._urlChangeListeners=[],this._platformStrategy=r;const l=this._platformStrategy.getBaseHref();this._platformLocation=a,this._baseHref=oe(mt(l)),this._platformStrategy.onPopState(h=>{this._subject.emit({url:this.path(!0),pop:!0,state:h.state,type:h.type})})}path(r=!1){return this.normalize(this._platformStrategy.path(r))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(r,a=""){return this.path()==this.normalize(r+Q(a))}normalize(r){return i.stripTrailingSlash(function(i,n){return i&&n.startsWith(i)?n.substring(i.length):n}(this._baseHref,mt(r)))}prepareExternalUrl(r){return r&&"/"!==r[0]&&(r="/"+r),this._platformStrategy.prepareExternalUrl(r)}go(r,a="",l=null){this._platformStrategy.pushState(l,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Q(a)),l)}replaceState(r,a="",l=null){this._platformStrategy.replaceState(l,"",r,a),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Q(a)),l)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(r=0){var a,l;null===(l=(a=this._platformStrategy).historyGo)||void 0===l||l.call(a,r)}onUrlChange(r){this._urlChangeListeners.push(r),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(a=>{this._notifyUrlChangeListeners(a.url,a.state)}))}_notifyUrlChangeListeners(r="",a){this._urlChangeListeners.forEach(l=>l(r,a))}subscribe(r,a,l){return this._subject.subscribe({next:r,error:a,complete:l})}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(K),v.LFG(ae))},i.normalizeQueryParams=Q,i.joinWithSlash=z,i.stripTrailingSlash=oe,i.\u0275prov=(0,v.Yz7)({factory:xe,token:i,providedIn:"root"}),i})();function xe(){return new Me((0,v.LFG)(K),(0,v.LFG)(ae))}function mt(i){return i.replace(/\/index.html$/,"")}var te=(()=>((te=te||{})[te.Zero=0]="Zero",te[te.One=1]="One",te[te.Two=2]="Two",te[te.Few=3]="Few",te[te.Many=4]="Many",te[te.Other=5]="Other",te))();const fr=v.kL8;class sr{}let eo=(()=>{class i extends sr{constructor(r){super(),this.locale=r}getPluralCategory(r,a){switch(fr(a||this.locale)(r)){case te.Zero:return"zero";case te.One:return"one";case te.Two:return"two";case te.Few:return"few";case te.Many:return"many";default:return"other"}}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(v.soG))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();class Rd{constructor(n,r,a,l){this.$implicit=n,this.ngForOf=r,this.index=a,this.count=l}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ui=(()=>{class i{constructor(r,a,l){this._viewContainer=r,this._template=a,this._differs=l,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const r=this._ngForOf;if(!this._differ&&r)try{this._differ=this._differs.find(r).create(this.ngForTrackBy)}catch(a){throw new Error(`Cannot find a differ supporting object '${r}' of type '${function(i){return i.name||typeof i}(r)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){const a=[];r.forEachOperation((l,h,m)=>{if(null==l.previousIndex){const C=this._viewContainer.createEmbeddedView(this._template,new Rd(null,this._ngForOf,-1,-1),null===m?void 0:m),D=new Dn(l,C);a.push(D)}else if(null==m)this._viewContainer.remove(null===h?void 0:h);else if(null!==h){const C=this._viewContainer.get(h);this._viewContainer.move(C,m);const D=new Dn(l,C);a.push(D)}});for(let l=0;l<a.length;l++)this._perViewChange(a[l].view,a[l].record);for(let l=0,h=this._viewContainer.length;l<h;l++){const m=this._viewContainer.get(l);m.context.index=l,m.context.count=h,m.context.ngForOf=this._ngForOf}r.forEachIdentityChange(l=>{this._viewContainer.get(l.currentIndex).context.$implicit=l.item})}_perViewChange(r,a){r.context.$implicit=a.item}static ngTemplateContextGuard(r,a){return!0}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(v.s_b),v.Y36(v.Rgc),v.Y36(v.ZZ4))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),i})();class Dn{constructor(n,r){this.record=n,this.view=r}}let ms=(()=>{class i{constructor(r,a){this._viewContainer=r,this._context=new xr,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=a}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Pt("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Pt("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,a){return!0}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(v.s_b),v.Y36(v.Rgc))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),i})();class xr{constructor(){this.$implicit=null,this.ngIf=null}}function Pt(i,n){if(n&&!n.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,v.AaK)(n)}'.`)}let fw=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[{provide:sr,useClass:eo}]}),i})();function Ya(i){return"server"===i}let Qa=(()=>{class i{}return i.\u0275prov=(0,v.Yz7)({token:i,providedIn:"root",factory:()=>new kl((0,v.LFG)(fe),window)}),i})();class kl{constructor(n,r){this.document=n,this.window=r,this.offset=()=>[0,0]}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(n){this.supportsScrolling()&&this.window.scrollTo(n[0],n[1])}scrollToAnchor(n){if(!this.supportsScrolling())return;const r=function(i,n){const r=i.getElementById(n)||i.getElementsByName(n)[0];if(r)return r;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const a=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let l=a.currentNode;for(;l;){const h=l.shadowRoot;if(h){const m=h.getElementById(n)||h.querySelector(`[name="${n}"]`);if(m)return m}l=a.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r),this.attemptFocus(r))}setHistoryScrollRestoration(n){if(this.supportScrollRestoration()){const r=this.window.history;r&&r.scrollRestoration&&(r.scrollRestoration=n)}}scrollToElement(n){const r=n.getBoundingClientRect(),a=r.left+this.window.pageXOffset,l=r.top+this.window.pageYOffset,h=this.offset();this.window.scrollTo(a-h[0],l-h[1])}attemptFocus(n){return n.focus(),this.document.activeElement===n}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const n=Ja(this.window.history)||Ja(Object.getPrototypeOf(this.window.history));return!(!n||!n.writable&&!n.set)}catch(n){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(n){return!1}}}function Ja(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class io extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var i;i=new io,Y||(Y=i)}onAndCancel(n,r,a){return n.addEventListener(r,a,!1),()=>{n.removeEventListener(r,a,!1)}}dispatchEvent(n,r){n.dispatchEvent(r)}remove(n){n.parentNode&&n.parentNode.removeChild(n)}createElement(n,r){return(r=r||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,r){return"window"===r?window:"document"===r?n:"body"===r?n.body:null}getBaseHref(n){const r=(ys=ys||document.querySelector("base"),ys?ys.getAttribute("href"):null);return null==r?null:function(i){Vl=Vl||document.createElement("a"),Vl.setAttribute("href",i);const n=Vl.pathname;return"/"===n.charAt(0)?n:`/${n}`}(r)}resetBaseElement(){ys=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function(i,n){n=encodeURIComponent(n);for(const r of i.split(";")){const a=r.indexOf("="),[l,h]=-1==a?[r,""]:[r.slice(0,a),r.slice(a+1)];if(l.trim()===n)return decodeURIComponent(h)}return null}(document.cookie,n)}}let Vl,ys=null;const wp=new v.OlP("TRANSITION_ID"),Bl=[{provide:v.ip1,useFactory:function(i,n,r){return()=>{r.get(v.CZH).donePromise.then(()=>{const a=L(),l=n.querySelectorAll(`style[ng-transition="${i}"]`);for(let h=0;h<l.length;h++)a.remove(l[h])})}},deps:[wp,fe,v.zs3],multi:!0}];class $t{static init(){(0,v.VLi)(new $t)}addToWindow(n){v.dqk.getAngularTestability=(a,l=!0)=>{const h=n.findTestabilityInTree(a,l);if(null==h)throw new Error("Could not find testability for element.");return h},v.dqk.getAllAngularTestabilities=()=>n.getAllTestabilities(),v.dqk.getAllAngularRootElements=()=>n.getAllRootElements(),v.dqk.frameworkStabilizers||(v.dqk.frameworkStabilizers=[]),v.dqk.frameworkStabilizers.push(a=>{const l=v.dqk.getAllAngularTestabilities();let h=l.length,m=!1;const C=function(D){m=m||D,h--,0==h&&a(m)};l.forEach(function(D){D.whenStable(C)})})}findTestabilityInTree(n,r,a){if(null==r)return null;const l=n.getTestability(r);return null!=l?l:a?L().isShadowRoot(r)?this.findTestabilityInTree(n,r.host,!0):this.findTestabilityInTree(n,r.parentElement,!0):null}}let Cp=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const so=new v.OlP("EventManagerPlugins");let su=(()=>{class i{constructor(r,a){this._zone=a,this._eventNameToPlugin=new Map,r.forEach(l=>l.manager=this),this._plugins=r.slice().reverse()}addEventListener(r,a,l){return this._findPluginFor(a).addEventListener(r,a,l)}addGlobalEventListener(r,a,l){return this._findPluginFor(a).addGlobalEventListener(r,a,l)}getZone(){return this._zone}_findPluginFor(r){const a=this._eventNameToPlugin.get(r);if(a)return a;const l=this._plugins;for(let h=0;h<l.length;h++){const m=l[h];if(m.supports(r))return this._eventNameToPlugin.set(r,m),m}throw new Error(`No event manager plugin found for event ${r}`)}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(so),v.LFG(v.R0b))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();class ou{constructor(n){this._doc=n}addGlobalEventListener(n,r,a){const l=L().getGlobalEventTarget(this._doc,n);if(!l)throw new Error(`Unsupported event target ${l} for event ${r}`);return this.addEventListener(l,r,a)}}let Hd=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(r){const a=new Set;r.forEach(l=>{this._stylesSet.has(l)||(this._stylesSet.add(l),a.add(l))}),this.onStylesAdded(a)}onStylesAdded(r){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),oo=(()=>{class i extends Hd{constructor(r){super(),this._doc=r,this._hostNodes=new Map,this._hostNodes.set(r.head,[])}_addStylesToHost(r,a,l){r.forEach(h=>{const m=this._doc.createElement("style");m.textContent=h,l.push(a.appendChild(m))})}addHost(r){const a=[];this._addStylesToHost(this._stylesSet,r,a),this._hostNodes.set(r,a)}removeHost(r){const a=this._hostNodes.get(r);a&&a.forEach(bp),this._hostNodes.delete(r)}onStylesAdded(r){this._hostNodes.forEach((a,l)=>{this._addStylesToHost(r,l,a)})}ngOnDestroy(){this._hostNodes.forEach(r=>r.forEach(bp))}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function bp(i){L().remove(i)}const ye={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ht=/%COMP%/g;function Es(i,n,r){for(let a=0;a<n.length;a++){let l=n[a];Array.isArray(l)?Es(i,l,r):(l=l.replace(ht,i),r.push(l))}return r}function xy(i){return n=>{if("__ngUnwrap__"===n)return i;!1===i(n)&&(n.preventDefault(),n.returnValue=!1)}}let ea=(()=>{class i{constructor(r,a,l){this.eventManager=r,this.sharedStylesHost=a,this.appId=l,this.rendererByCompId=new Map,this.defaultRenderer=new ws(r)}createRenderer(r,a){if(!r||!a)return this.defaultRenderer;switch(a.encapsulation){case v.ifc.Emulated:{let l=this.rendererByCompId.get(a.id);return l||(l=new Cs(this.eventManager,this.sharedStylesHost,a,this.appId),this.rendererByCompId.set(a.id,l)),l.applyToHost(r),l}case 1:case v.ifc.ShadowDom:return new $i(this.eventManager,this.sharedStylesHost,r,a);default:if(!this.rendererByCompId.has(a.id)){const l=Es(a.id,a.styles,[]);this.sharedStylesHost.addStyles(l),this.rendererByCompId.set(a.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(su),v.LFG(oo),v.LFG(v.AFp))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();class ws{constructor(n){this.eventManager=n,this.data=Object.create(null)}destroy(){}createElement(n,r){return r?document.createElementNS(ye[r]||r,n):document.createElement(n)}createComment(n){return document.createComment(n)}createText(n){return document.createTextNode(n)}appendChild(n,r){n.appendChild(r)}insertBefore(n,r,a){n&&n.insertBefore(r,a)}removeChild(n,r){n&&n.removeChild(r)}selectRootElement(n,r){let a="string"==typeof n?document.querySelector(n):n;if(!a)throw new Error(`The selector "${n}" did not match any elements`);return r||(a.textContent=""),a}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,r,a,l){if(l){r=l+":"+r;const h=ye[l];h?n.setAttributeNS(h,r,a):n.setAttribute(r,a)}else n.setAttribute(r,a)}removeAttribute(n,r,a){if(a){const l=ye[a];l?n.removeAttributeNS(l,r):n.removeAttribute(`${a}:${r}`)}else n.removeAttribute(r)}addClass(n,r){n.classList.add(r)}removeClass(n,r){n.classList.remove(r)}setStyle(n,r,a,l){l&(v.JOm.DashCase|v.JOm.Important)?n.style.setProperty(r,a,l&v.JOm.Important?"important":""):n.style[r]=a}removeStyle(n,r,a){a&v.JOm.DashCase?n.style.removeProperty(r):n.style[r]=""}setProperty(n,r,a){n[r]=a}setValue(n,r){n.nodeValue=r}listen(n,r,a){return"string"==typeof n?this.eventManager.addGlobalEventListener(n,r,xy(a)):this.eventManager.addEventListener(n,r,xy(a))}}class Cs extends ws{constructor(n,r,a,l){super(n),this.component=a;const h=Es(l+"-"+a.id,a.styles,[]);r.addStyles(h),this.contentAttr="_ngcontent-%COMP%".replace(ht,l+"-"+a.id),this.hostAttr=function(i){return"_nghost-%COMP%".replace(ht,i)}(l+"-"+a.id)}applyToHost(n){super.setAttribute(n,this.hostAttr,"")}createElement(n,r){const a=super.createElement(n,r);return super.setAttribute(a,this.contentAttr,""),a}}class $i extends ws{constructor(n,r,a,l){super(n),this.sharedStylesHost=r,this.hostEl=a,this.shadowRoot=a.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const h=Es(l.id,l.styles,[]);for(let m=0;m<h.length;m++){const C=document.createElement("style");C.textContent=h[m],this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(n,r){return super.appendChild(this.nodeOrShadowRoot(n),r)}insertBefore(n,r,a){return super.insertBefore(this.nodeOrShadowRoot(n),r,a)}removeChild(n,r){return super.removeChild(this.nodeOrShadowRoot(n),r)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}}let zd=(()=>{class i extends ou{constructor(r){super(r)}supports(r){return!0}addEventListener(r,a,l){return r.addEventListener(a,l,!1),()=>this.removeEventListener(r,a,l)}removeEventListener(r,a,l){return r.removeEventListener(a,l)}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const lu=["alt","control","meta","shift"],xp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Np={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},mr={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let uo=(()=>{class i extends ou{constructor(r){super(r)}supports(r){return null!=i.parseEventName(r)}addEventListener(r,a,l){const h=i.parseEventName(a),m=i.eventCallback(h.fullKey,l,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(r,h.domEventName,m))}static parseEventName(r){const a=r.toLowerCase().split("."),l=a.shift();if(0===a.length||"keydown"!==l&&"keyup"!==l)return null;const h=i._normalizeKey(a.pop());let m="";if(lu.forEach(D=>{const x=a.indexOf(D);x>-1&&(a.splice(x,1),m+=D+".")}),m+=h,0!=a.length||0===h.length)return null;const C={};return C.domEventName=l,C.fullKey=m,C}static getEventFullKey(r){let a="",l=function(i){let n=i.key;if(null==n){if(n=i.keyIdentifier,null==n)return"Unidentified";n.startsWith("U+")&&(n=String.fromCharCode(parseInt(n.substring(2),16)),3===i.location&&Np.hasOwnProperty(n)&&(n=Np[n]))}return xp[n]||n}(r);return l=l.toLowerCase()," "===l?l="space":"."===l&&(l="dot"),lu.forEach(h=>{h!=l&&mr[h](r)&&(a+=h+".")}),a+=l,a}static eventCallback(r,a,l){return h=>{i.getEventFullKey(h)===r&&l.runGuarded(()=>a(h))}}static _normalizeKey(r){switch(r){case"esc":return"escape";default:return r}}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(fe))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const ky=(0,v.eFA)(v._c5,"browser",[{provide:v.Lbi,useValue:"browser"},{provide:v.g9A,useValue:function(){io.makeCurrent(),$t.init()},multi:!0},{provide:fe,useFactory:function(){return(0,v.RDi)(document),document},deps:[]}]),Is=[[],{provide:v.zSh,useValue:"root"},{provide:v.qLn,useFactory:function(){return new v.qLn},deps:[]},{provide:so,useClass:zd,multi:!0,deps:[fe,v.R0b,v.Lbi]},{provide:so,useClass:uo,multi:!0,deps:[fe]},[],{provide:ea,useClass:ea,deps:[su,oo,v.AFp]},{provide:v.FYo,useExisting:ea},{provide:Hd,useExisting:oo},{provide:oo,useClass:oo,deps:[fe]},{provide:v.dDg,useClass:v.dDg,deps:[v.R0b]},{provide:su,useClass:su,deps:[so,v.R0b]},{provide:class{},useClass:Cp,deps:[]},[]];let du=(()=>{class i{constructor(r){if(r)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(r){return{ngModule:i,providers:[{provide:v.AFp,useValue:r.appId},{provide:wp,useExisting:v.AFp},Bl]}}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(i,12))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:Is,imports:[fw,v.hGG]}),i})();"undefined"!=typeof window&&window;var tn=F(4402),Or=F(7574),Zl=F(9796),Xe=F(8002),oh=F(1555);function Ds(i,n){return new Or.y(r=>{const a=i.length;if(0===a)return void r.complete();const l=new Array(a);let h=0,m=0;for(let C=0;C<a;C++){const D=(0,tn.D)(i[C]);let x=!1;r.add(D.subscribe({next:R=>{x||(x=!0,m++),l[C]=R},error:R=>r.error(R),complete:()=>{h++,(h===a||!x)&&(m===a&&r.next(n?n.reduce((R,O,$)=>(R[O]=l[$],R),{}):l),r.complete())}}))}})}let mu=(()=>{class i{constructor(r,a){this._renderer=r,this._elementRef=a,this.onChange=l=>{},this.onTouched=()=>{}}setProperty(r,a){this._renderer.setProperty(this._elementRef.nativeElement,r,a)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(v.Qsj),v.Y36(v.SBq))},i.\u0275dir=v.lG2({type:i}),i})(),lo=(()=>{class i extends mu{}return i.\u0275fac=function(){let n;return function(a){return(n||(n=v.n5z(i)))(a||i)}}(),i.\u0275dir=v.lG2({type:i,features:[v.qOj]}),i})();const Ei=new v.OlP("NgValueAccessor"),Pp={provide:Ei,useExisting:(0,v.Gpc)(()=>Ts),multi:!0},uh=new v.OlP("CompositionEventMode");let Ts=(()=>{class i extends mu{constructor(r,a,l){super(r,a),this._compositionMode=l,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const i=L()?L().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(r){this.setProperty("value",null==r?"":r)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(v.Qsj),v.Y36(v.SBq),v.Y36(uh,8))},i.\u0275dir=v.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,a){1&r&&v.NdJ("input",function(h){return a._handleInput(h.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(h){return a._compositionEnd(h.target.value)})},features:[v._Bn([Pp]),v.qOj]}),i})();const On=new v.OlP("NgValidators"),qi=new v.OlP("NgAsyncValidators");function Uy(i){return null!=i}function kp(i){const n=(0,v.QGY)(i)?(0,tn.D)(i):i;return(0,v.CqO)(n),n}function By(i){let n={};return i.forEach(r=>{n=null!=r?Object.assign(Object.assign({},n),r):n}),0===Object.keys(n).length?null:n}function Jl(i,n){return n.map(r=>r(i))}function Xl(i){return i.map(n=>function(i){return!i.validate}(n)?n:r=>n.validate(r))}function ec(i){return null!=i?function(i){if(!i)return null;const n=i.filter(Uy);return 0==n.length?null:function(r){return By(Jl(r,n))}}(Xl(i)):null}function tc(i){return null!=i?function(i){if(!i)return null;const n=i.filter(Uy);return 0==n.length?null:function(r){return function(...i){if(1===i.length){const n=i[0];if((0,Zl.k)(n))return Ds(n,null);if((0,oh.K)(n)&&Object.getPrototypeOf(n)===Object.prototype){const r=Object.keys(n);return Ds(r.map(a=>n[a]),r)}}if("function"==typeof i[i.length-1]){const n=i.pop();return Ds(i=1===i.length&&(0,Zl.k)(i[0])?i[0]:i,null).pipe((0,Xe.U)(r=>n(...r)))}return Ds(i,null)}(Jl(r,n).map(kp)).pipe((0,Xe.U)(By))}}(Xl(i)):null}function nc(i,n){return null===i?[n]:Array.isArray(i)?[...i,n]:[i,n]}function rc(i){return i?Array.isArray(i)?i:[i]:[]}function fo(i,n){return Array.isArray(i)?i.includes(n):i===n}function po(i,n){const r=rc(n);return rc(i).forEach(l=>{fo(r,l)||r.push(l)}),r}function xs(i,n){return rc(n).filter(r=>!fo(i,r))}let Hy=(()=>{class i{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=ec(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=tc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,a){return!!this.control&&this.control.hasError(r,a)}getError(r,a){return this.control?this.control.getError(r,a):null}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=v.lG2({type:i}),i})(),Et=(()=>{class i extends Hy{get formDirective(){return null}get path(){return null}}return i.\u0275fac=function(){let n;return function(a){return(n||(n=v.n5z(i)))(a||i)}}(),i.\u0275dir=v.lG2({type:i,features:[v.qOj]}),i})();class ci extends Hy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class go{constructor(n){this._cd=n}is(n){var r,a,l;return"submitted"===n?!!(null===(r=this._cd)||void 0===r?void 0:r.submitted):!!(null===(l=null===(a=this._cd)||void 0===a?void 0:a.control)||void 0===l?void 0:l[n])}}let yr=(()=>{class i extends go{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(ci,2))},i.\u0275dir=v.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,a){2&r&&v.ekj("ng-untouched",a.is("untouched"))("ng-touched",a.is("touched"))("ng-pristine",a.is("pristine"))("ng-dirty",a.is("dirty"))("ng-valid",a.is("valid"))("ng-invalid",a.is("invalid"))("ng-pending",a.is("pending"))},features:[v.qOj]}),i})(),_r=(()=>{class i extends go{constructor(r){super(r)}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(Et,10))},i.\u0275dir=v.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,a){2&r&&v.ekj("ng-untouched",a.is("untouched"))("ng-touched",a.is("touched"))("ng-pristine",a.is("pristine"))("ng-dirty",a.is("dirty"))("ng-valid",a.is("valid"))("ng-invalid",a.is("invalid"))("ng-pending",a.is("pending"))("ng-submitted",a.is("submitted"))},features:[v.qOj]}),i})();function Ms(i,n){_u(i,n),n.valueAccessor.writeValue(i.value),function(i,n){n.valueAccessor.registerOnChange(r=>{i._pendingValue=r,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&wu(i,n)})}(i,n),function(i,n){const r=(a,l)=>{n.valueAccessor.writeValue(a),l&&n.viewToModelUpdate(a)};i.registerOnChange(r),n._registerOnDestroy(()=>{i._unregisterOnChange(r)})}(i,n),function(i,n){n.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&wu(i,n),"submit"!==i.updateOn&&i.markAsTouched()})}(i,n),function(i,n){if(n.valueAccessor.setDisabledState){const r=a=>{n.valueAccessor.setDisabledState(a)};i.registerOnDisabledChange(r),n._registerOnDestroy(()=>{i._unregisterOnDisabledChange(r)})}}(i,n)}function sc(i,n){i.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(n)})}function _u(i,n){const r=function(i){return i._rawValidators}(i);null!==n.validator?i.setValidators(nc(r,n.validator)):"function"==typeof r&&i.setValidators([r]);const a=function(i){return i._rawAsyncValidators}(i);null!==n.asyncValidator?i.setAsyncValidators(nc(a,n.asyncValidator)):"function"==typeof a&&i.setAsyncValidators([a]);const l=()=>i.updateValueAndValidity();sc(n._rawValidators,l),sc(n._rawAsyncValidators,l)}function wu(i,n){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function yo(i,n){const r=i.indexOf(n);r>-1&&i.splice(r,1)}const di="VALID",uc="INVALID",kt="PENDING",Ps="DISABLED";function Zi(i){return(lc(i)?i.validators:i)||null}function ua(i){return Array.isArray(i)?ec(i):i||null}function bu(i,n){return(lc(n)?n.asyncValidators:i)||null}function gh(i){return Array.isArray(i)?tc(i):i||null}function lc(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class mh{constructor(n,r){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=n,this._rawAsyncValidators=r,this._composedValidatorFn=ua(this._rawValidators),this._composedAsyncValidatorFn=gh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(n){this._rawValidators=this._composedValidatorFn=n}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(n){this._rawAsyncValidators=this._composedAsyncValidatorFn=n}get parent(){return this._parent}get valid(){return this.status===di}get invalid(){return this.status===uc}get pending(){return this.status==kt}get disabled(){return this.status===Ps}get enabled(){return this.status!==Ps}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(n){this._rawValidators=n,this._composedValidatorFn=ua(n)}setAsyncValidators(n){this._rawAsyncValidators=n,this._composedAsyncValidatorFn=gh(n)}addValidators(n){this.setValidators(po(n,this._rawValidators))}addAsyncValidators(n){this.setAsyncValidators(po(n,this._rawAsyncValidators))}removeValidators(n){this.setValidators(xs(n,this._rawValidators))}removeAsyncValidators(n){this.setAsyncValidators(xs(n,this._rawAsyncValidators))}hasValidator(n){return fo(this._rawValidators,n)}hasAsyncValidator(n){return fo(this._rawAsyncValidators,n)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(n={}){this.touched=!0,this._parent&&!n.onlySelf&&this._parent.markAsTouched(n)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(n=>n.markAllAsTouched())}markAsUntouched(n={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}markAsDirty(n={}){this.pristine=!1,this._parent&&!n.onlySelf&&this._parent.markAsDirty(n)}markAsPristine(n={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}markAsPending(n={}){this.status=kt,!1!==n.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!n.onlySelf&&this._parent.markAsPending(n)}disable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=Ps,this.errors=null,this._forEachChild(a=>{a.disable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this._updateValue(),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(a=>a(!0))}enable(n={}){const r=this._parentMarkedDirty(n.onlySelf);this.status=di,this._forEachChild(a=>{a.enable(Object.assign(Object.assign({},n),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},n),{skipPristineCheck:r})),this._onDisabledChange.forEach(a=>a(!1))}_updateAncestors(n){this._parent&&!n.onlySelf&&(this._parent.updateValueAndValidity(n),n.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(n){this._parent=n}updateValueAndValidity(n={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===di||this.status===kt)&&this._runAsyncValidator(n.emitEvent)),!1!==n.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!n.onlySelf&&this._parent.updateValueAndValidity(n)}_updateTreeValidity(n={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(n)),this.updateValueAndValidity({onlySelf:!0,emitEvent:n.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ps:di}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(n){if(this.asyncValidator){this.status=kt,this._hasOwnPendingAsyncValidator=!0;const r=kp(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(a=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(a,{emitEvent:n})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(n,r={}){this.errors=n,this._updateControlsErrors(!1!==r.emitEvent)}get(n){return function(i,n,r){if(null==n||(Array.isArray(n)||(n=n.split(".")),Array.isArray(n)&&0===n.length))return null;let a=i;return n.forEach(l=>{a=a instanceof Er?a.controls.hasOwnProperty(l)?a.controls[l]:null:a instanceof cc&&a.at(l)||null}),a}(this,n)}getError(n,r){const a=r?this.get(r):this;return a&&a.errors?a.errors[n]:null}hasError(n,r){return!!this.getError(n,r)}get root(){let n=this;for(;n._parent;)n=n._parent;return n}_updateControlsErrors(n){this.status=this._calculateStatus(),n&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(n)}_initObservables(){this.valueChanges=new v.vpe,this.statusChanges=new v.vpe}_calculateStatus(){return this._allControlsDisabled()?Ps:this.errors?uc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kt)?kt:this._anyControlsHaveStatus(uc)?uc:di}_anyControlsHaveStatus(n){return this._anyControls(r=>r.status===n)}_anyControlsDirty(){return this._anyControls(n=>n.dirty)}_anyControlsTouched(){return this._anyControls(n=>n.touched)}_updatePristine(n={}){this.pristine=!this._anyControlsDirty(),this._parent&&!n.onlySelf&&this._parent._updatePristine(n)}_updateTouched(n={}){this.touched=this._anyControlsTouched(),this._parent&&!n.onlySelf&&this._parent._updateTouched(n)}_isBoxedValue(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}_registerOnCollectionChange(n){this._onCollectionChange=n}_setUpdateStrategy(n){lc(n)&&null!=n.updateOn&&(this._updateOn=n.updateOn)}_parentMarkedDirty(n){return!n&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ki extends mh{constructor(n=null,r,a){super(Zi(r),bu(a,r)),this._onChange=[],this._applyFormState(n),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(n,r={}){this.value=this._pendingValue=n,this._onChange.length&&!1!==r.emitModelToViewChange&&this._onChange.forEach(a=>a(this.value,!1!==r.emitViewToModelChange)),this.updateValueAndValidity(r)}patchValue(n,r={}){this.setValue(n,r)}reset(n=null,r={}){this._applyFormState(n),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(n){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(n){this._onChange.push(n)}_unregisterOnChange(n){yo(this._onChange,n)}registerOnDisabledChange(n){this._onDisabledChange.push(n)}_unregisterOnDisabledChange(n){yo(this._onDisabledChange,n)}_forEachChild(n){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(n){this._isBoxedValue(n)?(this.value=this._pendingValue=n.value,n.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=n}}class Er extends mh{constructor(n,r,a){super(Zi(r),bu(a,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(n,r){return this.controls[n]?this.controls[n]:(this.controls[n]=r,r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange),r)}addControl(n,r,a={}){this.registerControl(n,r),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}removeControl(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}setControl(n,r,a={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),delete this.controls[n],r&&this.registerControl(n,r),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}contains(n){return this.controls.hasOwnProperty(n)&&this.controls[n].enabled}setValue(n,r={}){this._checkAllValuesPresent(n),Object.keys(n).forEach(a=>{this._throwIfControlMissing(a),this.controls[a].setValue(n[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(Object.keys(n).forEach(a=>{this.controls[a]&&this.controls[a].patchValue(n[a],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n={},r={}){this._forEachChild((a,l)=>{a.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this._reduceChildren({},(n,r,a)=>(n[a]=r instanceof Ki?r.value:r.getRawValue(),n))}_syncPendingControls(){let n=this._reduceChildren(!1,(r,a)=>!!a._syncPendingControls()||r);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[n])throw new Error(`Cannot find form control with name: ${n}.`)}_forEachChild(n){Object.keys(this.controls).forEach(r=>{const a=this.controls[r];a&&n(a,r)})}_setUpControls(){this._forEachChild(n=>{n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(n){for(const r of Object.keys(this.controls)){const a=this.controls[r];if(this.contains(r)&&n(a))return!0}return!1}_reduceValue(){return this._reduceChildren({},(n,r,a)=>((r.enabled||this.disabled)&&(n[a]=r.value),n))}_reduceChildren(n,r){let a=n;return this._forEachChild((l,h)=>{a=r(a,l,h)}),a}_allControlsDisabled(){for(const n of Object.keys(this.controls))if(this.controls[n].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(n){this._forEachChild((r,a)=>{if(void 0===n[a])throw new Error(`Must supply a value for form control with name: '${a}'.`)})}}class cc extends mh{constructor(n,r,a){super(Zi(r),bu(a,r)),this.controls=n,this._initObservables(),this._setUpdateStrategy(r),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(n){return this.controls[n]}push(n,r={}){this.controls.push(n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}insert(n,r,a={}){this.controls.splice(n,0,r),this._registerControl(r),this.updateValueAndValidity({emitEvent:a.emitEvent})}removeAt(n,r={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:r.emitEvent})}setControl(n,r,a={}){this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),r&&(this.controls.splice(n,0,r),this._registerControl(r)),this.updateValueAndValidity({emitEvent:a.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(n,r={}){this._checkAllValuesPresent(n),n.forEach((a,l)=>{this._throwIfControlMissing(l),this.at(l).setValue(a,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}patchValue(n,r={}){null!=n&&(n.forEach((a,l)=>{this.at(l)&&this.at(l).patchValue(a,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r))}reset(n=[],r={}){this._forEachChild((a,l)=>{a.reset(n[l],{onlySelf:!0,emitEvent:r.emitEvent})}),this._updatePristine(r),this._updateTouched(r),this.updateValueAndValidity(r)}getRawValue(){return this.controls.map(n=>n instanceof Ki?n.value:n.getRawValue())}clear(n={}){this.controls.length<1||(this._forEachChild(r=>r._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:n.emitEvent}))}_syncPendingControls(){let n=this.controls.reduce((r,a)=>!!a._syncPendingControls()||r,!1);return n&&this.updateValueAndValidity({onlySelf:!0}),n}_throwIfControlMissing(n){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(n))throw new Error(`Cannot find form control at index ${n}`)}_forEachChild(n){this.controls.forEach((r,a)=>{n(r,a)})}_updateValue(){this.value=this.controls.filter(n=>n.enabled||this.disabled).map(n=>n.value)}_anyControls(n){return this.controls.some(r=>r.enabled&&n(r))}_setUpControls(){this._forEachChild(n=>this._registerControl(n))}_checkAllValuesPresent(n){this._forEachChild((r,a)=>{if(void 0===n[a])throw new Error(`Must supply a value for form control at index: ${a}.`)})}_allControlsDisabled(){for(const n of this.controls)if(n.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(n){n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange)}}const ks={provide:Et,useExisting:(0,v.Gpc)(()=>_o)},la=(()=>Promise.resolve(null))();let _o=(()=>{class i extends Et{constructor(r,a){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new v.vpe,this.form=new Er({},ec(r),tc(a))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){la.then(()=>{const a=this._findContainer(r.path);r.control=a.registerControl(r.name,r.control),Ms(r.control,r),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){la.then(()=>{const a=this._findContainer(r.path);a&&a.removeControl(r.name),yo(this._directives,r)})}addFormGroup(r){la.then(()=>{const a=this._findContainer(r.path),l=new Er({});(function(i,n){_u(i,n)})(l,r),a.registerControl(r.name,l),l.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){la.then(()=>{const a=this._findContainer(r.path);a&&a.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,a){la.then(()=>{this.form.get(r.path).setValue(a)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,function(i,n){i._syncPendingControls(),n.forEach(r=>{const a=r.control;"submit"===a.updateOn&&a._pendingChange&&(r.viewToModelUpdate(a._pendingValue),a._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(r),!1}onReset(){this.resetForm()}resetForm(r){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(On,10),v.Y36(qi,10))},i.\u0275dir=v.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,a){1&r&&v.NdJ("submit",function(h){return a.onSubmit(h)})("reset",function(){return a.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[v._Bn([ks]),v.qOj]}),i})();const Tw={provide:ci,useExisting:(0,v.Gpc)(()=>_h)},yh=(()=>Promise.resolve(null))();let _h=(()=>{class i extends ci{constructor(r,a,l,h){super(),this.control=new Ki,this._registered=!1,this.update=new v.vpe,this._parent=r,this._setValidators(a),this._setAsyncValidators(l),this.valueAccessor=function(i,n){if(!n)return null;let r,a,l;return Array.isArray(n),n.forEach(h=>{h.constructor===Ts?r=h:function(i){return Object.getPrototypeOf(i.constructor)===lo}(h)?a=h:l=h}),l||a||r||null}(0,h)}ngOnChanges(r){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in r&&this._updateDisabled(r),function(i,n){if(!i.hasOwnProperty("model"))return!1;const r=i.model;return!!r.isFirstChange()||!Object.is(n,r.currentValue)}(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(i,n){return[...n.path,i]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ms(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(r){yh.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1})})}_updateDisabled(r){const a=r.isDisabled.currentValue,l=""===a||a&&"false"!==a;yh.then(()=>{l&&!this.control.disabled?this.control.disable():!l&&this.control.disabled&&this.control.enable()})}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(Et,9),v.Y36(On,10),v.Y36(qi,10),v.Y36(Ei,10))},i.\u0275dir=v.lG2({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[v._Bn([Tw]),v.qOj,v.TTD]}),i})(),vh=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275dir=v.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})(),Yi=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i})(),Zp=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[Yi]]}),i})(),Kp=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[Zp]}),i})();var It=F(8939),Qp=F(3637),Ye=F(5917),fn=F(9126),Pn=F(3282);function gc(...i){return(0,Pn.J)(1)((0,Ye.of)(...i))}var Jp=F(4869);function da(...i){const n=i[i.length-1];return(0,Jp.K)(n)?(i.pop(),r=>gc(i,r,n)):r=>gc(i,r)}var kr=F(7393);function Xp(){return i=>i.lift(new u_)}class u_{call(n,r){return r.subscribe(new Ou(n))}}class Ou extends kr.L{constructor(n){super(n),this.hasPrev=!1}_next(n){let r;this.hasPrev?r=[this.prev,n]:this.hasPrev=!0,this.prev=n,r&&this.destination.next(r)}}function Ft(i,n){let r=!1;return arguments.length>=2&&(r=!0),function(l){return l.lift(new mc(i,n,r))}}class mc{constructor(n,r,a=!1){this.accumulator=n,this.seed=r,this.hasSeed=a}call(n,r){return r.subscribe(new eg(n,this.accumulator,this.seed,this.hasSeed))}}class eg extends kr.L{constructor(n,r,a,l){super(n),this.accumulator=r,this._seed=a,this.hasSeed=l,this.index=0}get seed(){return this._seed}set seed(n){this.hasSeed=!0,this._seed=n}_next(n){if(this.hasSeed)return this._tryNext(n);this.seed=n,this.destination.next(n)}_tryNext(n){const r=this.index++;let a;try{a=this.accumulator(this.seed,n,r)}catch(l){this.destination.error(l)}this.seed=a,this.destination.next(a)}}class Zn{constructor(n,r){this.compare=n,this.keySelector=r}call(n,r){return r.subscribe(new ha(n,this.compare,this.keySelector))}}class ha extends kr.L{constructor(n,r,a){super(n),this.keySelector=a,this.hasKey=!1,"function"==typeof r&&(this.compare=r)}compare(n,r){return n===r}_next(n){let r;try{const{keySelector:l}=this;r=l?l(n):n}catch(l){return this.destination.error(l)}let a=!1;if(this.hasKey)try{const{compare:l}=this;a=l(this.key,r)}catch(l){return this.destination.error(l)}else this.hasKey=!0;a||(this.key=r,this.destination.next(n))}}function qt(i,n){return function(a){return a.lift(new Mh(i,n))}}class Mh{constructor(n,r){this.predicate=n,this.thisArg=r}call(n,r){return r.subscribe(new Oh(n,this.predicate,this.thisArg))}}class Oh extends kr.L{constructor(n,r,a){super(n),this.predicate=r,this.thisArg=a,this.count=0}_next(n){let r;try{r=this.predicate.call(this.thisArg,n,this.count++)}catch(a){return void this.destination.error(a)}r&&this.destination.next(n)}}F(670);var ke,l_=F(4486),le=F(8239),Io=F(5452),yc=F(6034),Ls=F(5601),yt=F(3854),c_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ci={},_c=_c||{},w=c_||self;function g(){}function y(i){var n=typeof i;return"array"==(n="object"!=n?n:i?Array.isArray(i)?"array":n:"null")||"object"==n&&"number"==typeof i.length}function I(i){var n=typeof i;return"object"==n&&null!=i||"function"==n}var M="closure_uid_"+(1e9*Math.random()>>>0),j=0;function ue(i,n,r){return i.call.apply(i.bind,arguments)}function Ae(i,n,r){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var l=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(l,a),i.apply(n,l)}}return function(){return i.apply(n,arguments)}}function Se(i,n,r){return(Se=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ue:Ae).apply(null,arguments)}function ze(i,n){var r=Array.prototype.slice.call(arguments,1);return function(){var a=r.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Fe(i,n){function r(){}r.prototype=n.prototype,i.Z=n.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(a,l,h){for(var m=Array(arguments.length-2),C=2;C<arguments.length;C++)m[C-2]=arguments[C];return n.prototype[l].apply(a,m)}}function xt(){this.s=this.s,this.o=this.o}var Pu={};xt.prototype.s=!1,xt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,M)&&i[M]||(i[M]=++j)}(this);delete Pu[i]}},xt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const kh=Array.prototype.indexOf?function(i,n){return Array.prototype.indexOf.call(i,n,void 0)}:function(i,n){if("string"==typeof i)return"string"!=typeof n||1!=n.length?-1:i.indexOf(n,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===n)return r;return-1},vc=Array.prototype.forEach?function(i,n,r){Array.prototype.forEach.call(i,n,r)}:function(i,n,r){const a=i.length,l="string"==typeof i?i.split(""):i;for(let h=0;h<a;h++)h in l&&n.call(r,l[h],h,i)};function ng(i){return Array.prototype.concat.apply([],arguments)}function fa(i){const n=i.length;if(0<n){const r=Array(n);for(let a=0;a<n;a++)r[a]=i[a];return r}return[]}function ku(i){return/^[\s\xa0]*$/.test(i)}var Wt,Lh=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function kn(i,n){return-1!=i.indexOf(n)}function Ji(i,n){return i<n?-1:i>n?1:0}e:{var Vh=w.navigator;if(Vh){var d_=Vh.userAgent;if(d_){Wt=d_;break e}}Wt=""}function rg(i,n,r){for(const a in i)n.call(r,i[a],a,i)}function kD(i){const n={};for(const r in i)n[r]=i[r];return n}var Xi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ig(i,n){let r,a;for(let l=1;l<arguments.length;l++){for(r in a=arguments[l],a)i[r]=a[r];for(let h=0;h<Xi.length;h++)r=Xi[h],Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}}function Uh(i){return Uh[" "](i),i}Uh[" "]=g;var g_,i,Mw=kn(Wt,"Opera"),Vs=kn(Wt,"Trident")||kn(Wt,"MSIE"),h_=kn(Wt,"Edge"),sg=h_||Vs,og=kn(Wt,"Gecko")&&!(kn(Wt.toLowerCase(),"webkit")&&!kn(Wt,"Edge"))&&!(kn(Wt,"Trident")||kn(Wt,"MSIE"))&&!kn(Wt,"Edge"),f_=kn(Wt.toLowerCase(),"webkit")&&!kn(Wt,"Edge");function p_(){var i=w.document;return i?i.documentMode:void 0}e:{var pa="",Bh=(i=Wt,og?/rv:([^\);]+)(\)|;)/.exec(i):h_?/Edge\/([\d\.]+)/.exec(i):Vs?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):f_?/WebKit\/(\S+)/.exec(i):Mw?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Bh&&(pa=Bh?Bh[1]:""),Vs){var ag=p_();if(null!=ag&&ag>parseFloat(pa)){g_=String(ag);break e}}g_=pa}var LD={};function m_(){return n=LD,Object.prototype.hasOwnProperty.call(n,9)?n[9]:n[9]=function(){let i=0;const n=Lh(String(g_)).split("."),r=Lh("9").split("."),a=Math.max(n.length,r.length);for(let m=0;0==i&&m<a;m++){var l=n[m]||"",h=r[m]||"";do{if(l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""],0==l[0].length&&0==h[0].length)break;i=Ji(0==l[1].length?0:parseInt(l[1],10),0==h[1].length?0:parseInt(h[1],10))||Ji(0==l[2].length,0==h[2].length)||Ji(l[2],h[2]),l=l[3],h=h[3]}while(0==i)}return 0<=i}();var n}var VD=w.document&&Vs&&(p_()||parseInt(g_,10))||void 0,UD=function(){if(!w.addEventListener||!Object.defineProperty)return!1;var i=!1,n=Object.defineProperty({},"passive",{get:function(){i=!0}});try{w.addEventListener("test",g,n),w.removeEventListener("test",g,n)}catch(r){}return i}();function wr(i,n){this.type=i,this.g=this.target=n,this.defaultPrevented=!1}function jh(i,n){if(wr.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=n,n=i.relatedTarget){if(og){e:{try{Uh(n.nodeName);var l=!0;break e}catch(h){}l=!1}l||(n=null)}}else"mouseover"==r?n=i.fromElement:"mouseout"==r&&(n=i.toElement);this.relatedTarget=n,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Pw[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&jh.Z.h.call(this)}}wr.prototype.h=function(){this.defaultPrevented=!0},Fe(jh,wr);var Pw={2:"touch",3:"pen",4:"mouse"};jh.prototype.h=function(){jh.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Fu="closure_listenable_"+(1e6*Math.random()|0),kw=0;function __(i,n,r,a,l){this.listener=i,this.proxy=null,this.src=n,this.type=r,this.capture=!!a,this.ia=l,this.key=++kw,this.ca=this.fa=!1}function ug(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function lg(i){this.src=i,this.g={},this.h=0}function cg(i,n){var r=n.type;if(r in i.g){var h,a=i.g[r],l=kh(a,n);(h=0<=l)&&Array.prototype.splice.call(a,l,1),h&&(ug(n),0==i.g[r].length&&(delete i.g[r],i.h--))}}function dg(i,n,r,a){for(var l=0;l<i.length;++l){var h=i[l];if(!h.ca&&h.listener==n&&h.capture==!!r&&h.ia==a)return l}return-1}lg.prototype.add=function(i,n,r,a,l){var h=i.toString();(i=this.g[h])||(i=this.g[h]=[],this.h++);var m=dg(i,n,a,l);return-1<m?(n=i[m],r||(n.fa=!1)):((n=new __(n,this.src,h,!!a,l)).fa=r,i.push(n)),n};var bo="closure_lm_"+(1e6*Math.random()|0),hg={};function v_(i,n,r,a,l){if(a&&a.once)return Lw(i,n,r,a,l);if(Array.isArray(n)){for(var h=0;h<n.length;h++)v_(i,n[h],r,a,l);return null}return r=wc(r),i&&i[Fu]?i.N(n,r,I(a)?!!a.capture:!!a,l):Fw(i,n,r,!1,a,l)}function Fw(i,n,r,a,l,h){if(!n)throw Error("Invalid event type");var m=I(l)?!!l.capture:!!l,C=gg(i);if(C||(i[bo]=C=new lg(i)),(r=C.add(n,r,a,m,h)).proxy)return r;if(a=function(){var n=C_;return function i(r){return n.call(i.src,i.listener,r)}}(),r.proxy=a,a.src=i,a.listener=r,i.addEventListener)UD||(l=m),void 0===l&&(l=!1),i.addEventListener(n.toString(),a,l);else if(i.attachEvent)i.attachEvent(w_(n.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return r}function Lw(i,n,r,a,l){if(Array.isArray(n)){for(var h=0;h<n.length;h++)Lw(i,n[h],r,a,l);return null}return r=wc(r),i&&i[Fu]?i.O(n,r,I(a)?!!a.capture:!!a,l):Fw(i,n,r,!0,a,l)}function E_(i,n,r,a,l){if(Array.isArray(n))for(var h=0;h<n.length;h++)E_(i,n[h],r,a,l);else a=I(a)?!!a.capture:!!a,r=wc(r),i&&i[Fu]?(i=i.i,(n=String(n).toString())in i.g&&-1<(r=dg(h=i.g[n],r,a,l))&&(ug(h[r]),Array.prototype.splice.call(h,r,1),0==h.length&&(delete i.g[n],i.h--))):i&&(i=gg(i))&&(n=i.g[n.toString()],i=-1,n&&(i=dg(n,r,a,l)),(r=-1<i?n[i]:null)&&pg(r))}function pg(i){if("number"!=typeof i&&i&&!i.ca){var n=i.src;if(n&&n[Fu])cg(n.i,i);else{var r=i.type,a=i.proxy;n.removeEventListener?n.removeEventListener(r,a,i.capture):n.detachEvent?n.detachEvent(w_(r),a):n.addListener&&n.removeListener&&n.removeListener(a),(r=gg(n))?(cg(r,i),0==r.h&&(r.src=null,n[bo]=null)):ug(i)}}}function w_(i){return i in hg?hg[i]:hg[i]="on"+i}function C_(i,n){if(i.ca)i=!0;else{n=new jh(n,this);var r=i.listener,a=i.ia||i.src;i.fa&&pg(i),i=r.call(a,n)}return i}function gg(i){return(i=i[bo])instanceof lg?i:null}var Ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function wc(i){return"function"==typeof i?i:(i[Ec]||(i[Ec]=function(n){return i.handleEvent(n)}),i[Ec])}function Fn(){xt.call(this),this.i=new lg(this),this.P=this,this.I=null}function Ln(i,n){var r,a=i.I;if(a)for(r=[];a;a=a.I)r.push(a);if(i=i.P,a=n.type||n,"string"==typeof n)n=new wr(n,i);else if(n instanceof wr)n.target=n.target||i;else{var l=n;ig(n=new wr(a,i),l)}if(l=!0,r)for(var h=r.length-1;0<=h;h--){var m=n.g=r[h];l=$h(m,a,!0,n)&&l}if(l=$h(m=n.g=i,a,!0,n)&&l,l=$h(m,a,!1,n)&&l,r)for(h=0;h<r.length;h++)l=$h(m=n.g=r[h],a,!1,n)&&l}function $h(i,n,r,a){if(!(n=i.i.g[String(n)]))return!0;n=n.concat();for(var l=!0,h=0;h<n.length;++h){var m=n[h];if(m&&!m.ca&&m.capture==r){var C=m.listener,D=m.ia||m.src;m.fa&&cg(i.i,m),l=!1!==C.call(D,a)&&l}}return l&&!a.defaultPrevented}Fe(Fn,xt),Fn.prototype[Fu]=!0,Fn.prototype.removeEventListener=function(i,n,r,a){E_(this,i,n,r,a)},Fn.prototype.M=function(){if(Fn.Z.M.call(this),this.i){var n,i=this.i;for(n in i.g){for(var r=i.g[n],a=0;a<r.length;a++)ug(r[a]);delete i.g[n],i.h--}}this.I=null},Fn.prototype.N=function(i,n,r,a){return this.i.add(String(i),n,!1,r,a)},Fn.prototype.O=function(i,n,r,a){return this.i.add(String(i),n,!0,r,a)};var Hh=w.JSON.stringify;function Gh(){var i=b_;let n=null;return i.g&&(n=i.g,i.g=i.g.next,i.g||(i.h=null),n.next=null),n}var qh,I_=new class{constructor(i,n){this.i=i,this.j=n,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new jD,i=>i.reset());class jD{constructor(){this.next=this.g=this.h=null}set(n,r){this.h=n,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function $D(i){w.setTimeout(()=>{throw i},0)}function mg(i,n){qh||function(){var i=w.Promise.resolve(void 0);qh=function(){i.then(HD)}}(),Uw||(qh(),Uw=!0),b_.add(i,n)}var Uw=!1,b_=new class{constructor(){this.h=this.g=null}add(n,r){const a=I_.get();a.set(n,r),this.h?this.h.next=a:this.g=a,this.h=a}};function HD(){for(var i;i=Gh();){try{i.h.call(i.g)}catch(r){$D(r)}var n=I_;n.j(i),100>n.h&&(n.h++,i.next=n.g,n.g=i)}Uw=!1}function Wh(i,n){Fn.call(this),this.h=i||1,this.g=n||w,this.j=Se(this.kb,this),this.l=Date.now()}function D_(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function T_(i,n,r){if("function"==typeof i)r&&(i=Se(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Se(i.handleEvent,i)}return 2147483647<Number(n)?-1:w.setTimeout(i,n||0)}function Ii(i){i.g=T_(()=>{i.g=null,i.i&&(i.i=!1,Ii(i))},i.j);const n=i.h;i.h=null,i.m.apply(null,n)}Fe(Wh,Fn),(ke=Wh.prototype).da=!1,ke.S=null,ke.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ln(this,"tick"),this.da&&(D_(this),this.start()))}},ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ke.M=function(){Wh.Z.M.call(this),D_(this),delete this.g};class GD extends xt{constructor(n,r){super(),this.m=n,this.j=r,this.h=null,this.i=!1,this.g=null}l(n){this.h=arguments,this.g?this.i=!0:Ii(this)}M(){super.M(),this.g&&(w.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cc(i){xt.call(this),this.h=i,this.g={}}Fe(Cc,xt);var Bw=[];function jw(i,n,r,a){Array.isArray(r)||(r&&(Bw[0]=r.toString()),r=Bw);for(var l=0;l<r.length;l++){var h=v_(n,r[l],a||i.handleEvent,!1,i.h||i);if(!h)break;i.g[h.key]=h}}function $w(i){rg(i.g,function(n,r){this.g.hasOwnProperty(r)&&pg(n)},i),i.g={}}function yg(){this.g=!0}function Ic(i,n,r,a){i.info(function(){return"XMLHTTP TEXT ("+n+"): "+function(i,n){if(!i.g)return n;if(!n)return null;try{var r=JSON.parse(n);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var a=r[i];if(!(2>a.length)){var l=a[1];if(Array.isArray(l)&&!(1>l.length)){var h=l[0];if("noop"!=h&&"stop"!=h&&"close"!=h)for(var m=1;m<l.length;m++)l[m]=""}}}return Hh(r)}catch(C){return n}}(i,r)+(a?" "+a:"")})}Cc.prototype.M=function(){Cc.Z.M.call(this),$w(this)},Cc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},yg.prototype.Aa=function(){this.g=!1},yg.prototype.info=function(){};var ga={},A_=null;function Lu(){return A_=A_||new Fn}function bi(i){wr.call(this,ga.Ma,i)}function bc(i){const n=Lu();Ln(n,new bi(n,i))}function Gw(i,n){wr.call(this,ga.STAT_EVENT,i),this.stat=n}function ar(i){const n=Lu();Ln(n,new Gw(n,i))}function Us(i,n){wr.call(this,ga.Na,i),this.size=n}function Vu(i,n){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return w.setTimeout(function(){i()},n)}ga.Ma="serverreachability",Fe(bi,wr),ga.STAT_EVENT="statevent",Fe(Gw,wr),ga.Na="timingevent",Fe(Us,wr);var zh={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},_g={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qw(){}function zD(){}qw.prototype.h=null;var Zh,fi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Dc(){wr.call(this,"d")}function Tc(){wr.call(this,"c")}function x_(){}function Kh(i,n,r,a){this.l=i,this.j=n,this.m=r,this.X=a||1,this.V=new Cc(this),this.P=Lx,this.W=new Wh(i=sg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new N_}function N_(){this.i=null,this.g="",this.h=!1}Fe(Dc,wr),Fe(Tc,wr),Fe(x_,qw),x_.prototype.g=function(){return new XMLHttpRequest},x_.prototype.i=function(){return{}},Zh=new x_;var Lx=45e3,R_={},M_={};function vg(i,n,r){i.K=1,i.v=Dg(es(n)),i.s=r,i.U=!0,O_(i,null)}function O_(i,n){i.F=Date.now(),wg(i),i.A=es(i.v);var r=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),V_(r.h,"t",a),i.C=0,r=i.l.H,i.h=new N_,i.g=Y_(i.l,r?n:null,!i.s),0<i.O&&(i.L=new GD(Se(i.Ia,i,i.g),i.O)),jw(i.V,i.g,"readystatechange",i.gb),n=i.H?kD(i.H):{},i.s?(i.u||(i.u="POST"),n["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,n)):(i.u="GET",i.g.ea(i.A,i.u,null,n)),bc(1),function(i,n,r,a,l,h){i.info(function(){if(i.g)if(h)for(var m="",C=h.split("&"),D=0;D<C.length;D++){var x=C[D].split("=");if(1<x.length){var R=x[0];x=x[1];var O=R.split("_");m=2<=O.length&&"type"==O[1]?m+(R+"=")+x+"&":m+(R+"=redacted&")}}else m=null;else m=h;return"XMLHTTP REQ ("+a+") [attempt "+l+"]: "+n+"\n"+r+"\n"+m})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Ww(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Eg(i,n,r){let l,a=!0;for(;!i.I&&i.C<r.length;){if(l=Vx(i,r),l==M_){4==n&&(i.o=4,ar(14),a=!1),Ic(i.j,i.m,null,"[Incomplete Response]");break}if(l==R_){i.o=4,ar(15),Ic(i.j,i.m,r,"[Invalid Chunk]"),a=!1;break}Ic(i.j,i.m,l,null),zw(i,l)}Ww(i)&&l!=M_&&l!=R_&&(i.h.g="",i.C=0),4!=n||0!=r.length||i.h.h||(i.o=1,ar(16),a=!1),i.i=i.i&&a,a?0<r.length&&!i.aa&&(i.aa=!0,(n=i.l).g==i&&n.$&&!n.L&&(n.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),Fg(n),n.L=!0,ar(11))):(Ic(i.j,i.m,r,"[Invalid Chunked Response]"),Ac(i),Cg(i))}function Vx(i,n){var r=i.C,a=n.indexOf("\n",r);return-1==a?M_:(r=Number(n.substring(r,a)),isNaN(r)?R_:(a+=1)+r>n.length?M_:(n=n.substr(a,r),i.C=a+r,n))}function wg(i){i.Y=Date.now()+i.P,ZD(i,i.P)}function ZD(i,n){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Vu(Se(i.eb,i),n)}function P_(i){i.B&&(w.clearTimeout(i.B),i.B=null)}function Cg(i){0==i.l.G||i.I||Vg(i.l,i)}function Ac(i){P_(i);var n=i.L;n&&"function"==typeof n.na&&n.na(),i.L=null,D_(i.W),$w(i.V),i.g&&(n=i.g,i.g=null,n.abort(),n.na())}function zw(i,n){try{var r=i.l;if(0!=r.G&&(r.g==i||Tg(r.i,i)))if(r.I=i.N,!i.J&&Tg(r.i,i)&&3==r.G){try{var a=r.Ca.g.parse(n)}catch(x){a=null}if(Array.isArray(a)&&3==a.length){var l=a;if(0==l[0])e:if(r.u)r.ta=l[1],0<r.ta-r.U&&37500>l[2]&&r.N&&0==r.A&&!r.v&&(r.v=Vu(Se(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;Lg(r),Og(r)}of(r),ar(18)}if(1>=JD(r.i)&&r.ka){try{r.ka()}catch(x){}r.ka=void 0}}else ju(r,11)}else if((i.J||r.g==i)&&Lg(r),!ku(n))for(l=r.Ca.g.parse(n),n=0;n<l.length;n++){let x=l[n];if(r.U=x[0],x=x[1],2==r.G)if("c"==x[0]){r.J=x[1],r.la=x[2];const R=x[3];null!=R&&(r.ma=R,r.h.info("VER="+r.ma));const O=x[4];null!=O&&(r.za=O,r.h.info("SVER="+r.za));const $=x[5];null!=$&&"number"==typeof $&&0<$&&(r.K=a=1.5*$,r.h.info("backChannelRequestTimeoutMs_="+a)),a=r;const q=i.g;if(q){const he=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(he){var h=a.i;!h.g&&(kn(he,"spdy")||kn(he,"quic")||kn(he,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Ag(h,h.h),h.h=null))}if(a.D){const De=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;De&&(a.sa=De,nn(a.F,a.D,De))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var m=i;if((a=r).oa=K_(a,a.H?a.la:null,a.W),m.J){Xw(a.i,m);var C=m,D=a.K;D&&C.setTimeout(D),C.B&&(P_(C),wg(C)),a.g=m}else kg(a);0<r.l.length&&Pg(r)}else"stop"!=x[0]&&"close"!=x[0]||ju(r,7);else 3==r.G&&("stop"==x[0]||"close"==x[0]?"stop"==x[0]?ju(r,7):z_(r):"noop"!=x[0]&&r.j&&r.j.wa(x),r.A=0)}bc(4)}catch(x){}}function Zw(i,n){if(i.forEach&&"function"==typeof i.forEach)i.forEach(n,void 0);else if(y(i)||"string"==typeof i)vc(i,n,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(y(i)||"string"==typeof i){r=[];for(var a=i.length,l=0;l<a;l++)r.push(l)}else for(l in r=[],a=0,i)r[a++]=l;l=(a=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(y(i)){for(var n=[],r=i.length,a=0;a<r;a++)n.push(i[a]);return n}for(a in n=[],r=0,i)n[r++]=i[a];return n}(i)).length;for(var h=0;h<l;h++)n.call(void 0,a[h],r&&r[h],i)}}function Yh(i,n){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var a=0;a<r;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof Yh)for(r=i.T(),a=0;a<r.length;a++)this.set(r[a],i.get(r[a]));else for(a in i)this.set(a,i[a])}function Kw(i){if(i.i!=i.g.length){for(var n=0,r=0;n<i.g.length;){var a=i.g[n];Kr(i.h,a)&&(i.g[r++]=a),n++}i.g.length=r}if(i.i!=i.g.length){var l={};for(r=n=0;n<i.g.length;)Kr(l,a=i.g[n])||(i.g[r++]=a,l[a]=1),n++;i.g.length=r}}function Kr(i,n){return Object.prototype.hasOwnProperty.call(i,n)}(ke=Kh.prototype).setTimeout=function(i){this.P=i},ke.gb=function(i){i=i.target;const n=this.L;n&&3==Kn(i)?n.l():this.Ia(i)},ke.Ia=function(i){try{if(i==this.g)e:{const R=Kn(this.g);var n=this.g.Da();const O=this.g.ba();if(!(3>R)&&(3!=R||sg||this.g&&(this.h.h||this.g.ga()||Rg(this.g)))){this.I||4!=R||7==n||bc(8==n||0>=O?3:2),P_(this);var r=this.g.ba();this.N=r;t:if(Ww(this)){var a=Rg(this.g);i="";var l=a.length,h=4==Kn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ac(this),Cg(this);var m="";break t}this.h.i=new w.TextDecoder}for(n=0;n<l;n++)this.h.h=!0,i+=this.h.i.decode(a[n],{stream:h&&n==l-1});a.splice(0,l),this.h.g+=i,this.C=0,m=this.h.g}else m=this.g.ga();if(this.i=200==r,function(i,n,r,a,l,h,m){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+l+"]: "+n+"\n"+r+"\n"+h+" "+m})}(this.j,this.u,this.A,this.m,this.X,R,r),this.i){if(this.$&&!this.J){t:{if(this.g){var C,D=this.g;if((C=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ku(C)){var x=C;break t}}x=null}if(!(r=x)){this.i=!1,this.o=3,ar(12),Ac(this),Cg(this);break e}Ic(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,zw(this,r)}this.U?(Eg(this,R,m),sg&&this.i&&3==R&&(jw(this.V,this.W,"tick",this.fb),this.W.start())):(Ic(this.j,this.m,m,null),zw(this,m)),4==R&&Ac(this),this.i&&!this.I&&(4==R?Vg(this.l,this):(this.i=!1,wg(this)))}else 400==r&&0<m.indexOf("Unknown SID")?(this.o=3,ar(12)):(this.o=0,ar(13)),Ac(this),Cg(this)}}}catch(R){}},ke.fb=function(){if(this.g){var i=Kn(this.g),n=this.g.ga();this.C<n.length&&(P_(this),Eg(this,i,n),this.i&&4!=i&&wg(this))}},ke.cancel=function(){this.I=!0,Ac(this)},ke.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,n){i.info(function(){return"TIMEOUT: "+n})}(this.j,this.A),2!=this.K&&(bc(3),ar(17)),Ac(this),this.o=2,Cg(this)):ZD(this,this.Y-i)},(ke=Yh.prototype).R=function(){Kw(this);for(var i=[],n=0;n<this.g.length;n++)i.push(this.h[this.g[n]]);return i},ke.T=function(){return Kw(this),this.g.concat()},ke.get=function(i,n){return Kr(this.h,i)?this.h[i]:n},ke.set=function(i,n){Kr(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=n},ke.forEach=function(i,n){for(var r=this.T(),a=0;a<r.length;a++){var l=r[a],h=this.get(l);i.call(n,h,l,this)}};var Ig=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ma(i,n){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof ma){this.g=void 0!==n?n:i.g,Qh(this,i.j),this.s=i.s,Sc(this,i.i),bg(this,i.m),this.l=i.l,n=i.h;var r=new To;r.i=n.i,n.g&&(r.g=new Yh(n.g),r.h=n.h),Do(this,r),this.o=i.o}else i&&(r=String(i).match(Ig))?(this.g=!!n,Qh(this,r[1]||"",!0),this.s=Jh(r[2]||""),Sc(this,r[3]||"",!0),bg(this,r[4]),this.l=Jh(r[5]||"",!0),Do(this,r[6]||"",!0),this.o=Jh(r[7]||"")):(this.g=!!n,this.h=new To(null,this.g))}function es(i){return new ma(i)}function Qh(i,n,r){i.j=r?Jh(n,!0):n,i.j&&(i.j=i.j.replace(/:$/,""))}function Sc(i,n,r){i.i=r?Jh(n,!0):n}function bg(i,n){if(n){if(n=Number(n),isNaN(n)||0>n)throw Error("Bad port number "+n);i.m=n}else i.m=null}function Do(i,n,r){n instanceof To?(i.h=n,function(i,n){n&&!i.j&&(pi(i),i.i=null,i.g.forEach(function(r,a){var l=a.toLowerCase();a!=l&&(Qw(this,a),V_(this,l,r))},i)),i.j=n}(i.h,i.g)):(r||(n=xc(n,F_)),i.h=new To(n,i.g))}function nn(i,n,r){i.h.set(n,r)}function Dg(i){return nn(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Jh(i,n){return i?n?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function xc(i,n,r){return"string"==typeof i?(i=encodeURI(i).replace(n,YD),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function YD(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ma.prototype.toString=function(){var i=[],n=this.j;n&&i.push(xc(n,Yw,!0),":");var r=this.i;return(r||"file"==n)&&(i.push("//"),(n=this.s)&&i.push(xc(n,Yw,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(xc(r,"/"==r.charAt(0)?Nc:Xh,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",xc(r,Rc)),i.join("")};var Yw=/[#\/\?@]/g,Xh=/[#\?:]/g,Nc=/[#\?]/g,F_=/[#\?@]/g,Rc=/#/g;function To(i,n){this.h=this.g=null,this.i=i||null,this.j=!!n}function pi(i){i.g||(i.g=new Yh,i.h=0,i.i&&function(i,n){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var a=i[r].indexOf("="),l=null;if(0<=a){var h=i[r].substring(0,a);l=i[r].substring(a+1)}else h=i[r];n(h,l?decodeURIComponent(l.replace(/\+/g," ")):"")}}}(i.i,function(n,r){i.add(decodeURIComponent(n.replace(/\+/g," ")),r)}))}function Qw(i,n){pi(i),n=ya(i,n),Kr(i.g.h,n)&&(i.i=null,i.h-=i.g.get(n).length,Kr((i=i.g).h,n)&&(delete i.h[n],i.i--,i.g.length>2*i.i&&Kw(i)))}function L_(i,n){return pi(i),n=ya(i,n),Kr(i.g.h,n)}function V_(i,n,r){Qw(i,n),0<r.length&&(i.i=null,i.g.set(ya(i,n),fa(r)),i.h+=r.length)}function ya(i,n){return n=String(n),i.j&&(n=n.toLowerCase()),n}function ef(i){this.l=i||QD,i=w.PerformanceNavigationTiming?0<(i=w.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(w.g&&w.g.Ea&&w.g.Ea()&&w.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ke=To.prototype).add=function(i,n){pi(this),this.i=null,i=ya(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(n),this.h+=1,this},ke.forEach=function(i,n){pi(this),this.g.forEach(function(r,a){vc(r,function(l){i.call(n,l,a,this)},this)},this)},ke.T=function(){pi(this);for(var i=this.g.R(),n=this.g.T(),r=[],a=0;a<n.length;a++)for(var l=i[a],h=0;h<l.length;h++)r.push(n[a]);return r},ke.R=function(i){pi(this);var n=[];if("string"==typeof i)L_(this,i)&&(n=ng(n,this.g.get(ya(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)n=ng(n,i[r])}return n},ke.set=function(i,n){return pi(this),this.i=null,L_(this,i=ya(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[n]),this.h+=1,this},ke.get=function(i,n){return i&&0<(i=this.R(i)).length?String(i[0]):n},ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],n=this.g.T(),r=0;r<n.length;r++){var a=n[r],l=encodeURIComponent(String(a));a=this.R(a);for(var h=0;h<a.length;h++){var m=l;""!==a[h]&&(m+="="+encodeURIComponent(String(a[h]))),i.push(m)}}return this.i=i.join("&")};var QD=10;function B_(i){return!!i.h||!!i.g&&i.g.size>=i.j}function JD(i){return i.h?1:i.g?i.g.size:0}function Tg(i,n){return i.h?i.h==n:!!i.g&&i.g.has(n)}function Ag(i,n){i.g?i.g.add(n):i.h=n}function Xw(i,n){i.h&&i.h==n?i.h=null:i.g&&i.g.has(n)&&i.g.delete(n)}function j_(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let n=i.i;for(const r of i.g.values())n=n.concat(r.D);return n}return fa(i.i)}function $_(){}function XD(){this.g=new $_}function gi(i,n,r){const a=r||"";try{Zw(i,function(l,h){let m=l;I(l)&&(m=Hh(l)),n.push(a+h+"="+encodeURIComponent(m))})}catch(l){throw n.push(a+"type="+encodeURIComponent("_badmap")),l}}function Sg(i,n,r,a,l){try{n.onload=null,n.onerror=null,n.onabort=null,n.ontimeout=null,l(a)}catch(h){}}function xg(i){this.l=i.$b||null,this.j=i.ib||!1}function H_(i,n){Fn.call(this),this.D=i,this.u=n,this.m=void 0,this.readyState=Ng,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ef.prototype.cancel=function(){if(this.i=j_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},$_.prototype.stringify=function(i){return w.JSON.stringify(i,void 0)},$_.prototype.parse=function(i){return w.JSON.parse(i,void 0)},Fe(xg,qw),xg.prototype.g=function(){return new H_(this.l,this.j)},xg.prototype.i=function(i){return function(){return i}}({}),Fe(H_,Fn);var Ng=0;function tT(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function tf(i){i.readyState=4,i.l=null,i.j=null,i.A=null,Uu(i)}function Uu(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ke=H_.prototype).open=function(i,n){if(this.readyState!=Ng)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=n,this.readyState=1,Uu(this)},ke.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const n={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(n.body=i),(this.D||w).fetch(new Request(this.B,n)).then(this.Va.bind(this),this.ha.bind(this))},ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,tf(this)),this.readyState=Ng},ke.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Uu(this)),this.g&&(this.readyState=3,Uu(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==w.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;tT(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ke.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var n=i.value?i.value:new Uint8Array(0);(n=this.A.decode(n,{stream:!i.done}))&&(this.response=this.responseText+=n)}i.done?tf(this):Uu(this),3==this.readyState&&tT(this)}},ke.Ua=function(i){this.g&&(this.response=this.responseText=i,tf(this))},ke.Ta=function(i){this.g&&(this.response=i,tf(this))},ke.ha=function(){this.g&&tf(this)},ke.setRequestHeader=function(i,n){this.v.append(i,n)},ke.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ke.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],n=this.h.entries();for(var r=n.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=n.next();return i.join("\r\n")},Object.defineProperty(H_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var eC=w.JSON.parse;function Tn(i){Fn.call(this),this.headers=new Yh,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tC,this.K=this.L=!1}Fe(Tn,Fn);var tC="",nT=/^https?$/i,nC=["POST","PUT"];function rC(i){return"content-type"==i.toLowerCase()}function iC(i,n){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=n,i.m=5,sC(i),nf(i)}function sC(i){i.D||(i.D=!0,Ln(i,"complete"),Ln(i,"error"))}function G_(i){if(i.h&&void 0!==_c&&(!i.C[1]||4!=Kn(i)||2!=i.ba()))if(i.v&&4==Kn(i))T_(i.Fa,0,i);else if(Ln(i,"readystatechange"),4==Kn(i)){i.h=!1;try{const C=i.ba();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break e;default:n=!1}var r;if(!(r=n)){var a;if(a=0===C){var l=String(i.H).match(Ig)[1]||null;if(!l&&w.self&&w.self.location){var h=w.self.location.protocol;l=h.substr(0,h.length-1)}a=!nT.test(l?l.toLowerCase():"")}r=a}if(r)Ln(i,"complete"),Ln(i,"success");else{i.m=6;try{var m=2<Kn(i)?i.g.statusText:""}catch(D){m=""}i.j=m+" ["+i.ba()+"]",sC(i)}}finally{nf(i)}}}function nf(i,n){if(i.g){oC(i);const r=i.g,a=i.C[0]?g:null;i.g=null,i.C=null,n||Ln(i,"ready");try{r.onreadystatechange=a}catch(l){}}}function oC(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(w.clearTimeout(i.A),i.A=null)}function Kn(i){return i.g?i.g.readyState:0}function Rg(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case tC:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(n){return null}}function q_(i,n,r){e:{for(a in r){var a=!1;break e}a=!0}a||(r=function(i){let n="";return rg(i,function(r,a){n+=a,n+=":",n+=r,n+="\r\n"}),n}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):nn(i,n,r))}function Mg(i,n,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||n}function W_(i){this.za=0,this.l=[],this.h=new yg,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mg("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mg("baseRetryDelayMs",5e3,i),this.$a=Mg("retryDelaySeedMs",1e4,i),this.Ya=Mg("forwardChannelMaxRetries",2,i),this.ra=Mg("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new ef(i&&i.concurrentRequestLimit),this.Ca=new XD,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function z_(i){if(aC(i),3==i.G){var n=i.V++,r=es(i.F);nn(r,"SID",i.J),nn(r,"RID",n),nn(r,"TYPE","terminate"),Bu(i,r),(n=new Kh(i,i.h,n,void 0)).K=2,n.v=Dg(es(r)),r=!1,w.navigator&&w.navigator.sendBeacon&&(r=w.navigator.sendBeacon(n.v.toString(),"")),!r&&w.Image&&((new Image).src=n.v,r=!0),r||(n.g=Y_(n.l,null),n.g.ea(n.v)),n.F=Date.now(),wg(n)}Z_(i)}function Og(i){i.g&&(Fg(i),i.g.cancel(),i.g=null)}function aC(i){Og(i),i.u&&(w.clearTimeout(i.u),i.u=null),Lg(i),i.i.cancel(),i.m&&("number"==typeof i.m&&w.clearTimeout(i.m),i.m=null)}function rf(i,n){i.l.push(new class{constructor(i,n){this.h=i,this.g=n}}(i.Za++,n)),3==i.G&&Pg(i)}function Pg(i){B_(i.i)||i.m||(i.m=!0,mg(i.Ha,i),i.C=0)}function sf(i,n){var r;r=n?n.m:i.V++;const a=es(i.F);nn(a,"SID",i.J),nn(a,"RID",r),nn(a,"AID",i.U),Bu(i,a),i.o&&i.s&&q_(a,i.o,i.s),r=new Kh(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),n&&(i.l=n.D.concat(i.l)),n=uC(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Ag(i.i,r),vg(r,a,n)}function Bu(i,n){i.j&&Zw({},function(r,a){nn(n,a,r)})}function uC(i,n,r){r=Math.min(i.l.length,r);var a=i.j?Se(i.j.Oa,i.j,i):null;e:{var l=i.l;let h=-1;for(;;){const m=["count="+r];-1==h?0<r?(h=l[0].h,m.push("ofs="+h)):h=0:m.push("ofs="+h);let C=!0;for(let D=0;D<r;D++){let x=l[D].h;const R=l[D].g;if(x-=h,0>x)h=Math.max(0,l[D].h-100),C=!1;else try{gi(R,m,"req"+x+"_")}catch(O){a&&a(R)}}if(C){a=m.join("&");break e}}}return i=i.l.splice(0,r),n.D=i,a}function kg(i){i.g||i.u||(i.Y=1,mg(i.Ga,i),i.A=0)}function of(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Vu(Se(i.Ga,i),oT(i,i.A)),i.A++,0))}function Fg(i){null!=i.B&&(w.clearTimeout(i.B),i.B=null)}function lC(i){i.g=new Kh(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var n=es(i.oa);nn(n,"RID","rpc"),nn(n,"SID",i.J),nn(n,"CI",i.N?"0":"1"),nn(n,"AID",i.U),Bu(i,n),nn(n,"TYPE","xmlhttp"),i.o&&i.s&&q_(n,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=Dg(es(n)),r.s=null,r.U=!0,O_(r,i)}function Lg(i){null!=i.v&&(w.clearTimeout(i.v),i.v=null)}function Vg(i,n){var r=null;if(i.g==n){Lg(i),Fg(i),i.g=null;var a=2}else{if(!Tg(i.i,n))return;r=n.D,Xw(i.i,n),a=1}if(i.I=n.N,0!=i.G)if(n.i)if(1==a){r=n.s?n.s.length:0,n=Date.now()-n.F;var l=i.C;Ln(a=Lu(),new Us(a,r,n,l)),Pg(i)}else kg(i);else if(3==(l=n.o)||0==l&&0<i.I||!(1==a&&function(i,n){return!(JD(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=n.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Vu(Se(i.Ha,i,n),oT(i,i.C)),i.C++,0)))}(i,n)||2==a&&of(i)))switch(r&&0<r.length&&(n=i.i,n.i=n.i.concat(r)),l){case 1:ju(i,5);break;case 4:ju(i,10);break;case 3:ju(i,6);break;default:ju(i,2)}}function oT(i,n){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*n}function ju(i,n){if(i.h.info("Error code "+n),2==n){var r=null;i.j&&(r=null);var a=Se(i.jb,i);r||(r=new ma("//www.google.com/images/cleardot.gif"),w.location&&"http"==w.location.protocol||Qh(r,"https"),Dg(r)),function(i,n){const r=new yg;if(w.Image){const a=new Image;a.onload=ze(Sg,r,a,"TestLoadImage: loaded",!0,n),a.onerror=ze(Sg,r,a,"TestLoadImage: error",!1,n),a.onabort=ze(Sg,r,a,"TestLoadImage: abort",!1,n),a.ontimeout=ze(Sg,r,a,"TestLoadImage: timeout",!1,n),w.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else n(!1)}(r.toString(),a)}else ar(2);i.G=0,i.j&&i.j.va(n),Z_(i),aC(i)}function Z_(i){i.G=0,i.I=-1,i.j&&((0!=j_(i.i).length||0!=i.l.length)&&(i.i.i.length=0,fa(i.l),i.l.length=0),i.j.ua())}function K_(i,n,r){let a=function(i){return i instanceof ma?es(i):new ma(i,void 0)}(r);if(""!=a.i)n&&Sc(a,n+"."+a.i),bg(a,a.m);else{const l=w.location;a=function(i,n,r,a){var l=new ma(null,void 0);return i&&Qh(l,i),n&&Sc(l,n),r&&bg(l,r),a&&(l.l=a),l}(l.protocol,n?n+"."+l.hostname:l.hostname,+l.port,r)}return i.aa&&rg(i.aa,function(l,h){nn(a,h,l)}),r=i.sa,(n=i.D)&&r&&nn(a,n,r),nn(a,"VER",i.ma),Bu(i,a),a}function Y_(i,n,r){if(n&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(n=new Tn(r&&i.Ba&&!i.qa?new xg({ib:!0}):i.qa)).L=i.H,n}function Q_(){}function af(){if(Vs&&!(10<=Number(VD)))throw Error("Environmental error: no available transport.")}function bn(i,n){Fn.call(this),this.g=new W_(n),this.l=i,this.h=n&&n.messageUrlParams||null,i=n&&n.messageHeaders||null,n&&n.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=n&&n.initMessageHeaders||null,n&&n.messageContentType&&(i?i["X-WebChannel-Content-Type"]=n.messageContentType:i={"X-WebChannel-Content-Type":n.messageContentType}),n&&n.ya&&(i?i["X-WebChannel-Client-Profile"]=n.ya:i={"X-WebChannel-Client-Profile":n.ya}),this.g.P=i,(i=n&&n.httpHeadersOverwriteParam)&&!ku(i)&&(this.g.o=i),this.A=n&&n.supportsCrossDomainXhr||!1,this.v=n&&n.sendRawJson||!1,(n=n&&n.httpSessionIdParam)&&!ku(n)&&(this.g.D=n,null!==(i=this.h)&&n in i&&n in(i=this.h)&&delete i[n]),this.j=new Mc(this)}function uf(i){Dc.call(this);var n=i.__sm__;if(n){e:{for(const r in n){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,n=null!==n&&i in n?n[i]:void 0),this.data=n}else this.data=i}function cC(){Tc.call(this),this.status=1}function Mc(i){this.g=i}(ke=Tn.prototype).ea=function(i,n,r,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);n=n?n.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Zh.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Zh),this.g.onreadystatechange=Se(this.Fa,this);try{this.F=!0,this.g.open(n,String(i),!0),this.F=!1}catch(h){return void iC(this,h)}i=r||"";const l=new Yh(this.headers);a&&Zw(a,function(h,m){l.set(m,h)}),a=function(i){e:{var n=rC;const r=i.length,a="string"==typeof i?i.split(""):i;for(let l=0;l<r;l++)if(l in a&&n.call(void 0,a[l],l,i)){n=l;break e}n=-1}return 0>n?null:"string"==typeof i?i.charAt(n):i[n]}(l.T()),r=w.FormData&&i instanceof w.FormData,!(0<=kh(nC,n))||a||r||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),l.forEach(function(h,m){this.g.setRequestHeader(m,h)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{oC(this),0<this.B&&((this.K=function(i){return Vs&&m_()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Se(this.pa,this)):this.A=T_(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(h){iC(this,h)}},ke.pa=function(){void 0!==_c&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ln(this,"timeout"),this.abort(8))},ke.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Ln(this,"complete"),Ln(this,"abort"),nf(this))},ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),nf(this,!0)),Tn.Z.M.call(this)},ke.Fa=function(){this.s||(this.F||this.v||this.l?G_(this):this.cb())},ke.cb=function(){G_(this)},ke.ba=function(){try{return 2<Kn(this)?this.g.status:-1}catch(i){return-1}},ke.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ke.Qa=function(i){if(this.g){var n=this.g.responseText;return i&&0==n.indexOf(i)&&(n=n.substring(i.length)),eC(n)}},ke.Da=function(){return this.m},ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ke=W_.prototype).ma=8,ke.G=1,ke.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(n){}},ke.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const l=new Kh(this,this.h,i,void 0);let h=this.s;if(this.P&&(h?(h=kD(h),ig(h,this.P)):h=this.P),null===this.o&&(l.H=h),this.ja)e:{for(var n=0,r=0;r<this.l.length;r++){var a=this.l[r];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(n+=a)){n=r;break e}if(4096===n||r===this.l.length-1){n=r+1;break e}}n=1e3}else n=1e3;n=uC(this,l,n),nn(r=es(this.F),"RID",i),nn(r,"CVER",22),this.D&&nn(r,"X-HTTP-Session-Id",this.D),Bu(this,r),this.o&&h&&q_(r,this.o,h),Ag(this.i,l),this.Ra&&nn(r,"TYPE","init"),this.ja?(nn(r,"$req",n),nn(r,"SID","null"),l.$=!0,vg(l,r,null)):vg(l,r,n),this.G=2}}else 3==this.G&&(i?sf(this,i):0==this.l.length||B_(this.i)||sf(this))},ke.Ga=function(){if(this.u=null,lC(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Vu(Se(this.bb,this),i)}},ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ar(10),Og(this),lC(this))},ke.ab=function(){null!=this.v&&(this.v=null,Og(this),of(this),ar(19))},ke.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ar(2)):(this.h.info("Failed to ping google.com"),ar(1))},(ke=Q_.prototype).xa=function(){},ke.wa=function(){},ke.va=function(){},ke.ua=function(){},ke.Oa=function(){},af.prototype.g=function(i,n){return new bn(i,n)},Fe(bn,Fn),bn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,n=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),mg(Se(i.hb,i,n))),ar(0),i.W=n,i.aa=r||{},i.N=i.X,i.F=K_(i,null,i.W),Pg(i)},bn.prototype.close=function(){z_(this.g)},bn.prototype.u=function(i){if("string"==typeof i){var n={};n.__data__=i,rf(this.g,n)}else this.v?((n={}).__data__=Hh(i),rf(this.g,n)):rf(this.g,i)},bn.prototype.M=function(){this.g.j=null,delete this.j,z_(this.g),delete this.g,bn.Z.M.call(this)},Fe(uf,Dc),Fe(cC,Tc),Fe(Mc,Q_),Mc.prototype.xa=function(){Ln(this.g,"a")},Mc.prototype.wa=function(i){Ln(this.g,new uf(i))},Mc.prototype.va=function(i){Ln(this.g,new cC(i))},Mc.prototype.ua=function(){Ln(this.g,"b")},af.prototype.createWebChannel=af.prototype.g,bn.prototype.send=bn.prototype.u,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,zh.NO_ERROR=0,zh.TIMEOUT=8,zh.HTTP_ERROR=6,_g.COMPLETE="complete",zD.EventType=fi,fi.OPEN="a",fi.CLOSE="b",fi.ERROR="c",fi.MESSAGE="d",Fn.prototype.listen=Fn.prototype.N,Tn.prototype.listenOnce=Tn.prototype.O,Tn.prototype.getLastError=Tn.prototype.La,Tn.prototype.getLastErrorCode=Tn.prototype.Da,Tn.prototype.getStatus=Tn.prototype.ba,Tn.prototype.getResponseJson=Tn.prototype.Qa,Tn.prototype.getResponseText=Tn.prototype.ga,Tn.prototype.send=Tn.prototype.ea;var jx=Ci.createWebChannelTransport=function(){return new af},Oc=Ci.getStatEventTarget=function(){return Lu()},Ug=Ci.ErrorCode=zh,lf=Ci.EventType=_g,cf=Ci.Event=ga,dC=Ci.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},J_=Ci.FetchXmlHttpFactory=xg,df=Ci.WebChannel=zD,aT=Ci.XhrIo=Tn;class Yn{constructor(n){this.uid=n}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(n){return n.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");let Pc="9.1.0";const Bs=new Ls.Yd("@firebase/firestore");function X_(){return Bs.logLevel}function be(i,...n){if(Bs.logLevel<=Ls.in.DEBUG){const r=n.map(ev);Bs.debug(`Firestore (${Pc}): ${i}`,...r)}}function rn(i,...n){if(Bs.logLevel<=Ls.in.ERROR){const r=n.map(ev);Bs.error(`Firestore (${Pc}): ${i}`,...r)}}function kc(i,...n){if(Bs.logLevel<=Ls.in.WARN){const r=n.map(ev);Bs.warn(`Firestore (${Pc}): ${i}`,...r)}}function ev(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function Ge(i="Unexpected state"){const n=`FIRESTORE (${Pc}) INTERNAL ASSERTION FAILED: `+i;throw rn(n),new Error(n)}function Ze(i,n){i||Ge()}function Ne(i,n){return i}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Error{constructor(n,r){super(r),this.code=n,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ur{constructor(){this.promise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}}class hC{constructor(n,r){this.user=r,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${n}`}}class fC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(n,r){n.enqueueRetryable(()=>r(Yn.UNAUTHENTICATED))}shutdown(){}}class hn{constructor(n){this.token=n,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(n,r){this.changeListener=r,n.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class tv{constructor(n){this.t=n,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(n,r){var a=this;let l=this.i;const h=x=>this.i!==l?(l=this.i,r(x)):Promise.resolve();let m=new ur;this.o=()=>{this.i++,this.currentUser=this.u(),m.resolve(),m=new ur,n.enqueueRetryable(()=>h(this.currentUser))};const C=()=>{const x=m;n.enqueueRetryable((0,le.Z)(function*(){yield x.promise,yield h(a.currentUser)}))},D=x=>{be("FirebaseCredentialsProvider","Auth detected"),this.auth=x,this.auth.addAuthTokenListener(this.o),C()};this.t.onInit(x=>D(x)),setTimeout(()=>{if(!this.auth){const x=this.t.getImmediate({optional:!0});x?D(x):(be("FirebaseCredentialsProvider","Auth not yet detected"),m.resolve(),m=new ur)}},0),C()}getToken(){const n=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(a=>this.i!==n?(be("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Ze("string"==typeof a.accessToken),new hC(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const n=this.auth&&this.auth.getUid();return Ze(null===n||"string"==typeof n),new Yn(n)}}class $x{constructor(n,r,a){this.h=n,this.l=r,this.m=a,this.type="FirstParty",this.user=Yn.FIRST_PARTY}get authHeaders(){const n={"X-Goog-AuthUser":this.l},r=this.h.auth.getAuthHeaderValueForFirstParty([]);return r&&(n.Authorization=r),this.m&&(n["X-Goog-Iam-Authorization-Token"]=this.m),n}}class Ao{constructor(n,r,a){this.h=n,this.l=r,this.m=a}getToken(){return Promise.resolve(new $x(this.h,this.l,this.m))}start(n,r){n.enqueueRetryable(()=>r(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fr{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=a=>this.g(a),this.p=a=>r.writeSequenceNumber(a))}g(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.p&&this.p(n),n}}function nv(i){const n="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(n&&"function"==typeof n.getRandomValues)n.getRandomValues(r);else for(let a=0;a<i;a++)r[a]=Math.floor(256*Math.random());return r}Fr.T=-1;class cT{static I(){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/n.length)*n.length;let a="";for(;a.length<20;){const l=nv(40);for(let h=0;h<l.length;++h)a.length<20&&l[h]<r&&(a+=n.charAt(l[h]%n.length))}return a}}function _t(i,n){return i<n?-1:i>n?1:0}function Fc(i,n,r){return i.length===n.length&&i.every((a,l)=>r(a,n[l]))}function rv(i){return i+"\0"}class Vn{constructor(n,r){if(this.seconds=n,this.nanoseconds=r,r<0)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ee(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new Ee(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}static now(){return Vn.fromMillis(Date.now())}static fromDate(n){return Vn.fromMillis(n.getTime())}static fromMillis(n){const r=Math.floor(n/1e3),a=Math.floor(1e6*(n-1e3*r));return new Vn(r,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(n){return this.seconds===n.seconds?_t(this.nanoseconds,n.nanoseconds):_t(this.seconds,n.seconds)}isEqual(n){return n.seconds===this.seconds&&n.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ot{constructor(n){this.timestamp=n}static fromTimestamp(n){return new ot(n)}static min(){return new ot(new Vn(0,0))}compareTo(n){return this.timestamp._compareTo(n.timestamp)}isEqual(n){return this.timestamp.isEqual(n.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function iv(i){let n=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n++;return n}function $u(i,n){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&n(r,i[r])}function pC(i){for(const n in i)if(Object.prototype.hasOwnProperty.call(i,n))return!1;return!0}class So{constructor(n,r,a){void 0===r?r=0:r>n.length&&Ge(),void 0===a?a=n.length-r:a>n.length-r&&Ge(),this.segments=n,this.offset=r,this.len=a}get length(){return this.len}isEqual(n){return 0===So.comparator(this,n)}child(n){const r=this.segments.slice(this.offset,this.limit());return n instanceof So?n.forEach(a=>{r.push(a)}):r.push(n),this.construct(r)}limit(){return this.offset+this.length}popFirst(n){return this.construct(this.segments,this.offset+(n=void 0===n?1:n),this.length-n)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(n){return this.segments[this.offset+n]}isEmpty(){return 0===this.length}isPrefixOf(n){if(n.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}isImmediateParentOf(n){if(this.length+1!==n.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==n.get(r))return!1;return!0}forEach(n){for(let r=this.offset,a=this.limit();r<a;r++)n(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(n,r){const a=Math.min(n.length,r.length);for(let l=0;l<a;l++){const h=n.get(l),m=r.get(l);if(h<m)return-1;if(h>m)return 1}return n.length<r.length?-1:n.length>r.length?1:0}}class bt extends So{construct(n,r,a){return new bt(n,r,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...n){const r=[];for(const a of n){if(a.indexOf("//")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);r.push(...a.split("/").filter(l=>l.length>0))}return new bt(r)}static emptyPath(){return new bt([])}}const gC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qn extends So{construct(n,r,a){return new Qn(n,r,a)}static isValidIdentifier(n){return gC.test(n)}canonicalString(){return this.toArray().map(n=>(n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qn.isValidIdentifier(n)||(n="`"+n+"`"),n)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Qn(["__name__"])}static fromServerFormat(n){const r=[];let a="",l=0;const h=()=>{if(0===a.length)throw new Ee(se.INVALID_ARGUMENT,`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(a),a=""};let m=!1;for(;l<n.length;){const C=n[l];if("\\"===C){if(l+1===n.length)throw new Ee(se.INVALID_ARGUMENT,"Path has trailing escape character: "+n);const D=n[l+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Ee(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);a+=D,l+=2}else"`"===C?(m=!m,l++):"."!==C||m?(a+=C,l++):(h(),l++)}if(h(),m)throw new Ee(se.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new Qn(r)}static emptyPath(){return new Qn([])}}class Hu{constructor(n){this.fields=n,n.sort(Qn.comparator)}covers(n){for(const r of this.fields)if(r.isPrefixOf(n))return!0;return!1}isEqual(n){return Fc(this.fields,n.fields,(r,a)=>r.isEqual(a))}}class Jn{constructor(n){this.binaryString=n}static fromBase64String(n){const r=atob(n);return new Jn(r)}static fromUint8Array(n){const r=function(a){let l="";for(let h=0;h<a.length;++h)l+=String.fromCharCode(a[h]);return l}(n);return new Jn(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let a=0;a<n.length;a++)r[a]=n.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(n){return _t(this.binaryString,n.binaryString)}isEqual(n){return this.binaryString===n.binaryString}}Jn.EMPTY_BYTE_STRING=new Jn("");const dT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _a(i){if(Ze(!!i),"string"==typeof i){let n=0;const r=dT.exec(i);if(Ze(!!r),r[1]){let l=r[1];l=(l+"000000000").substr(0,9),n=Number(l)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:n}}return{seconds:An(i.seconds),nanos:An(i.nanos)}}function An(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Gu(i){return"string"==typeof i?Jn.fromBase64String(i):Jn.fromUint8Array(i)}function yC(i){var n,r;return"server_timestamp"===(null===(r=((null===(n=null==i?void 0:i.mapValue)||void 0===n?void 0:n.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function sv(i){const n=i.mapValue.fields.__previous_value__;return yC(n)?sv(n):n}function hf(i){const n=_a(i.mapValue.fields.__local_write_time__.timestampValue);return new Vn(n.seconds,n.nanos)}function qu(i){return null==i}function ov(i){return 0===i&&1/i==-1/0}function hT(i){return"number"==typeof i&&Number.isInteger(i)&&!ov(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Be{constructor(n){this.path=n}static fromPath(n){return new Be(bt.fromString(n))}static fromName(n){return new Be(bt.fromString(n).popFirst(5))}hasCollectionId(n){return this.path.length>=2&&this.path.get(this.path.length-2)===n}isEqual(n){return null!==n&&0===bt.comparator(this.path,n.path)}toString(){return this.path.toString()}static comparator(n,r){return bt.comparator(n.path,r.path)}static isDocumentKey(n){return n.length%2==0}static fromSegments(n){return new Be(new bt(n.slice()))}}function Wu(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yC(i)?4:10:Ge()}function ts(i,n){const r=Wu(i);if(r!==Wu(n))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===n.booleanValue;case 4:return hf(i).isEqual(hf(n));case 3:return function(a,l){if("string"==typeof a.timestampValue&&"string"==typeof l.timestampValue&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const h=_a(a.timestampValue),m=_a(l.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos}(i,n);case 5:return i.stringValue===n.stringValue;case 6:return l=n,Gu(i.bytesValue).isEqual(Gu(l.bytesValue));case 7:return i.referenceValue===n.referenceValue;case 8:return function(a,l){return An(a.geoPointValue.latitude)===An(l.geoPointValue.latitude)&&An(a.geoPointValue.longitude)===An(l.geoPointValue.longitude)}(i,n);case 2:return function(a,l){if("integerValue"in a&&"integerValue"in l)return An(a.integerValue)===An(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const h=An(a.doubleValue),m=An(l.doubleValue);return h===m?ov(h)===ov(m):isNaN(h)&&isNaN(m)}return!1}(i,n);case 9:return Fc(i.arrayValue.values||[],n.arrayValue.values||[],ts);case 10:return function(a,l){const h=a.mapValue.fields||{},m=l.mapValue.fields||{};if(iv(h)!==iv(m))return!1;for(const C in h)if(h.hasOwnProperty(C)&&(void 0===m[C]||!ts(h[C],m[C])))return!1;return!0}(i,n);default:return Ge()}var l}function Lc(i,n){return void 0!==(i.values||[]).find(r=>ts(r,n))}function ff(i,n){const r=Wu(i),a=Wu(n);if(r!==a)return _t(r,a);switch(r){case 0:return 0;case 1:return _t(i.booleanValue,n.booleanValue);case 2:return function(l,h){const m=An(l.integerValue||l.doubleValue),C=An(h.integerValue||h.doubleValue);return m<C?-1:m>C?1:m===C?0:isNaN(m)?isNaN(C)?0:-1:1}(i,n);case 3:return Di(i.timestampValue,n.timestampValue);case 4:return Di(hf(i),hf(n));case 5:return _t(i.stringValue,n.stringValue);case 6:return function(l,h){const m=Gu(l),C=Gu(h);return m.compareTo(C)}(i.bytesValue,n.bytesValue);case 7:return function(l,h){const m=l.split("/"),C=h.split("/");for(let D=0;D<m.length&&D<C.length;D++){const x=_t(m[D],C[D]);if(0!==x)return x}return _t(m.length,C.length)}(i.referenceValue,n.referenceValue);case 8:return function(l,h){const m=_t(An(l.latitude),An(h.latitude));return 0!==m?m:_t(An(l.longitude),An(h.longitude))}(i.geoPointValue,n.geoPointValue);case 9:return function(l,h){const m=l.values||[],C=h.values||[];for(let D=0;D<m.length&&D<C.length;++D){const x=ff(m[D],C[D]);if(x)return x}return _t(m.length,C.length)}(i.arrayValue,n.arrayValue);case 10:return function(l,h){const m=l.fields||{},C=Object.keys(m),D=h.fields||{},x=Object.keys(D);C.sort(),x.sort();for(let R=0;R<C.length&&R<x.length;++R){const O=_t(C[R],x[R]);if(0!==O)return O;const $=ff(m[C[R]],D[x[R]]);if(0!==$)return $}return _t(C.length,x.length)}(i.mapValue,n.mapValue);default:throw Ge()}}function Di(i,n){if("string"==typeof i&&"string"==typeof n&&i.length===n.length)return _t(i,n);const r=_a(i),a=_a(n),l=_t(r.seconds,a.seconds);return 0!==l?l:_t(r.nanos,a.nanos)}function _C(i){return vC(i)}function vC(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const l=_a(a);return`time(${l.seconds},${l.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Gu(i.bytesValue).toBase64():"referenceValue"in i?Be.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(n=i.geoPointValue).latitude},${n.longitude})`:"arrayValue"in i?function(a){let l="[",h=!0;for(const m of a.values||[])h?h=!1:l+=",",l+=vC(m);return l+"]"}(i.arrayValue):"mapValue"in i?function(a){const l=Object.keys(a.fields||{}).sort();let h="{",m=!0;for(const C of l)m?m=!1:h+=",",h+=`${C}:${vC(a.fields[C])}`;return h+"}"}(i.mapValue):Ge();var n}function av(i,n){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`}}function Bg(i){return!!i&&"integerValue"in i}function jg(i){return!!i&&"arrayValue"in i}function uv(i){return!!i&&"nullValue"in i}function EC(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function lv(i){return!!i&&"mapValue"in i}function Vc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const n={mapValue:{fields:{}}};return $u(i.mapValue.fields,(r,a)=>n.mapValue.fields[r]=Vc(a)),n}if(i.arrayValue){const n={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Vc(i.arrayValue.values[r]);return n}return Object.assign({},i)}class Xn{constructor(n){this.value=n}static empty(){return new Xn({mapValue:{}})}field(n){if(n.isEmpty())return this.value;{let r=this.value;for(let a=0;a<n.length-1;++a)if(r=(r.mapValue.fields||{})[n.get(a)],!lv(r))return null;return r=(r.mapValue.fields||{})[n.lastSegment()],r||null}}set(n,r){this.getFieldsMap(n.popLast())[n.lastSegment()]=Vc(r)}setAll(n){let r=Qn.emptyPath(),a={},l=[];n.forEach((m,C)=>{if(!r.isImmediateParentOf(C)){const D=this.getFieldsMap(r);this.applyChanges(D,a,l),a={},l=[],r=C.popLast()}m?a[C.lastSegment()]=Vc(m):l.push(C.lastSegment())});const h=this.getFieldsMap(r);this.applyChanges(h,a,l)}delete(n){const r=this.field(n.popLast());lv(r)&&r.mapValue.fields&&delete r.mapValue.fields[n.lastSegment()]}isEqual(n){return ts(this.value,n.value)}getFieldsMap(n){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let a=0;a<n.length;++a){let l=r.mapValue.fields[n.get(a)];lv(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},r.mapValue.fields[n.get(a)]=l),r=l}return r.mapValue.fields}applyChanges(n,r,a){$u(r,(l,h)=>n[l]=h);for(const l of a)delete n[l]}clone(){return new Xn(Vc(this.value))}}function wC(i){const n=[];return $u(i.fields,(r,a)=>{const l=new Qn([r]);if(lv(a)){const h=wC(a.mapValue).fields;if(0===h.length)n.push(l);else for(const m of h)n.push(l.child(m))}else n.push(l)}),new Hu(n)}class zt{constructor(n,r,a,l,h){this.key=n,this.documentType=r,this.version=a,this.data=l,this.documentState=h}static newInvalidDocument(n){return new zt(n,0,ot.min(),Xn.empty(),0)}static newFoundDocument(n,r,a){return new zt(n,1,r,a,0)}static newNoDocument(n,r){return new zt(n,2,r,Xn.empty(),0)}static newUnknownDocument(n,r){return new zt(n,3,r,Xn.empty(),2)}convertToFoundDocument(n,r){return this.version=n,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(n){return this.version=n,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(n){return this.version=n,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(n){return n instanceof zt&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.documentType===n.documentType&&this.documentState===n.documentState&&this.data.isEqual(n.data)}clone(){return new zt(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fT{constructor(n,r=null,a=[],l=[],h=null,m=null,C=null){this.path=n,this.collectionGroup=r,this.orderBy=a,this.filters=l,this.limit=h,this.startAt=m,this.endAt=C,this.A=null}}function CC(i,n=null,r=[],a=[],l=null,h=null,m=null){return new fT(i,n,r,a,l,h,m)}function pf(i){const n=Ne(i);if(null===n.A){let r=n.path.canonicalString();null!==n.collectionGroup&&(r+="|cg:"+n.collectionGroup),r+="|f:",r+=n.filters.map(a=>function(i){return i.field.canonicalString()+i.op.toString()+_C(i.value)}(a)).join(","),r+="|ob:",r+=n.orderBy.map(a=>{return(l=a).field.canonicalString()+l.dir;var l}).join(","),qu(n.limit)||(r+="|l:",r+=n.limit),n.startAt&&(r+="|lb:",r+=$s(n.startAt)),n.endAt&&(r+="|ub:",r+=$s(n.endAt)),n.A=r}return n.A}function $g(i,n){if(i.limit!==n.limit||i.orderBy.length!==n.orderBy.length)return!1;for(let l=0;l<i.orderBy.length;l++)if(!Ti(i.orderBy[l],n.orderBy[l]))return!1;if(i.filters.length!==n.filters.length)return!1;for(let l=0;l<i.filters.length;l++)if((r=i.filters[l]).op!==(a=n.filters[l]).op||!r.field.isEqual(a.field)||!ts(r.value,a.value))return!1;var r,a;return i.collectionGroup===n.collectionGroup&&!!i.path.isEqual(n.path)&&!!zu(i.startAt,n.startAt)&&zu(i.endAt,n.endAt)}function Hg(i){return Be.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class er extends class{}{constructor(n,r,a){super(),this.field=n,this.op=r,this.value=a}static create(n,r,a){return n.isKeyField()?"in"===r||"not-in"===r?this.R(n,r,a):new IC(n,r,a):"array-contains"===r?new gT(n,a):"in"===r?new cv(n,a):"not-in"===r?new js(n,a):"array-contains-any"===r?new mf(n,a):new er(n,r,a)}static R(n,r,a){return"in"===r?new ns(n,a):new gf(n,a)}matches(n){const r=n.data.field(this.field);return"!="===this.op?null!==r&&this.P(ff(r,this.value)):null!==r&&Wu(this.value)===Wu(r)&&this.P(ff(r,this.value))}P(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return 0===n;case"!=":return 0!==n;case">":return n>0;case">=":return n>=0;default:return Ge()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class IC extends er{constructor(n,r,a){super(n,r,a),this.key=Be.fromName(a.referenceValue)}matches(n){const r=Be.comparator(n.key,this.key);return this.P(r)}}class ns extends er{constructor(n,r){super(n,"in",r),this.keys=bC(0,r)}matches(n){return this.keys.some(r=>r.isEqual(n.key))}}class gf extends er{constructor(n,r){super(n,"not-in",r),this.keys=bC(0,r)}matches(n){return!this.keys.some(r=>r.isEqual(n.key))}}function bC(i,n){var r;return((null===(r=n.arrayValue)||void 0===r?void 0:r.values)||[]).map(a=>Be.fromName(a.referenceValue))}class gT extends er{constructor(n,r){super(n,"array-contains",r)}matches(n){const r=n.data.field(this.field);return jg(r)&&Lc(r.arrayValue,this.value)}}class cv extends er{constructor(n,r){super(n,"in",r)}matches(n){const r=n.data.field(this.field);return null!==r&&Lc(this.value.arrayValue,r)}}class js extends er{constructor(n,r){super(n,"not-in",r)}matches(n){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=n.data.field(this.field);return null!==r&&!Lc(this.value.arrayValue,r)}}class mf extends er{constructor(n,r){super(n,"array-contains-any",r)}matches(n){const r=n.data.field(this.field);return!(!jg(r)||!r.arrayValue.values)&&r.arrayValue.values.some(a=>Lc(this.value.arrayValue,a))}}class Sn{constructor(n,r){this.position=n,this.before=r}}function $s(i){return`${i.before?"b":"a"}:${i.position.map(n=>_C(n)).join(",")}`}class xo{constructor(n,r="asc"){this.field=n,this.dir=r}}function Ti(i,n){return i.dir===n.dir&&i.field.isEqual(n.field)}function Gg(i,n,r){let a=0;for(let l=0;l<i.position.length;l++){const h=n[l],m=i.position[l];if(a=h.field.isKeyField()?Be.comparator(Be.fromName(m.referenceValue),r.key):ff(m,r.data.field(h.field)),"desc"===h.dir&&(a*=-1),0!==a)break}return i.before?a<=0:a<0}function zu(i,n){if(null===i)return null===n;if(null===n||i.before!==n.before||i.position.length!==n.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!ts(i.position[r],n.position[r]))return!1;return!0}class Yr{constructor(n,r=null,a=[],l=[],h=null,m="F",C=null,D=null){this.path=n,this.collectionGroup=r,this.explicitOrderBy=a,this.filters=l,this.limit=h,this.limitType=m,this.startAt=C,this.endAt=D,this.V=null,this.S=null}}function Zu(i,n,r,a,l,h,m,C){return new Yr(i,n,r,a,l,h,m,C)}function rs(i){return new Yr(i)}function No(i){return!qu(i.limit)&&"F"===i.limitType}function Ro(i){return!qu(i.limit)&&"L"===i.limitType}function va(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function Ea(i){for(const n of i.filters)if(n.v())return n.field;return null}function wa(i){return null!==i.collectionGroup}function Ku(i){const n=Ne(i);if(null===n.V){n.V=[];const r=Ea(n),a=va(n);if(null!==r&&null===a)r.isKeyField()||n.V.push(new xo(r)),n.V.push(new xo(Qn.keyField(),"asc"));else{let l=!1;for(const h of n.explicitOrderBy)n.V.push(h),h.field.isKeyField()&&(l=!0);if(!l){const h=n.explicitOrderBy.length>0?n.explicitOrderBy[n.explicitOrderBy.length-1].dir:"asc";n.V.push(new xo(Qn.keyField(),h))}}}return n.V}function mi(i){const n=Ne(i);if(!n.S)if("F"===n.limitType)n.S=CC(n.path,n.collectionGroup,Ku(n),n.filters,n.limit,n.startAt,n.endAt);else{const r=[];for(const h of Ku(n))r.push(new xo(h.field,"desc"===h.dir?"asc":"desc"));const a=n.endAt?new Sn(n.endAt.position,!n.endAt.before):null,l=n.startAt?new Sn(n.startAt.position,!n.startAt.before):null;n.S=CC(n.path,n.collectionGroup,r,n.filters,n.limit,a,l)}return n.S}function dv(i,n,r){return new Yr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),n,r,i.startAt,i.endAt)}function Bc(i,n){return $g(mi(i),mi(n))&&i.limitType===n.limitType}function hv(i){return`${pf(mi(i))}|lt:${i.limitType}`}function qg(i){return`Query(target=${function(i){let n=i.path.canonicalString();return null!==i.collectionGroup&&(n+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(n+=`, filters: [${i.filters.map(r=>{return`${(a=r).field.canonicalString()} ${a.op} ${_C(a.value)}`;var a}).join(", ")}]`),qu(i.limit)||(n+=", limit: "+i.limit),i.orderBy.length>0&&(n+=`, orderBy: [${i.orderBy.map(r=>{return`${(a=r).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(n+=", startAt: "+$s(i.startAt)),i.endAt&&(n+=", endAt: "+$s(i.endAt)),`Target(${n})`}(mi(i))}; limitType=${i.limitType})`}function jc(i,n){return n.isFoundDocument()&&function(r,a){const l=a.key.path;return null!==r.collectionGroup?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Be.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(i,n)&&function(r,a){for(const l of r.explicitOrderBy)if(!l.field.isKeyField()&&null===a.data.field(l.field))return!1;return!0}(i,n)&&function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0}(i,n)&&(a=n,!((r=i).startAt&&!Gg(r.startAt,Ku(r),a)||r.endAt&&Gg(r.endAt,Ku(r),a)));var r,a}function fv(i){return(n,r)=>{let a=!1;for(const l of Ku(i)){const h=DC(l,n,r);if(0!==h)return h;a=a||l.field.isKeyField()}return 0}}function DC(i,n,r){const a=i.field.isKeyField()?Be.comparator(n.key,r.key):function(l,h,m){const C=h.data.field(l),D=m.data.field(l);return null!==C&&null!==D?ff(C,D):Ge()}(i.field,n,r);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return Ge()}}function TC(i,n){if(i.D){if(isNaN(n))return{doubleValue:"NaN"};if(n===1/0)return{doubleValue:"Infinity"};if(n===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ov(n)?"-0":n}}function pv(i){return{integerValue:""+i}}function AC(i,n){return hT(n)?pv(n):TC(i,n)}class yf{constructor(){this._=void 0}}function SC(i,n,r){return i instanceof $c?function(a,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&(h.fields.__previous_value__=l),{mapValue:h}}(r,n):i instanceof Ca?xC(i,n):i instanceof Ia?NC(i,n):function(a,l){const h=yT(a,l),m=_T(h)+_T(a.C);return Bg(h)&&Bg(a.C)?pv(m):TC(a.N,m)}(i,n)}function mT(i,n,r){return i instanceof Ca?xC(i,n):i instanceof Ia?NC(i,n):r}function yT(i,n){return i instanceof Hc?Bg(r=n)||(a=r)&&"doubleValue"in a?n:{integerValue:0}:null;var a,r}class $c extends yf{}class Ca extends yf{constructor(n){super(),this.elements=n}}function xC(i,n){const r=RC(n);for(const a of i.elements)r.some(l=>ts(l,a))||r.push(a);return{arrayValue:{values:r}}}class Ia extends yf{constructor(n){super(),this.elements=n}}function NC(i,n){let r=RC(n);for(const a of i.elements)r=r.filter(l=>!ts(l,a));return{arrayValue:{values:r}}}class Hc extends yf{constructor(n,r){super(),this.N=n,this.C=r}}function _T(i){return An(i.integerValue||i.doubleValue)}function RC(i){return jg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Gc{constructor(n,r){this.field=n,this.transform=r}}class Gx{constructor(n,r){this.version=n,this.transformResults=r}}class Un{constructor(n,r){this.updateTime=n,this.exists=r}static none(){return new Un}static exists(n){return new Un(void 0,n)}static updateTime(n){return new Un(n)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(n){return this.exists===n.exists&&(this.updateTime?!!n.updateTime&&this.updateTime.isEqual(n.updateTime):!n.updateTime)}}function Wg(i,n){return void 0!==i.updateTime?n.isFoundDocument()&&n.version.isEqual(i.updateTime):void 0===i.exists||i.exists===n.isFoundDocument()}class gv{}function vT(i,n,r){i instanceof Zg?function(a,l,h){const m=a.value.clone(),C=OC(a.fieldTransforms,l,h.transformResults);m.setAll(C),l.convertToFoundDocument(h.version,m).setHasCommittedMutations()}(i,n,r):i instanceof Yu?function(a,l,h){if(!Wg(a.precondition,l))return void l.convertToUnknownDocument(h.version);const m=OC(a.fieldTransforms,l,h.transformResults),C=l.data;C.setAll(ET(a)),C.setAll(m),l.convertToFoundDocument(h.version,C).setHasCommittedMutations()}(i,n,r):n.convertToNoDocument(r.version).setHasCommittedMutations()}function mv(i,n,r){var l;i instanceof Zg?function(a,l,h){if(!Wg(a.precondition,l))return;const m=a.value.clone(),C=_v(a.fieldTransforms,h,l);m.setAll(C),l.convertToFoundDocument(MC(l),m).setHasLocalMutations()}(i,n,r):i instanceof Yu?function(a,l,h){if(!Wg(a.precondition,l))return;const m=_v(a.fieldTransforms,h,l),C=l.data;C.setAll(ET(a)),C.setAll(m),l.convertToFoundDocument(MC(l),C).setHasLocalMutations()}(i,n,r):Wg(i.precondition,l=n)&&l.convertToNoDocument(ot.min())}function yv(i,n){let r=null;for(const a of i.fieldTransforms){const l=n.data.field(a.field),h=yT(a.transform,l||null);null!=h&&(null==r&&(r=Xn.empty()),r.set(a.field,h))}return r||null}function zg(i,n){return i.type===n.type&&!!i.key.isEqual(n.key)&&!!i.precondition.isEqual(n.precondition)&&(a=n.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===a||r&&a&&Fc(r,a,(l,h)=>function(i,n){return i.field.isEqual(n.field)&&(a=n.transform,(r=i.transform)instanceof Ca&&a instanceof Ca||r instanceof Ia&&a instanceof Ia?Fc(r.elements,a.elements,ts):r instanceof Hc&&a instanceof Hc?ts(r.C,a.C):r instanceof $c&&a instanceof $c);var r,a}(l,h))))&&(0===i.type?i.value.isEqual(n.value):1!==i.type||i.data.isEqual(n.data)&&i.fieldMask.isEqual(n.fieldMask));var r,a}function MC(i){return i.isFoundDocument()?i.version:ot.min()}class Zg extends gv{constructor(n,r,a,l=[]){super(),this.key=n,this.value=r,this.precondition=a,this.fieldTransforms=l,this.type=0}}class Yu extends gv{constructor(n,r,a,l,h=[]){super(),this.key=n,this.data=r,this.fieldMask=a,this.precondition=l,this.fieldTransforms=h,this.type=1}}function ET(i){const n=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const a=i.data.field(r);n.set(r,a)}}),n}function OC(i,n,r){const a=new Map;Ze(i.length===r.length);for(let l=0;l<r.length;l++){const h=i[l],m=h.transform,C=n.data.field(h.field);a.set(h.field,mT(m,C,r[l]))}return a}function _v(i,n,r){const a=new Map;for(const l of i){const h=l.transform,m=r.data.field(l.field);a.set(l.field,SC(h,m,n))}return a}class Kg extends gv{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class vv extends gv{constructor(n,r){super(),this.key=n,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class qc{constructor(n){this.count=n}}var xn,wt;function PC(i){switch(i){case se.OK:return Ge();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0;default:return Ge()}}function Ev(i){if(void 0===i)return rn("GRPC error has no .code"),se.UNKNOWN;switch(i){case xn.OK:return se.OK;case xn.CANCELLED:return se.CANCELLED;case xn.UNKNOWN:return se.UNKNOWN;case xn.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case xn.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case xn.INTERNAL:return se.INTERNAL;case xn.UNAVAILABLE:return se.UNAVAILABLE;case xn.UNAUTHENTICATED:return se.UNAUTHENTICATED;case xn.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case xn.NOT_FOUND:return se.NOT_FOUND;case xn.ALREADY_EXISTS:return se.ALREADY_EXISTS;case xn.PERMISSION_DENIED:return se.PERMISSION_DENIED;case xn.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case xn.ABORTED:return se.ABORTED;case xn.OUT_OF_RANGE:return se.OUT_OF_RANGE;case xn.UNIMPLEMENTED:return se.UNIMPLEMENTED;case xn.DATA_LOSS:return se.DATA_LOSS;default:return Ge()}}(wt=xn||(xn={}))[wt.OK=0]="OK",wt[wt.CANCELLED=1]="CANCELLED",wt[wt.UNKNOWN=2]="UNKNOWN",wt[wt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wt[wt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wt[wt.NOT_FOUND=5]="NOT_FOUND",wt[wt.ALREADY_EXISTS=6]="ALREADY_EXISTS",wt[wt.PERMISSION_DENIED=7]="PERMISSION_DENIED",wt[wt.UNAUTHENTICATED=16]="UNAUTHENTICATED",wt[wt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wt[wt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wt[wt.ABORTED=10]="ABORTED",wt[wt.OUT_OF_RANGE=11]="OUT_OF_RANGE",wt[wt.UNIMPLEMENTED=12]="UNIMPLEMENTED",wt[wt.INTERNAL=13]="INTERNAL",wt[wt.UNAVAILABLE=14]="UNAVAILABLE",wt[wt.DATA_LOSS=15]="DATA_LOSS";class _n{constructor(n,r){this.comparator=n,this.root=r||tr.EMPTY}insert(n,r){return new _n(this.comparator,this.root.insert(n,r,this.comparator).copy(null,null,tr.BLACK,null,null))}remove(n){return new _n(this.comparator,this.root.remove(n,this.comparator).copy(null,null,tr.BLACK,null,null))}get(n){let r=this.root;for(;!r.isEmpty();){const a=this.comparator(n,r.key);if(0===a)return r.value;a<0?r=r.left:a>0&&(r=r.right)}return null}indexOf(n){let r=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(n,a.key);if(0===l)return r+a.left.size;l<0?a=a.left:(r+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(n){return this.root.inorderTraversal(n)}forEach(n){this.inorderTraversal((r,a)=>(n(r,a),!1))}toString(){const n=[];return this.inorderTraversal((r,a)=>(n.push(`${r}:${a}`),!1)),`{${n.join(", ")}}`}reverseTraversal(n){return this.root.reverseTraversal(n)}getIterator(){return new Yg(this.root,null,this.comparator,!1)}getIteratorFrom(n){return new Yg(this.root,n,this.comparator,!1)}getReverseIterator(){return new Yg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(n){return new Yg(this.root,n,this.comparator,!0)}}class Yg{constructor(n,r,a,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!n.isEmpty();)if(h=r?a(n.key,r):1,l&&(h*=-1),h<0)n=this.isReverse?n.left:n.right;else{if(0===h){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}getNext(){let n=this.nodeStack.pop();const r={key:n.key,value:n.value};if(this.isReverse)for(n=n.left;!n.isEmpty();)this.nodeStack.push(n),n=n.right;else for(n=n.right;!n.isEmpty();)this.nodeStack.push(n),n=n.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const n=this.nodeStack[this.nodeStack.length-1];return{key:n.key,value:n.value}}}class tr{constructor(n,r,a,l,h){this.key=n,this.value=r,this.color=null!=a?a:tr.RED,this.left=null!=l?l:tr.EMPTY,this.right=null!=h?h:tr.EMPTY,this.size=this.left.size+1+this.right.size}copy(n,r,a,l,h){return new tr(null!=n?n:this.key,null!=r?r:this.value,null!=a?a:this.color,null!=l?l:this.left,null!=h?h:this.right)}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,a){let l=this;const h=a(n,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(n,r,a),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(n,r,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return tr.EMPTY;let n=this;return n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.removeMin(),null),n.fixUp()}remove(n,r){let a,l=this;if(r(n,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(n,r),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),0===r(n,l.key)){if(l.right.isEmpty())return tr.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(n,r))}return l.fixUp()}isRed(){return this.color}fixUp(){let n=this;return n.right.isRed()&&!n.left.isRed()&&(n=n.rotateLeft()),n.left.isRed()&&n.left.left.isRed()&&(n=n.rotateRight()),n.left.isRed()&&n.right.isRed()&&(n=n.colorFlip()),n}moveRedLeft(){let n=this.colorFlip();return n.right.left.isRed()&&(n=n.copy(null,null,null,null,n.right.rotateRight()),n=n.rotateLeft(),n=n.colorFlip()),n}moveRedRight(){let n=this.colorFlip();return n.left.left.isRed()&&(n=n.rotateRight(),n=n.colorFlip()),n}rotateLeft(){const n=this.copy(null,null,tr.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight(){const n=this.copy(null,null,tr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip(){const n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth(){const n=this.check();return Math.pow(2,n)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ge();const n=this.left.check();if(n!==this.right.check())throw Ge();return n+(this.isRed()?0:1)}}tr.EMPTY=null,tr.RED=!0,tr.BLACK=!1,tr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ge()}get value(){throw Ge()}get color(){throw Ge()}get left(){throw Ge()}get right(){throw Ge()}copy(i,n,r,a,l){return this}insert(i,n,r){return new tr(i,n)}remove(i,n){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(n){this.comparator=n,this.data=new _n(this.comparator)}has(n){return null!==this.data.get(n)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(n){return this.data.indexOf(n)}forEach(n){this.data.inorderTraversal((r,a)=>(n(r),!1))}forEachInRange(n,r){const a=this.data.getIteratorFrom(n[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,n[1])>=0)return;r(l.key)}}forEachWhile(n,r){let a;for(a=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();a.hasNext();)if(!n(a.getNext().key))return}firstAfterOrEqual(n){const r=this.data.getIteratorFrom(n);return r.hasNext()?r.getNext().key:null}getIterator(){return new kC(this.data.getIterator())}getIteratorFrom(n){return new kC(this.data.getIteratorFrom(n))}add(n){return this.copy(this.data.remove(n).insert(n,!0))}delete(n){return this.has(n)?this.copy(this.data.remove(n)):this}isEmpty(){return this.data.isEmpty()}unionWith(n){let r=this;return r.size<n.size&&(r=n,n=this),n.forEach(a=>{r=r.add(a)}),r}isEqual(n){if(!(n instanceof vn)||this.size!==n.size)return!1;const r=this.data.getIterator(),a=n.data.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(0!==this.comparator(l,h))return!1}return!0}toArray(){const n=[];return this.forEach(r=>{n.push(r)}),n}toString(){const n=[];return this.forEach(r=>n.push(r)),"SortedSet("+n.toString()+")"}copy(n){const r=new vn(this.comparator);return r.data=n,r}}class kC{constructor(n){this.iter=n}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const wT=new _n(Be.comparator);function Ai(){return wT}const CT=new _n(Be.comparator);function Qg(){return CT}const IT=new _n(Be.comparator);function wv(){return IT}const FC=new vn(Be.comparator);function Nt(...i){let n=FC;for(const r of i)n=n.add(r);return n}const qx=new vn(_t);function Wc(){return qx}class _f{constructor(n,r,a,l,h){this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(n,r){const a=new Map;return a.set(n,Jg.createSynthesizedTargetChangeForCurrentChange(n,r)),new _f(ot.min(),a,Wc(),Ai(),Nt())}}class Jg{constructor(n,r,a,l,h){this.resumeToken=n,this.current=r,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(n,r){return new Jg(Jn.EMPTY_BYTE_STRING,r,Nt(),Nt(),Nt())}}class ba{constructor(n,r,a,l){this.k=n,this.removedTargetIds=r,this.key=a,this.$=l}}class LC{constructor(n,r){this.targetId=n,this.O=r}}class Xg{constructor(n,r,a=Jn.EMPTY_BYTE_STRING,l=null){this.state=n,this.targetIds=r,this.resumeToken=a,this.cause=l}}class em{constructor(){this.F=0,this.M=nm(),this.L=Jn.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(n){n.approximateByteSize()>0&&(this.U=!0,this.L=n)}W(){let n=Nt(),r=Nt(),a=Nt();return this.M.forEach((l,h)=>{switch(h){case 0:n=n.add(l);break;case 2:r=r.add(l);break;case 1:a=a.add(l);break;default:Ge()}}),new Jg(this.L,this.B,n,r,a)}G(){this.U=!1,this.M=nm()}H(n,r){this.U=!0,this.M=this.M.insert(n,r)}J(n){this.U=!0,this.M=this.M.remove(n)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class bT{constructor(n){this.tt=n,this.et=new Map,this.nt=Ai(),this.st=tm(),this.it=new vn(_t)}rt(n){for(const r of n.k)n.$&&n.$.isFoundDocument()?this.ot(r,n.$):this.at(r,n.key,n.$);for(const r of n.removedTargetIds)this.at(r,n.key,n.$)}ct(n){this.forEachTarget(n,r=>{const a=this.ut(r);switch(n.state){case 0:this.ht(r)&&a.j(n.resumeToken);break;case 1:a.X(),a.q||a.G(),a.j(n.resumeToken);break;case 2:a.X(),a.q||this.removeTarget(r);break;case 3:this.ht(r)&&(a.Z(),a.j(n.resumeToken));break;case 4:this.ht(r)&&(this.lt(r),a.j(n.resumeToken));break;default:Ge()}})}forEachTarget(n,r){n.targetIds.length>0?n.targetIds.forEach(r):this.et.forEach((a,l)=>{this.ht(l)&&r(l)})}ft(n){const r=n.targetId,a=n.O.count,l=this.dt(r);if(l){const h=l.target;if(Hg(h))if(0===a){const m=new Be(h.path);this.at(r,m,zt.newNoDocument(m,ot.min()))}else Ze(1===a);else this.wt(r)!==a&&(this.lt(r),this.it=this.it.add(r))}}_t(n){const r=new Map;this.et.forEach((h,m)=>{const C=this.dt(m);if(C){if(h.current&&Hg(C.target)){const D=new Be(C.target.path);null!==this.nt.get(D)||this.gt(m,D)||this.at(m,D,zt.newNoDocument(D,n))}h.K&&(r.set(m,h.W()),h.G())}});let a=Nt();this.st.forEach((h,m)=>{let C=!0;m.forEachWhile(D=>{const x=this.dt(D);return!x||2===x.purpose||(C=!1,!1)}),C&&(a=a.add(h))});const l=new _f(n,r,this.it,this.nt,a);return this.nt=Ai(),this.st=tm(),this.it=new vn(_t),l}ot(n,r){if(!this.ht(n))return;const a=this.gt(n,r.key)?2:0;this.ut(n).H(r.key,a),this.nt=this.nt.insert(r.key,r),this.st=this.st.insert(r.key,this.yt(r.key).add(n))}at(n,r,a){if(!this.ht(n))return;const l=this.ut(n);this.gt(n,r)?l.H(r,1):l.J(r),this.st=this.st.insert(r,this.yt(r).delete(n)),a&&(this.nt=this.nt.insert(r,a))}removeTarget(n){this.et.delete(n)}wt(n){const r=this.ut(n).W();return this.tt.getRemoteKeysForTarget(n).size+r.addedDocuments.size-r.removedDocuments.size}Y(n){this.ut(n).Y()}ut(n){let r=this.et.get(n);return r||(r=new em,this.et.set(n,r)),r}yt(n){let r=this.st.get(n);return r||(r=new vn(_t),this.st=this.st.insert(n,r)),r}ht(n){const r=null!==this.dt(n);return r||be("WatchChangeAggregator","Detected inactive target",n),r}dt(n){const r=this.et.get(n);return r&&r.q?null:this.tt.Et(n)}lt(n){this.et.set(n,new em),this.tt.getRemoteKeysForTarget(n).forEach(r=>{this.at(n,r,null)})}gt(n,r){return this.tt.getRemoteKeysForTarget(n).has(r)}}function tm(){return new _n(Be.comparator)}function nm(){return new _n(Be.comparator)}const VC={asc:"ASCENDING",desc:"DESCENDING"},Wx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class DT{constructor(n,r){this.databaseId=n,this.D=r}}function zc(i,n){return i.D?`${new Date(1e3*n.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+n.nanoseconds).slice(-9)}Z`:{seconds:""+n.seconds,nanos:n.nanoseconds}}function Cv(i,n){return i.D?n.toBase64():n.toUint8Array()}function TT(i,n){return zc(i,n.toTimestamp())}function Bn(i){return Ze(!!i),ot.fromTimestamp(function(n){const r=_a(n);return new Vn(r.seconds,r.nanos)}(i))}function vf(i,n){return(r=i,new bt(["projects",r.projectId,"databases",r.database])).child("documents").child(n).canonicalString();var r}function Iv(i){const n=bt.fromString(i);return Ze(Pv(n)),n}function Qu(i,n){return vf(i.databaseId,n.path)}function Si(i,n){const r=Iv(n);if(r.get(1)!==i.databaseId.projectId)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Ee(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Be(bv(r))}function rm(i,n){return vf(i.databaseId,n)}function UC(i){const n=Iv(i);return 4===n.length?bt.emptyPath():bv(n)}function Zc(i){return new bt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function bv(i){return Ze(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function im(i,n,r){return{name:Qu(i,n),fields:r.value.mapValue.fields}}function Dv(i,n,r){const a=Si(i,n.name),l=Bn(n.updateTime),h=new Xn({mapValue:{fields:n.fields}}),m=zt.newFoundDocument(a,l,h);return r&&m.setHasCommittedMutations(),r?m.setHasCommittedMutations():m}function sm(i,n){let r;if(n instanceof Zg)r={update:im(i,n.key,n.value)};else if(n instanceof Kg)r={delete:Qu(i,n.key)};else if(n instanceof Yu)r={update:im(i,n.key,n.data),updateMask:jn(n.fieldMask)};else{if(!(n instanceof vv))return Ge();r={verify:Qu(i,n.key)}}return n.fieldTransforms.length>0&&(r.updateTransforms=n.fieldTransforms.map(a=>function(l,h){const m=h.transform;if(m instanceof $c)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Ca)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ia)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Hc)return{fieldPath:h.field.canonicalString(),increment:m.C};throw Ge()}(0,a))),n.precondition.isNone||(r.currentDocument=void 0!==(l=n.precondition).updateTime?{updateTime:TT(i,l.updateTime)}:void 0!==l.exists?{exists:l.exists}:Ge()),r;var l}function Tv(i,n){const r=n.currentDocument?void 0!==(l=n.currentDocument).updateTime?Un.updateTime(Bn(l.updateTime)):void 0!==l.exists?Un.exists(l.exists):Un.none():Un.none(),a=n.updateTransforms?n.updateTransforms.map(l=>function(h,m){let C=null;"setToServerValue"in m?(Ze("REQUEST_TIME"===m.setToServerValue),C=new $c):"appendMissingElements"in m?C=new Ca(m.appendMissingElements.values||[]):"removeAllFromArray"in m?C=new Ia(m.removeAllFromArray.values||[]):"increment"in m?C=new Hc(h,m.increment):Ge();const D=Qn.fromServerFormat(m.fieldPath);return new Gc(D,C)}(i,l)):[];var l;if(n.update){const l=Si(i,n.update.name),h=new Xn({mapValue:{fields:n.update.fields}});if(n.updateMask){const m=new Hu((n.updateMask.fieldPaths||[]).map(x=>Qn.fromServerFormat(x)));return new Yu(l,h,m,r,a)}return new Zg(l,h,r,a)}if(n.delete){const l=Si(i,n.delete);return new Kg(l,r)}if(n.verify){const l=Si(i,n.verify);return new vv(l,r)}return Ge()}function Sv(i,n){return{documents:[rm(i,n.path)]}}function xv(i,n){const r={structuredQuery:{}},a=n.path;null!==n.collectionGroup?(r.parent=rm(i,a),r.structuredQuery.from=[{collectionId:n.collectionGroup,allDescendants:!0}]):(r.parent=rm(i,a.popLast()),r.structuredQuery.from=[{collectionId:a.lastSegment()}]);const l=function(C){if(0===C.length)return;const D=C.map(x=>function(R){if("=="===R.op){if(EC(R.value))return{unaryFilter:{field:Kc(R.field),op:"IS_NAN"}};if(uv(R.value))return{unaryFilter:{field:Kc(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(EC(R.value))return{unaryFilter:{field:Kc(R.field),op:"IS_NOT_NAN"}};if(uv(R.value))return{unaryFilter:{field:Kc(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kc(R.field),op:zx(R.op),value:R.value}}}(x));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(n.filters);l&&(r.structuredQuery.where=l);const h=function(C){if(0!==C.length)return C.map(D=>{return{field:Kc((x=D).field),direction:jC(x.dir)};var x})}(n.orderBy);h&&(r.structuredQuery.orderBy=h);const m=(D=n.limit,i.D||qu(D)?D:{value:D});var D;return null!==m&&(r.structuredQuery.limit=m),n.startAt&&(r.structuredQuery.startAt=Mv(n.startAt)),n.endAt&&(r.structuredQuery.endAt=Mv(n.endAt)),r}function Nv(i){let n=UC(i.parent);const r=i.structuredQuery,a=r.from?r.from.length:0;let l=null;if(a>0){Ze(1===a);const R=r.from[0];R.allDescendants?l=R.collectionId:n=n.child(R.collectionId)}let h=[];r.where&&(h=Rv(r.where));let m=[];r.orderBy&&(m=r.orderBy.map(R=>{return new xo(Yc((O=R).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let C=null;r.limit&&(C=function(R){let O;return O="object"==typeof R?R.value:R,qu(O)?null:O}(r.limit));let D=null;r.startAt&&(D=Ov(r.startAt));let x=null;return r.endAt&&(x=Ov(r.endAt)),Zu(n,l,m,h,C,"F",D,x)}function Rv(i){return i?void 0!==i.unaryFilter?[xT(i)]:void 0!==i.fieldFilter?[$C(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(n=>Rv(n)).reduce((n,r)=>n.concat(r)):Ge():[]}function Mv(i){return{before:i.before,values:i.position}}function Ov(i){return new Sn(i.values||[],!!i.before)}function jC(i){return VC[i]}function zx(i){return Wx[i]}function Kc(i){return{fieldPath:i.canonicalString()}}function Yc(i){return Qn.fromServerFormat(i.fieldPath)}function $C(i){return er.create(Yc(i.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ge()}}(i.fieldFilter.op),i.fieldFilter.value)}function xT(i){switch(i.unaryFilter.op){case"IS_NAN":const n=Yc(i.unaryFilter.field);return er.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Yc(i.unaryFilter.field);return er.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Yc(i.unaryFilter.field);return er.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Yc(i.unaryFilter.field);return er.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ge()}}function jn(i){const n=[];return i.fields.forEach(r=>n.push(r.canonicalString())),{fieldPaths:n}}function Pv(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function is(i){let n="";for(let r=0;r<i.length;r++)n.length>0&&(n=kv(n)),n=NT(i.get(r),n);return kv(n)}function NT(i,n){let r=n;const a=i.length;for(let l=0;l<a;l++){const h=i.charAt(l);switch(h){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=h}}return r}function kv(i){return i+"\x01\x01"}function Mo(i){const n=i.length;if(Ze(n>=2),2===n)return Ze("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),bt.emptyPath();const r=n-2,a=[];let l="";for(let h=0;h<n;){const m=i.indexOf("\x01",h);switch((m<0||m>r)&&Ge(),i.charAt(m+1)){case"\x01":const C=i.substring(h,m);let D;0===l.length?D=C:(l+=C,D=l,l=""),a.push(D);break;case"\x10":l+=i.substring(h,m),l+="\0";break;case"\x11":l+=i.substring(h,m+1);break;default:Ge()}h=m+2}return new bt(a)}class HC{constructor(n,r){this.seconds=n,this.nanoseconds=r}}class Qr{constructor(n,r,a){this.ownerId=n,this.allowTabSynchronization=r,this.leaseTimestampMs=a}}Qr.store="owner",Qr.key="owner";class yi{constructor(n,r,a){this.userId=n,this.lastAcknowledgedBatchId=r,this.lastStreamToken=a}}yi.store="mutationQueues",yi.keyPath="userId";class sn{constructor(n,r,a,l,h){this.userId=n,this.batchId=r,this.localWriteTimeMs=a,this.baseMutations=l,this.mutations=h}}sn.store="mutations",sn.keyPath="batchId",sn.userMutationsIndex="userMutationsIndex",sn.userMutationsKeyPath=["userId","batchId"];class Cr{constructor(){}static prefixForUser(n){return[n]}static prefixForPath(n,r){return[n,is(r)]}static key(n,r,a){return[n,is(r),a]}}Cr.store="documentMutations",Cr.PLACEHOLDER=new Cr;class GC{constructor(n,r){this.path=n,this.readTime=r}}class RT{constructor(n,r){this.path=n,this.version=r}}class pn{constructor(n,r,a,l,h,m){this.unknownDocument=n,this.noDocument=r,this.document=a,this.hasCommittedMutations=l,this.readTime=h,this.parentPath=m}}pn.store="remoteDocuments",pn.readTimeIndex="readTimeIndex",pn.readTimeIndexPath="readTime",pn.collectionReadTimeIndex="collectionReadTimeIndex",pn.collectionReadTimeIndexPath=["parentPath","readTime"];class Oo{constructor(n){this.byteSize=n}}Oo.store="remoteDocumentGlobal",Oo.key="remoteDocumentGlobalKey";class Lr{constructor(n,r,a,l,h,m,C){this.targetId=n,this.canonicalId=r,this.readTime=a,this.resumeToken=l,this.lastListenSequenceNumber=h,this.lastLimboFreeSnapshotVersion=m,this.query=C}}Lr.store="targets",Lr.keyPath="targetId",Lr.queryTargetsIndexName="queryTargetsIndex",Lr.queryTargetsKeyPath=["canonicalId","targetId"];class $n{constructor(n,r,a){this.targetId=n,this.path=r,this.sequenceNumber=a}}$n.store="targetDocuments",$n.keyPath=["targetId","path"],$n.documentTargetsIndex="documentTargetsIndex",$n.documentTargetsKeyPath=["path","targetId"];class En{constructor(n,r,a,l){this.highestTargetId=n,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=a,this.targetCount=l}}En.key="targetGlobalKey",En.store="targetGlobal";class Ju{constructor(n,r){this.collectionId=n,this.parent=r}}Ju.store="collectionParents",Ju.keyPath=["collectionId","parent"];class Po{constructor(n,r,a,l){this.clientId=n,this.updateTimeMs=r,this.networkEnabled=a,this.inForeground=l}}Po.store="clientMetadata",Po.keyPath="clientId";class Vr{constructor(n,r,a){this.bundleId=n,this.createTime=r,this.version=a}}Vr.store="bundles",Vr.keyPath="bundleId";class Ir{constructor(n,r,a){this.name=n,this.readTime=r,this.bundledQuery=a}}Ir.store="namedQueries",Ir.keyPath="name";const ss=[yi.store,sn.store,Cr.store,pn.store,Lr.store,Qr.store,En.store,$n.store,Po.store,Oo.store,Ju.store,Vr.store,Ir.store],Fv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Lv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(n){this.onCommittedListeners.push(n)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(n=>n())}}class _e{constructor(n){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(n){return this.next(void 0,n)}next(n,r){return this.callbackAttached&&Ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(n,this.result):new _e((a,l)=>{this.nextCallback=h=>{this.wrapSuccess(n,h).next(a,l)},this.catchCallback=h=>{this.wrapFailure(r,h).next(a,l)}})}toPromise(){return new Promise((n,r)=>{this.next(n,r)})}wrapUserFunction(n){try{const r=n();return r instanceof _e?r:_e.resolve(r)}catch(r){return _e.reject(r)}}wrapSuccess(n,r){return n?this.wrapUserFunction(()=>n(r)):_e.resolve(r)}wrapFailure(n,r){return n?this.wrapUserFunction(()=>n(r)):_e.reject(r)}static resolve(n){return new _e((r,a)=>{r(n)})}static reject(n){return new _e((r,a)=>{a(n)})}static waitFor(n){return new _e((r,a)=>{let l=0,h=0,m=!1;n.forEach(C=>{++l,C.next(()=>{++h,m&&h===l&&r()},D=>a(D))}),m=!0,h===l&&r()})}static or(n){let r=_e.resolve(!1);for(const a of n)r=r.next(l=>l?_e.resolve(l):a());return r}static forEach(n,r){const a=[];return n.forEach((l,h)=>{a.push(r.call(this,l,h))}),this.waitFor(a)}}class om{constructor(n,r){this.action=n,this.transaction=r,this.aborted=!1,this.Tt=new ur,this.transaction.oncomplete=()=>{this.Tt.resolve()},this.transaction.onabort=()=>{r.error?this.Tt.reject(new Xu(n,r.error)):this.Tt.resolve()},this.transaction.onerror=a=>{const l=am(a.target.error);this.Tt.reject(new Xu(n,l))}}static open(n,r,a,l){try{return new om(r,n.transaction(l,a))}catch(h){throw new Xu(r,h)}}get It(){return this.Tt.promise}abort(n){n&&this.Tt.reject(n),this.aborted||(be("SimpleDb","Aborting transaction:",n?n.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(n){const r=this.transaction.objectStore(n);return new OT(r)}}class os{constructor(n,r,a){this.name=n,this.version=r,this.At=a,12.2===os.Rt((0,yt.z$)())&&rn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(n){return be("SimpleDb","Removing database:",n),Da(window.indexedDB.deleteDatabase(n)).toPromise()}static bt(){if(!(0,yt.hl)())return!1;if(os.Pt())return!0;const n=(0,yt.z$)(),r=os.Rt(n),a=0<r&&r<10,l=os.vt(n),h=0<l&&l<4.5;return!(n.indexOf("MSIE ")>0||n.indexOf("Trident/")>0||n.indexOf("Edge/")>0||a||h)}static Pt(){var n;return"undefined"!=typeof process&&"YES"===(null===(n=process.env)||void 0===n?void 0:n.Vt)}static St(n,r){return n.store(r)}static Rt(n){const r=n.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static vt(n){const r=n.match(/Android ([\d.]+)/i),a=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Dt(n){var r=this;return(0,le.Z)(function*(){return r.db||(be("SimpleDb","Opening database:",r.name),r.db=yield new Promise((a,l)=>{const h=indexedDB.open(r.name,r.version);h.onsuccess=m=>{a(m.target.result)},h.onblocked=()=>{l(new Xu(n,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},h.onerror=m=>{const C=m.target.error;l("VersionError"===C.name?new Ee(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===C.name?new Ee(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+C):new Xu(n,C))},h.onupgradeneeded=m=>{be("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',m.oldVersion),r.At.Ct(m.target.result,h.transaction,m.oldVersion,r.version).next(()=>{be("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.Nt&&(r.db.onversionchange=a=>r.Nt(a)),r.db})()}xt(n){this.Nt=n,this.db&&(this.db.onversionchange=r=>n(r))}runTransaction(n,r,a,l){var h=this;return(0,le.Z)(function*(){const m="readonly"===r;let C=0;for(;;){++C;try{h.db=yield h.Dt(n);const D=om.open(h.db,n,m?"readonly":"readwrite",a),x=l(D).catch(R=>(D.abort(R),_e.reject(R))).toPromise();return x.catch(()=>{}),yield D.It,x}catch(D){const x="FirebaseError"!==D.name&&C<3;if(be("SimpleDb","Transaction failed with error:",D.message,"Retrying:",x),h.close(),!x)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class MT{constructor(n){this.kt=n,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(n){this.kt=n}done(){this.$t=!0}Mt(n){this.Ot=n}delete(){return Da(this.kt.delete())}}class Xu extends Ee{constructor(n,r){super(se.UNAVAILABLE,`IndexedDB transaction '${n}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function as(i){return"IndexedDbTransactionError"===i.name}class OT{constructor(n){this.store=n}put(n,r){let a;return void 0!==r?(be("SimpleDb","PUT",this.store.name,n,r),a=this.store.put(r,n)):(be("SimpleDb","PUT",this.store.name,"<auto-key>",n),a=this.store.put(n)),Da(a)}add(n){return be("SimpleDb","ADD",this.store.name,n,n),Da(this.store.add(n))}get(n){return Da(this.store.get(n)).next(r=>(void 0===r&&(r=null),be("SimpleDb","GET",this.store.name,n,r),r))}delete(n){return be("SimpleDb","DELETE",this.store.name,n),Da(this.store.delete(n))}count(){return be("SimpleDb","COUNT",this.store.name),Da(this.store.count())}Lt(n,r){const a=this.cursor(this.options(n,r)),l=[];return this.Bt(a,(h,m)=>{l.push(m)}).next(()=>l)}Ut(n,r){be("SimpleDb","DELETE ALL",this.store.name);const a=this.options(n,r);a.qt=!1;const l=this.cursor(a);return this.Bt(l,(h,m,C)=>C.delete())}Kt(n,r){let a;r?a=n:(a={},r=n);const l=this.cursor(a);return this.Bt(l,r)}jt(n){const r=this.cursor({});return new _e((a,l)=>{r.onerror=h=>{const m=am(h.target.error);l(m)},r.onsuccess=h=>{const m=h.target.result;m?n(m.primaryKey,m.value).next(C=>{C?m.continue():a()}):a()}})}Bt(n,r){const a=[];return new _e((l,h)=>{n.onerror=m=>{h(m.target.error)},n.onsuccess=m=>{const C=m.target.result;if(!C)return void l();const D=new MT(C),x=r(C.primaryKey,C.value,D);if(x instanceof _e){const R=x.catch(O=>(D.done(),_e.reject(O)));a.push(R)}D.isDone?l():null===D.Ft?C.continue():C.continue(D.Ft)}}).next(()=>_e.waitFor(a))}options(n,r){let a;return void 0!==n&&("string"==typeof n?a=n:r=n),{index:a,range:r}}cursor(n){let r="next";if(n.reverse&&(r="prev"),n.index){const a=this.store.index(n.index);return n.qt?a.openKeyCursor(n.range,r):a.openCursor(n.range,r)}return this.store.openCursor(n.range,r)}}function Da(i){return new _e((n,r)=>{i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{const l=am(a.target.error);r(l)}})}let qC=!1;function am(i){const n=os.Rt((0,yt.z$)());if(n>=12.2&&n<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const a=new Ee("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qC||(qC=!0,setTimeout(()=>{throw a},0)),a}}return i}class Vv extends Lv{constructor(n,r){super(),this.Qt=n,this.currentSequenceNumber=r}}function lr(i,n){const r=Ne(i);return os.St(r.Qt,n)}class Uv{constructor(n,r,a,l){this.batchId=n,this.localWriteTime=r,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(n,r){const a=r.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(n.key)&&vT(h,n,a[l])}}applyToLocalView(n){for(const r of this.baseMutations)r.key.isEqual(n.key)&&mv(r,n,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(n.key)&&mv(r,n,this.localWriteTime)}applyToLocalDocumentSet(n){this.mutations.forEach(r=>{const a=n.get(r.key),l=a;this.applyToLocalView(l),a.isValidDocument()||l.convertToNoDocument(ot.min())})}keys(){return this.mutations.reduce((n,r)=>n.add(r.key),Nt())}isEqual(n){return this.batchId===n.batchId&&Fc(this.mutations,n.mutations,(r,a)=>zg(r,a))&&Fc(this.baseMutations,n.baseMutations,(r,a)=>zg(r,a))}}class um{constructor(n,r,a,l){this.batch=n,this.commitVersion=r,this.mutationResults=a,this.docVersions=l}static from(n,r,a){Ze(n.mutations.length===a.length);let l=wv();const h=n.mutations;for(let m=0;m<h.length;m++)l=l.insert(h[m].key,a[m].version);return new um(n,r,a,l)}}class ko{constructor(n,r,a,l,h=ot.min(),m=ot.min(),C=Jn.EMPTY_BYTE_STRING){this.target=n,this.targetId=r,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=C}withSequenceNumber(n){return new ko(this.target,this.targetId,this.purpose,n,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(n,r){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,n)}withLastLimboFreeSnapshotVersion(n){return new ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,n,this.resumeToken)}}class lm{constructor(n){this.Wt=n}}function Ef(i,n){if(n.document)return Dv(i.Wt,n.document,!!n.hasCommittedMutations);if(n.noDocument){const r=Be.fromSegments(n.noDocument.path),a=tl(n.noDocument.readTime),l=zt.newNoDocument(r,a);return n.hasCommittedMutations?l.setHasCommittedMutations():l}if(n.unknownDocument){const r=Be.fromSegments(n.unknownDocument.path),a=tl(n.unknownDocument.version);return zt.newUnknownDocument(r,a)}return Ge()}function Bv(i,n,r){const a=cm(r),l=n.key.path.popLast().toArray();if(n.isFoundDocument()){const h={name:Qu(C=i.Wt,(D=n).key),fields:D.data.value.mapValue.fields,updateTime:zc(C,D.version.toTimestamp())};return new pn(null,null,h,n.hasCommittedMutations,a,l)}var C,D;if(n.isNoDocument()){const h=n.key.path.toArray(),m=el(n.version),C=n.hasCommittedMutations;return new pn(null,new GC(h,m),null,C,a,l)}if(n.isUnknownDocument()){const h=n.key.path.toArray(),m=el(n.version);return new pn(new RT(h,m),null,null,!0,a,l)}return Ge()}function cm(i){const n=i.toTimestamp();return[n.seconds,n.nanoseconds]}function jv(i){const n=new Vn(i[0],i[1]);return ot.fromTimestamp(n)}function el(i){const n=i.toTimestamp();return new HC(n.seconds,n.nanoseconds)}function tl(i){const n=new Vn(i.seconds,i.nanoseconds);return ot.fromTimestamp(n)}function nl(i,n){const r=(n.baseMutations||[]).map(h=>Tv(i.Wt,h));for(let h=0;h<n.mutations.length-1;++h){const m=n.mutations[h];h+1<n.mutations.length&&void 0!==n.mutations[h+1].transform&&(m.updateTransforms=n.mutations[h+1].transform.fieldTransforms,n.mutations.splice(h+1,1),++h)}const a=n.mutations.map(h=>Tv(i.Wt,h)),l=Vn.fromMillis(n.localWriteTimeMs);return new Uv(n.batchId,l,r,a)}function Qc(i){const n=tl(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?tl(i.lastLimboFreeSnapshotVersion):ot.min();let a;var l;return void 0!==i.query.documents?(Ze(1===(l=i.query).documents.length),a=mi(rs(UC(l.documents[0])))):a=mi(Nv(i.query)),new ko(a,i.targetId,0,i.lastListenSequenceNumber,n,r,Jn.fromBase64String(i.resumeToken))}function $v(i,n){const r=el(n.snapshotVersion),a=el(n.lastLimboFreeSnapshotVersion);let l;l=Hg(n.target)?Sv(i.Wt,n.target):xv(i.Wt,n.target);const h=n.resumeToken.toBase64();return new Lr(n.targetId,pf(n.target),r,h,n.sequenceNumber,a,l)}function Hv(i){const n=Nv({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?dv(n,n.limit,"L"):n}class PT{getBundleMetadata(n,r){return WC(n).get(r).next(a=>{if(a)return{id:(l=a).bundleId,createTime:tl(l.createTime),version:l.version};var l})}saveBundleMetadata(n,r){return WC(n).put({bundleId:(a=r).id,createTime:el(Bn(a.createTime)),version:a.version});var a}getNamedQuery(n,r){return zC(n).get(r).next(a=>{if(a)return{name:(l=a).name,query:Hv(l.bundledQuery),readTime:tl(l.readTime)};var l})}saveNamedQuery(n,r){return zC(n).put({name:(a=r).name,readTime:el(Bn(a.readTime)),bundledQuery:a.bundledQuery});var a}}function WC(i){return lr(i,Vr.store)}function zC(i){return lr(i,Ir.store)}class kT{constructor(){this.Gt=new Gv}addToCollectionParentIndex(n,r){return this.Gt.add(r),_e.resolve()}getCollectionParents(n,r){return _e.resolve(this.Gt.getEntries(r))}}class Gv{constructor(){this.index={}}add(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r]||new vn(bt.comparator),h=!l.has(a);return this.index[r]=l.add(a),h}has(n){const r=n.lastSegment(),a=n.popLast(),l=this.index[r];return l&&l.has(a)}getEntries(n){return(this.index[n]||new vn(bt.comparator)).toArray()}}class FT{constructor(){this.zt=new Gv}addToCollectionParentIndex(n,r){if(!this.zt.has(r)){const a=r.lastSegment(),l=r.popLast();n.addOnCommittedListener(()=>{this.zt.add(r)});const h={collectionId:a,parent:is(l)};return ZC(n).put(h)}return _e.resolve()}getCollectionParents(n,r){const a=[],l=IDBKeyRange.bound([r,""],[rv(r),""],!1,!0);return ZC(n).Lt(l).next(h=>{for(const m of h){if(m.collectionId!==r)break;a.push(Mo(m.parent))}return a})}}function ZC(i){return lr(i,Ju.store)}const KC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jr{constructor(n,r,a){this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=a}static withCacheSize(n){return new Jr(n,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YC(i,n,r){const a=i.store(sn.store),l=i.store(Cr.store),h=[],m=IDBKeyRange.only(r.batchId);let C=0;const D=a.Kt({range:m},(R,O,$)=>(C++,$.delete()));h.push(D.next(()=>{Ze(1===C)}));const x=[];for(const R of r.mutations){const O=Cr.key(n,R.key.path,r.batchId);h.push(l.delete(O)),x.push(R.key)}return _e.waitFor(h).next(()=>x)}function dm(i){if(!i)return 0;let n;if(i.document)n=i.document;else if(i.unknownDocument)n=i.unknownDocument;else{if(!i.noDocument)throw Ge();n=i.noDocument}return JSON.stringify(n).length}Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(41943040,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);class qv{constructor(n,r,a,l){this.userId=n,this.N=r,this.Ht=a,this.referenceDelegate=l,this.Jt={}}static Yt(n,r,a,l){Ze(""!==n.uid);const h=n.isAuthenticated()?n.uid:"";return new qv(h,r,a,l)}checkEmpty(n){let r=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ta(n).Kt({index:sn.userMutationsIndex,range:a},(l,h,m)=>{r=!1,m.done()}).next(()=>r)}addMutationBatch(n,r,a,l){const h=Jc(n),m=Ta(n);return m.add({}).next(C=>{Ze("number"==typeof C);const D=new Uv(C,r,a,l),x=function($,q,he){const De=he.baseMutations.map(ct=>sm($.Wt,ct)),Le=he.mutations.map(ct=>sm($.Wt,ct));return new sn(q,he.batchId,he.localWriteTime.toMillis(),De,Le)}(this.N,this.userId,D),R=[];let O=new vn(($,q)=>_t($.canonicalString(),q.canonicalString()));for(const $ of l){const q=Cr.key(this.userId,$.key.path,C);O=O.add($.key.path.popLast()),R.push(m.put(x)),R.push(h.put(q,Cr.PLACEHOLDER))}return O.forEach($=>{R.push(this.Ht.addToCollectionParentIndex(n,$))}),n.addOnCommittedListener(()=>{this.Jt[C]=D.keys()}),_e.waitFor(R).next(()=>D)})}lookupMutationBatch(n,r){return Ta(n).get(r).next(a=>a?(Ze(a.userId===this.userId),nl(this.N,a)):null)}Xt(n,r){return this.Jt[r]?_e.resolve(this.Jt[r]):this.lookupMutationBatch(n,r).next(a=>{if(a){const l=a.keys();return this.Jt[r]=l,l}return null})}getNextMutationBatchAfterBatchId(n,r){const a=r+1,l=IDBKeyRange.lowerBound([this.userId,a]);let h=null;return Ta(n).Kt({index:sn.userMutationsIndex,range:l},(m,C,D)=>{C.userId===this.userId&&(Ze(C.batchId>=a),h=nl(this.N,C)),D.done()}).next(()=>h)}getHighestUnacknowledgedBatchId(n){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ta(n).Kt({index:sn.userMutationsIndex,range:r,reverse:!0},(l,h,m)=>{a=h.batchId,m.done()}).next(()=>a)}getAllMutationBatches(n){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ta(n).Lt(sn.userMutationsIndex,r).next(a=>a.map(l=>nl(this.N,l)))}getAllMutationBatchesAffectingDocumentKey(n,r){const a=Cr.prefixForPath(this.userId,r.path),l=IDBKeyRange.lowerBound(a),h=[];return Jc(n).Kt({range:l},(m,C,D)=>{const[x,R,O]=m,$=Mo(R);if(x===this.userId&&r.path.isEqual($))return Ta(n).get(O).next(q=>{if(!q)throw Ge();Ze(q.userId===this.userId),h.push(nl(this.N,q))});D.done()}).next(()=>h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new vn(_t);const l=[];return r.forEach(h=>{const m=Cr.prefixForPath(this.userId,h.path),C=IDBKeyRange.lowerBound(m),D=Jc(n).Kt({range:C},(x,R,O)=>{const[$,q,he]=x,De=Mo(q);$===this.userId&&h.path.isEqual(De)?a=a.add(he):O.done()});l.push(D)}),_e.waitFor(l).next(()=>this.Zt(n,a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1,h=Cr.prefixForPath(this.userId,a),m=IDBKeyRange.lowerBound(h);let C=new vn(_t);return Jc(n).Kt({range:m},(D,x,R)=>{const[O,$,q]=D,he=Mo($);O===this.userId&&a.isPrefixOf(he)?he.length===l&&(C=C.add(q)):R.done()}).next(()=>this.Zt(n,C))}Zt(n,r){const a=[],l=[];return r.forEach(h=>{l.push(Ta(n).get(h).next(m=>{if(null===m)throw Ge();Ze(m.userId===this.userId),a.push(nl(this.N,m))}))}),_e.waitFor(l).next(()=>a)}removeMutationBatch(n,r){return YC(n.Qt,this.userId,r).next(a=>(n.addOnCommittedListener(()=>{this.te(r.batchId)}),_e.forEach(a,l=>this.referenceDelegate.markPotentiallyOrphaned(n,l))))}te(n){delete this.Jt[n]}performConsistencyCheck(n){return this.checkEmpty(n).next(r=>{if(!r)return _e.resolve();const a=IDBKeyRange.lowerBound(Cr.prefixForUser(this.userId)),l=[];return Jc(n).Kt({range:a},(h,m,C)=>{if(h[0]===this.userId){const D=Mo(h[1]);l.push(D)}else C.done()}).next(()=>{Ze(0===l.length)})})}containsKey(n,r){return QC(n,this.userId,r)}ee(n){return JC(n).get(this.userId).next(r=>r||new yi(this.userId,-1,""))}}function QC(i,n,r){const a=Cr.prefixForPath(n,r.path),l=a[1],h=IDBKeyRange.lowerBound(a);let m=!1;return Jc(i).Kt({range:h,qt:!0},(C,D,x)=>{const[R,O,$]=C;R===n&&O===l&&(m=!0),x.done()}).next(()=>m)}function Ta(i){return lr(i,sn.store)}function Jc(i){return lr(i,Cr.store)}function JC(i){return lr(i,yi.store)}class rl{constructor(n){this.ne=n}next(){return this.ne+=2,this.ne}static se(){return new rl(0)}static ie(){return new rl(-1)}}class XC{constructor(n,r){this.referenceDelegate=n,this.N=r}allocateTargetId(n){return this.re(n).next(r=>{const a=new rl(r.highestTargetId);return r.highestTargetId=a.next(),this.oe(n,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(n){return this.re(n).next(r=>ot.fromTimestamp(new Vn(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(n){return this.re(n).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(n,r,a){return this.re(n).next(l=>(l.highestListenSequenceNumber=r,a&&(l.lastRemoteSnapshotVersion=a.toTimestamp()),r>l.highestListenSequenceNumber&&(l.highestListenSequenceNumber=r),this.oe(n,l)))}addTargetData(n,r){return this.ae(n,r).next(()=>this.re(n).next(a=>(a.targetCount+=1,this.ce(r,a),this.oe(n,a))))}updateTargetData(n,r){return this.ae(n,r)}removeTargetData(n,r){return this.removeMatchingKeysForTargetId(n,r.targetId).next(()=>il(n).delete(r.targetId)).next(()=>this.re(n)).next(a=>(Ze(a.targetCount>0),a.targetCount-=1,this.oe(n,a)))}removeTargets(n,r,a){let l=0;const h=[];return il(n).Kt((m,C)=>{const D=Qc(C);D.sequenceNumber<=r&&null===a.get(D.targetId)&&(l++,h.push(this.removeTargetData(n,D)))}).next(()=>_e.waitFor(h)).next(()=>l)}forEachTarget(n,r){return il(n).Kt((a,l)=>{const h=Qc(l);r(h)})}re(n){return Wv(n).get(En.key).next(r=>(Ze(null!==r),r))}oe(n,r){return Wv(n).put(En.key,r)}ae(n,r){return il(n).put($v(this.N,r))}ce(n,r){let a=!1;return n.targetId>r.highestTargetId&&(r.highestTargetId=n.targetId,a=!0),n.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n.sequenceNumber,a=!0),a}getTargetCount(n){return this.re(n).next(r=>r.targetCount)}getTargetData(n,r){const a=pf(r),l=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let h=null;return il(n).Kt({range:l,index:Lr.queryTargetsIndexName},(m,C,D)=>{const x=Qc(C);$g(r,x.target)&&(h=x,D.done())}).next(()=>h)}addMatchingKeys(n,r,a){const l=[],h=Fo(n);return r.forEach(m=>{const C=is(m.path);l.push(h.put(new $n(a,C))),l.push(this.referenceDelegate.addReference(n,a,m))}),_e.waitFor(l)}removeMatchingKeys(n,r,a){const l=Fo(n);return _e.forEach(r,h=>{const m=is(h.path);return _e.waitFor([l.delete([a,m]),this.referenceDelegate.removeReference(n,a,h)])})}removeMatchingKeysForTargetId(n,r){const a=Fo(n),l=IDBKeyRange.bound([r],[r+1],!1,!0);return a.delete(l)}getMatchingKeysForTargetId(n,r){const a=IDBKeyRange.bound([r],[r+1],!1,!0),l=Fo(n);let h=Nt();return l.Kt({range:a,qt:!0},(m,C,D)=>{const x=Mo(m[1]),R=new Be(x);h=h.add(R)}).next(()=>h)}containsKey(n,r){const a=is(r.path),l=IDBKeyRange.bound([a],[rv(a)],!1,!0);let h=0;return Fo(n).Kt({index:$n.documentTargetsIndex,qt:!0,range:l},([m,C],D,x)=>{0!==m&&(h++,x.done())}).next(()=>h>0)}Et(n,r){return il(n).get(r).next(a=>a?Qc(a):null)}}function il(i){return lr(i,Lr.store)}function Wv(i){return lr(i,En.store)}function Fo(i){return lr(i,$n.store)}function Aa(i){return hm.apply(this,arguments)}function hm(){return(hm=(0,le.Z)(function*(i){if(i.code!==se.FAILED_PRECONDITION||i.message!==Fv)throw i;be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function zv([i,n],[r,a]){const l=_t(i,r);return 0===l?_t(n,a):l}class eI{constructor(n){this.ue=n,this.buffer=new vn(zv),this.he=0}le(){return++this.he}fe(n){const r=[n,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(r);else{const a=this.buffer.last();zv(r,a)<0&&(this.buffer=this.buffer.delete(a).add(r))}}get maxValue(){return this.buffer.last()[0]}}class tI{constructor(n,r){this.garbageCollector=n,this.asyncQueue=r,this.de=!1,this.we=null}start(n){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(n)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(n){var r=this;const a=this.de?3e5:6e4;be("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,le.Z)(function*(){r.we=null,r.de=!0;try{yield n.collectGarbage(r.garbageCollector)}catch(l){as(l)?be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",l):yield Aa(l)}yield r._e(n)}))}}class Zv{constructor(n,r){this.me=n,this.params=r}calculateTargetCount(n,r){return this.me.ge(n).next(a=>Math.floor(r/100*a))}nthSequenceNumber(n,r){if(0===r)return _e.resolve(Fr.T);const a=new eI(r);return this.me.forEachTarget(n,l=>a.fe(l.sequenceNumber)).next(()=>this.me.ye(n,l=>a.fe(l))).next(()=>a.maxValue)}removeTargets(n,r,a){return this.me.removeTargets(n,r,a)}removeOrphanedDocuments(n,r){return this.me.removeOrphanedDocuments(n,r)}collect(n,r){return-1===this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector","Garbage collection skipped; disabled"),_e.resolve(KC)):this.getCacheSize(n).next(a=>a<this.params.cacheSizeCollectionThreshold?(be("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),KC):this.pe(n,r))}getCacheSize(n){return this.me.getCacheSize(n)}pe(n,r){let a,l,h,m,C,D,x;const R=Date.now();return this.calculateTargetCount(n,this.params.percentileToCollect).next(O=>(O>this.params.maximumSequenceNumbersToCollect?(be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${O}`),l=this.params.maximumSequenceNumbersToCollect):l=O,m=Date.now(),this.nthSequenceNumber(n,l))).next(O=>(a=O,C=Date.now(),this.removeTargets(n,a,r))).next(O=>(h=O,D=Date.now(),this.removeOrphanedDocuments(n,a))).next(O=>(x=Date.now(),X_()<=Ls.in.DEBUG&&be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${m-R}ms\n\tDetermined least recently used ${l} in `+(C-m)+`ms\n\tRemoved ${h} targets in `+(D-C)+`ms\n\tRemoved ${O} documents in `+(x-D)+`ms\nTotal Duration: ${x-R}ms`),_e.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:O})))}}class nI{constructor(n,r){this.db=n,this.garbageCollector=new Zv(this,r)}ge(n){const r=this.Ee(n);return this.db.getTargetCache().getTargetCount(n).next(a=>r.next(l=>a+l))}Ee(n){let r=0;return this.ye(n,a=>{r++}).next(()=>r)}forEachTarget(n,r){return this.db.getTargetCache().forEachTarget(n,r)}ye(n,r){return this.Te(n,(a,l)=>r(l))}addReference(n,r,a){return Hs(n,a)}removeReference(n,r,a){return Hs(n,a)}removeTargets(n,r,a){return this.db.getTargetCache().removeTargets(n,r,a)}markPotentiallyOrphaned(n,r){return Hs(n,r)}Ie(n,r){return function(a,l){let h=!1;return JC(a).jt(m=>QC(a,m,l).next(C=>(C&&(h=!0),_e.resolve(!C)))).next(()=>h)}(n,r)}removeOrphanedDocuments(n,r){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),l=[];let h=0;return this.Te(n,(m,C)=>{if(C<=r){const D=this.Ie(n,m).next(x=>{if(!x)return h++,a.getEntry(n,m).next(()=>(a.removeEntry(m),Fo(n).delete([0,is(m.path)])))});l.push(D)}}).next(()=>_e.waitFor(l)).next(()=>a.apply(n)).next(()=>h)}removeTarget(n,r){const a=r.withSequenceNumber(n.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(n,a)}updateLimboDocument(n,r){return Hs(n,r)}Te(n,r){const a=Fo(n);let l,h=Fr.T;return a.Kt({index:$n.documentTargetsIndex},([m,C],{path:D,sequenceNumber:x})=>{0===m?(h!==Fr.T&&r(new Be(Mo(l)),h),h=x,l=D):h=Fr.T}).next(()=>{h!==Fr.T&&r(new Be(Mo(l)),h)})}getCacheSize(n){return this.db.getRemoteDocumentCache().getSize(n)}}function Hs(i,n){return Fo(i).put((a=i.currentSequenceNumber,new $n(0,is(n.path),a)));var a}class Xc{constructor(n,r){this.mapKeyFn=n,this.equalsFn=r,this.inner={}}get(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0!==a)for(const[l,h]of a)if(this.equalsFn(l,n))return h}has(n){return void 0!==this.get(n)}set(n,r){const a=this.mapKeyFn(n),l=this.inner[a];if(void 0!==l){for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],n))return void(l[h]=[n,r]);l.push([n,r])}else this.inner[a]=[[n,r]]}delete(n){const r=this.mapKeyFn(n),a=this.inner[r];if(void 0===a)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],n))return 1===a.length?delete this.inner[r]:a.splice(l,1),!0;return!1}forEach(n){$u(this.inner,(r,a)=>{for(const[l,h]of a)n(l,h)})}isEmpty(){return pC(this.inner)}}class rI{constructor(){this.changes=new Xc(n=>n.toString(),(n,r)=>n.isEqual(r)),this.changesApplied=!1}getReadTime(n){const r=this.changes.get(n);return r?r.readTime:ot.min()}addEntry(n,r){this.assertNotApplied(),this.changes.set(n.key,{document:n,readTime:r})}removeEntry(n,r=null){this.assertNotApplied(),this.changes.set(n,{document:zt.newInvalidDocument(n),readTime:r})}getEntry(n,r){this.assertNotApplied();const a=this.changes.get(r);return void 0!==a?_e.resolve(a.document):this.getFromCache(n,r)}getEntries(n,r){return this.getAllFromCache(n,r)}apply(n){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(n)}assertNotApplied(){}}class ed{constructor(n,r){this.N=n,this.Ht=r}addEntry(n,r,a){return sl(n).put(wf(r),a)}removeEntry(n,r){const a=sl(n),l=wf(r);return a.delete(l)}updateMetadata(n,r){return this.getMetadata(n).next(a=>(a.byteSize+=r,this.Ae(n,a)))}getEntry(n,r){return sl(n).get(wf(r)).next(a=>this.Re(r,a))}be(n,r){return sl(n).get(wf(r)).next(a=>({document:this.Re(r,a),size:dm(a)}))}getEntries(n,r){let a=Ai();return this.Pe(n,r,(l,h)=>{const m=this.Re(l,h);a=a.insert(l,m)}).next(()=>a)}ve(n,r){let a=Ai(),l=new _n(Be.comparator);return this.Pe(n,r,(h,m)=>{const C=this.Re(h,m);a=a.insert(h,C),l=l.insert(h,dm(m))}).next(()=>({documents:a,Ve:l}))}Pe(n,r,a){if(r.isEmpty())return _e.resolve();const l=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),h=r.getIterator();let m=h.getNext();return sl(n).Kt({range:l},(C,D,x)=>{const R=Be.fromSegments(C);for(;m&&Be.comparator(m,R)<0;)a(m,null),m=h.getNext();m&&m.isEqual(R)&&(a(m,D),m=h.hasNext()?h.getNext():null),m?x.Mt(m.path.toArray()):x.done()}).next(()=>{for(;m;)a(m,null),m=h.hasNext()?h.getNext():null})}getDocumentsMatchingQuery(n,r,a){let l=Ai();const h=r.path.length+1,m={};if(a.isEqual(ot.min())){const C=r.path.toArray();m.range=IDBKeyRange.lowerBound(C)}else{const C=r.path.toArray(),D=cm(a);m.range=IDBKeyRange.lowerBound([C,D],!0),m.index=pn.collectionReadTimeIndex}return sl(n).Kt(m,(C,D,x)=>{if(C.length!==h)return;const R=Ef(this.N,D);r.path.isPrefixOf(R.key.path)?jc(r,R)&&(l=l.insert(R.key,R)):x.done()}).next(()=>l)}newChangeBuffer(n){return new Zx(this,!!n&&n.trackRemovals)}getSize(n){return this.getMetadata(n).next(r=>r.byteSize)}getMetadata(n){return fm(n).get(Oo.key).next(r=>(Ze(!!r),r))}Ae(n,r){return fm(n).put(Oo.key,r)}Re(n,r){if(r){const a=Ef(this.N,r);if(!a.isNoDocument()||!a.version.isEqual(ot.min()))return a}return zt.newInvalidDocument(n)}}class Zx extends rI{constructor(n,r){super(),this.Se=n,this.trackRemovals=r,this.De=new Xc(a=>a.toString(),(a,l)=>a.isEqual(l))}applyChanges(n){const r=[];let a=0,l=new vn((h,m)=>_t(h.canonicalString(),m.canonicalString()));return this.changes.forEach((h,m)=>{const C=this.De.get(h);if(m.document.isValidDocument()){const D=Bv(this.Se.N,m.document,this.getReadTime(h));l=l.add(h.path.popLast()),a+=dm(D)-C,r.push(this.Se.addEntry(n,h,D))}else if(a-=C,this.trackRemovals){const D=Bv(this.Se.N,zt.newNoDocument(h,ot.min()),this.getReadTime(h));r.push(this.Se.addEntry(n,h,D))}else r.push(this.Se.removeEntry(n,h))}),l.forEach(h=>{r.push(this.Se.Ht.addToCollectionParentIndex(n,h))}),r.push(this.Se.updateMetadata(n,a)),_e.waitFor(r)}getFromCache(n,r){return this.Se.be(n,r).next(a=>(this.De.set(r,a.size),a.document))}getAllFromCache(n,r){return this.Se.ve(n,r).next(({documents:a,Ve:l})=>(l.forEach((h,m)=>{this.De.set(h,m)}),a))}}function fm(i){return lr(i,Oo.store)}function sl(i){return lr(i,pn.store)}function wf(i){return i.path.toArray()}class iI{constructor(n){this.N=n}Ct(n,r,a,l){Ze(a<l&&a>=0&&l<=11);const h=new om("createOrUpgrade",r);var C;a<1&&l>=1&&(n.createObjectStore(Qr.store),(C=n).createObjectStore(yi.store,{keyPath:yi.keyPath}),C.createObjectStore(sn.store,{keyPath:sn.keyPath,autoIncrement:!0}).createIndex(sn.userMutationsIndex,sn.userMutationsKeyPath,{unique:!0}),C.createObjectStore(Cr.store),LT(n),function(C){C.createObjectStore(pn.store)}(n));let m=_e.resolve();return a<3&&l>=3&&(0!==a&&(function(C){C.deleteObjectStore($n.store),C.deleteObjectStore(Lr.store),C.deleteObjectStore(En.store)}(n),LT(n)),m=m.next(()=>function(C){const D=C.store(En.store),x=new En(0,0,ot.min().toTimestamp(),0);return D.put(En.key,x)}(h))),a<4&&l>=4&&(0!==a&&(m=m.next(()=>function(C,D){return D.store(sn.store).Lt().next(x=>{C.deleteObjectStore(sn.store),C.createObjectStore(sn.store,{keyPath:sn.keyPath,autoIncrement:!0}).createIndex(sn.userMutationsIndex,sn.userMutationsKeyPath,{unique:!0});const R=D.store(sn.store),O=x.map($=>R.put($));return _e.waitFor(O)})}(n,h))),m=m.next(()=>{!function(C){C.createObjectStore(Po.store,{keyPath:Po.keyPath})}(n)})),a<5&&l>=5&&(m=m.next(()=>this.Ce(h))),a<6&&l>=6&&(m=m.next(()=>(function(C){C.createObjectStore(Oo.store)}(n),this.Ne(h)))),a<7&&l>=7&&(m=m.next(()=>this.xe(h))),a<8&&l>=8&&(m=m.next(()=>this.ke(n,h))),a<9&&l>=9&&(m=m.next(()=>{(function(C){C.objectStoreNames.contains("remoteDocumentChanges")&&C.deleteObjectStore("remoteDocumentChanges")})(n),function(C){const D=C.objectStore(pn.store);D.createIndex(pn.readTimeIndex,pn.readTimeIndexPath,{unique:!1}),D.createIndex(pn.collectionReadTimeIndex,pn.collectionReadTimeIndexPath,{unique:!1})}(r)})),a<10&&l>=10&&(m=m.next(()=>this.$e(h))),a<11&&l>=11&&(m=m.next(()=>{(function(C){C.createObjectStore(Vr.store,{keyPath:Vr.keyPath})})(n),function(C){C.createObjectStore(Ir.store,{keyPath:Ir.keyPath})}(n)})),m}Ne(n){let r=0;return n.store(pn.store).Kt((a,l)=>{r+=dm(l)}).next(()=>{const a=new Oo(r);return n.store(Oo.store).put(Oo.key,a)})}Ce(n){const r=n.store(yi.store),a=n.store(sn.store);return r.Lt().next(l=>_e.forEach(l,h=>{const m=IDBKeyRange.bound([h.userId,-1],[h.userId,h.lastAcknowledgedBatchId]);return a.Lt(sn.userMutationsIndex,m).next(C=>_e.forEach(C,D=>{Ze(D.userId===h.userId);const x=nl(this.N,D);return YC(n,h.userId,x).next(()=>{})}))}))}xe(n){const r=n.store($n.store),a=n.store(pn.store);return n.store(En.store).get(En.key).next(l=>{const h=[];return a.Kt((m,C)=>{const D=new bt(m),x=[0,is(D)];h.push(r.get(x).next(R=>R?_e.resolve():r.put(new $n(0,is(D),l.highestListenSequenceNumber))))}).next(()=>_e.waitFor(h))})}ke(n,r){n.createObjectStore(Ju.store,{keyPath:Ju.keyPath});const a=r.store(Ju.store),l=new Gv,h=m=>{if(l.add(m)){const C=m.lastSegment(),D=m.popLast();return a.put({collectionId:C,parent:is(D)})}};return r.store(pn.store).Kt({qt:!0},(m,C)=>{const D=new bt(m);return h(D.popLast())}).next(()=>r.store(Cr.store).Kt({qt:!0},([m,C,D],x)=>{const R=Mo(C);return h(R.popLast())}))}$e(n){const r=n.store(Lr.store);return r.Kt((a,l)=>{const h=Qc(l),m=$v(this.N,h);return r.put(m)})}}function LT(i){i.createObjectStore($n.store,{keyPath:$n.keyPath}).createIndex($n.documentTargetsIndex,$n.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(Lr.store,{keyPath:Lr.keyPath}).createIndex(Lr.queryTargetsIndexName,Lr.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(En.store)}const qe="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kv{constructor(n,r,a,l,h,m,C,D,x,R){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=a,this.Oe=h,this.window=m,this.document=C,this.Fe=x,this.Me=R,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=O=>Promise.resolve(),!Kv.bt())throw new Ee(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nI(this,l),this.We=r+"main",this.N=new lm(D),this.Ge=new os(this.We,11,new iI(this.N)),this.ze=new XC(this.referenceDelegate,this.N),this.Ht=new FT,this.He=new ed(this.N,this.Ht),this.Je=new PT,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===R&&rn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,qe);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",n=>this.ze.getHighestSequenceNumber(n))}).then(n=>{this.Le=new Fr(n,this.Fe)}).then(()=>{this.Be=!0}).catch(n=>(this.Ge&&this.Ge.close(),Promise.reject(n)))}nn(n){var r=this;return this.Qe=function(){var a=(0,le.Z)(function*(l){if(r.started)return n(l)});return function(l){return a.apply(this,arguments)}}(),n(this.isPrimary)}setDatabaseDeletedListener(n){this.Ge.xt(function(){var r=(0,le.Z)(function*(a){null===a.newVersion&&(yield n())});return function(a){return r.apply(this,arguments)}}())}setNetworkEnabled(n){var r=this;this.networkEnabled!==n&&(this.networkEnabled=n,this.Oe.enqueueAndForget((0,le.Z)(function*(){r.started&&(yield r.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",n=>pm(n).put(new Po(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(n).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(n)).next(r=>this.isPrimary&&!r?this.on(n).next(()=>!1):!!r&&this.an(n).next(()=>!0))).catch(n=>{if(as(n))return be("IndexedDbPersistence","Failed to extend owner lease: ",n),this.isPrimary;if(!this.allowTabSynchronization)throw n;return be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(n=>{this.isPrimary!==n&&this.Oe.enqueueRetryable(()=>this.Qe(n)),this.isPrimary=n})}sn(n){return Cf(n).get(Qr.key).next(r=>_e.resolve(this.cn(r)))}un(n){return pm(n).delete(this.clientId)}hn(){var n=this;return(0,le.Z)(function*(){if(n.isPrimary&&!n.ln(n.je,18e5)){n.je=Date.now();const r=yield n.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const l=lr(a,Po.store);return l.Lt().next(h=>{const m=n.fn(h,18e5),C=h.filter(D=>-1===m.indexOf(D));return _e.forEach(C,D=>l.delete(D.clientId)).next(()=>C)})}).catch(()=>[]);if(n.Ye)for(const a of r)n.Ye.removeItem(n.dn(a.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}cn(n){return!!n&&n.ownerId===this.clientId}rn(n){return this.Me?_e.resolve(!0):Cf(n).get(Qr.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)){if(this.cn(r)&&this.networkEnabled)return!0;if(!this.cn(r)){if(!r.allowTabSynchronization)throw new Ee(se.FAILED_PRECONDITION,qe);return!1}}return!(!this.networkEnabled||!this.inForeground)||pm(n).Lt().next(a=>void 0===this.fn(a,5e3).find(l=>{if(this.clientId!==l.clientId){const m=!this.inForeground&&l.inForeground,C=this.networkEnabled===l.networkEnabled;if(!this.networkEnabled&&l.networkEnabled||m&&C)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&be("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var n=this;return(0,le.Z)(function*(){n.Be=!1,n._n(),n.Ke&&(n.Ke.cancel(),n.Ke=null),n.mn(),n.gn(),yield n.Ge.runTransaction("shutdown","readwrite",[Qr.store,Po.store],r=>{const a=new Vv(r,Fr.T);return n.on(a).next(()=>n.un(a))}),n.Ge.close(),n.yn()})()}fn(n,r){return n.filter(a=>this.ln(a.updateTimeMs,r)&&!this.wn(a.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",n=>pm(n).Lt().next(r=>this.fn(r,18e5).map(a=>a.clientId)))}get started(){return this.Be}getMutationQueue(n){return qv.Yt(n,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(n,r,a){let h;return be("IndexedDbPersistence","Starting transaction:",n),this.Ge.runTransaction(n,"readonly"===r?"readonly":"readwrite",ss,m=>(h=new Vv(m,this.Le?this.Le.next():Fr.T),"readwrite-primary"===r?this.sn(h).next(C=>!!C||this.rn(h)).next(C=>{if(!C)throw rn(`Failed to obtain primary lease for action '${n}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Ee(se.FAILED_PRECONDITION,Fv);return a(h)}).next(C=>this.an(h).next(()=>C)):this.En(h).next(()=>a(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}En(n){return Cf(n).get(Qr.key).next(r=>{if(null!==r&&this.ln(r.leaseTimestampMs,5e3)&&!this.wn(r.ownerId)&&!this.cn(r)&&!(this.Me||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Ee(se.FAILED_PRECONDITION,qe)})}an(n){const r=new Qr(this.clientId,this.allowTabSynchronization,Date.now());return Cf(n).put(Qr.key,r)}static bt(){return os.bt()}on(n){const r=Cf(n);return r.get(Qr.key).next(a=>this.cn(a)?(be("IndexedDbPersistence","Releasing primary lease."),r.delete(Qr.key)):_e.resolve())}ln(n,r){const a=Date.now();return!(n<a-r||n>a&&(rn(`Detected an update time that is in the future: ${n} > ${a}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var n;"function"==typeof(null===(n=this.window)||void 0===n?void 0:n.addEventListener)&&(this.Ue=()=>{this._n(),(0,yt.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(n){var r;try{const a=null!==(null===(r=this.Ye)||void 0===r?void 0:r.getItem(this.dn(n)));return be("IndexedDbPersistence",`Client '${n}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return rn("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(n){rn("Failed to set zombie client id.",n)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(n){}}dn(n){return`firestore_zombie_${this.persistenceKey}_${n}`}}function Cf(i){return lr(i,Qr.store)}function pm(i){return lr(i,Po.store)}function td(i,n){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+n+"/"+r+"/"}class VT{constructor(n,r){this.progress=n,this.Tn=r}}class If{constructor(n,r,a){this.He=n,this.In=r,this.Ht=a}An(n,r){return this.In.getAllMutationBatchesAffectingDocumentKey(n,r).next(a=>this.Rn(n,r,a))}Rn(n,r,a){return this.He.getEntry(n,r).next(l=>{for(const h of a)h.applyToLocalView(l);return l})}bn(n,r){n.forEach((a,l)=>{for(const h of r)h.applyToLocalView(l)})}Pn(n,r){return this.He.getEntries(n,r).next(a=>this.vn(n,a).next(()=>a))}vn(n,r){return this.In.getAllMutationBatchesAffectingDocumentKeys(n,r).next(a=>this.bn(r,a))}getDocumentsMatchingQuery(n,r,a){return Be.isDocumentKey((l=r).path)&&null===l.collectionGroup&&0===l.filters.length?this.Vn(n,r.path):wa(r)?this.Sn(n,r,a):this.Dn(n,r,a);var l}Vn(n,r){return this.An(n,new Be(r)).next(a=>{let l=Qg();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l})}Sn(n,r,a){const l=r.collectionGroup;let h=Qg();return this.Ht.getCollectionParents(n,l).next(m=>_e.forEach(m,C=>{const D=(x=r,R=C.child(l),new Yr(R,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt));var x,R;return this.Dn(n,D,a).next(x=>{x.forEach((R,O)=>{h=h.insert(R,O)})})}).next(()=>h))}Dn(n,r,a){let l,h;return this.He.getDocumentsMatchingQuery(n,r,a).next(m=>(l=m,this.In.getAllMutationBatchesAffectingQuery(n,r))).next(m=>(h=m,this.Cn(n,h,l).next(C=>{l=C;for(const D of h)for(const x of D.mutations){const R=x.key;let O=l.get(R);null==O&&(O=zt.newInvalidDocument(R),l=l.insert(R,O)),mv(x,O,D.localWriteTime),O.isFoundDocument()||(l=l.remove(R))}}))).next(()=>(l.forEach((m,C)=>{jc(r,C)||(l=l.remove(m))}),l))}Cn(n,r,a){let l=Nt();for(const m of r)for(const C of m.mutations)C instanceof Yu&&null===a.get(C.key)&&(l=l.add(C.key));let h=a;return this.He.getEntries(n,l).next(m=>(m.forEach((C,D)=>{D.isFoundDocument()&&(h=h.insert(C,D))}),h))}}class nd{constructor(n,r,a,l){this.targetId=n,this.fromCache=r,this.Nn=a,this.xn=l}static kn(n,r){let a=Nt(),l=Nt();for(const h of r.docChanges)switch(h.type){case 0:a=a.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new nd(n,r.fromCache,a,l)}}class gn{$n(n){this.On=n}getDocumentsMatchingQuery(n,r,a,l){return 0===(h=r).filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())||a.isEqual(ot.min())?this.Fn(n,r):this.On.Pn(n,l).next(h=>{const m=this.Mn(r,h);return(No(r)||Ro(r))&&this.Ln(r.limitType,m,l,a)?this.Fn(n,r):(X_()<=Ls.in.DEBUG&&be("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),qg(r)),this.On.getDocumentsMatchingQuery(n,r,a).next(C=>(m.forEach(D=>{C=C.insert(D.key,D)}),C)))});var h}Mn(n,r){let a=new vn(fv(n));return r.forEach((l,h)=>{jc(n,h)&&(a=a.add(h))}),a}Ln(n,r,a,l){if(a.size!==r.size)return!0;const h="F"===n?r.last():r.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Fn(n,r){return X_()<=Ls.in.DEBUG&&be("QueryEngine","Using full collection scan to execute query:",qg(r)),this.On.getDocumentsMatchingQuery(n,r,ot.min())}}class Kx{constructor(n,r,a,l){this.persistence=n,this.Bn=r,this.N=l,this.Un=new _n(_t),this.qn=new Xc(h=>pf(h),$g),this.Kn=ot.min(),this.In=n.getMutationQueue(a),this.jn=n.getRemoteDocumentCache(),this.ze=n.getTargetCache(),this.Qn=new If(this.jn,this.In,this.persistence.getIndexManager()),this.Je=n.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(n){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>n.collect(r,this.Un))}}function Yv(i,n,r,a){return new Kx(i,n,r,a)}function gm(i,n){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,le.Z)(function*(i,n){const r=Ne(i);let a=r.In,l=r.Qn;const h=yield r.persistence.runTransaction("Handle user change","readonly",m=>{let C;return r.In.getAllMutationBatches(m).next(D=>(C=D,a=r.persistence.getMutationQueue(n),l=new If(r.jn,a,r.persistence.getIndexManager()),a.getAllMutationBatches(m))).next(D=>{const x=[],R=[];let O=Nt();for(const $ of C){x.push($.batchId);for(const q of $.mutations)O=O.add(q.key)}for(const $ of D){R.push($.batchId);for(const q of $.mutations)O=O.add(q.key)}return l.Pn(m,O).next($=>({Wn:$,removedBatchIds:x,addedBatchIds:R}))})});return r.In=a,r.Qn=l,r.Bn.$n(r.Qn),h})).apply(this,arguments)}function sI(i,n){const r=Ne(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const l=n.batch.keys(),h=r.jn.newChangeBuffer({trackRemovals:!0});return function(m,C,D,x){const R=D.batch,O=R.keys();let $=_e.resolve();return O.forEach(q=>{$=$.next(()=>x.getEntry(C,q)).next(he=>{const De=D.docVersions.get(q);Ze(null!==De),he.version.compareTo(De)<0&&(R.applyToRemoteDocument(he,D),he.isValidDocument()&&x.addEntry(he,D.commitVersion))})}),$.next(()=>m.In.removeMutationBatch(C,R))}(r,a,n,h).next(()=>h.apply(a)).next(()=>r.In.performConsistencyCheck(a)).next(()=>r.Qn.Pn(a,l))})}function Jv(i){const n=Ne(i);return n.persistence.runTransaction("Get last remote snapshot version","readonly",r=>n.ze.getLastRemoteSnapshotVersion(r))}function oI(i,n){const r=Ne(i),a=n.snapshotVersion;let l=r.Un;return r.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const m=r.jn.newChangeBuffer({trackRemovals:!0});l=r.Un;const C=[];n.targetChanges.forEach((x,R)=>{const O=l.get(R);if(!O)return;C.push(r.ze.removeMatchingKeys(h,x.removedDocuments,R).next(()=>r.ze.addMatchingKeys(h,x.addedDocuments,R)));const $=x.resumeToken;if($.approximateByteSize()>0){const q=O.withResumeToken($,a).withSequenceNumber(h.currentSequenceNumber);l=l.insert(R,q),he=O,Le=x,Ze((De=q).resumeToken.approximateByteSize()>0),(0===he.resumeToken.approximateByteSize()||De.snapshotVersion.toMicroseconds()-he.snapshotVersion.toMicroseconds()>=3e8||Le.addedDocuments.size+Le.modifiedDocuments.size+Le.removedDocuments.size>0)&&C.push(r.ze.updateTargetData(h,q))}var he,De,Le});let D=Ai();if(n.documentUpdates.forEach((x,R)=>{n.resolvedLimboDocuments.has(x)&&C.push(r.persistence.referenceDelegate.updateLimboDocument(h,x))}),C.push(Xv(h,m,n.documentUpdates,a,void 0).next(x=>{D=x})),!a.isEqual(ot.min())){const x=r.ze.getLastRemoteSnapshotVersion(h).next(R=>r.ze.setTargetsMetadata(h,h.currentSequenceNumber,a));C.push(x)}return _e.waitFor(C).next(()=>m.apply(h)).next(()=>r.Qn.vn(h,D)).next(()=>D)}).then(h=>(r.Un=l,h))}function Xv(i,n,r,a,l){let h=Nt();return r.forEach(m=>h=h.add(m)),n.getEntries(i,h).next(m=>{let C=Ai();return r.forEach((D,x)=>{const R=m.get(D),O=(null==l?void 0:l.get(D))||a;x.isNoDocument()&&x.version.isEqual(ot.min())?(n.removeEntry(D,O),C=C.insert(D,x)):!R.isValidDocument()||x.version.compareTo(R.version)>0||0===x.version.compareTo(R.version)&&R.hasPendingWrites?(n.addEntry(x,O),C=C.insert(D,x)):be("LocalStore","Ignoring outdated watch update for ",D,". Current version:",R.version," Watch version:",x.version)}),C})}function UT(i,n){const r=Ne(i);return r.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===n&&(n=-1),r.In.getNextMutationBatchAfterBatchId(a,n)))}function rd(i,n){const r=Ne(i);return r.persistence.runTransaction("Allocate target","readwrite",a=>{let l;return r.ze.getTargetData(a,n).next(h=>h?(l=h,_e.resolve(l)):r.ze.allocateTargetId(a).next(m=>(l=new ko(n,m,0,a.currentSequenceNumber),r.ze.addTargetData(a,l).next(()=>l))))}).then(a=>{const l=r.Un.get(a.targetId);return(null===l||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(r.Un=r.Un.insert(a.targetId,a),r.qn.set(n,a.targetId)),a})}function id(i,n,r){return ol.apply(this,arguments)}function ol(){return(ol=(0,le.Z)(function*(i,n,r){const a=Ne(i),l=a.Un.get(n),h=r?"readwrite":"readwrite-primary";try{r||(yield a.persistence.runTransaction("Release target",h,m=>a.persistence.referenceDelegate.removeTarget(m,l)))}catch(m){if(!as(m))throw m;be("LocalStore",`Failed to update sequence numbers for target ${n}: ${m}`)}a.Un=a.Un.remove(n),a.qn.delete(l.target)})).apply(this,arguments)}function mm(i,n,r){const a=Ne(i);let l=ot.min(),h=Nt();return a.persistence.runTransaction("Execute query","readonly",m=>function(C,D,x){const R=Ne(C),O=R.qn.get(x);return void 0!==O?_e.resolve(R.Un.get(O)):R.ze.getTargetData(D,x)}(a,m,mi(n)).next(C=>{if(C)return l=C.lastLimboFreeSnapshotVersion,a.ze.getMatchingKeysForTargetId(m,C.targetId).next(D=>{h=D})}).next(()=>a.Bn.getDocumentsMatchingQuery(m,n,r?l:ot.min(),r?h:Nt())).next(C=>({documents:C,Gn:h})))}function aI(i,n){const r=Ne(i),a=Ne(r.ze),l=r.Un.get(n);return l?Promise.resolve(l.target):r.persistence.runTransaction("Get target data","readonly",h=>a.Et(h,n).next(m=>m?m.target:null))}function uI(i){const n=Ne(i);return n.persistence.runTransaction("Get new document changes","readonly",r=>function(a,l,h){const m=Ne(a);let C=Ai(),D=cm(h);const x=sl(l),R=IDBKeyRange.lowerBound(D,!0);return x.Kt({index:pn.readTimeIndex,range:R},(O,$)=>{const q=Ef(m.N,$);C=C.insert(q.key,q),D=$.readTime}).next(()=>({Tn:C,readTime:jv(D)}))}(n.jn,r,n.Kn)).then(({Tn:r,readTime:a})=>(n.Kn=a,r))}function _m(){return(_m=(0,le.Z)(function*(i){const n=Ne(i);return n.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(a){const l=sl(a);let h=ot.min();return l.Kt({index:pn.readTimeIndex,reverse:!0},(m,C,D)=>{C.readTime&&(h=jv(C.readTime)),D.done()}).next(()=>h)}(r)).then(r=>{n.Kn=r})})).apply(this,arguments)}function vm(){return(vm=(0,le.Z)(function*(i,n,r,a){const l=Ne(i);let h=Nt(),m=Ai(),C=wv();for(const R of r){const O=n.zn(R.metadata.name);R.document&&(h=h.add(O)),m=m.insert(O,n.Hn(R)),C=C.insert(O,n.Jn(R.metadata.readTime))}const D=l.jn.newChangeBuffer({trackRemovals:!0}),x=yield rd(l,(R=a,mi(rs(bt.fromString(`__bundle__/docs/${R}`)))));var R;return l.persistence.runTransaction("Apply bundle documents","readwrite",R=>Xv(R,D,m,ot.min(),C).next(O=>(D.apply(R),O)).next(O=>l.ze.removeMatchingKeysForTargetId(R,x.targetId).next(()=>l.ze.addMatchingKeys(R,h,x.targetId)).next(()=>l.Qn.vn(R,O)).next(()=>O)))})).apply(this,arguments)}function BT(i,n){return al.apply(this,arguments)}function al(){return(al=(0,le.Z)(function*(i,n,r=Nt()){const a=yield rd(i,mi(Hv(n.bundledQuery))),l=Ne(i);return l.persistence.runTransaction("Save named query","readwrite",h=>{const m=Bn(n.readTime);if(a.snapshotVersion.compareTo(m)>=0)return l.Je.saveNamedQuery(h,n);const C=a.withResumeToken(Jn.EMPTY_BYTE_STRING,m);return l.Un=l.Un.insert(C.targetId,C),l.ze.updateTargetData(h,C).next(()=>l.ze.removeMatchingKeysForTargetId(h,a.targetId)).next(()=>l.ze.addMatchingKeys(h,r,a.targetId)).next(()=>l.Je.saveNamedQuery(h,n))})})).apply(this,arguments)}class bf{constructor(n){this.N=n,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(n,r){return _e.resolve(this.Yn.get(r))}saveBundleMetadata(n,r){var a;return this.Yn.set(r.id,{id:(a=r).id,version:a.version,createTime:Bn(a.createTime)}),_e.resolve()}getNamedQuery(n,r){return _e.resolve(this.Xn.get(r))}saveNamedQuery(n,r){return this.Xn.set(r.name,{name:(a=r).name,query:Hv(a.bundledQuery),readTime:Bn(a.readTime)}),_e.resolve();var a}}class eE{constructor(){this.Zn=new vn(nr.ts),this.es=new vn(nr.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(n,r){const a=new nr(n,r);this.Zn=this.Zn.add(a),this.es=this.es.add(a)}ss(n,r){n.forEach(a=>this.addReference(a,r))}removeReference(n,r){this.rs(new nr(n,r))}os(n,r){n.forEach(a=>this.removeReference(a,r))}cs(n){const r=new Be(new bt([])),a=new nr(r,n),l=new nr(r,n+1),h=[];return this.es.forEachInRange([a,l],m=>{this.rs(m),h.push(m.key)}),h}us(){this.Zn.forEach(n=>this.rs(n))}rs(n){this.Zn=this.Zn.delete(n),this.es=this.es.delete(n)}hs(n){const r=new Be(new bt([])),a=new nr(r,n),l=new nr(r,n+1);let h=Nt();return this.es.forEachInRange([a,l],m=>{h=h.add(m.key)}),h}containsKey(n){const r=new nr(n,0),a=this.Zn.firstAfterOrEqual(r);return null!==a&&n.isEqual(a.key)}}class nr{constructor(n,r){this.key=n,this.ls=r}static ts(n,r){return Be.comparator(n.key,r.key)||_t(n.ls,r.ls)}static ns(n,r){return _t(n.ls,r.ls)||Be.comparator(n.key,r.key)}}class jT{constructor(n,r){this.Ht=n,this.referenceDelegate=r,this.In=[],this.fs=1,this.ds=new vn(nr.ts)}checkEmpty(n){return _e.resolve(0===this.In.length)}addMutationBatch(n,r,a,l){const h=this.fs;this.fs++;const m=new Uv(h,r,a,l);this.In.push(m);for(const C of l)this.ds=this.ds.add(new nr(C.key,h)),this.Ht.addToCollectionParentIndex(n,C.key.path.popLast());return _e.resolve(m)}lookupMutationBatch(n,r){return _e.resolve(this.ws(r))}getNextMutationBatchAfterBatchId(n,r){const l=this._s(r+1),h=l<0?0:l;return _e.resolve(this.In.length>h?this.In[h]:null)}getHighestUnacknowledgedBatchId(){return _e.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(n){return _e.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(n,r){const a=new nr(r,0),l=new nr(r,Number.POSITIVE_INFINITY),h=[];return this.ds.forEachInRange([a,l],m=>{const C=this.ws(m.ls);h.push(C)}),_e.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(n,r){let a=new vn(_t);return r.forEach(l=>{const h=new nr(l,0),m=new nr(l,Number.POSITIVE_INFINITY);this.ds.forEachInRange([h,m],C=>{a=a.add(C.ls)})}),_e.resolve(this.gs(a))}getAllMutationBatchesAffectingQuery(n,r){const a=r.path,l=a.length+1;let h=a;Be.isDocumentKey(h)||(h=h.child(""));const m=new nr(new Be(h),0);let C=new vn(_t);return this.ds.forEachWhile(D=>{const x=D.key.path;return!!a.isPrefixOf(x)&&(x.length===l&&(C=C.add(D.ls)),!0)},m),_e.resolve(this.gs(C))}gs(n){const r=[];return n.forEach(a=>{const l=this.ws(a);null!==l&&r.push(l)}),r}removeMutationBatch(n,r){Ze(0===this.ys(r.batchId,"removed")),this.In.shift();let a=this.ds;return _e.forEach(r.mutations,l=>{const h=new nr(l.key,r.batchId);return a=a.delete(h),this.referenceDelegate.markPotentiallyOrphaned(n,l.key)}).next(()=>{this.ds=a})}te(n){}containsKey(n,r){const a=new nr(r,0),l=this.ds.firstAfterOrEqual(a);return _e.resolve(r.isEqual(l&&l.key))}performConsistencyCheck(n){return _e.resolve()}ys(n,r){return this._s(n)}_s(n){return 0===this.In.length?0:n-this.In[0].batchId}ws(n){const r=this._s(n);return r<0||r>=this.In.length?null:this.In[r]}}class cI{constructor(n,r){this.Ht=n,this.ps=r,this.docs=new _n(Be.comparator),this.size=0}addEntry(n,r,a){const l=r.key,h=this.docs.get(l),m=h?h.size:0,C=this.ps(r);return this.docs=this.docs.insert(l,{document:r.clone(),size:C,readTime:a}),this.size+=C-m,this.Ht.addToCollectionParentIndex(n,l.path.popLast())}removeEntry(n){const r=this.docs.get(n);r&&(this.docs=this.docs.remove(n),this.size-=r.size)}getEntry(n,r){const a=this.docs.get(r);return _e.resolve(a?a.document.clone():zt.newInvalidDocument(r))}getEntries(n,r){let a=Ai();return r.forEach(l=>{const h=this.docs.get(l);a=a.insert(l,h?h.document.clone():zt.newInvalidDocument(l))}),_e.resolve(a)}getDocumentsMatchingQuery(n,r,a){let l=Ai();const h=new Be(r.path.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:C,value:{document:D,readTime:x}}=m.getNext();if(!r.path.isPrefixOf(C.path))break;x.compareTo(a)<=0||jc(r,D)&&(l=l.insert(D.key,D.clone()))}return _e.resolve(l)}Es(n,r){return _e.forEach(this.docs,a=>r(a))}newChangeBuffer(n){return new dI(this)}getSize(n){return _e.resolve(this.size)}}class dI extends rI{constructor(n){super(),this.Se=n}applyChanges(n){const r=[];return this.changes.forEach((a,l)=>{l.document.isValidDocument()?r.push(this.Se.addEntry(n,l.document,this.getReadTime(a))):this.Se.removeEntry(a)}),_e.waitFor(r)}getFromCache(n,r){return this.Se.getEntry(n,r)}getAllFromCache(n,r){return this.Se.getEntries(n,r)}}class hI{constructor(n){this.persistence=n,this.Ts=new Xc(r=>pf(r),$g),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Is=0,this.As=new eE,this.targetCount=0,this.Rs=rl.se()}forEachTarget(n,r){return this.Ts.forEach((a,l)=>r(l)),_e.resolve()}getLastRemoteSnapshotVersion(n){return _e.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(n){return _e.resolve(this.Is)}allocateTargetId(n){return this.highestTargetId=this.Rs.next(),_e.resolve(this.highestTargetId)}setTargetsMetadata(n,r,a){return a&&(this.lastRemoteSnapshotVersion=a),r>this.Is&&(this.Is=r),_e.resolve()}ae(n){this.Ts.set(n.target,n);const r=n.targetId;r>this.highestTargetId&&(this.Rs=new rl(r),this.highestTargetId=r),n.sequenceNumber>this.Is&&(this.Is=n.sequenceNumber)}addTargetData(n,r){return this.ae(r),this.targetCount+=1,_e.resolve()}updateTargetData(n,r){return this.ae(r),_e.resolve()}removeTargetData(n,r){return this.Ts.delete(r.target),this.As.cs(r.targetId),this.targetCount-=1,_e.resolve()}removeTargets(n,r,a){let l=0;const h=[];return this.Ts.forEach((m,C)=>{C.sequenceNumber<=r&&null===a.get(C.targetId)&&(this.Ts.delete(m),h.push(this.removeMatchingKeysForTargetId(n,C.targetId)),l++)}),_e.waitFor(h).next(()=>l)}getTargetCount(n){return _e.resolve(this.targetCount)}getTargetData(n,r){const a=this.Ts.get(r)||null;return _e.resolve(a)}addMatchingKeys(n,r,a){return this.As.ss(r,a),_e.resolve()}removeMatchingKeys(n,r,a){this.As.os(r,a);const l=this.persistence.referenceDelegate,h=[];return l&&r.forEach(m=>{h.push(l.markPotentiallyOrphaned(n,m))}),_e.waitFor(h)}removeMatchingKeysForTargetId(n,r){return this.As.cs(r),_e.resolve()}getMatchingKeysForTargetId(n,r){const a=this.As.hs(r);return _e.resolve(a)}containsKey(n,r){return _e.resolve(this.As.containsKey(r))}}class $T{constructor(n,r){this.bs={},this.Le=new Fr(0),this.Be=!1,this.Be=!0,this.referenceDelegate=n(this),this.ze=new hI(this),this.Ht=new kT,this.He=new cI(this.Ht,a=>this.referenceDelegate.Ps(a)),this.N=new lm(r),this.Je=new bf(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(n){let r=this.bs[n.toKey()];return r||(r=new jT(this.Ht,this.referenceDelegate),this.bs[n.toKey()]=r),r}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(n,r,a){be("MemoryPersistence","Starting transaction:",n);const l=new fI(this.Le.next());return this.referenceDelegate.vs(),a(l).next(h=>this.referenceDelegate.Vs(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ss(n,r){return _e.or(Object.values(this.bs).map(a=>()=>a.containsKey(n,r)))}}class fI extends Lv{constructor(n){super(),this.currentSequenceNumber=n}}class tE{constructor(n){this.persistence=n,this.Ds=new eE,this.Cs=null}static Ns(n){return new tE(n)}get xs(){if(this.Cs)return this.Cs;throw Ge()}addReference(n,r,a){return this.Ds.addReference(a,r),this.xs.delete(a.toString()),_e.resolve()}removeReference(n,r,a){return this.Ds.removeReference(a,r),this.xs.add(a.toString()),_e.resolve()}markPotentiallyOrphaned(n,r){return this.xs.add(r.toString()),_e.resolve()}removeTarget(n,r){this.Ds.cs(r.targetId).forEach(l=>this.xs.add(l.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(n,r.targetId).next(l=>{l.forEach(h=>this.xs.add(h.toString()))}).next(()=>a.removeTargetData(n,r))}vs(){this.Cs=new Set}Vs(n){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return _e.forEach(this.xs,a=>{const l=Be.fromPath(a);return this.ks(n,l).next(h=>{h||r.removeEntry(l)})}).next(()=>(this.Cs=null,r.apply(n)))}updateLimboDocument(n,r){return this.ks(n,r).next(a=>{a?this.xs.delete(r.toString()):this.xs.add(r.toString())})}Ps(n){return 0}ks(n,r){return _e.or([()=>_e.resolve(this.Ds.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(n,r),()=>this.persistence.Ss(n,r)])}}function pI(i,n){return`firestore_clients_${i}_${n}`}function HT(i,n,r){let a=`firestore_mutations_${i}_${r}`;return n.isAuthenticated()&&(a+=`_${n.uid}`),a}function gI(i,n){return`firestore_targets_${i}_${n}`}class nE{constructor(n,r,a,l){this.user=n,this.batchId=r,this.state=a,this.error=l}static $s(n,r,a){const l=JSON.parse(a);let h,m="object"==typeof l&&-1!==["pending","acknowledged","rejected"].indexOf(l.state)&&(void 0===l.error||"object"==typeof l.error);return m&&l.error&&(m="string"==typeof l.error.message&&"string"==typeof l.error.code,m&&(h=new Ee(l.error.code,l.error.message))),m?new nE(n,r,l.state,h):(rn("SharedClientState",`Failed to parse mutation state for ID '${r}': ${a}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Em{constructor(n,r,a){this.targetId=n,this.state=r,this.error=a}static $s(n,r){const a=JSON.parse(r);let l,h="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return h&&a.error&&(h="string"==typeof a.error.message&&"string"==typeof a.error.code,h&&(l=new Ee(a.error.code,a.error.message))),h?new Em(n,a.state,l):(rn("SharedClientState",`Failed to parse target state for ID '${n}': ${r}`),null)}Os(){const n={state:this.state,updateTimeMs:Date.now()};return this.error&&(n.error={code:this.error.code,message:this.error.message}),JSON.stringify(n)}}class Df{constructor(n,r){this.clientId=n,this.activeTargetIds=r}static $s(n,r){const a=JSON.parse(r);let l="object"==typeof a&&a.activeTargetIds instanceof Array,h=Wc();for(let m=0;l&&m<a.activeTargetIds.length;++m)l=hT(a.activeTargetIds[m]),h=h.add(a.activeTargetIds[m]);return l?new Df(n,h):(rn("SharedClientState",`Failed to parse client data for instance '${n}': ${r}`),null)}}class sd{constructor(n,r){this.clientId=n,this.onlineState=r}static $s(n){const r=JSON.parse(n);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new sd(r.clientId,r.onlineState):(rn("SharedClientState",`Failed to parse online state: ${n}`),null)}}class rE{constructor(){this.activeTargetIds=Wc()}Fs(n){this.activeTargetIds=this.activeTargetIds.add(n)}Ms(n){this.activeTargetIds=this.activeTargetIds.delete(n)}Os(){const n={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(n)}}class iE{constructor(n,r,a,l,h){this.window=n,this.Oe=r,this.persistenceKey=a,this.Ls=l,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new _n(_t),this.started=!1,this.Ks=[];const m=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=h,this.js=pI(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new rE),this.Ws=new RegExp(`^firestore_clients_${m}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${m}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${m}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(C){return`firestore_bundle_loaded_${C}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(n){return!(!n||!n.localStorage)}start(){var n=this;return(0,le.Z)(function*(){const r=yield n.syncEngine.pn();for(const l of r){if(l===n.Ls)continue;const h=n.getItem(pI(n.persistenceKey,l));if(h){const m=Df.$s(l,h);m&&(n.qs=n.qs.insert(m.clientId,m))}}n.Ys();const a=n.storage.getItem(n.Hs);if(a){const l=n.Xs(a);l&&n.Zs(l)}for(const l of n.Ks)n.Us(l);n.Ks=[],n.window.addEventListener("pagehide",()=>n.shutdown()),n.started=!0})()}writeSequenceNumber(n){this.setItem(this.Qs,JSON.stringify(n))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(n){let r=!1;return this.qs.forEach((a,l)=>{l.activeTargetIds.has(n)&&(r=!0)}),r}addPendingMutation(n){this.ei(n,"pending")}updateMutationState(n,r,a){this.ei(n,r,a),this.ni(n)}addLocalQueryTarget(n){let r="not-current";if(this.isActiveQueryTarget(n)){const a=this.storage.getItem(gI(this.persistenceKey,n));if(a){const l=Em.$s(n,a);l&&(r=l.state)}}return this.si.Fs(n),this.Ys(),r}removeLocalQueryTarget(n){this.si.Ms(n),this.Ys()}isLocalQueryTarget(n){return this.si.activeTargetIds.has(n)}clearQueryState(n){this.removeItem(gI(this.persistenceKey,n))}updateQueryState(n,r,a){this.ii(n,r,a)}handleUserChange(n,r,a){r.forEach(l=>{this.ni(l)}),this.currentUser=n,a.forEach(l=>{this.addPendingMutation(l)})}setOnlineState(n){this.ri(n)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(n){const r=this.storage.getItem(n);return be("SharedClientState","READ",n,r),r}setItem(n,r){be("SharedClientState","SET",n,r),this.storage.setItem(n,r)}removeItem(n){be("SharedClientState","REMOVE",n),this.storage.removeItem(n)}Us(n){var r=this;const a=n;if(a.storageArea===this.storage){if(be("SharedClientState","EVENT",a.key,a.newValue),a.key===this.js)return void rn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,le.Z)(function*(){if(r.started){if(null!==a.key)if(r.Ws.test(a.key)){if(null==a.newValue){const l=r.ai(a.key);return r.ci(l,null)}{const l=r.ui(a.key,a.newValue);if(l)return r.ci(l.clientId,l)}}else if(r.Gs.test(a.key)){if(null!==a.newValue){const l=r.hi(a.key,a.newValue);if(l)return r.li(l)}}else if(r.zs.test(a.key)){if(null!==a.newValue){const l=r.fi(a.key,a.newValue);if(l)return r.di(l)}}else if(a.key===r.Hs){if(null!==a.newValue){const l=r.Xs(a.newValue);if(l)return r.Zs(l)}}else if(a.key===r.Qs){const l=function(h){let m=Fr.T;if(null!=h)try{const C=JSON.parse(h);Ze("number"==typeof C),m=C}catch(C){rn("SharedClientState","Failed to read sequence number from WebStorage",C)}return m}(a.newValue);l!==Fr.T&&r.sequenceNumberHandler(l)}else if(a.key===r.Js)return r.syncEngine.wi()}else r.Ks.push(a)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(n,r,a){const l=new nE(this.currentUser,n,r,a),h=HT(this.persistenceKey,this.currentUser,n);this.setItem(h,l.Os())}ni(n){const r=HT(this.persistenceKey,this.currentUser,n);this.removeItem(r)}ri(n){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:n}))}ii(n,r,a){const l=gI(this.persistenceKey,n),h=new Em(n,r,a);this.setItem(l,h.Os())}oi(){this.setItem(this.Js,"value-not-used")}ai(n){const r=this.Ws.exec(n);return r?r[1]:null}ui(n,r){const a=this.ai(n);return Df.$s(a,r)}hi(n,r){const a=this.Gs.exec(n),l=Number(a[1]);return nE.$s(new Yn(void 0!==a[2]?a[2]:null),l,r)}fi(n,r){const a=this.zs.exec(n),l=Number(a[1]);return Em.$s(l,r)}Xs(n){return sd.$s(n)}li(n){var r=this;return(0,le.Z)(function*(){if(n.user.uid===r.currentUser.uid)return r.syncEngine._i(n.batchId,n.state,n.error);be("SharedClientState",`Ignoring mutation for non-active user ${n.user.uid}`)})()}di(n){return this.syncEngine.mi(n.targetId,n.state,n.error)}ci(n,r){const a=r?this.qs.insert(n,r):this.qs.remove(n),l=this.ti(this.qs),h=this.ti(a),m=[],C=[];return h.forEach(D=>{l.has(D)||m.push(D)}),l.forEach(D=>{h.has(D)||C.push(D)}),this.syncEngine.gi(m,C).then(()=>{this.qs=a})}Zs(n){this.qs.get(n.clientId)&&this.onlineStateHandler(n.onlineState)}ti(n){let r=Wc();return n.forEach((a,l)=>{r=r.unionWith(l.activeTargetIds)}),r}}class sE{constructor(){this.yi=new rE,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(n){}updateMutationState(n,r,a){}addLocalQueryTarget(n){return this.yi.Fs(n),this.pi[n]||"not-current"}updateQueryState(n,r,a){this.pi[n]=r}removeLocalQueryTarget(n){this.yi.Ms(n)}isLocalQueryTarget(n){return this.yi.activeTargetIds.has(n)}clearQueryState(n){delete this.pi[n]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(n){return this.yi.activeTargetIds.has(n)}start(){return this.yi=new rE,Promise.resolve()}handleUserChange(n,r,a){}setOnlineState(n){}shutdown(){}writeSequenceNumber(n){}notifyBundleLoaded(){}}class Tf{Ei(n){}shutdown(){}}class mI{constructor(){this.Ti=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ei(n){this.bi.push(n)}shutdown(){window.removeEventListener("online",this.Ti),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ti),window.addEventListener("offline",this.Ai)}Ii(){be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const n of this.bi)n(0)}Ri(){be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const n of this.bi)n(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const GT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qT{constructor(n){this.vi=n.vi,this.Vi=n.Vi}Si(n){this.Di=n}Ci(n){this.Ni=n}onMessage(n){this.xi=n}close(){this.Vi()}send(n){this.vi(n)}ki(){this.Di()}$i(n){this.Ni(n)}Oi(n){this.xi(n)}}class WT extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId,this.Fi=(n.ssl?"https":"http")+"://"+n.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(n,r,a,l){const h=this.Bi(n,r);be("RestConnection","Sending: ",h,a);const m={};return this.Ui(m,l),this.qi(n,h,m,a).then(C=>(be("RestConnection","Received: ",C),C),C=>{throw kc("RestConnection",`${n} failed with error: `,C,"url: ",h,"request:",a),C})}Ki(n,r,a,l){return this.Li(n,r,a,l)}Ui(n,r){if(n["X-Goog-Api-Client"]="gl-js/ fire/"+Pc,n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r)for(const a in r.authHeaders)r.authHeaders.hasOwnProperty(a)&&(n[a]=r.authHeaders[a])}Bi(n,r){return`${this.Fi}/v1/${r}:${GT[n]}`}}{constructor(n){super(n),this.forceLongPolling=n.forceLongPolling,this.autoDetectLongPolling=n.autoDetectLongPolling,this.useFetchStreams=n.useFetchStreams}qi(n,r,a,l){return new Promise((h,m)=>{const C=new aT;C.listenOnce(lf.COMPLETE,()=>{try{switch(C.getLastErrorCode()){case Ug.NO_ERROR:const x=C.getResponseJson();be("Connection","XHR received:",JSON.stringify(x)),h(x);break;case Ug.TIMEOUT:be("Connection",'RPC "'+n+'" timed out'),m(new Ee(se.DEADLINE_EXCEEDED,"Request time out"));break;case Ug.HTTP_ERROR:const R=C.getStatus();if(be("Connection",'RPC "'+n+'" failed with status:',R,"response text:",C.getResponseText()),R>0){const O=C.getResponseJson().error;if(O&&O.status&&O.message){const $=function(q){const he=q.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(he)>=0?he:se.UNKNOWN}(O.status);m(new Ee($,O.message))}else m(new Ee(se.UNKNOWN,"Server responded with status "+C.getStatus()))}else m(new Ee(se.UNAVAILABLE,"Connection failed."));break;default:Ge()}}finally{be("Connection",'RPC "'+n+'" completed.')}});const D=JSON.stringify(l);C.send(r,"POST",D,a,15)})}ji(n,r){const a=[this.Fi,"/","google.firestore.v1.Firestore","/",n,"/channel"],l=jx(),h=Oc(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new J_({})),this.Ui(m.initMessageHeaders,r),(0,yt.uI)()||(0,yt.b$)()||(0,yt.d)()||(0,yt.w1)()||(0,yt.Mn)()||(0,yt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const C=a.join("");be("Connection","Creating WebChannel: "+C,m);const D=l.createWebChannel(C,m);let x=!1,R=!1;const O=new qT({vi:q=>{R?be("Connection","Not sending because WebChannel is closed:",q):(x||(be("Connection","Opening WebChannel transport."),D.open(),x=!0),be("Connection","WebChannel sending:",q),D.send(q))},Vi:()=>D.close()}),$=(q,he,De)=>{q.listen(he,Le=>{try{De(Le)}catch(ct){setTimeout(()=>{throw ct},0)}})};return $(D,df.EventType.OPEN,()=>{R||be("Connection","WebChannel transport opened.")}),$(D,df.EventType.CLOSE,()=>{R||(R=!0,be("Connection","WebChannel transport closed"),O.$i())}),$(D,df.EventType.ERROR,q=>{R||(R=!0,kc("Connection","WebChannel transport errored:",q),O.$i(new Ee(se.UNAVAILABLE,"The operation could not be completed")))}),$(D,df.EventType.MESSAGE,q=>{var he;if(!R){const De=q.data[0];Ze(!!De);const Le=De,ct=Le.error||(null===(he=Le[0])||void 0===he?void 0:he.error);if(ct){be("Connection","WebChannel received error:",ct);const gt=ct.status;let ut=function(ri){const ND=xn[ri];if(void 0!==ND)return Ev(ND)}(gt),Mt=ct.message;void 0===ut&&(ut=se.INTERNAL,Mt="Unknown error status: "+gt+" with message "+ct.message),R=!0,O.$i(new Ee(ut,Mt)),D.close()}else be("Connection","WebChannel received:",De),O.Oi(De)}}),$(h,cf.STAT_EVENT,q=>{q.stat===dC.PROXY?be("Connection","Detected buffering proxy"):q.stat===dC.NOPROXY&&be("Connection","Detected no buffering proxy")}),setTimeout(()=>{O.ki()},0),O}}function yI(){return"undefined"!=typeof window?window:null}function Af(){return"undefined"!=typeof document?document:null}function Sf(i){return new DT(i,!0)}class oE{constructor(n,r,a=1e3,l=1.5,h=6e4){this.Oe=n,this.timerId=r,this.Qi=a,this.Wi=l,this.Gi=h,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(n){this.cancel();const r=Math.floor(this.zi+this.Zi()),a=Math.max(0,Date.now()-this.Ji),l=Math.max(0,r-a);l>0&&be("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.zi} ms, delay with jitter: ${r} ms, last attempt: ${a} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,l,()=>(this.Ji=Date.now(),n())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class ul{constructor(n,r,a,l,h,m){this.Oe=n,this.er=a,this.nr=l,this.credentialsProvider=h,this.listener=m,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new oE(n,r)}ar(){return 1===this.state||2===this.state||4===this.state}cr(){return 2===this.state}start(){3!==this.state?this.auth():this.ur()}stop(){var n=this;return(0,le.Z)(function*(){n.ar()&&(yield n.close(0))})()}hr(){this.state=0,this.rr.reset()}lr(){this.cr()&&null===this.ir&&(this.ir=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this.dr()))}wr(n){this._r(),this.stream.send(n)}dr(){var n=this;return(0,le.Z)(function*(){if(n.cr())return n.close(0)})()}_r(){this.ir&&(this.ir.cancel(),this.ir=null)}close(n,r){var a=this;return(0,le.Z)(function*(){a._r(),a.rr.cancel(),a.sr++,3!==n?a.rr.reset():r&&r.code===se.RESOURCE_EXHAUSTED?(rn(r.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),a.rr.Yi()):r&&r.code===se.UNAUTHENTICATED&&a.credentialsProvider.invalidateToken(),null!==a.stream&&(a.mr(),a.stream.close(),a.stream=null),a.state=n,yield a.listener.Ci(r)})()}mr(){}auth(){this.state=1;const n=this.gr(this.sr),r=this.sr;this.credentialsProvider.getToken().then(a=>{this.sr===r&&this.yr(a)},a=>{n(()=>{const l=new Ee(se.UNKNOWN,"Fetching auth token failed: "+a.message);return this.pr(l)})})}yr(n){const r=this.gr(this.sr);this.stream=this.Er(n),this.stream.Si(()=>{r(()=>(this.state=2,this.listener.Si()))}),this.stream.Ci(a=>{r(()=>this.pr(a))}),this.stream.onMessage(a=>{r(()=>this.onMessage(a))})}ur(){var n=this;this.state=4,this.rr.Xi((0,le.Z)(function*(){n.state=0,n.start()}))}pr(n){return be("PersistentStream",`close with error: ${n}`),this.stream=null,this.close(3,n)}gr(n){return r=>{this.Oe.enqueueAndForget(()=>this.sr===n?r():(be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zT extends ul{constructor(n,r,a,l,h){super(n,"listen_stream_connection_backoff","listen_stream_idle",r,a,h),this.N=l}Er(n){return this.nr.ji("Listen",n)}onMessage(n){this.rr.reset();const r=function(i,n){let r;if("targetChange"in n){const a="NO_CHANGE"===(D=n.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:Ge(),l=n.targetChange.targetIds||[],h=function(D,x){return D.D?(Ze(void 0===x||"string"==typeof x),Jn.fromBase64String(x||"")):(Ze(void 0===x||x instanceof Uint8Array),Jn.fromUint8Array(x||new Uint8Array))}(i,n.targetChange.resumeToken),m=n.targetChange.cause,C=m&&function(D){const x=void 0===D.code?se.UNKNOWN:Ev(D.code);return new Ee(x,D.message||"")}(m);r=new Xg(a,l,h,C||null)}else if("documentChange"in n){const a=n.documentChange,l=Si(i,a.document.name),h=Bn(a.document.updateTime),m=new Xn({mapValue:{fields:a.document.fields}}),C=zt.newFoundDocument(l,h,m);r=new ba(a.targetIds||[],a.removedTargetIds||[],C.key,C)}else if("documentDelete"in n){const a=n.documentDelete,l=Si(i,a.document),h=a.readTime?Bn(a.readTime):ot.min(),m=zt.newNoDocument(l,h);r=new ba([],a.removedTargetIds||[],m.key,m)}else if("documentRemove"in n){const a=n.documentRemove,l=Si(i,a.document);r=new ba([],a.removedTargetIds||[],l,null)}else{if(!("filter"in n))return Ge();{const a=n.filter,h=new qc(a.count||0);r=new LC(a.targetId,h)}}var D;return r}(this.N,n),a=function(l){if(!("targetChange"in l))return ot.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?ot.min():h.readTime?Bn(h.readTime):ot.min()}(n);return this.listener.Tr(r,a)}Ir(n){const r={};r.database=Zc(this.N),r.addTarget=function(l,h){let m;const C=h.target;return m=Hg(C)?{documents:Sv(l,C)}:{query:xv(l,C)},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0?m.resumeToken=Cv(l,h.resumeToken):h.snapshotVersion.compareTo(ot.min())>0&&(m.readTime=zc(l,h.snapshotVersion.toTimestamp())),m}(this.N,n);const a=function(i,n){const r=function(a,l){switch(l){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ge()}}(0,n.purpose);return null==r?null:{"goog-listen-tags":r}}(0,n);a&&(r.labels=a),this.wr(r)}Ar(n){const r={};r.database=Zc(this.N),r.removeTarget=n,this.wr(r)}}class _I extends ul{constructor(n,r,a,l,h){super(n,"write_stream_connection_backoff","write_stream_idle",r,a,h),this.N=l,this.Rr=!1}get br(){return this.Rr}start(){this.Rr=!1,this.lastStreamToken=void 0,super.start()}mr(){this.Rr&&this.Pr([])}Er(n){return this.nr.ji("Write",n)}onMessage(n){if(Ze(!!n.streamToken),this.lastStreamToken=n.streamToken,this.Rr){this.rr.reset();const r=function(i,n){return i&&i.length>0?(Ze(void 0!==n),i.map(r=>function(a,l){let h=Bn(a.updateTime?a.updateTime:l);return h.isEqual(ot.min())&&(h=Bn(l)),new Gx(h,a.transformResults||[])}(r,n))):[]}(n.writeResults,n.commitTime),a=Bn(n.commitTime);return this.listener.vr(a,r)}return Ze(!n.writeResults||0===n.writeResults.length),this.Rr=!0,this.listener.Vr()}Sr(){const n={};n.database=Zc(this.N),this.wr(n)}Pr(n){const r={streamToken:this.lastStreamToken,writes:n.map(a=>sm(this.N,a))};this.wr(r)}}class ZT extends class{}{constructor(n,r,a){super(),this.credentials=n,this.nr=r,this.N=a,this.Dr=!1}Cr(){if(this.Dr)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}Li(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Li(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===se.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Ee(se.UNKNOWN,l.toString())})}Ki(n,r,a){return this.Cr(),this.credentials.getToken().then(l=>this.nr.Ki(n,r,a,l)).catch(l=>{throw"FirebaseError"===l.name?(l.code===se.UNAUTHENTICATED&&this.credentials.invalidateToken(),l):new Ee(se.UNKNOWN,l.toString())})}terminate(){this.Dr=!0}}class vI{constructor(n,r){this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.Nr=0,this.kr=null,this.$r=!0}Or(){0===this.Nr&&(this.Fr("Unknown"),this.kr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.kr=null,this.Mr("Backend didn't respond within 10 seconds."),this.Fr("Offline"),Promise.resolve())))}Lr(n){"Online"===this.state?this.Fr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr(`Connection failed 1 times. Most recent error: ${n.toString()}`),this.Fr("Offline")))}set(n){this.Br(),this.Nr=0,"Online"===n&&(this.$r=!1),this.Fr(n)}Fr(n){n!==this.state&&(this.state=n,this.onlineStateHandler(n))}Mr(n){const r=`Could not reach Cloud Firestore backend. ${n}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.$r?(rn(r),this.$r=!1):be("OnlineStateTracker",r)}Br(){null!==this.kr&&(this.kr.cancel(),this.kr=null)}}class KT{constructor(n,r,a,l,h){var m=this;this.localStore=n,this.datastore=r,this.asyncQueue=a,this.remoteSyncer={},this.Ur=[],this.qr=new Map,this.Kr=new Set,this.jr=[],this.Qr=h,this.Qr.Ei(C=>{a.enqueueAndForget((0,le.Z)(function*(){var D;xa(m)&&(be("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,le.Z)(function*(x){const R=Ne(x);R.Kr.add(4),yield Sa(R),R.Wr.set("Unknown"),R.Kr.delete(4),yield od(R)}),function(x){return D.apply(this,arguments)})(m))}))}),this.Wr=new vI(a,l)}}function od(i){return aE.apply(this,arguments)}function aE(){return(aE=(0,le.Z)(function*(i){if(xa(i))for(const n of i.jr)yield n(!0)})).apply(this,arguments)}function Sa(i){return uE.apply(this,arguments)}function uE(){return(uE=(0,le.Z)(function*(i){for(const n of i.jr)yield n(!1)})).apply(this,arguments)}function xf(i,n){const r=Ne(i);r.qr.has(n.targetId)||(r.qr.set(n.targetId,n),Nf(r)?cE(r):ud(r).cr()&&lE(r,n))}function ad(i,n){const r=Ne(i),a=ud(r);r.qr.delete(n),a.cr()&&EI(r,n),0===r.qr.size&&(a.cr()?a.lr():xa(r)&&r.Wr.set("Unknown"))}function lE(i,n){i.Gr.Y(n.targetId),ud(i).Ir(n)}function EI(i,n){i.Gr.Y(n),ud(i).Ar(n)}function cE(i){i.Gr=new bT({getRemoteKeysForTarget:n=>i.remoteSyncer.getRemoteKeysForTarget(n),Et:n=>i.qr.get(n)||null}),ud(i).start(),i.Wr.Or()}function Nf(i){return xa(i)&&!ud(i).ar()&&i.qr.size>0}function xa(i){return 0===Ne(i).Kr.size}function dE(i){i.Gr=void 0}function YT(i){return hE.apply(this,arguments)}function hE(){return(hE=(0,le.Z)(function*(i){i.qr.forEach((n,r)=>{lE(i,n)})})).apply(this,arguments)}function QT(i,n){return fE.apply(this,arguments)}function fE(){return(fE=(0,le.Z)(function*(i,n){dE(i),Nf(i)?(i.Wr.Lr(n),cE(i)):i.Wr.set("Unknown")})).apply(this,arguments)}function JT(i,n,r){return pE.apply(this,arguments)}function pE(){return(pE=(0,le.Z)(function*(i,n,r){if(i.Wr.set("Online"),n instanceof Xg&&2===n.state&&n.cause)try{yield(a=(0,le.Z)(function*(l,h){const m=h.cause;for(const C of h.targetIds)l.qr.has(C)&&(yield l.remoteSyncer.rejectListen(C,m),l.qr.delete(C),l.Gr.removeTarget(C))}),function(l,h){return a.apply(this,arguments)})(i,n)}catch(a){be("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),a),yield wm(i,a)}else if(n instanceof ba?i.Gr.rt(n):n instanceof LC?i.Gr.ft(n):i.Gr.ct(n),!r.isEqual(ot.min()))try{const a=yield Jv(i.localStore);r.compareTo(a)>=0&&(yield function(l,h){const m=l.Gr._t(h);return m.targetChanges.forEach((C,D)=>{if(C.resumeToken.approximateByteSize()>0){const x=l.qr.get(D);x&&l.qr.set(D,x.withResumeToken(C.resumeToken,h))}}),m.targetMismatches.forEach(C=>{const D=l.qr.get(C);if(!D)return;l.qr.set(C,D.withResumeToken(Jn.EMPTY_BYTE_STRING,D.snapshotVersion)),EI(l,C);const x=new ko(D.target,C,1,D.sequenceNumber);lE(l,x)}),l.remoteSyncer.applyRemoteEvent(m)}(i,r))}catch(a){be("RemoteStore","Failed to raise snapshot:",a),yield wm(i,a)}var a})).apply(this,arguments)}function wm(i,n,r){return gE.apply(this,arguments)}function gE(){return(gE=(0,le.Z)(function*(i,n,r){if(!as(n))throw n;i.Kr.add(1),yield Sa(i),i.Wr.set("Offline"),r||(r=()=>Jv(i.localStore)),i.asyncQueue.enqueueRetryable((0,le.Z)(function*(){be("RemoteStore","Retrying IndexedDB access"),yield r(),i.Kr.delete(1),yield od(i)}))})).apply(this,arguments)}function mE(i,n){return n().catch(r=>wm(i,r,n))}function ll(i){return yE.apply(this,arguments)}function yE(){return(yE=(0,le.Z)(function*(i){const n=Ne(i),r=Lo(n);let a=n.Ur.length>0?n.Ur[n.Ur.length-1].batchId:-1;for(;XT(n);)try{const l=yield UT(n.localStore,a);if(null===l){0===n.Ur.length&&r.lr();break}a=l.batchId,wI(n,l)}catch(l){yield wm(n,l)}CI(n)&&II(n)})).apply(this,arguments)}function XT(i){return xa(i)&&i.Ur.length<10}function wI(i,n){i.Ur.push(n);const r=Lo(i);r.cr()&&r.br&&r.Pr(n.mutations)}function CI(i){return xa(i)&&!Lo(i).ar()&&i.Ur.length>0}function II(i){Lo(i).start()}function eA(i){return Rf.apply(this,arguments)}function Rf(){return(Rf=(0,le.Z)(function*(i){Lo(i).Sr()})).apply(this,arguments)}function _E(i){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,le.Z)(function*(i){const n=Lo(i);for(const r of i.Ur)n.Pr(r.mutations)})).apply(this,arguments)}function vE(i,n,r){return EE.apply(this,arguments)}function EE(){return(EE=(0,le.Z)(function*(i,n,r){const a=i.Ur.shift(),l=um.from(a,n,r);yield mE(i,()=>i.remoteSyncer.applySuccessfulWrite(l)),yield ll(i)})).apply(this,arguments)}function tA(i,n){return Mf.apply(this,arguments)}function Mf(){return(Mf=(0,le.Z)(function*(i,n){var r;n&&Lo(i).br&&(yield(r=(0,le.Z)(function*(a,l){if(PC(h=l.code)&&h!==se.ABORTED){const m=a.Ur.shift();Lo(a).hr(),yield mE(a,()=>a.remoteSyncer.rejectFailedWrite(m.batchId,l)),yield ll(a)}var h}),function(a,l){return r.apply(this,arguments)})(i,n)),CI(i)&&II(i)})).apply(this,arguments)}function wE(i,n){return Im.apply(this,arguments)}function Im(){return(Im=(0,le.Z)(function*(i,n){const r=Ne(i);n?(r.Kr.delete(2),yield od(r)):n||(r.Kr.add(2),yield Sa(r),r.Wr.set("Unknown"))})).apply(this,arguments)}function ud(i){return i.zr||(i.zr=function(n,r,a){const l=Ne(n);return l.Cr(),new zT(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:YT.bind(null,i),Ci:QT.bind(null,i),Tr:JT.bind(null,i)}),i.jr.push(function(){var n=(0,le.Z)(function*(r){r?(i.zr.hr(),Nf(i)?cE(i):i.Wr.set("Unknown")):(yield i.zr.stop(),dE(i))});return function(r){return n.apply(this,arguments)}}())),i.zr}function Lo(i){return i.Hr||(i.Hr=function(n,r,a){const l=Ne(n);return l.Cr(),new _I(r,l.nr,l.credentials,l.N,a)}(i.datastore,i.asyncQueue,{Si:eA.bind(null,i),Ci:tA.bind(null,i),Vr:_E.bind(null,i),vr:vE.bind(null,i)}),i.jr.push(function(){var n=(0,le.Z)(function*(r){r?(i.Hr.hr(),yield ll(i)):(yield i.Hr.stop(),i.Ur.length>0&&(be("RemoteStore",`Stopping write stream with ${i.Ur.length} pending writes`),i.Ur=[]))});return function(r){return n.apply(this,arguments)}}())),i.Hr}class bm{constructor(n,r,a,l,h){this.asyncQueue=n,this.timerId=r,this.targetTimeMs=a,this.op=l,this.removalCallback=h,this.deferred=new ur,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(m=>{})}static createAndSchedule(n,r,a,l,h){const m=Date.now()+a,C=new bm(n,r,m,l,h);return C.start(a),C}start(n){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),n)}skipDelay(){return this.handleDelayElapsed()}cancel(n){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ee(se.CANCELLED,"Operation cancelled"+(n?": "+n:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(n=>this.deferred.resolve(n))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cl(i,n){if(rn("AsyncQueue",`${n}: ${i}`),as(i))return new Ee(se.UNAVAILABLE,`${n}: ${i}`);throw i}class Of{constructor(n){this.comparator=n?(r,a)=>n(r,a)||Be.comparator(r.key,a.key):(r,a)=>Be.comparator(r.key,a.key),this.keyedMap=Qg(),this.sortedSet=new _n(this.comparator)}static emptySet(n){return new Of(n.comparator)}has(n){return null!=this.keyedMap.get(n)}get(n){return this.keyedMap.get(n)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(n){const r=this.keyedMap.get(n);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(n){this.sortedSet.inorderTraversal((r,a)=>(n(r),!1))}add(n){const r=this.delete(n.key);return r.copy(r.keyedMap.insert(n.key,n),r.sortedSet.insert(n,null))}delete(n){const r=this.get(n);return r?this.copy(this.keyedMap.remove(n),this.sortedSet.remove(r)):this}isEqual(n){if(!(n instanceof Of)||this.size!==n.size)return!1;const r=this.sortedSet.getIterator(),a=n.sortedSet.getIterator();for(;r.hasNext();){const l=r.getNext().key,h=a.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const n=[];return this.forEach(r=>{n.push(r.toString())}),0===n.length?"DocumentSet ()":"DocumentSet (\n  "+n.join("  \n")+"\n)"}copy(n,r){const a=new Of;return a.comparator=this.comparator,a.keyedMap=n,a.sortedSet=r,a}}class bI{constructor(){this.Jr=new _n(Be.comparator)}track(n){const r=n.doc.key,a=this.Jr.get(r);a?0!==n.type&&3===a.type?this.Jr=this.Jr.insert(r,n):3===n.type&&1!==a.type?this.Jr=this.Jr.insert(r,{type:a.type,doc:n.doc}):2===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):2===n.type&&0===a.type?this.Jr=this.Jr.insert(r,{type:0,doc:n.doc}):1===n.type&&0===a.type?this.Jr=this.Jr.remove(r):1===n.type&&2===a.type?this.Jr=this.Jr.insert(r,{type:1,doc:a.doc}):0===n.type&&1===a.type?this.Jr=this.Jr.insert(r,{type:2,doc:n.doc}):Ge():this.Jr=this.Jr.insert(r,n)}Yr(){const n=[];return this.Jr.inorderTraversal((r,a)=>{n.push(a)}),n}}class us{constructor(n,r,a,l,h,m,C,D){this.query=n,this.docs=r,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=h,this.fromCache=m,this.syncStateChanged=C,this.excludesMetadataChanges=D}static fromInitialDocuments(n,r,a,l){const h=[];return r.forEach(m=>{h.push({type:0,doc:m})}),new us(n,r,Of.emptySet(r),h,a,l,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(n){if(!(this.fromCache===n.fromCache&&this.syncStateChanged===n.syncStateChanged&&this.mutatedKeys.isEqual(n.mutatedKeys)&&Bc(this.query,n.query)&&this.docs.isEqual(n.docs)&&this.oldDocs.isEqual(n.oldDocs)))return!1;const r=this.docChanges,a=n.docChanges;if(r.length!==a.length)return!1;for(let l=0;l<r.length;l++)if(r[l].type!==a[l].type||!r[l].doc.isEqual(a[l].doc))return!1;return!0}}class Yx{constructor(){this.Xr=void 0,this.listeners=[]}}class CE{constructor(){this.queries=new Xc(n=>hv(n),Bc),this.onlineState="Unknown",this.Zr=new Set}}function ld(i,n){return IE.apply(this,arguments)}function IE(){return(IE=(0,le.Z)(function*(i,n){const r=Ne(i),a=n.query;let l=!1,h=r.queries.get(a);if(h||(l=!0,h=new Yx),l)try{h.Xr=yield r.onListen(a)}catch(m){const C=cl(m,`Initialization of query '${qg(n.query)}' failed`);return void n.onError(C)}r.queries.set(a,h),h.listeners.push(n),n.eo(r.onlineState),h.Xr&&n.no(h.Xr)&&xi(r)})).apply(this,arguments)}function Na(i,n){return bE.apply(this,arguments)}function bE(){return(bE=(0,le.Z)(function*(i,n){const r=Ne(i),a=n.query;let l=!1;const h=r.queries.get(a);if(h){const m=h.listeners.indexOf(n);m>=0&&(h.listeners.splice(m,1),l=0===h.listeners.length)}if(l)return r.queries.delete(a),r.onUnlisten(a)})).apply(this,arguments)}function Qx(i,n){const r=Ne(i);let a=!1;for(const l of n){const m=r.queries.get(l.query);if(m){for(const C of m.listeners)C.no(l)&&(a=!0);m.Xr=l}}a&&xi(r)}function nA(i,n,r){const a=Ne(i),l=a.queries.get(n);if(l)for(const h of l.listeners)h.onError(r);a.queries.delete(n)}function xi(i){i.Zr.forEach(n=>{n.next()})}class Dm{constructor(n,r,a){this.query=n,this.so=r,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=a||{}}no(n){if(!this.options.includeMetadataChanges){const a=[];for(const l of n.docChanges)3!==l.type&&a.push(l);n=new us(n.query,n.docs,n.oldDocs,a,n.mutatedKeys,n.fromCache,n.syncStateChanged,!0)}let r=!1;return this.io?this.oo(n)&&(this.so.next(n),r=!0):this.ao(n,this.onlineState)&&(this.co(n),r=!0),this.ro=n,r}onError(n){this.so.error(n)}eo(n){this.onlineState=n;let r=!1;return this.ro&&!this.io&&this.ao(this.ro,n)&&(this.co(this.ro),r=!0),r}ao(n,r){return!n.fromCache||!(this.options.uo&&"Offline"!==r||n.docs.isEmpty()&&"Offline"!==r)}oo(n){return n.docChanges.length>0||!!(n.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==n.hasPendingWrites)&&!0===this.options.includeMetadataChanges}co(n){n=us.fromInitialDocuments(n.query,n.docs,n.mutatedKeys,n.fromCache),this.io=!0,this.so.next(n)}}class Jx{constructor(n,r){this.payload=n,this.byteLength=r}ho(){return"metadata"in this.payload}}class Pf{constructor(n){this.N=n}zn(n){return Si(this.N,n)}Hn(n){return n.metadata.exists?Dv(this.N,n.document,!1):zt.newNoDocument(this.zn(n.metadata.name),this.Jn(n.metadata.readTime))}Jn(n){return Bn(n)}}class rA{constructor(n,r,a){this.lo=n,this.localStore=r,this.N=a,this.queries=[],this.documents=[],this.progress=DI(n)}fo(n){this.progress.bytesLoaded+=n.byteLength;let r=this.progress.documentsLoaded;return n.payload.namedQuery?this.queries.push(n.payload.namedQuery):n.payload.documentMetadata?(this.documents.push({metadata:n.payload.documentMetadata}),n.payload.documentMetadata.exists||++r):n.payload.document&&(this.documents[this.documents.length-1].document=n.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}wo(n){const r=new Map,a=new Pf(this.N);for(const l of n)if(l.metadata.queries){const h=a.zn(l.metadata.name);for(const m of l.metadata.queries){const C=(r.get(m)||Nt()).add(h);r.set(m,C)}}return r}complete(){var n=this;return(0,le.Z)(function*(){const r=yield function(i,n,r,a){return vm.apply(this,arguments)}(n.localStore,new Pf(n.N),n.documents,n.lo.id),a=n.wo(n.documents);for(const l of n.queries)yield BT(n.localStore,l,a.get(l.name));return n.progress.taskState="Success",new VT(Object.assign({},n.progress),r)})()}}function DI(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class iA{constructor(n){this.key=n}}class TI{constructor(n){this.key=n}}class AI{constructor(n,r){this.query=n,this._o=r,this.mo=null,this.current=!1,this.yo=Nt(),this.mutatedKeys=Nt(),this.po=fv(n),this.Eo=new Of(this.po)}get To(){return this._o}Io(n,r){const a=r?r.Ao:new bI,l=r?r.Eo:this.Eo;let h=r?r.mutatedKeys:this.mutatedKeys,m=l,C=!1;const D=No(this.query)&&l.size===this.query.limit?l.last():null,x=Ro(this.query)&&l.size===this.query.limit?l.first():null;if(n.inorderTraversal((R,O)=>{const $=l.get(R),q=jc(this.query,O)?O:null,he=!!$&&this.mutatedKeys.has($.key),De=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Le=!1;$&&q?$.data.isEqual(q.data)?he!==De&&(a.track({type:3,doc:q}),Le=!0):this.Ro($,q)||(a.track({type:2,doc:q}),Le=!0,(D&&this.po(q,D)>0||x&&this.po(q,x)<0)&&(C=!0)):!$&&q?(a.track({type:0,doc:q}),Le=!0):$&&!q&&(a.track({type:1,doc:$}),Le=!0,(D||x)&&(C=!0)),Le&&(q?(m=m.add(q),h=De?h.add(R):h.delete(R)):(m=m.delete(R),h=h.delete(R)))}),No(this.query)||Ro(this.query))for(;m.size>this.query.limit;){const R=No(this.query)?m.last():m.first();m=m.delete(R.key),h=h.delete(R.key),a.track({type:1,doc:R})}return{Eo:m,Ao:a,Ln:C,mutatedKeys:h}}Ro(n,r){return n.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(n,r,a){const l=this.Eo;this.Eo=n.Eo,this.mutatedKeys=n.mutatedKeys;const h=n.Ao.Yr();h.sort((x,R)=>function(O,$){const q=he=>{switch(he){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ge()}};return q(O)-q($)}(x.type,R.type)||this.po(x.doc,R.doc)),this.bo(a);const m=r?this.Po():[],C=0===this.yo.size&&this.current?1:0,D=C!==this.mo;return this.mo=C,0!==h.length||D?{snapshot:new us(this.query,n.Eo,l,h,n.mutatedKeys,0===C,D,!1),vo:m}:{vo:m}}eo(n){return this.current&&"Offline"===n?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new bI,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{vo:[]}}Vo(n){return!this._o.has(n)&&!!this.Eo.has(n)&&!this.Eo.get(n).hasLocalMutations}bo(n){n&&(n.addedDocuments.forEach(r=>this._o=this._o.add(r)),n.modifiedDocuments.forEach(r=>{}),n.removedDocuments.forEach(r=>this._o=this._o.delete(r)),this.current=n.current)}Po(){if(!this.current)return[];const n=this.yo;this.yo=Nt(),this.Eo.forEach(a=>{this.Vo(a.key)&&(this.yo=this.yo.add(a.key))});const r=[];return n.forEach(a=>{this.yo.has(a)||r.push(new TI(a))}),this.yo.forEach(a=>{n.has(a)||r.push(new iA(a))}),r}So(n){this._o=n.Gn,this.yo=Nt();const r=this.Io(n.documents);return this.applyChanges(r,!0)}Do(){return us.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)}}class sA{constructor(n,r,a){this.query=n,this.targetId=r,this.view=a}}class DE{constructor(n){this.key=n,this.Co=!1}}class SI{constructor(n,r,a,l,h,m){this.localStore=n,this.remoteStore=r,this.eventManager=a,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=m,this.No={},this.xo=new Xc(C=>hv(C),Bc),this.ko=new Map,this.$o=new Set,this.Oo=new _n(Be.comparator),this.Fo=new Map,this.Mo=new eE,this.Lo={},this.Bo=new Map,this.Uo=rl.ie(),this.onlineState="Unknown",this.qo=void 0}get isPrimaryClient(){return!0===this.qo}}function TE(i,n){return Tm.apply(this,arguments)}function Tm(){return(Tm=(0,le.Z)(function*(i,n){const r=km(i);let a,l;const h=r.xo.get(n);if(h)a=h.targetId,r.sharedClientState.addLocalQueryTarget(a),l=h.view.Do();else{const m=yield rd(r.localStore,mi(n)),C=r.sharedClientState.addLocalQueryTarget(m.targetId);a=m.targetId,l=yield AE(r,n,a,"current"===C),r.isPrimaryClient&&xf(r.remoteStore,m)}return l})).apply(this,arguments)}function AE(i,n,r,a){return xI.apply(this,arguments)}function xI(){return(xI=(0,le.Z)(function*(i,n,r,a){i.Ko=(R,O,$)=>{return(q=(0,le.Z)(function*(he,De,Le,ct){let gt=De.view.Io(Le);gt.Ln&&(gt=yield mm(he.localStore,De.query,!1).then(({documents:ri})=>De.view.Io(ri,gt)));const ut=ct&&ct.targetChanges.get(De.targetId),Mt=De.view.applyChanges(gt,he.isPrimaryClient,ut);return OE(he,De.targetId,Mt.vo),Mt.snapshot}),function(he,De,Le,ct){return q.apply(this,arguments)})(i,R,O,$);var q};const l=yield mm(i.localStore,n,!0),h=new AI(n,l.Gn),m=h.Io(l.documents),C=Jg.createSynthesizedTargetChangeForCurrentChange(r,a&&"Offline"!==i.onlineState),D=h.applyChanges(m,i.isPrimaryClient,C);OE(i,r,D.vo);const x=new sA(n,r,h);return i.xo.set(n,x),i.ko.has(r)?i.ko.get(r).push(n):i.ko.set(r,[n]),D.snapshot})).apply(this,arguments)}function oA(i,n){return SE.apply(this,arguments)}function SE(){return(SE=(0,le.Z)(function*(i,n){const r=Ne(i),a=r.xo.get(n),l=r.ko.get(a.targetId);if(l.length>1)return r.ko.set(a.targetId,l.filter(h=>!Bc(h,n))),void r.xo.delete(n);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||(yield id(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),ad(r.remoteStore,a.targetId),kf(r,a.targetId)}).catch(Aa))):(kf(r,a.targetId),yield id(r.localStore,a.targetId,!0))})).apply(this,arguments)}function Am(){return(Am=(0,le.Z)(function*(i,n,r){const a=Lf(i);try{const l=yield function(h,m){const C=Ne(h),D=Vn.now(),x=m.reduce((O,$)=>O.add($.key),Nt());let R;return C.persistence.runTransaction("Locally write mutations","readwrite",O=>C.Qn.Pn(O,x).next($=>{R=$;const q=[];for(const he of m){const De=yv(he,R.get(he.key));null!=De&&q.push(new Yu(he.key,De,wC(De.value.mapValue),Un.exists(!0)))}return C.In.addMutationBatch(O,D,q,m)})).then(O=>(O.applyToLocalDocumentSet(R),{batchId:O.batchId,changes:R}))}(a.localStore,n);a.sharedClientState.addPendingMutation(l.batchId),function(h,m,C){let D=h.Lo[h.currentUser.toKey()];D||(D=new _n(_t)),D=D.insert(m,C),h.Lo[h.currentUser.toKey()]=D}(a,l.batchId,r),yield Vo(a,l.changes),yield ll(a.remoteStore)}catch(l){const h=cl(l,"Failed to persist write");r.reject(h)}})).apply(this,arguments)}function xE(i,n){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,le.Z)(function*(i,n){const r=Ne(i);try{const a=yield oI(r.localStore,n);n.targetChanges.forEach((l,h)=>{const m=r.Fo.get(h);m&&(Ze(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1),l.addedDocuments.size>0?m.Co=!0:l.modifiedDocuments.size>0?Ze(m.Co):l.removedDocuments.size>0&&(Ze(m.Co),m.Co=!1))}),yield Vo(r,a,n)}catch(a){yield Aa(a)}})).apply(this,arguments)}function NI(i,n,r){const a=Ne(i);if(a.isPrimaryClient&&0===r||!a.isPrimaryClient&&1===r){const l=[];a.xo.forEach((h,m)=>{const C=m.view.eo(n);C.snapshot&&l.push(C.snapshot)}),function(h,m){const C=Ne(h);C.onlineState=m;let D=!1;C.queries.forEach((x,R)=>{for(const O of R.listeners)O.eo(m)&&(D=!0)}),D&&xi(C)}(a.eventManager,n),l.length&&a.No.Tr(l),a.onlineState=n,a.isPrimaryClient&&a.sharedClientState.setOnlineState(n)}}function uA(i,n,r){return xm.apply(this,arguments)}function xm(){return(xm=(0,le.Z)(function*(i,n,r){const a=Ne(i);a.sharedClientState.updateQueryState(n,"rejected",r);const l=a.Fo.get(n),h=l&&l.key;if(h){let m=new _n(Be.comparator);m=m.insert(h,zt.newNoDocument(h,ot.min()));const C=Nt().add(h),D=new _f(ot.min(),new Map,new vn(_t),m,C);yield xE(a,D),a.Oo=a.Oo.remove(h),a.Fo.delete(n),PE(a)}else yield id(a.localStore,n,!1).then(()=>kf(a,n,r)).catch(Aa)})).apply(this,arguments)}function Nm(i,n){return NE.apply(this,arguments)}function NE(){return(NE=(0,le.Z)(function*(i,n){const r=Ne(i),a=n.batch.batchId;try{const l=yield sI(r.localStore,n);ME(r,a,null),RE(r,a),r.sharedClientState.updateMutationState(a,"acknowledged"),yield Vo(r,l)}catch(l){yield Aa(l)}})).apply(this,arguments)}function RI(i,n,r){return cd.apply(this,arguments)}function cd(){return(cd=(0,le.Z)(function*(i,n,r){const a=Ne(i);try{const l=yield function(h,m){const C=Ne(h);return C.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let x;return C.In.lookupMutationBatch(D,m).next(R=>(Ze(null!==R),x=R.keys(),C.In.removeMutationBatch(D,R))).next(()=>C.In.performConsistencyCheck(D)).next(()=>C.Qn.Pn(D,x))})}(a.localStore,n);ME(a,n,r),RE(a,n),a.sharedClientState.updateMutationState(n,"rejected",r),yield Vo(a,l)}catch(l){yield Aa(l)}})).apply(this,arguments)}function dl(){return(dl=(0,le.Z)(function*(i,n){const r=Ne(i);xa(r.remoteStore)||be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(h){const m=Ne(h);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",C=>m.In.getHighestUnacknowledgedBatchId(C))}(r.localStore);if(-1===a)return void n.resolve();const l=r.Bo.get(a)||[];l.push(n),r.Bo.set(a,l)}catch(a){const l=cl(a,"Initialization of waitForPendingWrites() operation failed");n.reject(l)}})).apply(this,arguments)}function RE(i,n){(i.Bo.get(n)||[]).forEach(r=>{r.resolve()}),i.Bo.delete(n)}function ME(i,n,r){const a=Ne(i);let l=a.Lo[a.currentUser.toKey()];if(l){const h=l.get(n);h&&(r?h.reject(r):h.resolve(),l=l.remove(n)),a.Lo[a.currentUser.toKey()]=l}}function kf(i,n,r=null){i.sharedClientState.removeLocalQueryTarget(n);for(const a of i.ko.get(n))i.xo.delete(a),r&&i.No.jo(a,r);i.ko.delete(n),i.isPrimaryClient&&i.Mo.cs(n).forEach(a=>{i.Mo.containsKey(a)||MI(i,a)})}function MI(i,n){i.$o.delete(n.path.canonicalString());const r=i.Oo.get(n);null!==r&&(ad(i.remoteStore,r),i.Oo=i.Oo.remove(n),i.Fo.delete(r),PE(i))}function OE(i,n,r){for(const a of r)a instanceof iA?(i.Mo.addReference(a.key,n),lA(i,a)):a instanceof TI?(be("SyncEngine","Document no longer in limbo: "+a.key),i.Mo.removeReference(a.key,n),i.Mo.containsKey(a.key)||MI(i,a.key)):Ge()}function lA(i,n){const r=n.key,a=r.path.canonicalString();i.Oo.get(r)||i.$o.has(a)||(be("SyncEngine","New document in limbo: "+r),i.$o.add(a),PE(i))}function PE(i){for(;i.$o.size>0&&i.Oo.size<i.maxConcurrentLimboResolutions;){const n=i.$o.values().next().value;i.$o.delete(n);const r=new Be(bt.fromString(n)),a=i.Uo.next();i.Fo.set(a,new DE(r)),i.Oo=i.Oo.insert(r,a),xf(i.remoteStore,new ko(mi(rs(r.path)),a,2,Fr.T))}}function Vo(i,n,r){return kE.apply(this,arguments)}function kE(){return(kE=(0,le.Z)(function*(i,n,r){const a=Ne(i),l=[],h=[],m=[];var C;a.xo.isEmpty()||(a.xo.forEach((C,D)=>{m.push(a.Ko(D,n,r).then(x=>{if(x){a.isPrimaryClient&&a.sharedClientState.updateQueryState(D.targetId,x.fromCache?"not-current":"current"),l.push(x);const R=nd.kn(D.targetId,x);h.push(R)}}))}),yield Promise.all(m),a.No.Tr(l),yield(C=(0,le.Z)(function*(D,x){const R=Ne(D);try{yield R.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>_e.forEach(x,$=>_e.forEach($.Nn,q=>R.persistence.referenceDelegate.addReference(O,$.targetId,q)).next(()=>_e.forEach($.xn,q=>R.persistence.referenceDelegate.removeReference(O,$.targetId,q)))))}catch(O){if(!as(O))throw O;be("LocalStore","Failed to update sequence numbers: "+O)}for(const O of x){const $=O.targetId;if(!O.fromCache){const q=R.Un.get($),De=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);R.Un=R.Un.insert($,De)}}}),function(D,x){return C.apply(this,arguments)})(a.localStore,h))})).apply(this,arguments)}function cA(i,n){return FE.apply(this,arguments)}function FE(){return(FE=(0,le.Z)(function*(i,n){const r=Ne(i);if(!r.currentUser.isEqual(n)){be("SyncEngine","User change. New user:",n.toKey());const a=yield gm(r.localStore,n);r.currentUser=n,(l=r).Bo.forEach(m=>{m.forEach(C=>{C.reject(new Ee(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),l.Bo.clear(),r.sharedClientState.handleUserChange(n,a.removedBatchIds,a.addedBatchIds),yield Vo(r,a.Wn)}var l})).apply(this,arguments)}function dA(i,n){const r=Ne(i),a=r.Fo.get(n);if(a&&a.Co)return Nt().add(a.key);{let l=Nt();const h=r.ko.get(n);if(!h)return l;for(const m of h){const C=r.xo.get(m);l=l.unionWith(C.view.To)}return l}}function Xx(i,n){return LE.apply(this,arguments)}function LE(){return(LE=(0,le.Z)(function*(i,n){const r=Ne(i),a=yield mm(r.localStore,n.query,!0),l=n.view.So(a);return r.isPrimaryClient&&OE(r,n.targetId,l.vo),l})).apply(this,arguments)}function Ff(i){return VE.apply(this,arguments)}function VE(){return(VE=(0,le.Z)(function*(i){const n=Ne(i);return uI(n.localStore).then(r=>Vo(n,r))})).apply(this,arguments)}function hA(i,n,r,a){return UE.apply(this,arguments)}function UE(){return(UE=(0,le.Z)(function*(i,n,r,a){const l=Ne(i),h=yield function(m,C){const D=Ne(m),x=Ne(D.In);return D.persistence.runTransaction("Lookup mutation documents","readonly",R=>x.Xt(R,C).next(O=>O?D.Qn.Pn(R,O):_e.resolve(null)))}(l.localStore,n);var C;null!==h?("pending"===r?yield ll(l.remoteStore):"acknowledged"===r||"rejected"===r?(ME(l,n,a||null),RE(l,n),C=n,Ne(Ne(l.localStore).In).te(C)):Ge(),yield Vo(l,h)):be("SyncEngine","Cannot apply mutation batch with id: "+n)})).apply(this,arguments)}function Uo(){return(Uo=(0,le.Z)(function*(i,n){const r=Ne(i);if(km(r),Lf(r),!0===n&&!0!==r.qo){const a=r.sharedClientState.getAllActiveQueryTargets(),l=yield BE(r,a.toArray());r.qo=!0,yield wE(r.remoteStore,!0);for(const h of l)xf(r.remoteStore,h)}else if(!1===n&&!1!==r.qo){const a=[];let l=Promise.resolve();r.ko.forEach((h,m)=>{r.sharedClientState.isLocalQueryTarget(m)?a.push(m):l=l.then(()=>(kf(r,m),id(r.localStore,m,!0))),ad(r.remoteStore,m)}),yield l,yield BE(r,a),function(h){const m=Ne(h);m.Fo.forEach((C,D)=>{ad(m.remoteStore,D)}),m.Mo.us(),m.Fo=new Map,m.Oo=new _n(Be.comparator)}(r),r.qo=!1,yield wE(r.remoteStore,!1)}})).apply(this,arguments)}function BE(i,n,r){return jE.apply(this,arguments)}function jE(){return(jE=(0,le.Z)(function*(i,n,r){const a=Ne(i),l=[],h=[];for(const m of n){let C;const D=a.ko.get(m);if(D&&0!==D.length){C=yield rd(a.localStore,mi(D[0]));for(const x of D){const R=a.xo.get(x),O=yield Xx(a,R);O.snapshot&&h.push(O.snapshot)}}else{const x=yield aI(a.localStore,m);C=yield rd(a.localStore,x),yield AE(a,fA(x),m,!1)}l.push(C)}return a.No.Tr(h),l})).apply(this,arguments)}function fA(i){return Zu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function pA(i){const n=Ne(i);return Ne(Ne(n.localStore).persistence).pn()}function Om(i,n,r,a){return $E.apply(this,arguments)}function $E(){return($E=(0,le.Z)(function*(i,n,r,a){const l=Ne(i);if(l.qo)be("SyncEngine","Ignoring unexpected query state notification.");else if(l.ko.has(n))switch(r){case"current":case"not-current":{const h=yield uI(l.localStore),m=_f.createSynthesizedRemoteEventForCurrentChange(n,"current"===r);yield Vo(l,h,m);break}case"rejected":yield id(l.localStore,n,!0),kf(l,n,a);break;default:Ge()}})).apply(this,arguments)}function gA(i,n,r){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,le.Z)(function*(i,n,r){const a=km(i);if(a.qo){for(const l of n){if(a.ko.has(l)){be("SyncEngine","Adding an already active target "+l);continue}const h=yield aI(a.localStore,l),m=yield rd(a.localStore,h);yield AE(a,fA(h),m.targetId,!1),xf(a.remoteStore,m)}for(const l of r)a.ko.has(l)&&(yield id(a.localStore,l,!1).then(()=>{ad(a.remoteStore,l),kf(a,l)}).catch(Aa))}})).apply(this,arguments)}function km(i){const n=Ne(i);return n.remoteStore.remoteSyncer.applyRemoteEvent=xE.bind(null,n),n.remoteStore.remoteSyncer.getRemoteKeysForTarget=dA.bind(null,n),n.remoteStore.remoteSyncer.rejectListen=uA.bind(null,n),n.No.Tr=Qx.bind(null,n.eventManager),n.No.jo=nA.bind(null,n.eventManager),n}function Lf(i){const n=Ne(i);return n.remoteStore.remoteSyncer.applySuccessfulWrite=Nm.bind(null,n),n.remoteStore.remoteSyncer.rejectFailedWrite=RI.bind(null,n),n}class HE{constructor(){this.synchronizeTabs=!1}initialize(n){var r=this;return(0,le.Z)(function*(){r.N=Sf(n.databaseInfo.databaseId),r.sharedClientState=r.Wo(n),r.persistence=r.Go(n),yield r.persistence.start(),r.gcScheduler=r.zo(n),r.localStore=r.Ho(n)})()}zo(n){return null}Ho(n){return Yv(this.persistence,new gn,n.initialUser,this.N)}Go(n){return new $T(tE.Ns,this.N)}Wo(n){return new sE}terminate(){var n=this;return(0,le.Z)(function*(){n.gcScheduler&&n.gcScheduler.stop(),yield n.sharedClientState.shutdown(),yield n.persistence.shutdown()})()}}class PI extends HE{constructor(n,r,a){super(),this.Jo=n,this.cacheSizeBytes=r,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(n){var r=()=>super.initialize,a=this;return(0,le.Z)(function*(){yield r().call(a,n),yield function(i){return _m.apply(this,arguments)}(a.localStore),yield a.Jo.initialize(a,n),yield Lf(a.Jo.syncEngine),yield ll(a.Jo.remoteStore),yield a.persistence.nn(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ho(n){return Yv(this.persistence,new gn,n.initialUser,this.N)}zo(n){return new tI(this.persistence.referenceDelegate.garbageCollector,n.asyncQueue)}Go(n){const r=td(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Jr.withCacheSize(this.cacheSizeBytes):Jr.DEFAULT;return new Kv(this.synchronizeTabs,r,n.clientId,a,n.asyncQueue,yI(),Af(),this.N,this.sharedClientState,!!this.forceOwnership)}Wo(n){return new sE}}class mA extends PI{constructor(n,r){super(n,r,!1),this.Jo=n,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(n){var r=()=>super.initialize,a=this;return(0,le.Z)(function*(){yield r().call(a,n);const l=a.Jo.syncEngine;a.sharedClientState instanceof iE&&(a.sharedClientState.syncEngine={_i:hA.bind(null,l),mi:Om.bind(null,l),gi:gA.bind(null,l),pn:pA.bind(null,l),wi:Ff.bind(null,l)},yield a.sharedClientState.start()),yield a.persistence.nn(function(){var h=(0,le.Z)(function*(m){yield function(i,n){return Uo.apply(this,arguments)}(a.Jo.syncEngine,m),a.gcScheduler&&(m&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):m||a.gcScheduler.stop())});return function(m){return h.apply(this,arguments)}}())})()}Wo(n){const r=yI();if(!iE.bt(r))throw new Ee(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=td(n.databaseInfo.databaseId,n.databaseInfo.persistenceKey);return new iE(r,n.asyncQueue,a,n.clientId,n.initialUser)}}class Fm{initialize(n,r){var a=this;return(0,le.Z)(function*(){a.localStore||(a.localStore=n.localStore,a.sharedClientState=n.sharedClientState,a.datastore=a.createDatastore(r),a.remoteStore=a.createRemoteStore(r),a.eventManager=a.createEventManager(r),a.syncEngine=a.createSyncEngine(r,!n.synchronizeTabs),a.sharedClientState.onlineStateHandler=l=>NI(a.syncEngine,l,1),a.remoteStore.remoteSyncer.handleCredentialChange=cA.bind(null,a.syncEngine),yield wE(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(n){return new CE}createDatastore(n){const r=Sf(n.databaseInfo.databaseId),a=new WT(n.databaseInfo);return new ZT(n.credentials,a,r)}createRemoteStore(n){return r=this.localStore,a=this.datastore,l=n.asyncQueue,h=C=>NI(this.syncEngine,C,0),m=mI.bt()?new mI:new Tf,new KT(r,a,l,h,m);var r,a,l,h,m}createSyncEngine(n,r){return function(a,l,h,m,C,D,x){const R=new SI(a,l,h,m,C,D);return x&&(R.qo=!0),R}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return(n=(0,le.Z)(function*(r){const a=Ne(r);be("RemoteStore","RemoteStore shutting down."),a.Kr.add(5),yield Sa(a),a.Qr.shutdown(),a.Wr.set("Unknown")}),function(r){return n.apply(this,arguments)})(this.remoteStore);var n}}function kI(i,n=10240){let r=0;return{read:()=>(0,le.Z)(function*(){if(r<i.byteLength){const a={value:i.slice(r,r+n),done:!1};return r+=n,a}return{done:!0}})(),cancel:()=>(0,le.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Vf{constructor(n){this.observer=n,this.muted=!1}next(n){this.observer.next&&this.Yo(this.observer.next,n)}error(n){this.observer.error?this.Yo(this.observer.error,n):console.error("Uncaught Error in snapshot listener:",n)}Xo(){this.muted=!0}Yo(n,r){this.muted||setTimeout(()=>{this.muted||n(r)},0)}}class Lm{constructor(n,r){this.Zo=n,this.N=r,this.metadata=new ur,this.buffer=new Uint8Array,this.ta=new TextDecoder("utf-8"),this.ea().then(a=>{a&&a.ho()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Zo.cancel()}getMetadata(){var n=this;return(0,le.Z)(function*(){return n.metadata.promise})()}Qo(){var n=this;return(0,le.Z)(function*(){return yield n.getMetadata(),n.ea()})()}ea(){var n=this;return(0,le.Z)(function*(){const r=yield n.na();if(null===r)return null;const a=n.ta.decode(r),l=Number(a);isNaN(l)&&n.sa(`length string (${a}) is not valid number`);const h=yield n.ia(l);return new Jx(JSON.parse(h),r.length+l)})()}ra(){return this.buffer.findIndex(n=>n==="{".charCodeAt(0))}na(){var n=this;return(0,le.Z)(function*(){for(;n.ra()<0&&!(yield n.oa()););if(0===n.buffer.length)return null;const r=n.ra();r<0&&n.sa("Reached the end of bundle when a length string is expected.");const a=n.buffer.slice(0,r);return n.buffer=n.buffer.slice(r),a})()}ia(n){var r=this;return(0,le.Z)(function*(){for(;r.buffer.length<n;)(yield r.oa())&&r.sa("Reached the end of bundle when more is expected.");const a=r.ta.decode(r.buffer.slice(0,n));return r.buffer=r.buffer.slice(n),a})()}sa(n){throw this.Zo.cancel(),new Error(`Invalid bundle format: ${n}`)}oa(){var n=this;return(0,le.Z)(function*(){const r=yield n.Zo.read();if(!r.done){const a=new Uint8Array(n.buffer.length+r.value.length);a.set(n.buffer),a.set(r.value,n.buffer.length),n.buffer=a}return r.done})()}}class Vm{constructor(n){this.datastore=n,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(n){var r=this;return(0,le.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Ee(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(l=(0,le.Z)(function*(h,m){const C=Ne(h),D=Zc(C.N)+"/documents",x={documents:m.map(q=>Qu(C.N,q))},R=yield C.Ki("BatchGetDocuments",D,x),O=new Map;R.forEach(q=>{const he=function(i,n){return"found"in n?function(r,a){Ze(!!a.found);const l=Si(r,a.found.name),h=Bn(a.found.updateTime),m=new Xn({mapValue:{fields:a.found.fields}});return zt.newFoundDocument(l,h,m)}(i,n):"missing"in n?function(r,a){Ze(!!a.missing),Ze(!!a.readTime);const l=Si(r,a.missing),h=Bn(a.readTime);return zt.newNoDocument(l,h)}(i,n):Ge()}(C.N,q);O.set(he.key.toString(),he)});const $=[];return m.forEach(q=>{const he=O.get(q.toString());Ze(!!he),$.push(he)}),$}),function(h,m){return l.apply(this,arguments)})(r.datastore,n);var l;return a.forEach(l=>r.recordVersion(l)),a})()}set(n,r){this.write(r.toMutation(n,this.precondition(n))),this.writtenDocs.add(n.toString())}update(n,r){try{this.write(r.toMutation(n,this.preconditionForUpdate(n)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(n.toString())}delete(n){this.write(new Kg(n,this.precondition(n))),this.writtenDocs.add(n.toString())}commit(){var n=this;return(0,le.Z)(function*(){if(n.ensureCommitNotCalled(),n.lastWriteError)throw n.lastWriteError;const r=n.readVersions;var a;n.mutations.forEach(a=>{r.delete(a.key.toString())}),r.forEach((a,l)=>{const h=Be.fromPath(l);n.mutations.push(new vv(h,n.precondition(h)))}),yield(a=(0,le.Z)(function*(l,h){const m=Ne(l),C=Zc(m.N)+"/documents",D={writes:h.map(x=>sm(m.N,x))};yield m.Li("Commit",C,D)}),function(l,h){return a.apply(this,arguments)})(n.datastore,n.mutations),n.committed=!0})()}recordVersion(n){let r;if(n.isFoundDocument())r=n.version;else{if(!n.isNoDocument())throw Ge();r=ot.min()}const a=this.readVersions.get(n.key.toString());if(a){if(!r.isEqual(a))throw new Ee(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(n.key.toString(),r)}precondition(n){const r=this.readVersions.get(n.toString());return!this.writtenDocs.has(n.toString())&&r?Un.updateTime(r):Un.none()}preconditionForUpdate(n){const r=this.readVersions.get(n.toString());if(!this.writtenDocs.has(n.toString())&&r){if(r.isEqual(ot.min()))throw new Ee(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Un.updateTime(r)}return Un.exists(!0)}write(n){this.ensureCommitNotCalled(),this.mutations.push(n)}ensureCommitNotCalled(){}}class eN{constructor(n,r,a,l){this.asyncQueue=n,this.datastore=r,this.updateFunction=a,this.deferred=l,this.aa=5,this.rr=new oE(this.asyncQueue,"transaction_retry")}run(){this.aa-=1,this.ca()}ca(){var n=this;this.rr.Xi((0,le.Z)(function*(){const r=new Vm(n.datastore),a=n.ua(r);a&&a.then(l=>{n.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{n.deferred.resolve(l)}).catch(h=>{n.ha(h)}))}).catch(l=>{n.ha(l)})}))}ua(n){try{const r=this.updateFunction(n);return!qu(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}ha(n){this.aa>0&&this.la(n)?(this.aa-=1,this.asyncQueue.enqueueAndForget(()=>(this.ca(),Promise.resolve()))):this.deferred.reject(n)}la(n){if("FirebaseError"===n.name){const r=n.code;return"aborted"===r||"failed-precondition"===r||!PC(r)}return!1}}class Uf{constructor(n,r,a){var l=this;this.credentials=n,this.asyncQueue=r,this.databaseInfo=a,this.user=Yn.UNAUTHENTICATED,this.clientId=cT.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(r,function(){var h=(0,le.Z)(function*(m){be("FirestoreClient","Received user=",m.uid),yield l.credentialListener(m),l.user=m});return function(m){return h.apply(this,arguments)}}())}getConfiguration(){var n=this;return(0,le.Z)(function*(){return{asyncQueue:n.asyncQueue,databaseInfo:n.databaseInfo,clientId:n.clientId,credentials:n.credentials,initialUser:n.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(n){this.credentialListener=n}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ee(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var n=this;this.asyncQueue.enterRestrictedMode();const r=new ur;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{n.onlineComponents&&(yield n.onlineComponents.terminate()),n.offlineComponents&&(yield n.offlineComponents.terminate()),n.credentials.shutdown(),r.resolve()}catch(a){const l=cl(a,"Failed to shutdown persistence");r.reject(l)}})),r.promise}}function Rt(i,n){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,le.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress(),be("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield n.initialize(r);let a=r.initialUser;i.setCredentialChangeListener(function(){var l=(0,le.Z)(function*(h){a.isEqual(h)||(yield gm(n.localStore,h),a=h)});return function(h){return l.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=n})).apply(this,arguments)}function hl(i,n){return fl.apply(this,arguments)}function fl(){return(fl=(0,le.Z)(function*(i,n){i.asyncQueue.verifyOperationInProgress();const r=yield FI(i);be("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield n.initialize(r,a),i.setCredentialChangeListener(l=>{return(h=(0,le.Z)(function*(m,C){const D=Ne(m);D.asyncQueue.verifyOperationInProgress(),be("RemoteStore","RemoteStore received new credentials");const x=xa(D);D.Kr.add(3),yield Sa(D),x&&D.Wr.set("Unknown"),yield D.remoteSyncer.handleCredentialChange(C),D.Kr.delete(3),yield od(D)}),function(m,C){return h.apply(this,arguments)})(n.remoteStore,l);var h}),i.onlineComponents=n})).apply(this,arguments)}function FI(i){return et.apply(this,arguments)}function et(){return(et=(0,le.Z)(function*(i){return i.offlineComponents||(be("FirestoreClient","Using default OfflineComponentProvider"),yield Rt(i,new HE)),i.offlineComponents})).apply(this,arguments)}function Ur(i){return Bf.apply(this,arguments)}function Bf(){return(Bf=(0,le.Z)(function*(i){return i.onlineComponents||(be("FirestoreClient","Using default OnlineComponentProvider"),yield hl(i,new Fm)),i.onlineComponents})).apply(this,arguments)}function Ra(i){return FI(i).then(n=>n.persistence)}function LI(i){return FI(i).then(n=>n.localStore)}function GE(i){return Ur(i).then(n=>n.remoteStore)}function Um(i){return Ur(i).then(n=>n.syncEngine)}function jf(i){return qE.apply(this,arguments)}function qE(){return(qE=(0,le.Z)(function*(i){const n=yield Ur(i),r=n.eventManager;return r.onListen=TE.bind(null,n.syncEngine),r.onUnlisten=oA.bind(null,n.syncEngine),r})).apply(this,arguments)}function Ri(i,n,r={}){const a=new ur;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(l,h,m,C,D){const x=new Vf({next:O=>{h.enqueueAndForget(()=>Na(l,R));const $=O.docs.has(m);!$&&O.fromCache?D.reject(new Ee(se.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&O.fromCache&&C&&"server"===C.source?D.reject(new Ee(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(O)},error:O=>D.reject(O)}),R=new Dm(rs(m.path),x,{includeMetadataChanges:!0,uo:!0});return ld(l,R)}(yield jf(i),i.asyncQueue,n,r,a)})),a.promise}function UI(i,n,r={}){const a=new ur;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(l,h,m,C,D){const x=new Vf({next:O=>{h.enqueueAndForget(()=>Na(l,R)),O.fromCache&&"server"===C.source?D.reject(new Ee(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(O)},error:O=>D.reject(O)}),R=new Dm(m,x,{includeMetadataChanges:!0,uo:!0});return ld(l,R)}(yield jf(i),i.asyncQueue,n,r,a)})),a.promise}class _A{constructor(n,r,a,l,h,m,C,D){this.databaseId=n,this.appId=r,this.persistenceKey=a,this.host=l,this.ssl=h,this.forceLongPolling=m,this.autoDetectLongPolling=C,this.useFetchStreams=D}}class Mi{constructor(n,r){this.projectId=n,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(n){return n instanceof Mi&&n.projectId===this.projectId&&n.database===this.database}}const jI=new Map;function Bm(i,n,r){if(!r)throw new Ee(se.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${n}.`)}function jm(i,n,r,a){if(!0===n&&!0===a)throw new Ee(se.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function hd(i){if(!Be.isDocumentKey(i))throw new Ee(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function $m(i){if(Be.isDocumentKey(i))throw new Ee(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Hf(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const n=(r=i).constructor?r.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var r;return"function"==typeof i?"a function":Ge()}function ft(i,n){if("_delegate"in i&&(i=i._delegate),!(i instanceof n)){if(n.name===i.constructor.name)throw new Ee(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Hf(i);throw new Ee(se.INVALID_ARGUMENT,`Expected type '${n.name}', but it was: ${r}`)}}return i}function $I(i,n){if(n<=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${n}.`)}class Gf{constructor(n){var r;if(void 0===n.host){if(void 0!==n.ssl)throw new Ee(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new Ee(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,jm("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}isEqual(n){return this.host===n.host&&this.ssl===n.ssl&&this.credentials===n.credentials&&this.cacheSizeBytes===n.cacheSizeBytes&&this.experimentalForceLongPolling===n.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===n.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===n.ignoreUndefinedProperties&&this.useFetchStreams===n.useFetchStreams}}class fd{constructor(n,r){this._credentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gf({}),this._settingsFrozen=!1,n instanceof Mi?this._databaseId=n:(this._app=n,this._databaseId=function(a){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new Ee(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mi(a.options.projectId)}(n))}get app(){if(!this._app)throw new Ee(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(n){if(this._settingsFrozen)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gf(n),void 0!==n.credentials&&(this._credentials=function(r){if(!r)return new fC;switch(r.type){case"gapi":const a=r.client;return Ze(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new Ao(a,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Ee(se.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(n.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=jI.get(n);r&&(be("ComponentProvider","Removing Datastore"),jI.delete(n),r.terminate())}(this),Promise.resolve()}}class Zt{constructor(n,r,a){this.converter=r,this._key=a,this.type="document",this.firestore=n}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(n){return new Zt(this.firestore,n,this._key)}}class Hn{constructor(n,r,a){this.converter=r,this._query=a,this.type="query",this.firestore=n}withConverter(n){return new Hn(this.firestore,n,this._query)}}class qs extends Hn{constructor(n,r,a){super(n,r,rs(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const n=this._path.popLast();return n.isEmpty()?null:new Zt(this.firestore,null,new Be(n))}withConverter(n){return new qs(this.firestore,n,this._path)}}function Hm(i,n,...r){if(i=(0,yt.m9)(i),Bm("collection","path",n),i instanceof fd){const a=bt.fromString(n,...r);return $m(a),new qs(i,null,a)}{if(!(i instanceof Zt||i instanceof qs))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(bt.fromString(n,...r));return $m(a),new qs(i.firestore,null,a)}}function ZE(i,n,...r){if(i=(0,yt.m9)(i),1===arguments.length&&(n=cT.I()),Bm("doc","path",n),i instanceof fd){const a=bt.fromString(n,...r);return hd(a),new Zt(i,null,new Be(a))}{if(!(i instanceof Zt||i instanceof qs))throw new Ee(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(bt.fromString(n,...r));return hd(a),new Zt(i.firestore,i instanceof qs?i.converter:null,new Be(a))}}function vA(i,n){return i=(0,yt.m9)(i),n=(0,yt.m9)(n),(i instanceof Zt||i instanceof qs)&&(n instanceof Zt||n instanceof qs)&&i.firestore===n.firestore&&i.path===n.path&&i.converter===n.converter}function tt(i,n){return i=(0,yt.m9)(i),n=(0,yt.m9)(n),i instanceof Hn&&n instanceof Hn&&i.firestore===n.firestore&&Bc(i._query,n._query)&&i.converter===n.converter}class tN{constructor(){this.fa=Promise.resolve(),this.da=[],this.wa=!1,this._a=[],this.ma=null,this.ga=!1,this.ya=!1,this.pa=[],this.rr=new oE(this,"async_queue_retry"),this.Ea=()=>{const r=Af();r&&be("AsyncQueue","Visibility state changed to "+r.visibilityState),this.rr.tr()};const n=Af();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ea)}get isShuttingDown(){return this.wa}enqueueAndForget(n){this.enqueue(n)}enqueueAndForgetEvenWhileRestricted(n){this.Ta(),this.Ia(n)}enterRestrictedMode(n){if(!this.wa){this.wa=!0,this.ya=n||!1;const r=Af();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ea)}}enqueue(n){if(this.Ta(),this.wa)return new Promise(()=>{});const r=new ur;return this.Ia(()=>this.wa&&this.ya?Promise.resolve():(n().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(n){this.enqueueAndForget(()=>(this.da.push(n),this.Aa()))}Aa(){var n=this;return(0,le.Z)(function*(){if(0!==n.da.length){try{yield n.da[0](),n.da.shift(),n.rr.reset()}catch(r){if(!as(r))throw r;be("AsyncQueue","Operation failed with retryable error: "+r)}n.da.length>0&&n.rr.Xi(()=>n.Aa())}})()}Ia(n){const r=this.fa.then(()=>(this.ga=!0,n().catch(a=>{throw this.ma=a,this.ga=!1,rn("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(a)),a}).then(a=>(this.ga=!1,a))));return this.fa=r,r}enqueueAfterDelay(n,r,a){this.Ta(),this.pa.indexOf(n)>-1&&(r=0);const l=bm.createAndSchedule(this,n,r,a,h=>this.Ra(h));return this._a.push(l),l}Ta(){this.ma&&Ge()}verifyOperationInProgress(){}ba(){var n=this;return(0,le.Z)(function*(){let r;do{r=n.fa,yield r}while(r!==n.fa)})()}Pa(n){for(const r of this._a)if(r.timerId===n)return!0;return!1}va(n){return this.ba().then(()=>{this._a.sort((r,a)=>r.targetTimeMs-a.targetTimeMs);for(const r of this._a)if(r.skipDelay(),"all"!==n&&r.timerId===n)break;return this.ba()})}Va(n){this.pa.push(n)}Ra(n){const r=this._a.indexOf(n);this._a.splice(r,1)}}function pl(i){return function(n,r){if("object"!=typeof n||null===n)return!1;const a=n;for(const l of["next","error","complete"])if(l in a&&"function"==typeof a[l])return!0;return!1}(i)}class EA{constructor(){this._progressObserver={},this._taskCompletionResolver=new ur,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(n,r,a){this._progressObserver={next:n,error:r,complete:a}}catch(n){return this._taskCompletionResolver.promise.catch(n)}then(n,r){return this._taskCompletionResolver.promise.then(n,r)}_completeWith(n){this._updateProgress(n),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(n)}_failWith(n){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(n),this._taskCompletionResolver.reject(n)}_updateProgress(n){this._lastProgress=n,this._progressObserver.next&&this._progressObserver.next(n)}}class wn extends fd{constructor(n,r){super(n,r),this.type="firestore",this._queue=new tN,this._persistenceKey="name"in n?n.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cr(this),this._firestoreClient.terminate()}}function Gn(i){return i._firestoreClient||cr(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function cr(i){var n;const r=i._freezeSettings(),a=(h=(null===(n=i._app)||void 0===n?void 0:n.options.appId)||"",new _A(i._databaseId,h,i._persistenceKey,(C=r).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,C.useFetchStreams));var h,C;i._firestoreClient=new Uf(i._credentials,i._queue,a)}function Gm(i,n,r){const a=new ur;return i.asyncQueue.enqueue((0,le.Z)(function*(){try{yield Rt(i,r),yield hl(i,n),a.resolve()}catch(l){if(!("FirebaseError"===(h=l).name?h.code===se.FAILED_PRECONDITION||h.code===se.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&h instanceof DOMException)||22===h.code||20===h.code||11===h.code))throw l;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+l),a.reject(l)}var h})).then(()=>a.promise)}function GI(i){if(i._initialized||i._terminated)throw new Ee(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bo{constructor(...n){for(let r=0;r<n.length;++r)if(0===n[r].length)throw new Ee(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qn(n)}isEqual(n){return this._internalPath.isEqual(n._internalPath)}}class Oi{constructor(n){this._byteString=n}static fromBase64String(n){try{return new Oi(Jn.fromBase64String(n))}catch(r){throw new Ee(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(n){return new Oi(Jn.fromUint8Array(n))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(n){return this._byteString.isEqual(n._byteString)}}class gl{constructor(n){this._methodName=n}}class YE{constructor(n,r){if(!isFinite(n)||n<-90||n>90)throw new Ee(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new Ee(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(n){return this._lat===n._lat&&this._long===n._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(n){return _t(this._lat,n._lat)||_t(this._long,n._long)}}const NA=/^__.*__$/;class RA{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return null!==this.fieldMask?new Yu(n,this.data,this.fieldMask,r,this.fieldTransforms):new Zg(n,this.data,r,this.fieldTransforms)}}class qI{constructor(n,r,a){this.data=n,this.fieldMask=r,this.fieldTransforms=a}toMutation(n,r){return new Yu(n,this.data,this.fieldMask,r,this.fieldTransforms)}}function WI(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ge()}}class qm{constructor(n,r,a,l,h,m){this.settings=n,this.databaseId=r,this.N=a,this.ignoreUndefinedProperties=l,void 0===h&&this.Sa(),this.fieldTransforms=h||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Da(){return this.settings.Da}Ca(n){return new qm(Object.assign(Object.assign({},this.settings),n),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Na(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.ka(n),l}$a(n){var r;const a=null===(r=this.path)||void 0===r?void 0:r.child(n),l=this.Ca({path:a,xa:!1});return l.Sa(),l}Oa(n){return this.Ca({path:void 0,xa:!0})}Fa(n){return pd(n,this.settings.methodName,this.settings.Ma||!1,this.path,this.settings.La)}contains(n){return void 0!==this.fieldMask.find(r=>n.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>n.isPrefixOf(r.field))}Sa(){if(this.path)for(let n=0;n<this.path.length;n++)this.ka(this.path.get(n))}ka(n){if(0===n.length)throw this.Fa("Document fields must not be empty");if(WI(this.Da)&&NA.test(n))throw this.Fa('Document fields cannot begin and end with "__"')}}class MA{constructor(n,r,a){this.databaseId=n,this.ignoreUndefinedProperties=r,this.N=a||Sf(n)}Ba(n,r,a,l=!1){return new qm({Da:n,methodName:r,La:a,path:Qn.emptyPath(),xa:!1,Ma:l},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function ls(i){const n=i._freezeSettings(),r=Sf(i._databaseId);return new MA(i._databaseId,!!n.ignoreUndefinedProperties,r)}function Wm(i,n,r,a,l,h={}){const m=i.Ba(h.merge||h.mergeFields?2:0,n,r,l);t0("Data must be an object, but it was:",m,a);const C=e0(a,m);let D,x;if(h.merge)D=new Hu(m.fieldMask),x=m.fieldTransforms;else if(h.mergeFields){const R=[];for(const O of h.mergeFields){const $=YI(n,O,r);if(!m.contains($))throw new Ee(se.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);JI(R,$)||R.push($)}D=new Hu(R),x=m.fieldTransforms.filter(O=>D.covers(O.field))}else D=null,x=m.fieldTransforms;return new RA(new Xn(C),D,x)}class qf extends gl{_toFieldTransform(n){if(2!==n.Da)throw n.Fa(1===n.Da?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return n.fieldMask.push(n.path),null}isEqual(n){return n instanceof qf}}function QE(i,n,r){return new qm({Da:3,La:n.settings.La,methodName:i._methodName,xa:r},n.databaseId,n.N,n.ignoreUndefinedProperties)}class ml extends gl{_toFieldTransform(n){return new Gc(n.path,new $c)}isEqual(n){return n instanceof ml}}class rN extends gl{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=QE(this,n,!0),a=this.Ua.map(h=>yl(h,r)),l=new Ca(a);return new Gc(n.path,l)}isEqual(n){return this===n}}class zI extends gl{constructor(n,r){super(n),this.Ua=r}_toFieldTransform(n){const r=QE(this,n,!0),a=this.Ua.map(h=>yl(h,r)),l=new Ia(a);return new Gc(n.path,l)}isEqual(n){return this===n}}class OA extends gl{constructor(n,r){super(n),this.qa=r}_toFieldTransform(n){const r=new Hc(n.N,AC(n.N,this.qa));return new Gc(n.path,r)}isEqual(n){return this===n}}function JE(i,n,r,a){const l=i.Ba(1,n,r);t0("Data must be an object, but it was:",l,a);const h=[],m=Xn.empty();$u(a,(D,x)=>{const R=QI(n,D,r);x=(0,yt.m9)(x);const O=l.$a(R);if(x instanceof qf)h.push(R);else{const $=yl(x,O);null!=$&&(h.push(R),m.set(R,$))}});const C=new Hu(h);return new qI(m,C,l.fieldTransforms)}function XE(i,n,r,a,l,h){const m=i.Ba(1,n,r),C=[YI(n,a,r)],D=[l];if(h.length%2!=0)throw new Ee(se.INVALID_ARGUMENT,`Function ${n}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<h.length;$+=2)C.push(YI(n,h[$])),D.push(h[$+1]);const x=[],R=Xn.empty();for(let $=C.length-1;$>=0;--$)if(!JI(x,C[$])){const q=C[$];let he=D[$];he=(0,yt.m9)(he);const De=m.$a(q);if(he instanceof qf)x.push(q);else{const Le=yl(he,De);null!=Le&&(x.push(q),R.set(q,Le))}}const O=new Hu(x);return new qI(R,O,m.fieldTransforms)}function ZI(i,n,r,a=!1){return yl(r,i.Ba(a?4:3,n))}function yl(i,n){if(KI(i=(0,yt.m9)(i)))return t0("Unsupported field value:",n,i),e0(i,n);if(i instanceof gl)return function(r,a){if(!WI(a.Da))throw a.Fa(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Fa(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)}(i,n),null;if(void 0===i&&n.ignoreUndefinedProperties)return null;if(n.path&&n.fieldMask.push(n.path),i instanceof Array){if(n.settings.xa&&4!==n.Da)throw n.Fa("Nested arrays are not supported");return function(r,a){const l=[];let h=0;for(const m of r){let C=yl(m,a.Oa(h));null==C&&(C={nullValue:"NULL_VALUE"}),l.push(C),h++}return{arrayValue:{values:l}}}(i,n)}return function(r,a){if(null===(r=(0,yt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return AC(a.N,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const l=Vn.fromDate(r);return{timestampValue:zc(a.N,l)}}if(r instanceof Vn){const l=new Vn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zc(a.N,l)}}if(r instanceof YE)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Oi)return{bytesValue:Cv(a.N,r._byteString)};if(r instanceof Zt){const l=a.databaseId,h=r.firestore._databaseId;if(!h.isEqual(l))throw a.Fa(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:vf(r.firestore._databaseId||a.databaseId,r._key.path)}}throw a.Fa(`Unsupported field value: ${Hf(r)}`)}(i,n)}function e0(i,n){const r={};return pC(i)?n.path&&n.path.length>0&&n.fieldMask.push(n.path):$u(i,(a,l)=>{const h=yl(l,n.Na(a));null!=h&&(r[a]=h)}),{mapValue:{fields:r}}}function KI(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Vn||i instanceof YE||i instanceof Oi||i instanceof Zt||i instanceof gl)}function t0(i,n,r){if(!KI(r)||"object"!=typeof(a=r)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Hf(r);throw n.Fa("an object"===a?i+" a custom object":i+" "+a)}var a}function YI(i,n,r){if((n=(0,yt.m9)(n))instanceof Bo)return n._internalPath;if("string"==typeof n)return QI(i,n);throw pd("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const iN=new RegExp("[~\\*/\\[\\]]");function QI(i,n,r){if(n.search(iN)>=0)throw pd(`Invalid field path (${n}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Bo(...n.split("."))._internalPath}catch(a){throw pd(`Invalid field path (${n}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function pd(i,n,r,a,l){const h=a&&!a.isEmpty(),m=void 0!==l;let C=`Function ${n}() called with invalid data`;r&&(C+=" (via `toFirestore()`)"),C+=". ";let D="";return(h||m)&&(D+=" (found",h&&(D+=` in field ${a}`),m&&(D+=` in document ${l}`),D+=")"),new Ee(se.INVALID_ARGUMENT,C+i+D)}function JI(i,n){return i.some(r=>r.isEqual(n))}class Wf{constructor(n,r,a,l,h){this._firestore=n,this._userDataWriter=r,this._key=a,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const n=new PA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(n)}return this._userDataWriter.convertValue(this._document.data.value)}}get(n){if(this._document){const r=this._document.data.field(zm("DocumentSnapshot.get",n));if(null!==r)return this._userDataWriter.convertValue(r)}}}class PA extends Wf{data(){return super.data()}}function zm(i,n){return"string"==typeof n?QI(i,n):n instanceof Bo?n._internalPath:n._delegate._internalPath}class _l{constructor(n,r){this.hasPendingWrites=n,this.fromCache=r}isEqual(n){return this.hasPendingWrites===n.hasPendingWrites&&this.fromCache===n.fromCache}}class jo extends Wf{constructor(n,r,a,l,h,m){super(n,r,a,l,m),this._firestore=n,this._firestoreImpl=n,this.metadata=h}exists(){return super.exists()}data(n={}){if(this._document){if(this._converter){const r=new gd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,n)}return this._userDataWriter.convertValue(this._document.data.value,n.serverTimestamps)}}get(n,r={}){if(this._document){const a=this._document.data.field(zm("DocumentSnapshot.get",n));if(null!==a)return this._userDataWriter.convertValue(a,r.serverTimestamps)}}}class gd extends jo{data(n={}){return super.data(n)}}class Ws{constructor(n,r,a,l){this._firestore=n,this._userDataWriter=r,this._snapshot=l,this.metadata=new _l(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const n=[];return this.forEach(r=>n.push(r)),n}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(n,r){this._snapshot.docs.forEach(a=>{n.call(r,new gd(this._firestore,this._userDataWriter,a.key,a,new _l(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(n={}){const r=!!n.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ee(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,l){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(m=>({type:"added",doc:new gd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new _l(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:h++}))}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(m=>l||3!==m.type).map(m=>{const C=new gd(a._firestore,a._userDataWriter,m.doc.key,m.doc,new _l(a._snapshot.mutatedKeys.has(m.doc.key),a._snapshot.fromCache),a.query.converter);let D=-1,x=-1;return 0!==m.type&&(D=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),1!==m.type&&(h=h.add(m.doc),x=h.indexOf(m.doc.key)),{type:kA(m.type),doc:C,oldIndex:D,newIndex:x}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function kA(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ge()}}function vl(i,n){return i instanceof jo&&n instanceof jo?i._firestore===n._firestore&&i._key.isEqual(n._key)&&(null===i._document?null===n._document:i._document.isEqual(n._document))&&i._converter===n._converter:i instanceof Ws&&n instanceof Ws&&i._firestore===n._firestore&&tt(i.query,n.query)&&i.metadata.isEqual(n.metadata)&&i._snapshot.isEqual(n._snapshot)}function dr(i){if(Ro(i)&&0===i.explicitOrderBy.length)throw new Ee(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class md{}function rr(i,...n){for(const r of n)i=r._apply(i);return i}class n0 extends md{constructor(n,r,a){super(),this.Ka=n,this.ja=r,this.Qa=a,this.type="where"}_apply(n){const r=ls(n.firestore),a=function(l,h,m,C,D,x,R){let O;if(D.isKeyField()){if("array-contains"===x||"array-contains-any"===x)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on FieldPath.documentId().`);if("in"===x||"not-in"===x){s0(R,x);const q=[];for(const he of R)q.push(HA(C,l,he));O={arrayValue:{values:q}}}else O=HA(C,l,R)}else"in"!==x&&"not-in"!==x&&"array-contains-any"!==x||s0(R,x),O=ZI(m,"where",R,"in"===x||"not-in"===x);const $=er.create(D,x,O);return function(q,he){if(he.v()){const Le=Ea(q);if(null!==Le&&!Le.isEqual(he.field))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Le.toString()}' and '${he.field.toString()}'`);const ct=va(q);null!==ct&&rb(0,he.field,ct)}const De=function(Le,ct){for(const gt of Le.filters)if(ct.indexOf(gt.op)>=0)return gt.op;return null}(q,function(Le){switch(Le){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(he.op));if(null!==De)throw new Ee(se.INVALID_ARGUMENT,De===he.op?`Invalid query. You cannot use more than one '${he.op.toString()}' filter.`:`Invalid query. You cannot use '${he.op.toString()}' filters with '${De.toString()}' filters.`)}(l,$),$}(n._query,0,r,n.firestore._databaseId,this.Ka,this.ja,this.Qa);return new Hn(n.firestore,n.converter,function(l,h){const m=l.filters.concat([h]);return new Yr(l.path,l.collectionGroup,l.explicitOrderBy.slice(),m,l.limit,l.limitType,l.startAt,l.endAt)}(n._query,a))}}class XI extends md{constructor(n,r){super(),this.Ka=n,this.Wa=r,this.type="orderBy"}_apply(n){const r=function(a,l,h){if(null!==a.startAt)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const m=new xo(l,h);return function(C,D){if(null===va(C)){const x=Ea(C);null!==x&&rb(0,x,D.field)}}(a,m),m}(n._query,this.Ka,this.Wa);return new Hn(n.firestore,n.converter,function(a,l){const h=a.explicitOrderBy.concat([l]);return new Yr(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(n._query,r))}}class r0 extends md{constructor(n,r,a){super(),this.type=n,this.Ga=r,this.za=a}_apply(n){return new Hn(n.firestore,n.converter,dv(n._query,this.Ga,this.za))}}class tb extends md{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=El(n,this.type,this.Ha,this.Ja);return new Hn(n.firestore,n.converter,(l=r,new Yr((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)));var a,l}}class BA extends md{constructor(n,r,a){super(),this.type=n,this.Ha=r,this.Ja=a}_apply(n){const r=El(n,this.type,this.Ha,this.Ja);return new Hn(n.firestore,n.converter,(l=r,new Yr((a=n._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)));var a,l}}function El(i,n,r,a){if(r[0]=(0,yt.m9)(r[0]),r[0]instanceof Wf)return function(l,h,m,C,D){if(!C)throw new Ee(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${m}().`);const x=[];for(const R of Ku(l))if(R.field.isKeyField())x.push(av(h,C.key));else{const O=C.data.field(R.field);if(yC(O))throw new Ee(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+R.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const $=R.field.canonicalString();throw new Ee(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}x.push(O)}return new Sn(x,D)}(i._query,i.firestore._databaseId,n,r[0]._document,a);{const l=ls(i.firestore);return function(h,m,C,D,x,R){const O=h.explicitOrderBy;if(x.length>O.length)throw new Ee(se.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let q=0;q<x.length;q++){const he=x[q];if(O[q].field.isKeyField()){if("string"!=typeof he)throw new Ee(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof he}`);if(!wa(h)&&-1!==he.indexOf("/"))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${D}() must be a plain document ID, but '${he}' contains a slash.`);const De=h.path.child(bt.fromString(he));if(!Be.isDocumentKey(De))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${D}() must result in a valid document path, but '${De}' is not because it contains an odd number of segments.`);const Le=new Be(De);$.push(av(m,Le))}else{const De=ZI(C,D,he);$.push(De)}}return new Sn($,R)}(i._query,i.firestore._databaseId,l,n,r,a)}}function HA(i,n,r){if("string"==typeof(r=(0,yt.m9)(r))){if(""===r)throw new Ee(se.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wa(n)&&-1!==r.indexOf("/"))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const a=n.path.child(bt.fromString(r));if(!Be.isDocumentKey(a))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return av(i,new Be(a))}if(r instanceof Zt)return av(i,r._key);throw new Ee(se.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hf(r)}.`)}function s0(i,n){if(!Array.isArray(i)||0===i.length)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${n.toString()}' filters.`);if(i.length>10)throw new Ee(se.INVALID_ARGUMENT,`Invalid Query. '${n.toString()}' filters support a maximum of 10 elements in the value array.`)}function rb(i,n,r){if(!r.isEqual(n))throw new Ee(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${n.toString()}' and so you must also use '${n.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class ib{convertValue(n,r="none"){switch(Wu(n)){case 0:return null;case 1:return n.booleanValue;case 2:return An(n.integerValue||n.doubleValue);case 3:return this.convertTimestamp(n.timestampValue);case 4:return this.convertServerTimestamp(n,r);case 5:return n.stringValue;case 6:return this.convertBytes(Gu(n.bytesValue));case 7:return this.convertReference(n.referenceValue);case 8:return this.convertGeoPoint(n.geoPointValue);case 9:return this.convertArray(n.arrayValue,r);case 10:return this.convertObject(n.mapValue,r);default:throw Ge()}}convertObject(n,r){const a={};return $u(n.fields,(l,h)=>{a[l]=this.convertValue(h,r)}),a}convertGeoPoint(n){return new YE(An(n.latitude),An(n.longitude))}convertArray(n,r){return(n.values||[]).map(a=>this.convertValue(a,r))}convertServerTimestamp(n,r){switch(r){case"previous":const a=sv(n);return null==a?null:this.convertValue(a,r);case"estimate":return this.convertTimestamp(hf(n));default:return null}}convertTimestamp(n){const r=_a(n);return new Vn(r.seconds,r.nanos)}convertDocumentKey(n,r){const a=bt.fromString(n);Ze(Pv(a));const l=new Mi(a.get(1),a.get(3)),h=new Be(a.popFirst(5));return l.isEqual(r)||rn(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),h}}function zf(i,n,r){let a;return a=i?r&&(r.merge||r.mergeFields)?i.toFirestore(n,r):i.toFirestore(n):n,a}class GA extends ib{constructor(n){super(),this.firestore=n}convertBytes(n){return new Oi(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zt(this.firestore,null,r)}}class Zm{constructor(n,r){this._firestore=n,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=ls(n)}set(n,r,a){this._verifyNotCommitted();const l=Ma(n,this._firestore),h=zf(l.converter,r,a),m=Wm(this._dataReader,"WriteBatch.set",l._key,h,null!==l.converter,a);return this._mutations.push(m.toMutation(l._key,Un.none())),this}update(n,r,a,...l){this._verifyNotCommitted();const h=Ma(n,this._firestore);let m;return m="string"==typeof(r=(0,yt.m9)(r))||r instanceof Bo?XE(this._dataReader,"WriteBatch.update",h._key,r,a,l):JE(this._dataReader,"WriteBatch.update",h._key,r),this._mutations.push(m.toMutation(h._key,Un.exists(!0))),this}delete(n){this._verifyNotCommitted();const r=Ma(n,this._firestore);return this._mutations=this._mutations.concat(new Kg(r._key,Un.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ee(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ma(i,n){if((i=(0,yt.m9)(i)).firestore!==n)throw new Ee(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class wl extends ib{constructor(n){super(),this.firestore=n}convertBytes(n){return new Oi(n)}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return new Zt(this.firestore,null,r)}}function sb(i,n,r){i=ft(i,Zt);const a=ft(i.firestore,wn),l=zf(i.converter,n,r);return Cl(a,[Wm(ls(a),"setDoc",i._key,l,null!==i.converter,r).toMutation(i._key,Un.none())])}function ob(i,n,r,...a){i=ft(i,Zt);const l=ft(i.firestore,wn),h=ls(l);let m;return m="string"==typeof(n=(0,yt.m9)(n))||n instanceof Bo?XE(h,"updateDoc",i._key,n,r,a):JE(h,"updateDoc",i._key,n),Cl(l,[m.toMutation(i._key,Un.exists(!0))])}function o0(i,...n){var r,a,l;i=(0,yt.m9)(i);let h={includeMetadataChanges:!1},m=0;"object"!=typeof n[m]||pl(n[m])||(h=n[m],m++);const C={includeMetadataChanges:h.includeMetadataChanges};if(pl(n[m])){const O=n[m];n[m]=null===(r=O.next)||void 0===r?void 0:r.bind(O),n[m+1]=null===(a=O.error)||void 0===a?void 0:a.bind(O),n[m+2]=null===(l=O.complete)||void 0===l?void 0:l.bind(O)}let D,x,R;if(i instanceof Zt)x=ft(i.firestore,wn),R=rs(i._key.path),D={next:O=>{n[m]&&n[m](Km(x,i,O))},error:n[m+1],complete:n[m+2]};else{const O=ft(i,Hn);x=ft(O.firestore,wn),R=O._query;const $=new wl(x);D={next:q=>{n[m]&&n[m](new Ws(x,$,O,q))},error:n[m+1],complete:n[m+2]},dr(i._query)}return function(O,$,q,he){const De=new Vf(he),Le=new Dm($,De,q);return O.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return ld(yield jf(O),Le)})),()=>{De.Xo(),O.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return Na(yield jf(O),Le)}))}}(Gn(x),R,C,D)}function Cl(i,n){return function(r,a){const l=new ur;return r.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,n,r){return Am.apply(this,arguments)}(yield Um(r),a,l)})),l.promise}(Gn(i),n)}function Km(i,n,r){const a=r.docs.get(n._key),l=new wl(i);return new jo(i,l,n._key,a,new _l(r.hasPendingWrites,r.fromCache),n.converter)}class QA extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=ls(n)}get(n){const r=Ma(n,this._firestore),a=new GA(this._firestore);return this._transaction.lookup([r._key]).then(l=>{if(!l||1!==l.length)return Ge();const h=l[0];if(h.isFoundDocument())return new Wf(this._firestore,a,h.key,h,r.converter);if(h.isNoDocument())return new Wf(this._firestore,a,r._key,null,r.converter);throw Ge()})}set(n,r,a){const l=Ma(n,this._firestore),h=zf(l.converter,r,a),m=Wm(this._dataReader,"Transaction.set",l._key,h,null!==l.converter,a);return this._transaction.set(l._key,m),this}update(n,r,a,...l){const h=Ma(n,this._firestore);let m;return m="string"==typeof(r=(0,yt.m9)(r))||r instanceof Bo?XE(this._dataReader,"Transaction.update",h._key,r,a,l):JE(this._dataReader,"Transaction.update",h._key,r),this._transaction.update(h._key,m),this}delete(n){const r=Ma(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(n,r){super(n,r),this._firestore=n}get(n){const r=Ma(n,this._firestore),a=new wl(this._firestore);return super.get(n).then(l=>new jo(this._firestore,a,r._key,l._document,new _l(!1,!1),r.converter))}}function Pi(i,n){if(void 0===n)return{merge:!1};if(void 0!==n.mergeFields&&void 0!==n.merge)throw new Ee("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return n}function lb(){if("undefined"==typeof Uint8Array)throw new Ee("unimplemented","Uint8Arrays are not available in this environment.")}function Yf(){if("undefined"==typeof atob)throw new Ee("unimplemented","Blobs are unavailable in Firestore in this environment.")}(function(i){Pc=i})(Io.SDK_VERSION),(0,Io._registerComponent)(new yc.wA("firestore",(i,{options:n})=>{const r=i.getProvider("app").getImmediate(),a=new wn(r,new tv(i.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:!0},n),a._setSettings(n),a},"PUBLIC")),(0,Io.registerVersion)("@firebase/firestore","3.1.0",void 0);class Qf{constructor(n){this._delegate=n}static fromBase64String(n){return Yf(),new Qf(Oi.fromBase64String(n))}static fromUint8Array(n){return lb(),new Qf(Oi.fromUint8Array(n))}toBase64(){return Yf(),this._delegate.toBase64()}toUint8Array(){return lb(),this._delegate.toUint8Array()}isEqual(n){return this._delegate.isEqual(n._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function u0(i){return function(i,n){if("object"!=typeof i||null===i)return!1;const r=i;for(const a of["next","error","complete"])if(a in r&&"function"==typeof r[a])return!0;return!1}(i)}class l0{enableIndexedDbPersistence(n,r){return function(i,n){GI(i=ft(i,wn));const r=Gn(i),a=i._freezeSettings(),l=new Fm;return Gm(r,l,new PI(l,a.cacheSizeBytes,null==n?void 0:n.forceOwnership))}(n._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(n){return function(i){GI(i=ft(i,wn));const n=Gn(i),r=i._freezeSettings(),a=new Fm;return Gm(n,a,new mA(a,r.cacheSizeBytes))}(n._delegate)}clearIndexedDbPersistence(n){return function(i){if(i._initialized&&!i._terminated)throw new Ee(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const n=new ur;return i._queue.enqueueAndForgetEvenWhileRestricted((0,le.Z)(function*(){try{yield(r=(0,le.Z)(function*(a){if(!os.bt())return Promise.resolve();const l=a+"main";yield os.delete(l)}),function(a){return r.apply(this,arguments)})(td(i._databaseId,i._persistenceKey)),n.resolve()}catch(r){n.reject(r)}var r})),n.promise}(n._delegate)}}class Qm{constructor(n,r,a){this._delegate=r,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},n instanceof Mi||(this._appCompat=n)}get _databaseId(){return this._delegate._databaseId}settings(n){const r=this._delegate._getSettings();!n.merge&&r.host!==n.host&&kc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),n.merge&&delete(n=Object.assign(Object.assign({},r),n)).merge,this._delegate._setSettings(n)}useEmulator(n,r,a={}){!function(i,n,r,a={}){var l;const h=(i=ft(i,fd))._getSettings();if("firestore.googleapis.com"!==h.host&&h.host!==n&&kc("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},h),{host:`${n}:${r}`,ssl:!1})),a.mockUserToken){let m,C;if("string"==typeof a.mockUserToken)m=a.mockUserToken,C=Yn.MOCK_USER;else{m=(0,yt.Sg)(a.mockUserToken,null===(l=i._app)||void 0===l?void 0:l.options.projectId);const D=a.mockUserToken.sub||a.mockUserToken.user_id;if(!D)throw new Ee(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");C=new Yn(D)}i._credentials=new hn(new hC(m,C))}}(this._delegate,n,r,a)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const n=yield Ra(i),r=yield GE(i);return n.setNetworkEnabled(!0),function(a){const l=Ne(a);return l.Kr.delete(0),od(l)}(r)}))}(Gn(i=ft(i,wn)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,le.Z)(function*(){const n=yield Ra(i),r=yield GE(i);return n.setNetworkEnabled(!1),(a=(0,le.Z)(function*(l){const h=Ne(l);h.Kr.add(0),yield Sa(h),h.Wr.set("Offline")}),function(l){return a.apply(this,arguments)})(r);var a}))}(Gn(i=ft(i,wn)))}(this._delegate)}enablePersistence(n){let r=!1,a=!1;return n&&(r=!!n.synchronizeTabs,a=!!n.experimentalForceOwningTab,jm("synchronizeTabs",r,"experimentalForceOwningTab",a)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(n){const r=new ur;return n.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return function(i,n){return dl.apply(this,arguments)}(yield Um(n),r)})),r.promise}(Gn(i=ft(i,wn)))}(this._delegate)}onSnapshotsInSync(n){return function(i,n){return function(i,n){const r=new Vf(n);return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return a=yield jf(i),l=r,Ne(a).Zr.add(l),void l.next();var a,l})),()=>{r.Xo(),i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return a=yield jf(i),l=r,void Ne(a).Zr.delete(l);var a,l}))}}(Gn(i=ft(i,wn)),pl(n)?n:{next:n})}(this._delegate,n)}get app(){if(!this._appCompat)throw new Ee("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(n){try{return new bl(this,Hm(this._delegate,n))}catch(r){throw Br(r,"collection()","Firestore.collection()")}}doc(n){try{return new ki(this,ZE(this._delegate,n))}catch(r){throw Br(r,"doc()","Firestore.doc()")}}collectionGroup(n){try{return new br(this,function(i,n){if(i=ft(i,fd),Bm("collectionGroup","collection id",n),n.indexOf("/")>=0)throw new Ee(se.INVALID_ARGUMENT,`Invalid collection ID '${n}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Hn(i,null,(r=n,new Yr(bt.emptyPath(),r)));var r}(this._delegate,n))}catch(r){throw Br(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(n){return function(i,n){return function(i,n){const r=new ur;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){const a=yield(l=i,Ur(l).then(h=>h.datastore));var l;new eN(i.asyncQueue,a,n,r).run()})),r.promise}(Gn(i),r=>n(new QA(i,r)))}(this._delegate,r=>n(new Jm(this,r)))}batch(){return Gn(this._delegate),new cb(new Zm(this._delegate,n=>Cl(this._delegate,n)))}loadBundle(n){return function(i,n){const r=Gn(i=ft(i,wn)),a=new EA;return function(i,n,r,a){const l=function(h,m){let C;return C="string"==typeof h?(new TextEncoder).encode(h):h,D=function(D,x){if(D instanceof Uint8Array)return kI(D,x);if(D instanceof ArrayBuffer)return kI(new Uint8Array(D),x);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(C),new Lm(D,m);var D}(r,Sf(n));i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){!function(i,n,r){const a=Ne(i);var l;(l=(0,le.Z)(function*(h,m,C){try{const D=yield m.getMetadata();if(yield function($,q){const he=Ne($),De=Bn(q.createTime);return he.persistence.runTransaction("hasNewerBundle","readonly",Le=>he.Je.getBundleMetadata(Le,q.id)).then(Le=>!!Le&&Le.createTime.compareTo(De)>=0)}(h.localStore,D))return yield m.close(),void C._completeWith(($=D,{taskState:"Success",documentsLoaded:$.totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}));C._updateProgress(DI(D));const x=new rA(D,h.localStore,m.N);let R=yield m.Qo();for(;R;){const $=yield x.fo(R);$&&C._updateProgress($),R=yield m.Qo()}const O=yield x.complete();yield Vo(h,O.Tn,void 0),yield function($,q){const he=Ne($);return he.persistence.runTransaction("Save bundle","readwrite",De=>he.Je.saveBundleMetadata(De,q))}(h.localStore,D),C._completeWith(O.progress)}catch(D){kc("SyncEngine",`Loading bundle failed with ${D}`),C._failWith(D)}var $}),function(h,m,C){return l.apply(this,arguments)})(a,n,r).then(()=>{a.sharedClientState.notifyBundleLoaded()})}(yield Um(i),l,a)}))}(r,i._databaseId,n,a),a}(this._delegate,n)}namedQuery(n){return function(i,n){return function(i,n){return i.asyncQueue.enqueue((0,le.Z)(function*(){return function(r,a){const l=Ne(r);return l.persistence.runTransaction("Get named query","readonly",h=>l.Je.getNamedQuery(h,a))}(yield LI(i),n)}))}(Gn(i=ft(i,wn)),n).then(r=>r?new Hn(i,null,r.query):null)}(this._delegate,n).then(r=>r?new br(this,r):null)}}class Jf extends ib{constructor(n){super(),this.firestore=n}convertBytes(n){return new Qf(new Oi(n))}convertReference(n){const r=this.convertDocumentKey(n,this.firestore._databaseId);return ki.forKey(r,this.firestore,null)}}class Jm{constructor(n,r){this._firestore=n,this._delegate=r,this._userDataWriter=new Jf(n)}get(n){const r=Oa(n);return this._delegate.get(r).then(a=>new yd(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,r.converter)))}set(n,r,a){const l=Oa(n);return a?(Pi("Transaction.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=Oa(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=Oa(n);return this._delegate.delete(r),this}}class cb{constructor(n){this._delegate=n}set(n,r,a){const l=Oa(n);return a?(Pi("WriteBatch.set",a),this._delegate.set(l,r,a)):this._delegate.set(l,r),this}update(n,r,a,...l){const h=Oa(n);return 2===arguments.length?this._delegate.update(h,r):this._delegate.update(h,r,a,...l),this}delete(n){const r=Oa(n);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class Il{constructor(n,r,a){this._firestore=n,this._userDataWriter=r,this._delegate=a}fromFirestore(n,r){const a=new gd(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,null);return this._delegate.fromFirestore(new Xf(this._firestore,a),null!=r?r:{})}toFirestore(n,r){return r?this._delegate.toFirestore(n,r):this._delegate.toFirestore(n)}static getInstance(n,r){const a=Il.INSTANCES;let l=a.get(n);l||(l=new WeakMap,a.set(n,l));let h=l.get(r);return h||(h=new Il(n,new Jf(n),r),l.set(r,h)),h}}Il.INSTANCES=new WeakMap;class ki{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Jf(n)}static forPath(n,r,a){if(n.length%2!=0)throw new Ee("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${n.canonicalString()} has ${n.length}`);return new ki(r,new Zt(r._delegate,a,new Be(n)))}static forKey(n,r,a){return new ki(r,new Zt(r._delegate,a,n))}get id(){return this._delegate.id}get parent(){return new bl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(n){try{return new bl(this.firestore,Hm(this._delegate,n))}catch(r){throw Br(r,"collection()","DocumentReference.collection()")}}isEqual(n){return(n=(0,yt.m9)(n))instanceof Zt&&vA(this._delegate,n)}set(n,r){r=Pi("DocumentReference.set",r);try{return r?sb(this._delegate,n,r):sb(this._delegate,n)}catch(a){throw Br(a,"setDoc()","DocumentReference.set()")}}update(n,r,...a){try{return 1===arguments.length?ob(this._delegate,n):ob(this._delegate,n,r,...a)}catch(l){throw Br(l,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return Cl(ft(i.firestore,wn),[new Kg(i._key,Un.none())])}(this._delegate)}onSnapshot(...n){const r=d0(n),a=Xm(n,l=>new yd(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return o0(this._delegate,r,a)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=ft(i,Zt);const n=ft(i.firestore,wn),r=Gn(n),a=new wl(n);return function(i,n){const r=new ur;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(a=(0,le.Z)(function*(l,h,m){try{const C=yield function(D,x){const R=Ne(D);return R.persistence.runTransaction("read document","readonly",O=>R.Qn.An(O,x))}(l,h);C.isFoundDocument()?m.resolve(C):C.isNoDocument()?m.resolve(null):m.reject(new Ee(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(C){const D=cl(C,`Failed to get document '${h} from cache`);m.reject(D)}}),function(l,h,m){return a.apply(this,arguments)})(yield LI(i),n,r);var a})),r.promise}(r,i._key).then(l=>new jo(n,a,i._key,l,new _l(null!==l&&l.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=ft(i,Zt);const n=ft(i.firestore,wn);return Ri(Gn(n),i._key,{source:"server"}).then(r=>Km(n,i,r))}(this._delegate):function(i){i=ft(i,Zt);const n=ft(i.firestore,wn);return Ri(Gn(n),i._key).then(r=>Km(n,i,r))}(this._delegate),r.then(a=>new yd(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(n){return new ki(this.firestore,this._delegate.withConverter(n?Il.getInstance(this.firestore,n):null))}}function Br(i,n,r){return i.message=i.message.replace(n,r),i}function d0(i){for(const n of i)if("object"==typeof n&&!u0(n))return n;return{}}function Xm(i,n){var r,a;let l;return l=u0(i[0])?i[0]:u0(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:h=>{l.next&&l.next(n(h))},error:null===(r=l.error)||void 0===r?void 0:r.bind(l),complete:null===(a=l.complete)||void 0===a?void 0:a.bind(l)}}class yd{constructor(n,r){this._firestore=n,this._delegate=r}get ref(){return new ki(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(n){return this._delegate.data(n)}get(n,r){return this._delegate.get(n,r)}isEqual(n){return vl(this._delegate,n._delegate)}}class Xf extends yd{data(n){const r=this._delegate.data(n);return function(i,n){i||Ge()}(void 0!==r),r}}class br{constructor(n,r){this.firestore=n,this._delegate=r,this._userDataWriter=new Jf(n)}where(n,r,a){try{return new br(this.firestore,rr(this._delegate,function(i,n,r){const a=n,l=zm("where",i);return new n0(l,a,r)}(n,r,a)))}catch(l){throw Br(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(n,r){try{return new br(this.firestore,rr(this._delegate,function(i,n="asc"){const r=n,a=zm("orderBy",i);return new XI(a,r)}(n,r)))}catch(a){throw Br(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(n){try{return new br(this.firestore,rr(this._delegate,function(i){return $I("limit",i),new r0("limit",i,"F")}(n)))}catch(r){throw Br(r,"limit()","Query.limit()")}}limitToLast(n){try{return new br(this.firestore,rr(this._delegate,function(i){return $I("limitToLast",i),new r0("limitToLast",i,"L")}(n)))}catch(r){throw Br(r,"limitToLast()","Query.limitToLast()")}}startAt(...n){try{return new br(this.firestore,rr(this._delegate,function(...i){return new tb("startAt",i,!0)}(...n)))}catch(r){throw Br(r,"startAt()","Query.startAt()")}}startAfter(...n){try{return new br(this.firestore,rr(this._delegate,function(...i){return new tb("startAfter",i,!1)}(...n)))}catch(r){throw Br(r,"startAfter()","Query.startAfter()")}}endBefore(...n){try{return new br(this.firestore,rr(this._delegate,function(...i){return new BA("endBefore",i,!0)}(...n)))}catch(r){throw Br(r,"endBefore()","Query.endBefore()")}}endAt(...n){try{return new br(this.firestore,rr(this._delegate,function(...i){return new BA("endAt",i,!1)}(...n)))}catch(r){throw Br(r,"endAt()","Query.endAt()")}}isEqual(n){return tt(this._delegate,n._delegate)}get(n){let r;return r="cache"===(null==n?void 0:n.source)?function(i){i=ft(i,Hn);const n=ft(i.firestore,wn),r=Gn(n),a=new wl(n);return function(i,n){const r=new ur;return i.asyncQueue.enqueueAndForget((0,le.Z)(function*(){return(a=(0,le.Z)(function*(l,h,m){try{const C=yield mm(l,h,!0),D=new AI(h,C.Gn),x=D.Io(C.documents),R=D.applyChanges(x,!1);m.resolve(R.snapshot)}catch(C){const D=cl(C,`Failed to execute query '${h} against cache`);m.reject(D)}}),function(l,h,m){return a.apply(this,arguments)})(yield LI(i),n,r);var a})),r.promise}(r,i._query).then(l=>new Ws(n,a,i,l))}(this._delegate):"server"===(null==n?void 0:n.source)?function(i){i=ft(i,Hn);const n=ft(i.firestore,wn),r=Gn(n),a=new wl(n);return UI(r,i._query,{source:"server"}).then(l=>new Ws(n,a,i,l))}(this._delegate):function(i){i=ft(i,Hn);const n=ft(i.firestore,wn),r=Gn(n),a=new wl(n);return dr(i._query),UI(r,i._query).then(l=>new Ws(n,a,i,l))}(this._delegate),r.then(a=>new h0(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...n){const r=d0(n),a=Xm(n,l=>new h0(this.firestore,new Ws(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return o0(this._delegate,r,a)}withConverter(n){return new br(this.firestore,this._delegate.withConverter(n?Il.getInstance(this.firestore,n):null))}}class db{constructor(n,r){this._firestore=n,this._delegate=r}get type(){return this._delegate.type}get doc(){return new Xf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class h0{constructor(n,r){this._firestore=n,this._delegate=r}get query(){return new br(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(n=>new Xf(this._firestore,n))}docChanges(n){return this._delegate.docChanges(n).map(r=>new db(this._firestore,r))}forEach(n,r){this._delegate.forEach(a=>{n.call(r,new Xf(this._firestore,a))})}isEqual(n){return vl(this._delegate,n._delegate)}}class bl extends br{constructor(n,r){super(n,r),this.firestore=n,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const n=this._delegate.parent;return n?new ki(this.firestore,n):null}doc(n){try{return new ki(this.firestore,void 0===n?ZE(this._delegate):ZE(this._delegate,n))}catch(r){throw Br(r,"doc()","CollectionReference.doc()")}}add(n){return function(i,n){const r=ft(i.firestore,wn),a=ZE(i),l=zf(i.converter,n);return Cl(r,[Wm(ls(i.firestore),"addDoc",a._key,l,null!==i.converter,{}).toMutation(a._key,Un.exists(!1))]).then(()=>a)}(this._delegate,n).then(r=>new ki(this.firestore,r))}isEqual(n){return vA(this._delegate,n._delegate)}withConverter(n){return new bl(this.firestore,this._delegate.withConverter(n?Il.getInstance(this.firestore,n):null))}}function Oa(i){return ft(i,Zt)}class f0{constructor(...n){this._delegate=new Bo(...n)}static documentId(){return new f0(Qn.keyField().canonicalString())}isEqual(n){return(n=(0,yt.m9)(n))instanceof Bo&&this._delegate._internalPath.isEqual(n._internalPath)}}class Pa{constructor(n){this._delegate=n}static serverTimestamp(){const n=new ml("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new Pa(n)}static delete(){const n=new qf("deleteField");return n._methodName="FieldValue.delete",new Pa(n)}static arrayUnion(...n){const r=function(...i){return new rN("arrayUnion",i)}(...n);return r._methodName="FieldValue.arrayUnion",new Pa(r)}static arrayRemove(...n){const r=function(...i){return new zI("arrayRemove",i)}(...n);return r._methodName="FieldValue.arrayRemove",new Pa(r)}static increment(n){const r=function(i){return new OA("increment",i)}(n);return r._methodName="FieldValue.increment",new Pa(r)}isEqual(n){return this._delegate.isEqual(n._delegate)}}const sS={Firestore:Qm,GeoPoint:YE,Timestamp:Vn,Blob:Qf,Transaction:Jm,WriteBatch:cb,DocumentReference:ki,DocumentSnapshot:yd,Query:br,QueryDocumentSnapshot:Xf,QuerySnapshot:h0,CollectionReference:bl,FieldPath:f0,FieldValue:Pa,setLogLevel:function(i){!function(i){Bs.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,n){i.INTERNAL.registerComponent(new yc.wA("firestore-compat",r=>((n,r)=>new Qm(n,r,new l0))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},sS)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.3")}(l_.Z);var _i=F(9765),oS=F(6682),ep=F(309),tp=F(5345);function Nn(i,n){return"function"==typeof n?r=>r.pipe(Nn((a,l)=>(0,tn.D)(i(a,l)).pipe((0,Xe.U)((h,m)=>n(a,h,l,m))))):r=>r.lift(new aS(i))}class aS{constructor(n){this.project=n}call(n,r){return r.subscribe(new p0(n,this.project))}}class p0 extends tp.Ds{constructor(n,r){super(n),this.project=r,this.index=0}_next(n){let r;const a=this.index++;try{r=this.project(n,a)}catch(l){return void this.destination.error(l)}this._innerSub(r)}_innerSub(n){const r=this.innerSubscription;r&&r.unsubscribe();const a=new tp.IY(this),l=this.destination;l.add(a),this.innerSubscription=(0,tp.ft)(n,a),this.innerSubscription!==a&&l.add(this.innerSubscription)}_complete(){const{innerSubscription:n}=this;(!n||n.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(n){this.destination.next(n)}}var uS=F(7771),g0=F(5319),hb=F(7971),lS=F(8858);class m0 extends _i.xQ{constructor(n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,a){super(),this.scheduler=a,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=n<1?1:n,this._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(n){if(!this.isStopped){const r=this._events;r.push(n),r.length>this._bufferSize&&r.shift()}super.next(n)}nextTimeWindow(n){this.isStopped||(this._events.push(new fb(this._getNow(),n)),this._trimBufferThenGetEvents()),super.next(n)}_subscribe(n){const r=this._infiniteTimeWindow,a=r?this._events:this._trimBufferThenGetEvents(),l=this.scheduler,h=a.length;let m;if(this.closed)throw new hb.N;if(this.isStopped||this.hasError?m=g0.w.EMPTY:(this.observers.push(n),m=new lS.W(this,n)),l&&n.add(n=new ep.ht(n,l)),r)for(let C=0;C<h&&!n.closed;C++)n.next(a[C]);else for(let C=0;C<h&&!n.closed;C++)n.next(a[C].value);return this.hasError?n.error(this.thrownError):this.isStopped&&n.complete(),m}_getNow(){return(this.scheduler||uS.c).now()}_trimBufferThenGetEvents(){const n=this._getNow(),r=this._bufferSize,a=this._windowTime,l=this._events,h=l.length;let m=0;for(;m<h&&!(n-l[m].time<a);)m++;return h>r&&(m=Math.max(m,h-r)),m>0&&l.splice(0,m),l}}class fb{constructor(n,r){this.time=n,this.value=r}}function y0(i,n,r){let a;return a=i&&"object"==typeof i?i:{bufferSize:i,windowTime:n,refCount:!1,scheduler:r},l=>l.lift(function({bufferSize:i=Number.POSITIVE_INFINITY,windowTime:n=Number.POSITIVE_INFINITY,refCount:r,scheduler:a}){let l,m,h=0,C=!1,D=!1;return function(R){let O;h++,!l||C?(C=!1,l=new m0(i,n,a),O=l.subscribe(this),m=R.subscribe({next($){l.next($)},error($){C=!0,l.error($)},complete(){D=!0,m=void 0,l.complete()}}),D&&(m=void 0)):O=l.subscribe(this),this.add(()=>{h--,O.unsubscribe(),O=void 0,m&&!D&&r&&0===h&&(m.unsubscribe(),m=void 0,l=void 0)})}}(a))}const _0=(()=>{function i(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return i.prototype=Object.create(Error.prototype),i})(),gb=(()=>{function i(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return i.prototype=Object.create(Error.prototype),i})();var $o=F(9193);function _d(i){return n=>0===i?(0,$o.c)():n.lift(new mb(i))}class mb{constructor(n){if(this.total=n,this.total<0)throw new gb}call(n,r){return r.subscribe(new dS(n,this.total))}}class dS extends kr.L{constructor(n,r){super(n),this.total=r,this.count=0}_next(n){const r=this.total,a=++this.count;a<=r&&(this.destination.next(n),a===r&&(this.destination.complete(),this.unsubscribe()))}}function ty(i=null){return n=>n.lift(new v0(i))}class v0{constructor(n){this.defaultValue=n}call(n,r){return r.subscribe(new hS(n,this.defaultValue))}}class hS extends kr.L{constructor(n,r){super(n),this.defaultValue=r,this.isEmpty=!0}_next(n){this.isEmpty=!1,this.destination.next(n)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function yb(i=Eb){return n=>n.lift(new _b(i))}class _b{constructor(n){this.errorFactory=n}call(n,r){return r.subscribe(new vb(n,this.errorFactory))}}class vb extends kr.L{constructor(n,r){super(n),this.errorFactory=r,this.hasValue=!1}_next(n){this.hasValue=!0,this.destination.next(n)}_complete(){if(this.hasValue)return this.destination.complete();{let n;try{n=this.errorFactory()}catch(r){n=r}this.destination.error(n)}}}function Eb(){return new _0}var wb=F(4487);function ka(i,n){const r=arguments.length>=2;return a=>a.pipe(i?qt((l,h)=>i(l,h,a)):wb.y,_d(1),r?ty(n):yb(()=>new _0))}function E0(i,n){return n?Nn(()=>i,n):Nn(()=>i)}var w0=F(3101),fS=F(7841);const Ib=new v.OlP("angularfire2.auth.use-emulator"),C0=new v.OlP("angularfire2.auth.settings"),I0=new v.OlP("angularfire2.auth.tenant-id"),b0=new v.OlP("angularfire2.auth.langugage-code"),D0=new v.OlP("angularfire2.auth.use-device-language"),bb=new v.OlP("angularfire.auth.persistence"),Db=(i,n,r,a,l,h,m,C)=>(0,fn.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const D=n.runOutsideAngular(()=>i.auth());if(r&&D.useEmulator(...r),a&&(D.tenantId=a),D.languageCode=l,h&&D.useDeviceLanguage(),m)for(const[x,R]of Object.entries(m))D.settings[x]=R;return C&&D.setPersistence(C),D},[r,a,l,h,m,C]);let Tb=(()=>{class i{constructor(r,a,l,h,m,C,D,x,R,O,$){const q=new _i.xQ,he=(0,Ye.of)(void 0).pipe((0,ep.QV)(m.outsideAngular),Nn(()=>h.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,670)))),(0,Xe.U)(()=>(0,It.on)(r,h,a)),(0,Xe.U)(De=>Db(De,h,C,x,R,O,D,$)),y0({bufferSize:1,refCount:!1}));if(Ya(l))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ye.of)(null);else{he.pipe(ka()).subscribe();const Le=he.pipe(Nn(ut=>ut.getRedirectResult().then(Mt=>Mt,()=>null)),fn.iC,y0({bufferSize:1,refCount:!1})),ct=he.pipe(Nn(ut=>new Or.y(Mt=>({unsubscribe:h.runOutsideAngular(()=>ut.onAuthStateChanged(ri=>Mt.next(ri),ri=>Mt.error(ri),()=>Mt.complete()))})))),gt=he.pipe(Nn(ut=>new Or.y(Mt=>({unsubscribe:h.runOutsideAngular(()=>ut.onIdTokenChanged(ri=>Mt.next(ri),ri=>Mt.error(ri),()=>Mt.complete()))}))));this.authState=Le.pipe(E0(ct),(0,w0.R)(m.outsideAngular),(0,ep.QV)(m.insideAngular)),this.user=Le.pipe(E0(gt),(0,w0.R)(m.outsideAngular),(0,ep.QV)(m.insideAngular)),this.idToken=this.user.pipe(Nn(ut=>ut?(0,tn.D)(ut.getIdToken()):(0,Ye.of)(null))),this.idTokenResult=this.user.pipe(Nn(ut=>ut?(0,tn.D)(ut.getIdTokenResult()):(0,Ye.of)(null))),this.credential=(0,oS.T)(Le,q,this.authState.pipe(qt(ut=>!ut))).pipe((0,Xe.U)(ut=>(null==ut?void 0:ut.user)?ut:null),(0,w0.R)(m.outsideAngular),(0,ep.QV)(m.insideAngular))}return(0,It.pX)(this,he,h,{spy:{apply:(De,Le,ct)=>{(De.startsWith("signIn")||De.startsWith("createUser"))&&ct.then(gt=>q.next(gt))}}})}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(It.Dh),v.LFG(It.xv,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(fn.HU),v.LFG(Ib,8),v.LFG(C0,8),v.LFG(I0,8),v.LFG(b0,8),v.LFG(D0,8),v.LFG(bb,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})();function gS(i,n){return function(i,n=Qp.z){return new Or.y(r=>{let a;return null!=n?n.schedule(()=>{a=i.onSnapshot({includeMetadataChanges:!0},r)}):a=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=a&&a()}})}(i,n)}function Ab(i,n){return gS(i,n).pipe((0,Xe.U)(r=>({payload:r,type:"query"})))}function T0(i,n){return Ab(i,n).pipe(da(void 0),Xp(),(0,Xe.U)(([r,a])=>{const l=a.payload.docChanges(),h=l.map(m=>({type:m.type,payload:m}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((m,C)=>{const D=l.find(R=>R.doc.ref.isEqual(m.ref)),x=null==r?void 0:r.payload.docs.find(R=>R.ref.isEqual(m.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(m.metadata)||!D&&x&&JSON.stringify(x.metadata)===JSON.stringify(m.metadata)||h.push({type:"modified",payload:{oldIndex:C,newIndex:C,type:"modified",doc:m}})}),h}))}function mS(i,n,r){return T0(i,r).pipe(Ft((a,l)=>function(i,n,r){return n.forEach(a=>{r.indexOf(a.type)>-1&&(i=function(i,n){switch(n.type){case"added":if(!i[n.newIndex]||!i[n.newIndex].doc.ref.isEqual(n.doc.ref))return Sb(i,n.newIndex,0,n);break;case"modified":if(null==i[n.oldIndex]||i[n.oldIndex].doc.ref.isEqual(n.doc.ref)){if(n.oldIndex!==n.newIndex){const r=i.slice();return r.splice(n.oldIndex,1),r.splice(n.newIndex,0,n),r}return Sb(i,n.newIndex,1,n)}break;case"removed":if(i[n.oldIndex]&&i[n.oldIndex].doc.ref.isEqual(n.doc.ref))return Sb(i,n.oldIndex,1)}return i}(i,a))}),i}(a,l.map(h=>h.payload),n),[]),r=>r.lift(new Zn(void 0,void 0)),(0,Xe.U)(a=>a.map(l=>({type:l.type,payload:l}))))}function Sb(i,n,r,...a){const l=i.slice();return l.splice(n,r,...a),l}function yS(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class _S{constructor(n,r,a){this.ref=n,this.query=r,this.afs=a}stateChanges(n){let r=T0(this.query,this.afs.schedulers.outsideAngular);return n&&n.length>0&&(r=r.pipe((0,Xe.U)(a=>a.filter(l=>n.indexOf(l.type)>-1)))),r.pipe(da(void 0),Xp(),qt(([a,l])=>l.length>0||!a),(0,Xe.U)(([a,l])=>l),fn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Ft((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=yS(n);return mS(this.query,r,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(n={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(r=>r.payload.docs.map(a=>n.idField?Object.assign(Object.assign({},a.data()),{[n.idField]:a.id}):a.data())),fn.iC)}get(n){return(0,tn.D)(this.query.get(n)).pipe(fn.iC)}add(n){return this.ref.add(n)}doc(n){return new vS(this.ref.doc(n),this.afs)}}class vS{constructor(n,r){this.ref=n,this.afs=r}set(n,r){return this.ref.set(n,r)}update(n){return this.ref.update(n)}delete(){return this.ref.delete()}collection(n,r){const a=this.ref.collection(n),{ref:l,query:h}=xb(a,r);return new _S(l,h,this.afs)}snapshotChanges(){return function(i,n){return gS(i,n).pipe(da(void 0),Xp(),(0,Xe.U)(([r,a])=>a.exists?(null==r?void 0:r.exists)?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(n={}){return this.snapshotChanges().pipe((0,Xe.U)(({payload:r})=>n.idField?Object.assign(Object.assign({},r.data()),{[n.idField]:r.id}):r.data()))}get(n){return(0,tn.D)(this.ref.get(n)).pipe(fn.iC)}}class dN{constructor(n,r){this.query=n,this.afs=r}stateChanges(n){return n&&0!==n.length?T0(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(r=>r.filter(a=>n.indexOf(a.type)>-1)),qt(r=>r.length>0),fn.iC):T0(this.query,this.afs.schedulers.outsideAngular).pipe(fn.iC)}auditTrail(n){return this.stateChanges(n).pipe(Ft((r,a)=>[...r,...a],[]))}snapshotChanges(n){const r=yS(n);return mS(this.query,r,this.afs.schedulers.outsideAngular).pipe(fn.iC)}valueChanges(n={}){return Ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(a=>a.payload.docs.map(l=>n.idField?Object.assign({[n.idField]:l.id},l.data()):l.data())),fn.iC)}get(n){return(0,tn.D)(this.query.get(n)).pipe(fn.iC)}}const ES=new v.OlP("angularfire2.enableFirestorePersistence"),wS=new v.OlP("angularfire2.firestore.persistenceSettings"),hN=new v.OlP("angularfire2.firestore.settings"),fN=new v.OlP("angularfire2.firestore.use-emulator");function xb(i,n=(r=>r)){return{query:n(i),ref:i}}let Nb=(()=>{class i{constructor(r,a,l,h,m,C,D,x,R,O,$,q,he,De,Le,ct){this.schedulers=D;const gt=(0,It.on)(r,C,a),ut=R;O&&Db(gt,C,$,he,De,Le,q,ct),[this.firestore,this.persistenceEnabled$]=(0,fn.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const Mt=C.runOutsideAngular(()=>gt.firestore());if(h&&Mt.settings(h),ut&&Mt.useEmulator(...ut),l&&!Ya(m)){const ri=()=>{try{return(0,tn.D)(Mt.enablePersistence(x||void 0).then(()=>!0,()=>!1))}catch(ND){return"undefined"!=typeof console&&console.warn(ND),(0,Ye.of)(!1)}};return[Mt,C.runOutsideAngular(ri)]}return[Mt,(0,Ye.of)(!1)]},[h,ut,l])}collection(r,a){let l;l="string"==typeof r?this.firestore.collection(r):r;const{ref:h,query:m}=xb(l,a),C=this.schedulers.ngZone.run(()=>h);return new _S(C,m,this)}collectionGroup(r,a){const l=a||(m=>m),h=this.firestore.collectionGroup(r);return new dN(l(h),this)}doc(r){let a;a="string"==typeof r?this.firestore.doc(r):r;const l=this.schedulers.ngZone.run(()=>a);return new vS(l,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(It.Dh),v.LFG(It.xv,8),v.LFG(ES,8),v.LFG(hN,8),v.LFG(v.Lbi),v.LFG(v.R0b),v.LFG(fn.HU),v.LFG(wS,8),v.LFG(fN,8),v.LFG(Tb,8),v.LFG(Ib,8),v.LFG(C0,8),v.LFG(I0,8),v.LFG(b0,8),v.LFG(D0,8),v.LFG(bb,8))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),CS=(()=>{class i{constructor(){fS.Z.registerVersion("angularfire",fn.q4.full,"fst-compat")}static enablePersistence(r){return{ngModule:i,providers:[{provide:ES,useValue:!0},{provide:wS,useValue:r}]}}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({providers:[Nb]}),i})();class zs extends _i.xQ{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const r=super._subscribe(n);return r&&!r.closed&&n.next(this._value),r}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new hb.N;return this._value}next(n){super.next(this._value=n)}}class pN extends kr.L{notifyNext(n,r,a,l,h){this.destination.next(r)}notifyError(n,r){this.destination.error(n)}notifyComplete(n){this.destination.complete()}}class gN extends kr.L{constructor(n,r,a){super(),this.parent=n,this.outerValue=r,this.outerIndex=a,this.index=0}_next(n){this.parent.notifyNext(this.outerValue,n,this.outerIndex,this.index++,this)}_error(n){this.parent.notifyError(n,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var IS=F(7444);function bS(i,n,r,a,l=new gN(i,r,a)){if(!l.closed)return n instanceof Or.y?n.subscribe(l):(0,IS.s)(n)(l)}var DS=F(6693);const TS={};class yN{constructor(n){this.resultSelector=n}call(n,r){return r.subscribe(new _N(n,this.resultSelector))}}class _N extends pN{constructor(n,r){super(n),this.resultSelector=r,this.active=0,this.values=[],this.observables=[]}_next(n){this.values.push(TS),this.observables.push(n)}_complete(){const n=this.observables,r=n.length;if(0===r)this.destination.complete();else{this.active=r,this.toRespond=r;for(let a=0;a<r;a++)this.add(bS(this,n[a],void 0,a))}}notifyComplete(n){0==(this.active-=1)&&this.destination.complete()}notifyNext(n,r,a){const l=this.values,m=this.toRespond?l[a]===TS?--this.toRespond:this.toRespond:0;l[a]=r,0===m&&(this.resultSelector?this._tryResultSelector(l):this.destination.next(l.slice()))}_tryResultSelector(n){let r;try{r=this.resultSelector.apply(this,n)}catch(a){return void this.destination.error(a)}this.destination.next(r)}}function Rb(i){return new Or.y(n=>{let r;try{r=i()}catch(l){return void n.error(l)}return(r?(0,tn.D)(r):(0,$o.c)()).subscribe(n)})}var vN=F(2441);function Dl(i){return function(r){const a=new A0(i),l=r.lift(a);return a.caught=l}}class A0{constructor(n){this.selector=n}call(n,r){return r.subscribe(new vd(n,this.selector,this.caught))}}class vd extends tp.Ds{constructor(n,r,a){super(n),this.selector=r,this.caught=a}error(n){if(!this.isStopped){let r;try{r=this.selector(n,this.caught)}catch(h){return void super.error(h)}this._unsubscribeAndRecycle();const a=new tp.IY(this);this.add(a);const l=(0,tp.ft)(r,a);l!==a&&this.add(l)}}}var Dr=F(9773);function np(i,n){return(0,Dr.zg)(i,n,1)}function S0(i){return function(r){return 0===i?(0,$o.c)():r.lift(new x0(i))}}class x0{constructor(n){if(this.total=n,this.total<0)throw new gb}call(n,r){return r.subscribe(new Mb(n,this.total))}}class Mb extends kr.L{constructor(n,r){super(n),this.total=r,this.ring=new Array,this.count=0}_next(n){const r=this.ring,a=this.total,l=this.count++;r.length<a?r.push(n):r[l%a]=n}_complete(){const n=this.destination;let r=this.count;if(r>0){const a=this.count>=this.total?this.total:this.count,l=this.ring;for(let h=0;h<a;h++){const m=r++%a;n.next(l[m])}}n.complete()}}var Xr=F(3342),EN=F(1307);class ny{constructor(n){this.callback=n}call(n,r){return r.subscribe(new kb(n,this.callback))}}class kb extends kr.L{constructor(n,r){super(n),this.add(new g0.w(r))}}class Fa{constructor(n,r){this.id=n,this.url=r}}class Fb extends Fa{constructor(n,r,a="imperative",l=null){super(n,r),this.navigationTrigger=a,this.restoredState=l}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ry extends Fa{constructor(n,r,a){super(n,r),this.urlAfterRedirects=a}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Lb extends Fa{constructor(n,r,a){super(n,r),this.reason=a}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wN extends Fa{constructor(n,r,a){super(n,r),this.error=a}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iy extends Fa{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class AS extends Fa{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CN extends Fa{constructor(n,r,a,l,h){super(n,r),this.urlAfterRedirects=a,this.state=l,this.shouldActivate=h}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IN extends Fa{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N0 extends Fa{constructor(n,r,a,l){super(n,r),this.urlAfterRedirects=a,this.state=l}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vb{constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class SS{constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bN{constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xS{constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DN{constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ub{constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bb{constructor(n,r,a){this.routerEvent=n,this.position=r,this.anchor=a}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const pt="primary";class TN{constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r[0]:r}return null}getAll(n){if(this.has(n)){const r=this.params[n];return Array.isArray(r)?r:[r]}return[]}get keys(){return Object.keys(this.params)}}function Ed(i){return new TN(i)}const wd="ngNavigationCancelingError";function R0(i){const n=Error("NavigationCancelingError: "+i);return n[wd]=!0,n}function RS(i,n,r){const a=r.path.split("/");if(a.length>i.length||"full"===r.pathMatch&&(n.hasChildren()||a.length<i.length))return null;const l={};for(let h=0;h<a.length;h++){const m=a[h],C=i[h];if(m.startsWith(":"))l[m.substring(1)]=C;else if(m!==C.path)return null}return{consumed:i.slice(0,a.length),posParams:l}}function Zs(i,n){const r=i?Object.keys(i):void 0,a=n?Object.keys(n):void 0;if(!r||!a||r.length!=a.length)return!1;let l;for(let h=0;h<r.length;h++)if(l=r[h],!ei(i[l],n[l]))return!1;return!0}function ei(i,n){if(Array.isArray(i)&&Array.isArray(n)){if(i.length!==n.length)return!1;const r=[...i].sort(),a=[...n].sort();return r.every((l,h)=>a[h]===l)}return i===n}function jb(i){return Array.prototype.concat.apply([],i)}function sy(i){return i.length>0?i[i.length-1]:null}function hr(i,n){for(const r in i)i.hasOwnProperty(r)&&n(i[r],r)}function Fi(i){return(0,v.CqO)(i)?i:(0,v.QGY)(i)?(0,tn.D)(Promise.resolve(i)):(0,Ye.of)(i)}const Hb={exact:function Wb(i,n,r){if(!Cd(i.segments,n.segments)||!rp(i.segments,n.segments,r)||i.numberOfChildren!==n.numberOfChildren)return!1;for(const a in n.children)if(!i.children[a]||!Wb(i.children[a],n.children[a],r))return!1;return!0},subset:oy},Gb={exact:function(i,n){return Zs(i,n)},subset:function(i,n){return Object.keys(n).length<=Object.keys(i).length&&Object.keys(n).every(r=>ei(i[r],n[r]))},ignored:()=>!0};function O0(i,n,r){return Hb[r.paths](i.root,n.root,r.matrixParams)&&Gb[r.queryParams](i.queryParams,n.queryParams)&&!("exact"===r.fragment&&i.fragment!==n.fragment)}function oy(i,n,r){return P0(i,n,n.segments,r)}function P0(i,n,r,a){if(i.segments.length>r.length){const l=i.segments.slice(0,r.length);return!(!Cd(l,r)||n.hasChildren()||!rp(l,r,a))}if(i.segments.length===r.length){if(!Cd(i.segments,r)||!rp(i.segments,r,a))return!1;for(const l in n.children)if(!i.children[l]||!oy(i.children[l],n.children[l],a))return!1;return!0}{const l=r.slice(0,i.segments.length),h=r.slice(i.segments.length);return!!(Cd(i.segments,l)&&rp(i.segments,l,a)&&i.children[pt])&&P0(i.children[pt],n,h,a)}}function rp(i,n,r){return n.every((a,l)=>Gb[r](i[l].parameters,a.parameters))}class Ho{constructor(n,r,a){this.root=n,this.queryParams=r,this.fragment=a}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return kS.serialize(this)}}class vt{constructor(n,r){this.segments=n,this.children=r,this.parent=null,hr(r,(a,l)=>a.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ay(this)}}class $r{constructor(n,r){this.path=n,this.parameters=r}get parameterMap(){return this._parameterMap||(this._parameterMap=Ed(this.parameters)),this._parameterMap}toString(){return LS(this)}}function Cd(i,n){return i.length===n.length&&i.every((r,a)=>r.path===n[a].path)}class zb{}class Zb{parse(n){const r=new US(n);return new Ho(r.parseRootSegment(),r.parseQueryParams(),r.parseFragment())}serialize(n){return`${`/${uy(n.root,!0)}`}${function(i){const n=Object.keys(i).map(r=>{const a=i[r];return Array.isArray(a)?a.map(l=>`${ip(r)}=${ip(l)}`).join("&"):`${ip(r)}=${ip(a)}`}).filter(r=>!!r);return n.length?`?${n.join("&")}`:""}(n.queryParams)}${"string"==typeof n.fragment?`#${function(i){return encodeURI(i)}(n.fragment)}`:""}`}}const kS=new Zb;function ay(i){return i.segments.map(n=>LS(n)).join("/")}function uy(i,n){if(!i.hasChildren())return ay(i);if(n){const r=i.children[pt]?uy(i.children[pt],!1):"",a=[];return hr(i.children,(l,h)=>{h!==pt&&a.push(`${h}:${uy(l,!1)}`)}),a.length>0?`${r}(${a.join("//")})`:r}{const r=function(i,n){let r=[];return hr(i.children,(a,l)=>{l===pt&&(r=r.concat(n(a,l)))}),hr(i.children,(a,l)=>{l!==pt&&(r=r.concat(n(a,l)))}),r}(i,(a,l)=>l===pt?[uy(i.children[pt],!1)]:[`${l}:${uy(a,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[pt]?`${ay(i)}/${r[0]}`:`${ay(i)}/(${r.join("//")})`}}function Kb(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ip(i){return Kb(i).replace(/%3B/gi,";")}function k0(i){return Kb(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sp(i){return decodeURIComponent(i)}function Yb(i){return sp(i.replace(/\+/g,"%20"))}function LS(i){return`${k0(i.path)}${function(i){return Object.keys(i).map(n=>`;${k0(n)}=${k0(i[n])}`).join("")}(i.parameters)}`}const VS=/^[^\/()?;=#]+/;function ly(i){const n=i.match(VS);return n?n[0]:""}const Xb=/^[^=?&#]+/,F0=/^[^?&#]+/;class US{constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let r={};this.peekStartsWith("/(")&&(this.capture("/"),r=this.parseParens(!0));let a={};return this.peekStartsWith("(")&&(a=this.parseParens(!1)),(n.length>0||Object.keys(r).length>0)&&(a[pt]=new vt(n,r)),a}parseSegment(){const n=ly(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(n),new $r(sp(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const r=ly(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const l=ly(this.remaining);l&&(a=l,this.capture(a))}n[sp(r)]=sp(a)}parseQueryParam(n){const r=function(i){const n=i.match(Xb);return n?n[0]:""}(this.remaining);if(!r)return;this.capture(r);let a="";if(this.consumeOptional("=")){const m=function(i){const n=i.match(F0);return n?n[0]:""}(this.remaining);m&&(a=m,this.capture(a))}const l=Yb(r),h=Yb(a);if(n.hasOwnProperty(l)){let m=n[l];Array.isArray(m)||(m=[m],n[l]=m),m.push(h)}else n[l]=h}parseParens(n){const r={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const a=ly(this.remaining),l=this.remaining[a.length];if("/"!==l&&")"!==l&&";"!==l)throw new Error(`Cannot parse url '${this.url}'`);let h;a.indexOf(":")>-1?(h=a.substr(0,a.indexOf(":")),this.capture(h),this.capture(":")):n&&(h=pt);const m=this.parseChildren();r[h]=1===Object.keys(m).length?m[pt]:new vt([],m),this.consumeOptional("//")}return r}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Error(`Expected "${n}".`)}}class tD{constructor(n){this._root=n}get root(){return this._root.value}parent(n){const r=this.pathFromRoot(n);return r.length>1?r[r.length-2]:null}children(n){const r=nD(n,this._root);return r?r.children.map(a=>a.value):[]}firstChild(n){const r=nD(n,this._root);return r&&r.children.length>0?r.children[0].value:null}siblings(n){const r=rD(n,this._root);return r.length<2?[]:r[r.length-2].children.map(l=>l.value).filter(l=>l!==n)}pathFromRoot(n){return rD(n,this._root).map(r=>r.value)}}function nD(i,n){if(i===n.value)return n;for(const r of n.children){const a=nD(i,r);if(a)return a}return null}function rD(i,n){if(i===n.value)return[n];for(const r of n.children){const a=rD(i,r);if(a.length)return a.unshift(n),a}return[]}class La{constructor(n,r){this.value=n,this.children=r}toString(){return`TreeNode(${this.value})`}}function Id(i){const n={};return i&&i.children.forEach(r=>n[r.value.outlet]=r),n}class L0 extends tD{constructor(n,r){super(n),this.snapshot=r,U0(this,n)}toString(){return this.snapshot.toString()}}function iD(i,n){const r=function(i,n){const m=new V0([],{},{},"",{},pt,n,null,i.root,-1,{});return new jS("",new La(m,[]))}(i,n),a=new zs([new $r("",{})]),l=new zs({}),h=new zs({}),m=new zs({}),C=new zs(""),D=new bd(a,l,m,C,h,pt,n,r.root);return D.snapshot=r.root,new L0(new La(D,[]),r)}class bd{constructor(n,r,a,l,h,m,C,D){this.url=n,this.params=r,this.queryParams=a,this.fragment=l,this.data=h,this.outlet=m,this.component=C,this._futureSnapshot=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(n=>Ed(n)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(n=>Ed(n)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sD(i,n="emptyOnly"){const r=i.pathFromRoot;let a=0;if("always"!==n)for(a=r.length-1;a>=1;){const l=r[a],h=r[a-1];if(l.routeConfig&&""===l.routeConfig.path)a--;else{if(h.component)break;a--}}return function(i){return i.reduce((n,r)=>({params:Object.assign(Object.assign({},n.params),r.params),data:Object.assign(Object.assign({},n.data),r.data),resolve:Object.assign(Object.assign({},n.resolve),r._resolvedData)}),{params:{},data:{},resolve:{}})}(r.slice(a))}class V0{constructor(n,r,a,l,h,m,C,D,x,R,O){this.url=n,this.params=r,this.queryParams=a,this.fragment=l,this.data=h,this.outlet=m,this.component=C,this.routeConfig=D,this._urlSegment=x,this._lastPathIndex=R,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ed(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ed(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(a=>a.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jS extends tD{constructor(n,r){super(r),this.url=n,U0(this,r)}toString(){return cy(this._root)}}function U0(i,n){n.value._routerState=i,n.children.forEach(r=>U0(i,r))}function cy(i){const n=i.children.length>0?` { ${i.children.map(cy).join(", ")} } `:"";return`${i.value}${n}`}function Rn(i){if(i.snapshot){const n=i.snapshot,r=i._futureSnapshot;i.snapshot=r,Zs(n.queryParams,r.queryParams)||i.queryParams.next(r.queryParams),n.fragment!==r.fragment&&i.fragment.next(r.fragment),Zs(n.params,r.params)||i.params.next(r.params),function(i,n){if(i.length!==n.length)return!1;for(let r=0;r<i.length;++r)if(!Zs(i[r],n[r]))return!1;return!0}(n.url,r.url)||i.url.next(r.url),Zs(n.data,r.data)||i.data.next(r.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function aD(i,n){return Zs(i.params,n.params)&&function(i,n){return Cd(i,n)&&i.every((r,a)=>Zs(r.parameters,n[a].parameters))}(i.url,n.url)&&!(!i.parent!=!n.parent)&&(!i.parent||aD(i.parent,n.parent))}function ap(i,n,r){if(r&&i.shouldReuseRoute(n.value,r.value.snapshot)){const a=r.value;a._futureSnapshot=n.value;const l=function(i,n,r){return n.children.map(a=>{for(const l of r.children)if(i.shouldReuseRoute(a.value,l.value.snapshot))return ap(i,a,l);return ap(i,a)})}(i,n,r);return new La(a,l)}{if(i.shouldAttach(n.value)){const h=i.retrieve(n.value);if(null!==h){const m=h.route;return lD(n,m),m}}const a=function(i){return new bd(new zs(i.url),new zs(i.params),new zs(i.queryParams),new zs(i.fragment),new zs(i.data),i.outlet,i.component,i)}(n.value),l=n.children.map(h=>ap(i,h));return new La(a,l)}}function lD(i,n){if(i.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(i.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=i.value;for(let r=0;r<i.children.length;++r)lD(i.children[r],n.children[r])}function up(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function cs(i){return"object"==typeof i&&null!=i&&i.outlets}function hy(i,n,r,a,l){let h={};return a&&hr(a,(m,C)=>{h[C]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),new Ho(r.root===i?n:fy(r.root,i,n),h,l)}function fy(i,n,r){const a={};return hr(i.children,(l,h)=>{a[h]=l===n?r:fy(l,n,r)}),new vt(i.segments,a)}class py{constructor(n,r,a){if(this.isAbsolute=n,this.numberOfDoubleDots=r,this.commands=a,n&&a.length>0&&up(a[0]))throw new Error("Root segment cannot have matrix parameters");const l=a.find(cs);if(l&&l!==sy(a))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Dd{constructor(n,r,a){this.segmentGroup=n,this.processChildren=r,this.index=a}}function qn(i,n,r){if(i||(i=new vt([],{})),0===i.segments.length&&i.hasChildren())return j0(i,n,r);const a=function(i,n,r){let a=0,l=n;const h={match:!1,pathIndex:0,commandIndex:0};for(;l<i.segments.length;){if(a>=r.length)return h;const m=i.segments[l],C=r[a];if(cs(C))break;const D=`${C}`,x=a<r.length-1?r[a+1]:null;if(l>0&&void 0===D)break;if(D&&x&&"object"==typeof x&&void 0===x.outlets){if(!dD(D,x,m))return h;a+=2}else{if(!dD(D,{},m))return h;a++}l++}return{match:!0,pathIndex:l,commandIndex:a}}(i,n,r),l=r.slice(a.commandIndex);if(a.match&&a.pathIndex<i.segments.length){const h=new vt(i.segments.slice(0,a.pathIndex),{});return h.children[pt]=new vt(i.segments.slice(a.pathIndex),i.children),j0(h,0,l)}return a.match&&0===l.length?new vt(i.segments,{}):a.match&&!i.hasChildren()?$0(i,n,r):a.match?j0(i,0,l):$0(i,n,r)}function j0(i,n,r){if(0===r.length)return new vt(i.segments,{});{const a=function(i){return cs(i[0])?i[0].outlets:{[pt]:i}}(r),l={};return hr(a,(h,m)=>{"string"==typeof h&&(h=[h]),null!==h&&(l[m]=qn(i.children[m],n,h))}),hr(i.children,(h,m)=>{void 0===a[m]&&(l[m]=h)}),new vt(i.segments,l)}}function $0(i,n,r){const a=i.segments.slice(0,n);let l=0;for(;l<r.length;){const h=r[l];if(cs(h)){const D=SN(h.outlets);return new vt(a,D)}if(0===l&&up(r[0])){a.push(new $r(i.segments[n].path,lp(r[0]))),l++;continue}const m=cs(h)?h.outlets[pt]:`${h}`,C=l<r.length-1?r[l+1]:null;m&&C&&up(C)?(a.push(new $r(m,lp(C))),l+=2):(a.push(new $r(m,{})),l++)}return new vt(a,{})}function SN(i){const n={};return hr(i,(r,a)=>{"string"==typeof r&&(r=[r]),null!==r&&(n[a]=$0(new vt([],{}),0,r))}),n}function lp(i){const n={};return hr(i,(r,a)=>n[a]=`${r}`),n}function dD(i,n,r){return i==r.path&&Zs(n,r.parameters)}class NN{constructor(n,r,a,l){this.routeReuseStrategy=n,this.futureState=r,this.currState=a,this.forwardEvent=l}activate(n){const r=this.futureState._root,a=this.currState?this.currState._root:null;this.deactivateChildRoutes(r,a,n),Rn(this.futureState.root),this.activateChildRoutes(r,a,n)}deactivateChildRoutes(n,r,a){const l=Id(r);n.children.forEach(h=>{const m=h.value.outlet;this.deactivateRoutes(h,l[m],a),delete l[m]}),hr(l,(h,m)=>{this.deactivateRouteAndItsChildren(h,a)})}deactivateRoutes(n,r,a){const l=n.value,h=r?r.value:null;if(l===h)if(l.component){const m=a.getContext(l.outlet);m&&this.deactivateChildRoutes(n,r,m.children)}else this.deactivateChildRoutes(n,r,a);else h&&this.deactivateRouteAndItsChildren(r,a)}deactivateRouteAndItsChildren(n,r){this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,r):this.deactivateRouteAndOutlet(n,r)}detachAndStoreRouteSubtree(n,r){const a=r.getContext(n.value.outlet);if(a&&a.outlet){const l=a.outlet.detach(),h=a.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:l,route:n,contexts:h})}}deactivateRouteAndOutlet(n,r){const a=r.getContext(n.value.outlet),l=a&&n.value.component?a.children:r,h=Id(n);for(const m of Object.keys(h))this.deactivateRouteAndItsChildren(h[m],l);a&&a.outlet&&(a.outlet.deactivate(),a.children.onOutletDeactivated(),a.attachRef=null,a.resolver=null,a.route=null)}activateChildRoutes(n,r,a){const l=Id(r);n.children.forEach(h=>{this.activateRoutes(h,l[h.value.outlet],a),this.forwardEvent(new Ub(h.value.snapshot))}),n.children.length&&this.forwardEvent(new xS(n.value.snapshot))}activateRoutes(n,r,a){const l=n.value,h=r?r.value:null;if(Rn(l),l===h)if(l.component){const m=a.getOrCreateContext(l.outlet);this.activateChildRoutes(n,r,m.children)}else this.activateChildRoutes(n,r,a);else if(l.component){const m=a.getOrCreateContext(l.outlet);if(this.routeReuseStrategy.shouldAttach(l.snapshot)){const C=this.routeReuseStrategy.retrieve(l.snapshot);this.routeReuseStrategy.store(l.snapshot,null),m.children.onOutletReAttached(C.contexts),m.attachRef=C.componentRef,m.route=C.route.value,m.outlet&&m.outlet.attach(C.componentRef,C.route.value),zS(C.route)}else{const C=function(i){for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig;if(r&&r.component)return null}return null}(l.snapshot),D=C?C.module.componentFactoryResolver:null;m.attachRef=null,m.route=l,m.resolver=D,m.outlet&&m.outlet.activateWith(l,D),this.activateChildRoutes(n,null,m.children)}}else this.activateChildRoutes(n,null,a)}}function zS(i){Rn(i.value),i.children.forEach(zS)}class H0{constructor(n,r){this.routes=n,this.module=r}}function Va(i){return"function"==typeof i}function Tl(i){return i instanceof Ho}const gy=Symbol("INITIAL_VALUE");function my(){return Nn(i=>function(...i){let n,r;return(0,Jp.K)(i[i.length-1])&&(r=i.pop()),"function"==typeof i[i.length-1]&&(n=i.pop()),1===i.length&&(0,Zl.k)(i[0])&&(i=i[0]),(0,DS.n)(i,r).lift(new yN(n))}(i.map(n=>n.pipe(_d(1),da(gy)))).pipe(Ft((n,r)=>{let a=!1;return r.reduce((l,h,m)=>l!==gy?l:(h===gy&&(a=!0),a||!1!==h&&m!==r.length-1&&!Tl(h)?l:h),n)},gy),qt(n=>n!==gy),(0,Xe.U)(n=>Tl(n)?n:!0===n),_d(1)))}let hD=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(r,a){1&r&&v._UZ(0,"router-outlet")},directives:function(){return[nw]},encapsulation:2}),i})();function fD(i,n=""){for(let r=0;r<i.length;r++){const a=i[r];XS(a,ex(n,a))}}function XS(i,n){i.children&&fD(i.children,n)}function ex(i,n){return n?i||n.path?i&&!n.path?`${i}/`:!i&&n.path?n.path:`${i}/${n.path}`:"":i}function G0(i){const n=i.children&&i.children.map(G0),r=n?Object.assign(Object.assign({},i),{children:n}):Object.assign({},i);return!r.component&&(n||r.loadChildren)&&r.outlet&&r.outlet!==pt&&(r.component=hD),r}function Cn(i){return i.outlet||pt}function pD(i,n){const r=i.filter(a=>Cn(a)===n);return r.push(...i.filter(a=>Cn(a)!==n)),r}const gD={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function yy(i,n,r){var a;if(""===n.path)return"full"===n.pathMatch&&(i.hasChildren()||r.length>0)?Object.assign({},gD):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const h=(n.matcher||RS)(r,i,n);if(!h)return Object.assign({},gD);const m={};hr(h.posParams,(D,x)=>{m[x]=D.path});const C=h.consumed.length>0?Object.assign(Object.assign({},m),h.consumed[h.consumed.length-1].parameters):m;return{matched:!0,consumedSegments:h.consumed,lastChild:h.consumed.length,parameters:C,positionalParamSegments:null!==(a=h.posParams)&&void 0!==a?a:{}}}function _y(i,n,r,a,l="corrected"){if(r.length>0&&function(i,n,r){return r.some(a=>Ua(i,n,a)&&Cn(a)!==pt)}(i,r,a)){const m=new vt(n,function(i,n,r,a){const l={};l[pt]=a,a._sourceSegment=i,a._segmentIndexShift=n.length;for(const h of r)if(""===h.path&&Cn(h)!==pt){const m=new vt([],{});m._sourceSegment=i,m._segmentIndexShift=n.length,l[Cn(h)]=m}return l}(i,n,a,new vt(r,i.children)));return m._sourceSegment=i,m._segmentIndexShift=n.length,{segmentGroup:m,slicedSegments:[]}}if(0===r.length&&function(i,n,r){return r.some(a=>Ua(i,n,a))}(i,r,a)){const m=new vt(i.segments,function(i,n,r,a,l,h){const m={};for(const C of a)if(Ua(i,r,C)&&!l[Cn(C)]){const D=new vt([],{});D._sourceSegment=i,D._segmentIndexShift="legacy"===h?i.segments.length:n.length,m[Cn(C)]=D}return Object.assign(Object.assign({},l),m)}(i,n,r,a,i.children,l));return m._sourceSegment=i,m._segmentIndexShift=n.length,{segmentGroup:m,slicedSegments:r}}const h=new vt(i.segments,i.children);return h._sourceSegment=i,h._segmentIndexShift=n.length,{segmentGroup:h,slicedSegments:r}}function Ua(i,n,r){return(!(i.hasChildren()||n.length>0)||"full"!==r.pathMatch)&&""===r.path}function q0(i,n,r,a){return!!(Cn(i)===a||a!==pt&&Ua(n,r,i))&&("**"===i.path||yy(n,i,r).matched)}function ix(i,n,r){return 0===n.length&&!i.children[r]}class cp{constructor(n){this.segmentGroup=n||null}}class sx{constructor(n){this.urlTree=n}}function W0(i){return new Or.y(n=>n.error(new cp(i)))}function ox(i){return new Or.y(n=>n.error(new sx(i)))}function z0(i){return new Or.y(n=>n.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${i}'`)))}class lx{constructor(n,r,a,l,h){this.configLoader=r,this.urlSerializer=a,this.urlTree=l,this.config=h,this.allowRedirects=!0,this.ngModule=n.get(v.h0i)}apply(){const n=_y(this.urlTree.root,[],[],this.config).segmentGroup,r=new vt(n.segments,n.children);return this.expandSegmentGroup(this.ngModule,this.config,r,pt).pipe((0,Xe.U)(h=>this.createUrlTree(Z0(h),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Dl(h=>{if(h instanceof sx)return this.allowRedirects=!1,this.match(h.urlTree);throw h instanceof cp?this.noMatchError(h):h}))}match(n){return this.expandSegmentGroup(this.ngModule,this.config,n.root,pt).pipe((0,Xe.U)(l=>this.createUrlTree(Z0(l),n.queryParams,n.fragment))).pipe(Dl(l=>{throw l instanceof cp?this.noMatchError(l):l}))}noMatchError(n){return new Error(`Cannot match any routes. URL Segment: '${n.segmentGroup}'`)}createUrlTree(n,r,a){const l=n.segments.length>0?new vt([],{[pt]:n}):n;return new Ho(l,r,a)}expandSegmentGroup(n,r,a,l){return 0===a.segments.length&&a.hasChildren()?this.expandChildren(n,r,a).pipe((0,Xe.U)(h=>new vt([],h))):this.expandSegment(n,a,r,a.segments,l,!0)}expandChildren(n,r,a){const l=[];for(const h of Object.keys(a.children))"primary"===h?l.unshift(h):l.push(h);return(0,tn.D)(l).pipe(np(h=>{const m=a.children[h],C=pD(r,h);return this.expandSegmentGroup(n,C,m,h).pipe((0,Xe.U)(D=>({segment:D,outlet:h})))}),Ft((h,m)=>(h[m.outlet]=m.segment,h),{}),function(i,n){const r=arguments.length>=2;return a=>a.pipe(i?qt((l,h)=>i(l,h,a)):wb.y,S0(1),r?ty(n):yb(()=>new _0))}())}expandSegment(n,r,a,l,h,m){return(0,tn.D)(a).pipe(np(C=>this.expandSegmentAgainstRoute(n,r,a,C,l,h,m).pipe(Dl(x=>{if(x instanceof cp)return(0,Ye.of)(null);throw x}))),ka(C=>!!C),Dl((C,D)=>{if(C instanceof _0||"EmptyError"===C.name){if(ix(r,l,h))return(0,Ye.of)(new vt([],{}));throw new cp(r)}throw C}))}expandSegmentAgainstRoute(n,r,a,l,h,m,C){return q0(l,r,h,m)?void 0===l.redirectTo?this.matchSegmentAgainstRoute(n,r,l,h,m):C&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(n,r,a,l,h,m):W0(r):W0(r)}expandSegmentAgainstRouteUsingRedirect(n,r,a,l,h,m){return"**"===l.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(n,a,l,m):this.expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,l,h,m)}expandWildCardWithParamsAgainstRouteUsingRedirect(n,r,a,l){const h=this.applyRedirectCommands([],a.redirectTo,{});return a.redirectTo.startsWith("/")?ox(h):this.lineralizeSegments(a,h).pipe((0,Dr.zg)(m=>{const C=new vt(m,{});return this.expandSegment(n,C,r,m,l,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(n,r,a,l,h,m){const{matched:C,consumedSegments:D,lastChild:x,positionalParamSegments:R}=yy(r,l,h);if(!C)return W0(r);const O=this.applyRedirectCommands(D,l.redirectTo,R);return l.redirectTo.startsWith("/")?ox(O):this.lineralizeSegments(l,O).pipe((0,Dr.zg)($=>this.expandSegment(n,r,a,$.concat(h.slice(x)),m,!1)))}matchSegmentAgainstRoute(n,r,a,l,h){if("**"===a.path)return a.loadChildren?(a._loadedConfig?(0,Ye.of)(a._loadedConfig):this.configLoader.load(n.injector,a)).pipe((0,Xe.U)($=>(a._loadedConfig=$,new vt(l,{})))):(0,Ye.of)(new vt(l,{}));const{matched:m,consumedSegments:C,lastChild:D}=yy(r,a,l);if(!m)return W0(r);const x=l.slice(D);return this.getChildConfig(n,a,l).pipe((0,Dr.zg)(O=>{const $=O.module,q=O.routes,{segmentGroup:he,slicedSegments:De}=_y(r,C,x,q),Le=new vt(he.segments,he.children);if(0===De.length&&Le.hasChildren())return this.expandChildren($,q,Le).pipe((0,Xe.U)(Mt=>new vt(C,Mt)));if(0===q.length&&0===De.length)return(0,Ye.of)(new vt(C,{}));const ct=Cn(a)===h;return this.expandSegment($,Le,q,De,ct?pt:h,!0).pipe((0,Xe.U)(ut=>new vt(C.concat(ut.segments),ut.children)))}))}getChildConfig(n,r,a){return r.children?(0,Ye.of)(new H0(r.children,n)):r.loadChildren?void 0!==r._loadedConfig?(0,Ye.of)(r._loadedConfig):this.runCanLoadGuards(n.injector,r,a).pipe((0,Dr.zg)(l=>l?this.configLoader.load(n.injector,r).pipe((0,Xe.U)(h=>(r._loadedConfig=h,h))):function(i){return new Or.y(n=>n.error(R0(`Cannot load children because the guard of the route "path: '${i.path}'" returned false`)))}(r))):(0,Ye.of)(new H0([],n))}runCanLoadGuards(n,r,a){const l=r.canLoad;if(!l||0===l.length)return(0,Ye.of)(!0);const h=l.map(m=>{const C=n.get(m);let D;if(function(i){return i&&Va(i.canLoad)}(C))D=C.canLoad(r,a);else{if(!Va(C))throw new Error("Invalid CanLoad guard");D=C(r,a)}return Fi(D)});return(0,Ye.of)(h).pipe(my(),(0,Xr.b)(m=>{if(!Tl(m))return;const C=R0(`Redirecting to "${this.urlSerializer.serialize(m)}"`);throw C.url=m,C}),(0,Xe.U)(m=>!0===m))}lineralizeSegments(n,r){let a=[],l=r.root;for(;;){if(a=a.concat(l.segments),0===l.numberOfChildren)return(0,Ye.of)(a);if(l.numberOfChildren>1||!l.children[pt])return z0(n.redirectTo);l=l.children[pt]}}applyRedirectCommands(n,r,a){return this.applyRedirectCreatreUrlTree(r,this.urlSerializer.parse(r),n,a)}applyRedirectCreatreUrlTree(n,r,a,l){const h=this.createSegmentGroup(n,r.root,a,l);return new Ho(h,this.createQueryParams(r.queryParams,this.urlTree.queryParams),r.fragment)}createQueryParams(n,r){const a={};return hr(n,(l,h)=>{if("string"==typeof l&&l.startsWith(":")){const C=l.substring(1);a[h]=r[C]}else a[h]=l}),a}createSegmentGroup(n,r,a,l){const h=this.createSegments(n,r.segments,a,l);let m={};return hr(r.children,(C,D)=>{m[D]=this.createSegmentGroup(n,C,a,l)}),new vt(h,m)}createSegments(n,r,a,l){return r.map(h=>h.path.startsWith(":")?this.findPosParam(n,h,l):this.findOrReturn(h,a))}findPosParam(n,r,a){const l=a[r.path.substring(1)];if(!l)throw new Error(`Cannot redirect to '${n}'. Cannot find '${r.path}'.`);return l}findOrReturn(n,r){let a=0;for(const l of r){if(l.path===n.path)return r.splice(a),l;a++}return n}}function Z0(i){const n={};for(const a of Object.keys(i.children)){const h=Z0(i.children[a]);(h.segments.length>0||h.hasChildren())&&(n[a]=h)}return function(i){if(1===i.numberOfChildren&&i.children[pt]){const n=i.children[pt];return new vt(i.segments.concat(n.segments),n.children)}return i}(new vt(i.segments,n))}class mD{constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class ti{constructor(n,r){this.component=n,this.route=r}}function PN(i,n,r){const a=i._root;return Td(a,n?n._root:null,r,[a.value])}function vy(i,n,r){const a=function(i){if(!i)return null;for(let n=i.parent;n;n=n.parent){const r=n.routeConfig;if(r&&r._loadedConfig)return r._loadedConfig}return null}(n);return(a?a.module.injector:r).get(i)}function Td(i,n,r,a,l={canDeactivateChecks:[],canActivateChecks:[]}){const h=Id(n);return i.children.forEach(m=>{(function(i,n,r,a,l={canDeactivateChecks:[],canActivateChecks:[]}){const h=i.value,m=n?n.value:null,C=r?r.getContext(i.value.outlet):null;if(m&&h.routeConfig===m.routeConfig){const D=function(i,n,r){if("function"==typeof r)return r(i,n);switch(r){case"pathParamsChange":return!Cd(i.url,n.url);case"pathParamsOrQueryParamsChange":return!Cd(i.url,n.url)||!Zs(i.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!aD(i,n)||!Zs(i.queryParams,n.queryParams);case"paramsChange":default:return!aD(i,n)}}(m,h,h.routeConfig.runGuardsAndResolvers);D?l.canActivateChecks.push(new mD(a)):(h.data=m.data,h._resolvedData=m._resolvedData),Td(i,n,h.component?C?C.children:null:r,a,l),D&&C&&C.outlet&&C.outlet.isActivated&&l.canDeactivateChecks.push(new ti(C.outlet.component,m))}else m&&Al(n,C,l),l.canActivateChecks.push(new mD(a)),Td(i,null,h.component?C?C.children:null:r,a,l)})(m,h[m.value.outlet],r,a.concat([m.value]),l),delete h[m.value.outlet]}),hr(h,(m,C)=>Al(m,r.getContext(C),l)),l}function Al(i,n,r){const a=Id(i),l=i.value;hr(a,(h,m)=>{Al(h,l.component?n?n.children.getContext(m):null:n,r)}),r.canDeactivateChecks.push(new ti(l.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,l))}class fx{}function ID(i){return new Or.y(n=>n.error(i))}class Q0{constructor(n,r,a,l,h,m){this.rootComponentType=n,this.config=r,this.urlTree=a,this.url=l,this.paramsInheritanceStrategy=h,this.relativeLinkResolution=m}recognize(){const n=_y(this.urlTree.root,[],[],this.config.filter(m=>void 0===m.redirectTo),this.relativeLinkResolution).segmentGroup,r=this.processSegmentGroup(this.config,n,pt);if(null===r)return null;const a=new V0([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},pt,this.rootComponentType,null,this.urlTree.root,-1,{}),l=new La(a,r),h=new jS(this.url,l);return this.inheritParamsAndData(h._root),h}inheritParamsAndData(n){const r=n.value,a=sD(r,this.paramsInheritanceStrategy);r.params=Object.freeze(a.params),r.data=Object.freeze(a.data),n.children.forEach(l=>this.inheritParamsAndData(l))}processSegmentGroup(n,r,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,r):this.processSegment(n,r,r.segments,a)}processChildren(n,r){const a=[];for(const h of Object.keys(r.children)){const m=r.children[h],C=pD(n,h),D=this.processSegmentGroup(C,m,h);if(null===D)return null;a.push(...D)}const l=hp(a);return function(i){i.sort((n,r)=>n.value.outlet===pt?-1:r.value.outlet===pt?1:n.value.outlet.localeCompare(r.value.outlet))}(l),l}processSegment(n,r,a,l){for(const h of n){const m=this.processSegmentAgainstRoute(h,r,a,l);if(null!==m)return m}return ix(r,a,l)?[]:null}processSegmentAgainstRoute(n,r,a,l){if(n.redirectTo||!q0(n,r,a,l))return null;let h,m=[],C=[];if("**"===n.path){const q=a.length>0?sy(a).parameters:{};h=new V0(a,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,J0(n),Cn(n),n.component,n,fp(r),Cy(r)+a.length,pp(n))}else{const q=yy(r,n,a);if(!q.matched)return null;m=q.consumedSegments,C=a.slice(q.lastChild),h=new V0(m,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,J0(n),Cn(n),n.component,n,fp(r),Cy(r)+m.length,pp(n))}const D=function(i){return i.children?i.children:i.loadChildren?i._loadedConfig.routes:[]}(n),{segmentGroup:x,slicedSegments:R}=_y(r,m,C,D.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);if(0===R.length&&x.hasChildren()){const q=this.processChildren(D,x);return null===q?null:[new La(h,q)]}if(0===D.length&&0===R.length)return[new La(h,[])];const O=Cn(n)===l,$=this.processSegment(D,x,R,O?pt:l);return null===$?null:[new La(h,$)]}}function dp(i){const n=i.value.routeConfig;return n&&""===n.path&&void 0===n.redirectTo}function hp(i){const n=[],r=new Set;for(const a of i){if(!dp(a)){n.push(a);continue}const l=n.find(h=>a.value.routeConfig===h.value.routeConfig);void 0!==l?(l.children.push(...a.children),r.add(l)):n.push(a)}for(const a of r){const l=hp(a.children);n.push(new La(a.value,l))}return n.filter(a=>!r.has(a))}function fp(i){let n=i;for(;n._sourceSegment;)n=n._sourceSegment;return n}function Cy(i){let n=i,r=n._segmentIndexShift?n._segmentIndexShift:0;for(;n._sourceSegment;)n=n._sourceSegment,r+=n._segmentIndexShift?n._segmentIndexShift:0;return r-1}function J0(i){return i.data||{}}function pp(i){return i.resolve||{}}function X0(i){return Nn(n=>{const r=i(n);return r?(0,tn.D)(r).pipe((0,Xe.U)(()=>n)):(0,Ye.of)(n)})}class Ba extends class{shouldDetach(n){return!1}store(n,r){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,r){return n.routeConfig===r.routeConfig}}{}const Sl=new v.OlP("ROUTES");class Iy{constructor(n,r,a,l){this.loader=n,this.compiler=r,this.onLoadStartListener=a,this.onLoadEndListener=l}load(n,r){if(r._loader$)return r._loader$;this.onLoadStartListener&&this.onLoadStartListener(r);const l=this.loadModuleFactory(r.loadChildren).pipe((0,Xe.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);const m=h.create(n);return new H0(jb(m.injector.get(Sl,void 0,v.XFs.Self|v.XFs.Optional)).map(G0),m)}),Dl(h=>{throw r._loader$=void 0,h}));return r._loader$=new vN.c(l,()=>new _i.xQ).pipe((0,EN.x)()),r._loader$}loadModuleFactory(n){return"string"==typeof n?(0,tn.D)(this.loader.load(n)):Fi(n()).pipe((0,Dr.zg)(r=>r instanceof v.YKP?(0,Ye.of)(r):(0,tn.D)(this.compiler.compileModuleAsync(r))))}}class Ix{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ad,this.attachRef=null}}class Ad{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const a=this.getOrCreateContext(n);a.outlet=r,this.contexts.set(n,a)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Ix,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}class ew{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}}function Dx(i){throw i}function DD(i,n,r){return n.parse("/")}function tw(i,n){return(0,Ye.of)(null)}const Tx={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ax={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ni=(()=>{class i{constructor(r,a,l,h,m,C,D,x){this.rootComponentType=r,this.urlSerializer=a,this.rootContexts=l,this.location=h,this.config=x,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _i.xQ,this.errorHandler=Dx,this.malformedUriErrorHandler=DD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tw,afterPreactivation:tw},this.urlHandlingStrategy=new ew,this.routeReuseStrategy=new Ba,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=m.get(v.h0i),this.console=m.get(v.c2e);const $=m.get(v.R0b);this.isNgZoneEnabled=$ instanceof v.R0b&&v.R0b.isInAngularZone(),this.resetConfig(x),this.currentUrlTree=new Ho(new vt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Iy(C,D,q=>this.triggerEvent(new Vb(q)),q=>this.triggerEvent(new SS(q))),this.routerState=iD(this.currentUrlTree,this.rootComponentType),this.transitions=new zs({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var r;return null===(r=this.location.getState())||void 0===r?void 0:r.\u0275routerPageId}setupNavigations(r){const a=this.events;return r.pipe(qt(l=>0!==l.id),(0,Xe.U)(l=>Object.assign(Object.assign({},l),{extractedUrl:this.urlHandlingStrategy.extract(l.rawUrl)})),Nn(l=>{let h=!1,m=!1;return(0,Ye.of)(l).pipe((0,Xr.b)(C=>{this.currentNavigation={id:C.id,initialUrl:C.currentRawUrl,extractedUrl:C.extractedUrl,trigger:C.source,extras:C.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Nn(C=>{const D=this.browserUrlTree.toString(),x=!this.navigated||C.extractedUrl.toString()!==D||D!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||x)&&this.urlHandlingStrategy.shouldProcessUrl(C.rawUrl))return ja(C.source)&&(this.browserUrlTree=C.extractedUrl),(0,Ye.of)(C).pipe(Nn(O=>{const $=this.transitions.getValue();return a.next(new Fb(O.id,this.serializeUrl(O.extractedUrl),O.source,O.restoredState)),$!==this.transitions.getValue()?$o.E:Promise.resolve(O)}),function(i,n,r,a){return Nn(l=>function(i,n,r,a,l){return new lx(i,n,r,a,l).apply()}(i,n,r,l.extractedUrl,a).pipe((0,Xe.U)(h=>Object.assign(Object.assign({},l),{urlAfterRedirects:h}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Xr.b)(O=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:O.urlAfterRedirects})}),function(i,n,r,a,l){return(0,Dr.zg)(h=>function(i,n,r,a,l="emptyOnly",h="legacy"){try{const m=new Q0(i,n,r,a,l,h).recognize();return null===m?ID(new fx):(0,Ye.of)(m)}catch(m){return ID(m)}}(i,n,h.urlAfterRedirects,r(h.urlAfterRedirects),a,l).pipe((0,Xe.U)(m=>Object.assign(Object.assign({},h),{targetSnapshot:m}))))}(this.rootComponentType,this.config,O=>this.serializeUrl(O),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Xr.b)(O=>{"eager"===this.urlUpdateStrategy&&(O.extras.skipLocationChange||this.setBrowserUrl(O.urlAfterRedirects,O),this.browserUrlTree=O.urlAfterRedirects);const $=new iy(O.id,this.serializeUrl(O.extractedUrl),this.serializeUrl(O.urlAfterRedirects),O.targetSnapshot);a.next($)}));if(x&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:$,extractedUrl:q,source:he,restoredState:De,extras:Le}=C,ct=new Fb($,this.serializeUrl(q),he,De);a.next(ct);const gt=iD(q,this.rootComponentType).snapshot;return(0,Ye.of)(Object.assign(Object.assign({},C),{targetSnapshot:gt,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Le),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=C.rawUrl,this.browserUrlTree=C.urlAfterRedirects,C.resolve(null),$o.E}),X0(C=>{const{targetSnapshot:D,id:x,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:$,replaceUrl:q}}=C;return this.hooks.beforePreactivation(D,{navigationId:x,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!$,replaceUrl:!!q})}),(0,Xr.b)(C=>{const D=new AS(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot);this.triggerEvent(D)}),(0,Xe.U)(C=>Object.assign(Object.assign({},C),{guards:PN(C.targetSnapshot,C.currentSnapshot,this.rootContexts)})),function(i,n){return(0,Dr.zg)(r=>{const{targetSnapshot:a,currentSnapshot:l,guards:{canActivateChecks:h,canDeactivateChecks:m}}=r;return 0===m.length&&0===h.length?(0,Ye.of)(Object.assign(Object.assign({},r),{guardsResult:!0})):function(i,n,r,a){return(0,tn.D)(i).pipe((0,Dr.zg)(l=>function(i,n,r,a,l){const h=n&&n.routeConfig?n.routeConfig.canDeactivate:null;if(!h||0===h.length)return(0,Ye.of)(!0);const m=h.map(C=>{const D=vy(C,n,l);let x;if(function(i){return i&&Va(i.canDeactivate)}(D))x=Fi(D.canDeactivate(i,n,r,a));else{if(!Va(D))throw new Error("Invalid CanDeactivate guard");x=Fi(D(i,n,r,a))}return x.pipe(ka())});return(0,Ye.of)(m).pipe(my())}(l.component,l.route,r,n,a)),ka(l=>!0!==l,!0))}(m,a,l,i).pipe((0,Dr.zg)(C=>C&&function(i){return"boolean"==typeof i}(C)?function(i,n,r,a){return(0,tn.D)(n).pipe(np(l=>gc(function(i,n){return null!==i&&n&&n(new bN(i)),(0,Ye.of)(!0)}(l.route.parent,a),function(i,n){return null!==i&&n&&n(new DN(i)),(0,Ye.of)(!0)}(l.route,a),function(i,n,r){const a=n[n.length-1],h=n.slice(0,n.length-1).reverse().map(m=>function(i){const n=i.routeConfig?i.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:i,guards:n}:null}(m)).filter(m=>null!==m).map(m=>Rb(()=>{const C=m.guards.map(D=>{const x=vy(D,m.node,r);let R;if(function(i){return i&&Va(i.canActivateChild)}(x))R=Fi(x.canActivateChild(a,i));else{if(!Va(x))throw new Error("Invalid CanActivateChild guard");R=Fi(x(a,i))}return R.pipe(ka())});return(0,Ye.of)(C).pipe(my())}));return(0,Ye.of)(h).pipe(my())}(i,l.path,r),function(i,n,r){const a=n.routeConfig?n.routeConfig.canActivate:null;if(!a||0===a.length)return(0,Ye.of)(!0);const l=a.map(h=>Rb(()=>{const m=vy(h,n,r);let C;if(function(i){return i&&Va(i.canActivate)}(m))C=Fi(m.canActivate(n,i));else{if(!Va(m))throw new Error("Invalid CanActivate guard");C=Fi(m(n,i))}return C.pipe(ka())}));return(0,Ye.of)(l).pipe(my())}(i,l.route,r))),ka(l=>!0!==l,!0))}(a,h,i,n):(0,Ye.of)(C)),(0,Xe.U)(C=>Object.assign(Object.assign({},r),{guardsResult:C})))})}(this.ngModule.injector,C=>this.triggerEvent(C)),(0,Xr.b)(C=>{if(Tl(C.guardsResult)){const x=R0(`Redirecting to "${this.serializeUrl(C.guardsResult)}"`);throw x.url=C.guardsResult,x}const D=new CN(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(C.urlAfterRedirects),C.targetSnapshot,!!C.guardsResult);this.triggerEvent(D)}),qt(C=>!!C.guardsResult||(this.restoreHistory(C),this.cancelNavigationTransition(C,""),!1)),X0(C=>{if(C.guards.canActivateChecks.length)return(0,Ye.of)(C).pipe((0,Xr.b)(D=>{const x=new IN(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(x)}),Nn(D=>{let x=!1;return(0,Ye.of)(D).pipe(function(i,n){return(0,Dr.zg)(r=>{const{targetSnapshot:a,guards:{canActivateChecks:l}}=r;if(!l.length)return(0,Ye.of)(r);let h=0;return(0,tn.D)(l).pipe(np(m=>function(i,n,r,a){return function(i,n,r,a){const l=Object.keys(i);if(0===l.length)return(0,Ye.of)({});const h={};return(0,tn.D)(l).pipe((0,Dr.zg)(m=>function(i,n,r,a){const l=vy(i,n,a);return Fi(l.resolve?l.resolve(n,r):l(n,r))}(i[m],n,r,a).pipe((0,Xr.b)(C=>{h[m]=C}))),S0(1),(0,Dr.zg)(()=>Object.keys(h).length===l.length?(0,Ye.of)(h):$o.E))}(i._resolve,i,n,a).pipe((0,Xe.U)(h=>(i._resolvedData=h,i.data=Object.assign(Object.assign({},i.data),sD(i,r).resolve),null)))}(m.route,a,i,n)),(0,Xr.b)(()=>h++),S0(1),(0,Dr.zg)(m=>h===l.length?(0,Ye.of)(r):$o.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Xr.b)({next:()=>x=!0,complete:()=>{x||(this.restoreHistory(D),this.cancelNavigationTransition(D,"At least one route resolver didn't emit any value."))}}))}),(0,Xr.b)(D=>{const x=new N0(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(x)}))}),X0(C=>{const{targetSnapshot:D,id:x,extractedUrl:R,rawUrl:O,extras:{skipLocationChange:$,replaceUrl:q}}=C;return this.hooks.afterPreactivation(D,{navigationId:x,appliedUrlTree:R,rawUrlTree:O,skipLocationChange:!!$,replaceUrl:!!q})}),(0,Xe.U)(C=>{const D=function(i,n,r){const a=ap(i,n._root,r?r._root:void 0);return new L0(a,n)}(this.routeReuseStrategy,C.targetSnapshot,C.currentRouterState);return Object.assign(Object.assign({},C),{targetRouterState:D})}),(0,Xr.b)(C=>{this.currentUrlTree=C.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(C.urlAfterRedirects,C.rawUrl),this.routerState=C.targetRouterState,"deferred"===this.urlUpdateStrategy&&(C.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,C),this.browserUrlTree=C.urlAfterRedirects)}),((i,n,r)=>(0,Xe.U)(a=>(new NN(n,a.targetRouterState,a.currentRouterState,r).activate(i),a)))(this.rootContexts,this.routeReuseStrategy,C=>this.triggerEvent(C)),(0,Xr.b)({next(){h=!0},complete(){h=!0}}),function(i){return n=>n.lift(new ny(i))}(()=>{if(!h&&!m){const C=`Navigation ID ${l.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(l),this.cancelNavigationTransition(l,C)):this.cancelNavigationTransition(l,C)}this.currentNavigation=null}),Dl(C=>{if(m=!0,function(i){return i&&i[wd]}(C)){const D=Tl(C.url);D||(this.navigated=!0,this.restoreHistory(l,!0));const x=new Lb(l.id,this.serializeUrl(l.extractedUrl),C.message);a.next(x),D?setTimeout(()=>{const R=this.urlHandlingStrategy.merge(C.url,this.rawUrlTree),O={skipLocationChange:l.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ja(l.source)};this.scheduleNavigation(R,"imperative",null,O,{resolve:l.resolve,reject:l.reject,promise:l.promise})},0):l.resolve(!1)}else{this.restoreHistory(l,!0);const D=new wN(l.id,this.serializeUrl(l.extractedUrl),C);a.next(D);try{l.resolve(this.errorHandler(C))}catch(x){l.reject(x)}}return $o.E}))}))}resetRootComponentType(r){this.rootComponentType=r,this.routerState.root.component=this.rootComponentType}getTransition(){const r=this.transitions.value;return r.urlAfterRedirects=this.browserUrlTree,r}setTransition(r){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),r))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(r=>{const a=this.extractLocationChangeInfoFromEvent(r);this.shouldScheduleNavigation(this.lastLocationChangeInfo,a)&&setTimeout(()=>{const{source:l,state:h,urlTree:m}=a,C={replaceUrl:!0};if(h){const D=Object.assign({},h);delete D.navigationId,delete D.\u0275routerPageId,0!==Object.keys(D).length&&(C.state=D)}this.scheduleNavigation(m,l,h,C)},0),this.lastLocationChangeInfo=a}))}extractLocationChangeInfoFromEvent(r){var a;return{source:"popstate"===r.type?"popstate":"hashchange",urlTree:this.parseUrl(r.url),state:(null===(a=r.state)||void 0===a?void 0:a.navigationId)?r.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(r,a){if(!r)return!0;const l=a.urlTree.toString()===r.urlTree.toString();return a.transitionId!==r.transitionId||!l||!("hashchange"===a.source&&"popstate"===r.source||"popstate"===a.source&&"hashchange"===r.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(r){this.events.next(r)}resetConfig(r){fD(r),this.config=r.map(G0),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(r,a={}){const{relativeTo:l,queryParams:h,fragment:m,queryParamsHandling:C,preserveFragment:D}=a,x=l||this.routerState.root,R=D?this.currentUrlTree.fragment:m;let O=null;switch(C){case"merge":O=Object.assign(Object.assign({},this.currentUrlTree.queryParams),h);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=h||null}return null!==O&&(O=this.removeEmptyProps(O)),function(i,n,r,a,l){if(0===r.length)return hy(n.root,n.root,n,a,l);const h=function(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new py(!0,0,i);let n=0,r=!1;const a=i.reduce((l,h,m)=>{if("object"==typeof h&&null!=h){if(h.outlets){const C={};return hr(h.outlets,(D,x)=>{C[x]="string"==typeof D?D.split("/"):D}),[...l,{outlets:C}]}if(h.segmentPath)return[...l,h.segmentPath]}return"string"!=typeof h?[...l,h]:0===m?(h.split("/").forEach((C,D)=>{0==D&&"."===C||(0==D&&""===C?r=!0:".."===C?n++:""!=C&&l.push(C))}),l):[...l,h]},[]);return new py(r,n,a)}(r);if(h.toRoot())return hy(n.root,new vt([],{}),n,a,l);const m=function(i,n,r){if(i.isAbsolute)return new Dd(n.root,!0,0);if(-1===r.snapshot._lastPathIndex){const h=r.snapshot._urlSegment;return new Dd(h,h===n.root,0)}const a=up(i.commands[0])?0:1;return function(i,n,r){let a=i,l=n,h=r;for(;h>l;){if(h-=l,a=a.parent,!a)throw new Error("Invalid number of '../'");l=a.segments.length}return new Dd(a,!1,l-h)}(r.snapshot._urlSegment,r.snapshot._lastPathIndex+a,i.numberOfDoubleDots)}(h,n,i),C=m.processChildren?j0(m.segmentGroup,m.index,h.commands):qn(m.segmentGroup,m.index,h.commands);return hy(m.segmentGroup,C,n,a,l)}(x,this.currentUrlTree,r,O,null!=R?R:null)}navigateByUrl(r,a={skipLocationChange:!1}){const l=Tl(r)?r:this.parseUrl(r),h=this.urlHandlingStrategy.merge(l,this.rawUrlTree);return this.scheduleNavigation(h,"imperative",null,a)}navigate(r,a={skipLocationChange:!1}){return function(i){for(let n=0;n<i.length;n++){const r=i[n];if(null==r)throw new Error(`The requested path contains ${r} segment at index ${n}`)}}(r),this.navigateByUrl(this.createUrlTree(r,a),a)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){let a;try{a=this.urlSerializer.parse(r)}catch(l){a=this.malformedUriErrorHandler(l,this.urlSerializer,r)}return a}isActive(r,a){let l;if(l=!0===a?Object.assign({},Tx):!1===a?Object.assign({},Ax):a,Tl(r))return O0(this.currentUrlTree,r,l);const h=this.parseUrl(r);return O0(this.currentUrlTree,h,l)}removeEmptyProps(r){return Object.keys(r).reduce((a,l)=>{const h=r[l];return null!=h&&(a[l]=h),a},{})}processNavigations(){this.navigations.subscribe(r=>{this.navigated=!0,this.lastSuccessfulId=r.id,this.currentPageId=r.targetPageId,this.events.next(new ry(r.id,this.serializeUrl(r.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,r.resolve(!0)},r=>{this.console.warn(`Unhandled Navigation Error: ${r}`)})}scheduleNavigation(r,a,l,h,m){var C,D;if(this.disposed)return Promise.resolve(!1);const x=this.getTransition(),R=ja(a)&&x&&!ja(x.source),q=(this.lastSuccessfulId===x.id||this.currentNavigation?x.rawUrl:x.urlAfterRedirects).toString()===r.toString();if(R&&q)return Promise.resolve(!0);let he,De,Le;m?(he=m.resolve,De=m.reject,Le=m.promise):Le=new Promise((ut,Mt)=>{he=ut,De=Mt});const ct=++this.navigationId;let gt;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(l=this.location.getState()),gt=l&&l.\u0275routerPageId?l.\u0275routerPageId:h.replaceUrl||h.skipLocationChange?null!==(C=this.browserPageId)&&void 0!==C?C:0:(null!==(D=this.browserPageId)&&void 0!==D?D:0)+1):gt=0,this.setTransition({id:ct,targetPageId:gt,source:a,restoredState:l,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:r,extras:h,resolve:he,reject:De,promise:Le,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Le.catch(ut=>Promise.reject(ut))}setBrowserUrl(r,a){const l=this.urlSerializer.serialize(r),h=Object.assign(Object.assign({},a.extras.state),this.generateNgRouterState(a.id,a.targetPageId));this.location.isCurrentPathEqualTo(l)||a.extras.replaceUrl?this.location.replaceState(l,"",h):this.location.go(l,"",h)}restoreHistory(r,a=!1){var l,h;if("computed"===this.canceledNavigationResolution){const m=this.currentPageId-r.targetPageId;"popstate"!==r.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)||0===m?this.currentUrlTree===(null===(h=this.currentNavigation)||void 0===h?void 0:h.finalUrl)&&0===m&&(this.resetState(r),this.browserUrlTree=r.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(m)}else"replace"===this.canceledNavigationResolution&&(a&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=r.currentRouterState,this.currentUrlTree=r.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(r,a){const l=new Lb(r.id,this.serializeUrl(r.extractedUrl),a);this.triggerEvent(l),r.resolve(!1)}generateNgRouterState(r,a){return"computed"===this.canceledNavigationResolution?{navigationId:r,\u0275routerPageId:a}:{navigationId:r}}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(v.DyG),v.LFG(zb),v.LFG(Ad),v.LFG(Me),v.LFG(v.zs3),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function ja(i){return"imperative"!==i}let qo=(()=>{class i{constructor(r,a,l,h,m){this.router=r,this.route=a,this.commands=[],this.onChanges=new _i.xQ,null==l&&h.setAttribute(m.nativeElement,"tabindex","0")}ngOnChanges(r){this.onChanges.next(this)}set routerLink(r){this.commands=null!=r?Array.isArray(r)?r:[r]:[]}onClick(){const r={skipLocationChange:ds(this.skipLocationChange),replaceUrl:ds(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,r),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ds(this.preserveFragment)})}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(ni),v.Y36(bd),v.$8M("tabindex"),v.Y36(v.Qsj),v.Y36(v.SBq))},i.\u0275dir=v.lG2({type:i,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(r,a){1&r&&v.NdJ("click",function(){return a.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[v.TTD]}),i})();function ds(i){return""===i||!!i}let nw=(()=>{class i{constructor(r,a,l,h,m){this.parentContexts=r,this.location=a,this.resolver=l,this.changeDetector=m,this.activated=null,this._activatedRoute=null,this.activateEvents=new v.vpe,this.deactivateEvents=new v.vpe,this.name=h||pt,r.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const r=this.parentContexts.getContext(this.name);r&&r.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const r=this.activated;return this.activated=null,this._activatedRoute=null,r}attach(r,a){this.activated=r,this._activatedRoute=a,this.location.insert(r.hostView)}deactivate(){if(this.activated){const r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,a){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=r;const m=(a=a||this.resolver).resolveComponentFactory(r._futureSnapshot.routeConfig.component),C=this.parentContexts.getOrCreateContext(this.name).children,D=new TD(r,C,this.location.injector);this.activated=this.location.createComponent(m,this.location.length,D),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(Ad),v.Y36(v.s_b),v.Y36(v._Vd),v.$8M("name"),v.Y36(v.sBO))},i.\u0275dir=v.lG2({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),i})();class TD{constructor(n,r,a){this.route=n,this.childContexts=r,this.parent=a}get(n,r){return n===bd?this.route:n===Ad?this.childContexts:this.parent.get(n,r)}}class rw{}class iw{preload(n,r){return(0,Ye.of)(null)}}let by=(()=>{class i{constructor(r,a,l,h,m){this.router=r,this.injector=h,this.preloadingStrategy=m,this.loader=new Iy(a,l,x=>r.triggerEvent(new Vb(x)),x=>r.triggerEvent(new SS(x)))}setUpPreloading(){this.subscription=this.router.events.pipe(qt(r=>r instanceof ry),np(()=>this.preload())).subscribe(()=>{})}preload(){const r=this.injector.get(v.h0i);return this.processRoutes(r,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,a){const l=[];for(const h of a)if(h.loadChildren&&!h.canLoad&&h._loadedConfig){const m=h._loadedConfig;l.push(this.processRoutes(m.module,m.routes))}else h.loadChildren&&!h.canLoad?l.push(this.preloadConfig(r,h)):h.children&&l.push(this.processRoutes(r,h.children));return(0,tn.D)(l).pipe((0,Pn.J)(),(0,Xe.U)(h=>{}))}preloadConfig(r,a){return this.preloadingStrategy.preload(a,()=>(a._loadedConfig?(0,Ye.of)(a._loadedConfig):this.loader.load(r.injector,a)).pipe((0,Dr.zg)(h=>(a._loadedConfig=h,this.processRoutes(h.module,h.routes)))))}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(ni),v.LFG(v.v3s),v.LFG(v.Sil),v.LFG(v.zs3),v.LFG(rw))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})(),sw=(()=>{class i{constructor(r,a,l={}){this.router=r,this.viewportScroller=a,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(r=>{r instanceof Fb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ry&&(this.lastId=r.id,this.scheduleScrollEvent(r,this.router.parseUrl(r.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(r=>{r instanceof Bb&&(r.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(r.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,a){this.router.triggerEvent(new Bb(r,"popstate"===this.lastSource?this.store[this.restoredId]:null,a))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(ni),v.LFG(Qa),v.LFG(void 0))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();const $a=new v.OlP("ROUTER_CONFIGURATION"),Ha=new v.OlP("ROUTER_FORROOT_GUARD"),Nx=[Me,{provide:zb,useClass:Zb},{provide:ni,useFactory:function(i,n,r,a,l,h,m,C={},D,x){const R=new ni(null,i,n,r,a,l,h,jb(m));return D&&(R.urlHandlingStrategy=D),x&&(R.routeReuseStrategy=x),function(i,n){i.errorHandler&&(n.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(n.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(n.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(n.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(n.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(n.urlUpdateStrategy=i.urlUpdateStrategy)}(C,R),C.enableTracing&&R.events.subscribe(O=>{var $,q;null===($=console.group)||void 0===$||$.call(console,`Router Event: ${O.constructor.name}`),console.log(O.toString()),console.log(O),null===(q=console.groupEnd)||void 0===q||q.call(console)}),R},deps:[zb,Ad,Me,v.zs3,v.v3s,v.Sil,Sl,$a,[class{},new v.FiY],[class{},new v.FiY]]},Ad,{provide:bd,useFactory:function(i){return i.routerState.root},deps:[ni]},{provide:v.v3s,useClass:v.EAV},by,iw,class{preload(n,r){return r().pipe(Dl(()=>(0,Ye.of)(null)))}},{provide:$a,useValue:{enableTracing:!1}}];function Rx(){return new v.PXZ("Router",ni)}let Mx=(()=>{class i{constructor(r,a){}static forRoot(r,a){return{ngModule:i,providers:[Nx,SD(r),{provide:Ha,useFactory:VN,deps:[[ni,new v.FiY,new v.tp0]]},{provide:$a,useValue:a||{}},{provide:K,useFactory:LN,deps:[ae,[new v.tBr(Ie),new v.FiY],$a]},{provide:sw,useFactory:FN,deps:[ni,Qa,$a]},{provide:rw,useExisting:a&&a.preloadingStrategy?a.preloadingStrategy:iw},{provide:v.PXZ,multi:!0,useFactory:Rx},[xD,{provide:v.ip1,multi:!0,useFactory:jN,deps:[xD]},{provide:kx,useFactory:Px,deps:[xD]},{provide:v.tb,multi:!0,useExisting:kx}]]}}static forChild(r){return{ngModule:i,providers:[SD(r)]}}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(Ha,8),v.LFG(ni,8))},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({}),i})();function FN(i,n,r){return r.scrollOffset&&n.setOffset(r.scrollOffset),new sw(i,n,r)}function LN(i,n,r={}){return r.useHash?new Re(i,n):new we(i,n)}function VN(i){return"guarded"}function SD(i){return[{provide:v.deG,multi:!0,useValue:i},{provide:Sl,multi:!0,useValue:i}]}let xD=(()=>{class i{constructor(r){this.injector=r,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _i.xQ}appInitializer(){return this.injector.get(P,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let a=null;const l=new Promise(C=>a=C),h=this.injector.get(ni),m=this.injector.get($a);return"disabled"===m.initialNavigation?(h.setUpLocationChangeListener(),a(!0)):"enabled"===m.initialNavigation||"enabledBlocking"===m.initialNavigation?(h.hooks.afterPreactivation=()=>this.initNavigation?(0,Ye.of)(null):(this.initNavigation=!0,a(!0),this.resultOfPreactivationDone),h.initialNavigation()):a(!0),l})}bootstrapListener(r){const a=this.injector.get($a),l=this.injector.get(by),h=this.injector.get(sw),m=this.injector.get(ni),C=this.injector.get(v.z2F);r===C.components[0]&&(("enabledNonBlocking"===a.initialNavigation||void 0===a.initialNavigation)&&m.initialNavigation(),l.setUpPreloading(),h.init(),m.resetRootComponentType(C.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(v.zs3))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac}),i})();function jN(i){return i.appInitializer.bind(i)}function Px(i){return i.bootstrapListener.bind(i)}const kx=new v.OlP("Router Initializer");let Fx=(()=>{class i{constructor(r){this.afs=r,this.notepadsCollection=r.collection("notes")}getNotepads(){return this.notepads=this.notepadsCollection.snapshotChanges().pipe((0,Xe.U)(r=>r.map(a=>{const l=a.payload.doc.data();return l.id=a.payload.doc.id,l}))),this.notepads}addNote(r){this.notepadsCollection.add(r)}updateNote(r){console.log(r,"services"),this.notepadsDoc=this.afs.doc(`notes/${r.id}`),this.notepadsDoc.update(r)}deleteNote(r){this.notepadsDoc=this.afs.doc(`notes/${r.id}`),this.notepadsDoc.delete()}}return i.\u0275fac=function(r){return new(r||i)(v.LFG(Nb))},i.\u0275prov=v.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function s(i,n){if(1&i){const r=v.EpF();v.TgZ(0,"input",6),v.NdJ("ngModelChange",function(l){return v.CHM(r),v.oxw().noteTitle=l}),v.qZA()}if(2&i){const r=v.oxw();v.Q6J("ngModel",r.noteTitle)}}let o=(()=>{class i{constructor(r){this.notepadService=r,this.title=!1}ngOnInit(){}onSubmit(){if(this.title&&this.noteTitle){let r={title:this.noteTitle,description:this.noteDescription};this.noteTitle="",this.noteDescription="",this.title=!1,this.notepadService.addNote(r)}else alert("Task is empty")}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(Fx))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-add-note"]],decls:6,vars:2,consts:[[1,"position-relative","my-5",3,"ngSubmit"],[1,"form-control","d-flex","flex-column"],["class","text-secondary","type","text","name","noteTitle","placeholder","Title",3,"ngModel","ngModelChange",4,"ngIf"],["type","text","name","noteDescription","placeholder","Take a note...",1,"text-secondary","mb-5",3,"ngModel","ngModelChange","click"],[1,"btn","btn-primary"],[1,"fa","fa-plus"],["type","text","name","noteTitle","placeholder","Title",1,"text-secondary",3,"ngModel","ngModelChange"]],template:function(r,a){1&r&&(v.TgZ(0,"form",0),v.NdJ("ngSubmit",function(){return a.onSubmit()}),v.TgZ(1,"div",1),v.YNc(2,s,1,1,"input",2),v.TgZ(3,"input",3),v.NdJ("ngModelChange",function(h){return a.noteDescription=h})("click",function(){return a.title=!0}),v.qZA(),v.qZA(),v.TgZ(4,"button",4),v._UZ(5,"i",5),v.qZA(),v.qZA()),2&r&&(v.xp6(2),v.Q6J("ngIf",a.title),v.xp6(1),v.Q6J("ngModel",a.noteDescription))},directives:[vh,_r,_o,ms,Ts,yr,_h],styles:["form[_ngcontent-%COMP%]{max-width:500px;margin:0 auto;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;transition:all .5s ease-out}button[_ngcontent-%COMP%]{border-radius:50%;position:absolute;right:10px;bottom:-1rem;font-size:.8rem}.form-control[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none!important;font-weight:600;outline:none}"]}),i})();function u(i,n){if(1&i){const r=v.EpF();v.TgZ(0,"div",12),v.NdJ("click",function(){const h=v.CHM(r).$implicit;return v.oxw().onSelect(h)}),v.TgZ(1,"div",13),v.TgZ(2,"h5"),v._uU(3),v.qZA(),v.TgZ(4,"p"),v._uU(5),v.qZA(),v.TgZ(6,"button",14),v._UZ(7,"i",15),v.qZA(),v.qZA(),v.qZA()}if(2&i){const r=n.$implicit;v.xp6(3),v.Oqu(r.title),v.xp6(2),v.Oqu(r.description)}}function c(i,n){1&i&&v._UZ(0,"div",16)}let d=(()=>{class i{constructor(r){this.notepadService=r,this.notepads=[],this.modal=!1,this.selectedNote={id:"",title:"",description:""}}ngOnInit(){this.notepadService.getNotepads().subscribe(r=>{this.notepads=r})}onSelect(r){this.modal=!this.modal,this.selectedNote=r,console.log(this.selectedNote.id)}onSubmit(r){const a=r.value;a.id=this.selectedNote.id,this.notepadService.updateNote(a),this.modal=!1}removeNote(){confirm("Are you sure?")&&(this.notepadService.deleteNote(this.selectedNote),this.modal=!1),this.modal=!1}}return i.\u0275fac=function(r){return new(r||i)(v.Y36(Fx))},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-notepad"]],decls:14,vars:6,consts:[[1,"note","my-5","row","gap-2"],["class","col-lg-2 col-md-3 col-sm-4 col-xl-6 notepads",3,"click",4,"ngFor","ngForOf"],["class","blur",4,"ngIf"],[1,"modals",3,"ngSubmit"],["regForm","ngForm"],[1,"notepad","form-control","bg-white","rounded","p-3","d-flex","flex-column"],["type","text","name","title","ngModel","",1,"text-secondary",3,"ngModel","ngModelChange"],["type","text","name","description","ngModel","",1,"text-secondary",3,"ngModel","ngModelChange"],[1,"d-flex","justify-content-between","mt-4"],["type","button",1,"btn","btn-light",3,"click"],[1,"fa","fa-minus"],["type","submit",1,"btn","btn-light"],[1,"col-lg-2","col-md-3","col-sm-4","col-xl-6","notepads",3,"click"],[1,"pop","bg-white","rounded","p-3","position-relative"],["type","submit",1,"btn","btn-white","buttonPlus"],[1,"fa","fa-pencil"],[1,"blur"]],template:function(r,a){if(1&r){const l=v.EpF();v.TgZ(0,"section",0),v.YNc(1,u,8,2,"div",1),v.qZA(),v.YNc(2,c,1,0,"div",2),v.TgZ(3,"form",3,4),v.NdJ("ngSubmit",function(){v.CHM(l);const m=v.MAs(4);return a.onSubmit(m)}),v.TgZ(5,"div",5),v.TgZ(6,"input",6),v.NdJ("ngModelChange",function(m){return a.selectedNote.title=m}),v.qZA(),v._UZ(7,"hr"),v.TgZ(8,"input",7),v.NdJ("ngModelChange",function(m){return a.selectedNote.description=m}),v.qZA(),v.TgZ(9,"div",8),v.TgZ(10,"button",9),v.NdJ("click",function(){return a.removeNote()}),v._UZ(11,"i",10),v.qZA(),v.TgZ(12,"button",11),v._uU(13,"Done"),v.qZA(),v.qZA(),v.qZA(),v.qZA()}2&r&&(v.xp6(1),v.Q6J("ngForOf",a.notepads),v.xp6(1),v.Q6J("ngIf",a.modal),v.xp6(1),v.ekj("enableModal",a.modal),v.xp6(3),v.Q6J("ngModel",a.selectedNote.title),v.xp6(2),v.Q6J("ngModel",a.selectedNote.description))},directives:[Ui,ms,vh,_r,_o,Ts,yr,_h],styles:[".note[_ngcontent-%COMP%]{max-width:90%;margin:0 auto}.notepads[_ngcontent-%COMP%]{max-width:300px;cursor:pointer;margin:0 auto;transition:all .4s ease-in}.notepads[_ngcontent-%COMP%]:hover, .notepads[_ngcontent-%COMP%]:focus{transform:scale(1.2)}.buttonPlus[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#6d326d}.modals[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translateY(-100000px);width:500px;transition:all .5s ease-in}.blur[_ngcontent-%COMP%]{position:absolute;background-color:#00000080;top:0;left:0;bottom:0;right:0;width:100%;height:100%}.enableModal[_ngcontent-%COMP%]{transform:translate(-50%,-50%)}.form-control[_ngcontent-%COMP%], .form-control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none!important;outline:none}"]}),i})();const E=[{path:"",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-desktop"]],decls:11,vars:0,consts:[[1,"header"],[1,"container","my-5"],[1,"d-flex","justify-content-center","align-items-center","gap-3"],["src","assets/images/angular.png","alt","angular",1,"angular"],[1,"text-white"],["src","assets/images/firebase.png","alt","firebase"],[1,"add-note"],[1,"container-fluid"]],template:function(r,a){1&r&&(v.TgZ(0,"header",0),v.TgZ(1,"div",1),v.TgZ(2,"div",2),v._UZ(3,"img",3),v.TgZ(4,"h4",4),v._uU(5,"+"),v.qZA(),v._UZ(6,"img",5),v.qZA(),v.TgZ(7,"div",6),v._UZ(8,"app-add-note"),v.qZA(),v.qZA(),v.TgZ(9,"div",7),v._UZ(10,"app-notepad"),v.qZA(),v.qZA())},directives:[o,d],styles:[".header[_ngcontent-%COMP%]{background-color:#6d326d;height:100vw;width:100%;box-sizing:border-box;margin:0!important;padding:0!important;overflow-x:hidden}img[_ngcontent-%COMP%]{width:50px;height:auto}.angular[_ngcontent-%COMP%]{width:40px!important}"]}),i})()},{path:"**",component:(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-not-found"]],decls:4,vars:0,consts:[["routerLink","/"]],template:function(r,a){1&r&&(v.TgZ(0,"h4"),v._uU(1,"NOT FOUND"),v.qZA(),v.TgZ(2,"button",0),v._uU(3,"GO BACK"),v.qZA())},directives:[qo],styles:[""]}),i})()}];let b=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i}),i.\u0275inj=v.cJS({imports:[[Mx.forRoot(E)],Mx]}),i})();const T_firebaseConfig={apiKey:"AIzaSyDtMae8CMxdp8tuJPS3IJSd-g8pgL40EjE",authDomain:"notepad-a394f.firebaseapp.com",projectId:"notepad-a394f",storageBucket:"notepad-a394f.appspot.com",messagingSenderId:"533942300790",appId:"1:533942300790:web:cc47a82b11c034e7d1af57"};let A=(()=>{class i{constructor(){this.title="notepad"}}return i.\u0275fac=function(r){return new(r||i)},i.\u0275cmp=v.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(r,a){1&r&&v._UZ(0,"router-outlet")},directives:[nw],styles:[""]}),i})(),N=(()=>{class i{}return i.\u0275fac=function(r){return new(r||i)},i.\u0275mod=v.oAB({type:i,bootstrap:[A]}),i.\u0275inj=v.cJS({providers:[],imports:[[du,b,Kp,It.hO.initializeApp(T_firebaseConfig),CS]]}),i})();(0,v.G48)(),ky().bootstrapModule(N).catch(i=>console.error(i))},4762:(je,ge,F)=>{"use strict";function de(X,te){var ie={};for(var ne in X)Object.prototype.hasOwnProperty.call(X,ne)&&te.indexOf(ne)<0&&(ie[ne]=X[ne]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var re=0;for(ne=Object.getOwnPropertySymbols(X);re<ne.length;re++)te.indexOf(ne[re])<0&&Object.prototype.propertyIsEnumerable.call(X,ne[re])&&(ie[ne[re]]=X[ne[re]])}return ie}function ae(X,te,ie,ne){return new(ie||(ie=Promise))(function(Z,Ce){function $e(st){try{We(ne.next(st))}catch(Bt){Ce(Bt)}}function lt(st){try{We(ne.throw(st))}catch(Bt){Ce(Bt)}}function We(st){st.done?Z(st.value):function(Z){return Z instanceof ie?Z:new ie(function(Ce){Ce(Z)})}(st.value).then($e,lt)}We((ne=ne.apply(X,te||[])).next())})}function H(X,te){var ne,re,Z,Ce,ie={label:0,sent:function(){if(1&Z[0])throw Z[1];return Z[1]},trys:[],ops:[]};return Ce={next:$e(0),throw:$e(1),return:$e(2)},"function"==typeof Symbol&&(Ce[Symbol.iterator]=function(){return this}),Ce;function $e(We){return function(st){return function(We){if(ne)throw new TypeError("Generator is already executing.");for(;ie;)try{if(ne=1,re&&(Z=2&We[0]?re.return:We[0]?re.throw||((Z=re.return)&&Z.call(re),0):re.next)&&!(Z=Z.call(re,We[1])).done)return Z;switch(re=0,Z&&(We=[2&We[0],Z.value]),We[0]){case 0:case 1:Z=We;break;case 4:return ie.label++,{value:We[1],done:!1};case 5:ie.label++,re=We[1],We=[0];continue;case 7:We=ie.ops.pop(),ie.trys.pop();continue;default:if(!(Z=(Z=ie.trys).length>0&&Z[Z.length-1])&&(6===We[0]||2===We[0])){ie=0;continue}if(3===We[0]&&(!Z||We[1]>Z[0]&&We[1]<Z[3])){ie.label=We[1];break}if(6===We[0]&&ie.label<Z[1]){ie.label=Z[1],Z=We;break}if(Z&&ie.label<Z[2]){ie.label=Z[2],ie.ops.push(We);break}Z[2]&&ie.ops.pop(),ie.trys.pop();continue}We=te.call(X,ie)}catch(st){We=[6,st],re=0}finally{ne=Z=0}if(5&We[0])throw We[1];return{value:We[0]?We[1]:void 0,done:!0}}([We,st])}}}function W(X){var te="function"==typeof Symbol&&Symbol.iterator,ie=te&&X[te],ne=0;if(ie)return ie.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ne>=X.length&&(X=void 0),{value:X&&X[ne++],done:!X}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}function G(X,te){var ie="function"==typeof Symbol&&X[Symbol.iterator];if(!ie)return X;var re,Ce,ne=ie.call(X),Z=[];try{for(;(void 0===te||te-- >0)&&!(re=ne.next()).done;)Z.push(re.value)}catch($e){Ce={error:$e}}finally{try{re&&!re.done&&(ie=ne.return)&&ie.call(ne)}finally{if(Ce)throw Ce.error}}return Z}function Q(X,te,ie){if(ie||2===arguments.length)for(var Z,ne=0,re=te.length;ne<re;ne++)(Z||!(ne in te))&&(Z||(Z=Array.prototype.slice.call(te,0,ne)),Z[ne]=te[ne]);return X.concat(Z||Array.prototype.slice.call(te))}F.d(ge,{_T:()=>de,mG:()=>ae,Jh:()=>H,XA:()=>W,CR:()=>G,ev:()=>Q})},8239:(je,ge,F)=>{"use strict";function v(L,de,ce,ee,fe,ae,H){try{var P=L[ae](H),k=P.value}catch(W){return void ce(W)}P.done?de(k):Promise.resolve(k).then(ee,fe)}function Y(L){return function(){var de=this,ce=arguments;return new Promise(function(ee,fe){var ae=L.apply(de,ce);function H(k){v(ae,ee,fe,H,P,"next",k)}function P(k){v(ae,ee,fe,H,P,"throw",k)}H(void 0)})}}F.d(ge,{Z:()=>Y})}},je=>{je(je.s=1557)}]);